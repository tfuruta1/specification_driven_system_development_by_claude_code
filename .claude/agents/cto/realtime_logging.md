# リアルタイム作業ログ記録ガイドライン

## 概要
作業ログは作業の進行に合わせてリアルタイムに記録し、ユーザーが途中で別の指示を与えた場合でも、その時点までの作業内容が確実に保存されるようにする。

## ログ記録のタイミング

### 即座に記録すべきタイミング
1. **タスク開始時**
   - タスクIDの採番
   - 開始時刻の記録
   - 担当者の割り当て

2. **各作業ステップ完了時**
   - ファイル作成・修正完了
   - テスト実行完了
   - エラー発生時
   - 問題発見時

3. **発見事項がある時**
   - 重複コードの発見
   - 未使用変数の発見
   - パフォーマンス問題の発見
   - セキュリティリスクの発見

4. **ユーザー対応時**
   - ユーザーからの指示受領
   - エラー報告への対応
   - 質問への回答

## ログ記録の実装方法

### 1. 作業開始時の即座記録
```markdown
### HH:MM:SS JST - [担当者]
**[作業内容]**: [詳細]
```

### 2. 段階的な追記
各ステップ完了ごとに、その都度ログファイルに追記する：
- ファイル分析完了 → 記録
- 実装完了 → 記録
- テスト完了 → 記録

### 3. 発見事項の即座記録
```markdown
- 📝 **発見した課題**: 
  - [課題内容]
  - [影響範囲]
  - [推奨対応]
```

## 実装ルール

### CTOの責務
1. 各部門リーダーに作業指示を出すと同時にログ記録
2. 進捗報告を受けたら即座にログ更新
3. ユーザー割り込みがあってもその時点までの作業を保存

### 各リーダーの責務
1. 作業開始・完了を即座にCTOに報告
2. 発見事項を都度報告
3. エラーや問題を即座に報告

## ログファイルパス
```
.claude/.ActivityReport/daily_log/YYYY-MM-DD_workingLog.md
```

## 記録フォーマット

### 基本フォーマット
```markdown
### HH:MM:SS JST - [役職]
**[作業タイプ]**: [概要]
- [詳細1]
- [詳細2]
- 📝 **発見事項**: [内容]
```

### 作業タイプ
- タスク開始
- 分析実施
- 実装作業
- テスト実行
- エラー対応
- 完了報告
- ユーザー対応

## 割り込み処理

### ユーザーからの割り込み時
1. 現在の作業状態を即座に保存
2. 割り込みタスクの記録開始
3. 元のタスクに戻る際は継続記録

### 例
```markdown
### 14:30:00 JST - バックエンドリーダー
**実装作業**: PerformanceOptimizer実装中
- LRUキャッシュ実装完了
- デバウンス機能実装中...

### 14:35:00 JST - CTO
**ユーザー対応**: 緊急修正依頼受領
- 別タスクの対応開始

### 15:00:00 JST - バックエンドリーダー
**実装作業（継続）**: PerformanceOptimizer実装再開
- デバウンス機能実装完了
- バッチプロセッサ実装開始
```

## 自動化支援

### ログ記録関数の使用
```python
def log_work(role, task_type, description, findings=None):
    """
    作業ログをリアルタイムに記録
    
    Args:
        role: 担当者の役職
        task_type: 作業タイプ
        description: 作業内容
        findings: 発見事項（オプション）
    """
    timestamp = datetime.now().strftime("%H:%M:%S")
    log_entry = f"### {timestamp} JST - {role}\n"
    log_entry += f"**{task_type}**: {description}\n"
    if findings:
        log_entry += f"- 📝 **発見事項**: {findings}\n"
    
    # 即座にファイルに追記
    append_to_log(log_entry)
```

## 品質基準

### 必須項目
- ✅ 時刻（日本標準時）
- ✅ 担当者
- ✅ 作業内容
- ✅ 発見事項（ある場合）

### 推奨項目
- 📁 作成・修正ファイルパス
- 📊 パフォーマンス指標
- 🐛 エラー内容と対応
- 💡 改善提案

## 注意事項

1. **バッファリングしない**: 作業内容は即座にファイルに書き込む
2. **中断を想定**: いつ中断されても良いように段階的に記録
3. **詳細度のバランス**: 技術的詳細と可読性のバランスを保つ
4. **タイムスタンプ精度**: 分単位まで正確に記録

---
このガイドラインに従い、すべての作業をリアルタイムに記録することで、作業の透明性と追跡可能性を確保します。