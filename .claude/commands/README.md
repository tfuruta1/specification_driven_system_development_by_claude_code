# [構造] ペアプログラミングシステム - コマンド体系

## [目標] 概要
v12.0 CTOとアレックス（alex-sdd-tdd-engineer）のペアプログラミング体制によるシンプルなコマンド実行システム

## [重要] /auto-mode コマンドシステム

### コマンド一覧
- `/auto-mode start` - ペアプログラミングモード開始
- `/auto-mode stop` - ペアプログラミングモード終了  
- `/auto-mode status` - 現在の状態確認

### 使用方法
```bash
# ペアプログラミング開始
/auto-mode start

# システムが開発フローを選択肢として提示
1. 新規開発
2. 既存解析  
3. バグ修正
4. リファクタリング

# フロー選択後、CTO+Alexペアプログラミング開始
```

## [チーム] ペアプログラミング実行権限

### ユーザーとの対話フロー
```
ユーザー
  ↓ （日本語で自然な指示）
CTO
  ↓ （/auto-modeコマンドでペア開始）
CTO + Alex（alex-sdd-tdd-engineer）
```

### 実行権限を持つエージェント
- [対象] **CTO** - 全コマンド実行可能、プロジェクト統括
- [チーム] **Alex** - 技術実装コマンド実行、SDD+TDD実践

## [構造] 統合開発フローコマンド

### /auto-mode 詳細機能
| サブコマンド | 説明 | CTO | Alex |
|-------------|------|-----|------|
| `/auto-mode start` | ペアプログラミング開始 | 主導 | 協力 |
| `/auto-mode stop` | ペアプログラミング終了 | 主導 | 確認 |
| `/auto-mode status` | 進捗状況確認 | 統括 | 報告 |

### 開発フロー選択
1. **新規開発**: SDD+TDD 8ステップ完全実行
2. **既存解析**: 既存コード分析＋改善提案
3. **バグ修正**: 問題特定＋テスト追加＋修正
4. **リファクタリング**: コード品質向上＋テスト保持

## [廃止] 旧階層型コマンド

### 廃止されたコマンド
- `/spec` 系統（複雑性排除）
- `/requirements` 個別コマンド
- `/design` 個別コマンド
- `/tasks` 個別コマンド
- 部門別専用コマンド

### 統合された機能
すべて `/auto-mode` に統合：
- 要件定義 → /auto-mode start で新規開発選択
- 設計作成 → CTO+Alex協力で自動実行
- タスク管理 → SDD+TDDフロー内で自動管理
- 実装 → Alexが主導、CTOが監督

## [計画] SDD+TDD統合フロー

### 8ステップ実行フロー
```
/auto-mode start → フロー選択 → 以下を自動実行:

1. 要件定義（requirements.md） - CTO主導
2. 技術設計（design.md） - CTO+Alex協力
3. 実装計画（tasks.md） - CTO作成、Alex確認
4. 設計レビュー - CTO+Alex相互確認
5. テスト作成 - Alex主導（TDD Red）
6. 実装 - Alex主導、CTO監督（TDD Green）
7. リファクタリング - CTO+Alex協力（TDD Refactor）
8. 最終レビュー - CTO最終確認
```

### コマンド管理責任者
| フェーズ | 管理責任者 | 協力者 | 説明 |
|---------|-----------|--------|------|
| 全体統括 | CTO | Alex | プロジェクト全体の意思決定 |
| 要件定義 | CTO | Alex | ビジネス要求の技術的実現性確認 |
| 技術設計 | CTO+Alex | - | 協力して最適な設計を作成 |
| 実装 | Alex | CTO | Alexが主導、CTOが品質監督 |
| テスト | Alex | CTO | TDD実践、CTOがテスト戦略確認 |

## [OK] 実行フローの例

### 新規開発の場合
```
ユーザー: "新しいタスク管理機能を作りたい"
    ↓
CTO: "/auto-mode start を実行します"
    ↓
システム: "開発フロー選択: 1. 新規開発"
    ↓
CTO: "新規開発フローでSDD+TDDを開始します"
    ↓
Alex: "はい、CTO！まず要件を確認させてください"
    ↓
（8ステップを順次実行）
```

### 既存解析の場合
```
ユーザー: "このコードを改善したい"
    ↓
CTO: "/auto-mode start を実行します"
    ↓
システム: "開発フロー選択: 2. 既存解析"
    ↓
CTO: "Alexと一緒にコード分析を開始します"
    ↓
Alex: "承知しました！既存コードを解析します"
    ↓
（分析 → 問題特定 → 改善提案 → 実装）
```

## [データ] ActivityReport連携

### 自動ログ記録
すべての/auto-modeセッションは自動的に記録：
- セッション開始/終了時刻
- 選択した開発フロー
- CTO+Alexの作業内容
- 各ステップの進捗状況
- 完了した成果物

### ログファイル形式
```
.claude/ActivityReport/YYYY-MM-DD_HHMM_workingLog.md
例: 2025-08-22_1430_workingLog.md
```

## [注意] 注意事項

### ユーザーへの対応
- ユーザーは**直接コマンドを実行しません**
- ユーザーは**日本語で自然に**CTOに依頼します
- CTOが/auto-modeを実行し、Alexと協力して作業を進めます

### ペアプログラミングルール
1. CTOが全体を統括し、/auto-modeでAlexとのペアを開始
2. 技術実装はAlexが主導、CTOが品質と方向性を監督
3. すべての作業はSDD+TDDフローに従って実行
4. 実行結果はCTOがユーザーに統合報告

### コマンド実行時の表示
```
# ユーザーには見せる処理
CTO: "/auto-mode start でペアプログラミングを開始します"
Alex: "はい、CTO！要件から確認していきましょう"

# ユーザーに見せる結果
CTO: "タスク管理機能の実装が完了しました。以下が主な内容です..."
```

## [更新] 更新履歴
- v12.0: 統合テストフレームワーク、ファイルアクセス目的表示システム追加
- v11.0: /auto-modeコマンドシステム実装、階層型コマンド体系廃止
- v10.7: ルールベース自動処理フロー実装

---

*このドキュメントはCTO+Alexペアプログラミング体制のコマンド実行権限を定義しています。*
*Version: v12.0 - 2025-08-22*