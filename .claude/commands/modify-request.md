# /modify-request - 修正要求分析コマンド

## 概要
既存プロジェクトの修正要求を詳細に分析し、影響範囲の特定と潜在的な課題を洗い出します。
**重要**: このコマンドから修正フローが開始され、すぐにコーディングせず段階的に進めます。

## 使用方法

### 基本構文
```bash
/modify-request "修正内容の説明"
```

### 実行例
```bash
/modify-request "ユーザー認証機能にOAuth2.0を追加したい"
/modify-request "パフォーマンスを改善するためDBクエリを最適化したい"
/modify-request "UIをレスポンシブデザインに変更したい"
```

## 処理フロー

### 1. 修正内容の理解
- ユーザーの真の意図を把握
- 表面的な要求の背後にある本質的な問題を特定
- 期待される成果物の明確化
- 成功基準の定義

### 2. 影響範囲の特定
- 直接影響を受けるモジュール
- 間接的に影響を受ける箇所
- API変更の影響
- データモデルへの影響
- UI/UXへの影響

### 3. 潜在的な課題の洗い出し
- **技術的課題**
  - パフォーマンスへの影響
  - スケーラビリティの考慮
  - セキュリティリスク
  - 技術的負債の増加
- **ビジネス課題**
  - 後方互換性の破壊
  - ユーザー体験の劣化
  - 運用コストの増加
  - メンテナンス性の低下

### 4. リスク評価
- リスクレベルの判定（High/Medium/Low）
- 影響度と発生確率の評価
- リスク軽減策の提案

## 出力

### 分析レポート
```
.claude/modifications/analysis/<modification-id>/
├── request-analysis.md    # 要求分析結果
├── impact-matrix.md       # 影響分析マトリクス
├── risk-assessment.md     # リスク評価
└── recommendations.md     # 推奨事項
```

### 影響分析マトリクス例
| 対象 | 直接影響 | 間接影響 | リスクレベル |
|------|----------|----------|-------------|
| 認証モジュール | login(), logout() | session管理 | High |
| ユーザーAPI | /api/auth/* | /api/user/* | Medium |
| データベース | users表 | sessions表 | Low |
| フロントエンド | ログイン画面 | ヘッダー、メニュー | Medium |

## 承認プロセス

分析完了後、以下の確認を求めます：
1. 分析結果の確認
2. 影響範囲の承認
3. リスク受容の判断
4. 次フェーズ（要件定義）への移行承認

## 担当部門
- **主担当**: 🎯 CTO
- **副担当**: 💡 経営企画部
- **プロフェッショナル**: 📊 戦略データアナリスト（Gemini-CLI連携時）

## 次のステップ

分析が承認されたら：
```bash
/modify-requirements <modification-id>
```
で修正要件定義書の作成に進みます。

## 注意事項
- 十分な分析時間を確保（全体の15-20%）
- ユーザーとの対話を通じて要求を明確化
- 隠れた要求や制約を見逃さない
- 技術的な実現可能性を早期に判断

## アンチパターン
❌ **避けるべき**
- 表面的な理解で分析を終える
- 影響範囲を過小評価する
- リスクを無視して進める

✅ **推奨**
- 複数の視点から分析
- 最悪のケースを想定
- ステークホルダーとの確認

## 関連コマンド
- `/analyze` - プロジェクト解析
- `/modify-requirements` - 修正要件定義
- `/modify-design` - 修正技術設計
- `/tdd-start` - TDD開発開始