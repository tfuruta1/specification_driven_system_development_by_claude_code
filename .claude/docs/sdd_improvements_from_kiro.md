# 📚 SDD改善提案 - KIRO方式の良い部分の採用

## 🎯 概要
GitHub gotalab/claude-code-specの「KIRO方式」から、現在の仕様書駆動開発（SDD）に採用すべき良い部分を整理します。

## 📊 現在のシステムとKIRO方式の比較

### 現在のシステムの強み
1. **階層型エージェント構造** - 企業組織モデルによる役割分担
2. **MCP連携** - Gemini-CLI、o3 MCPとの統合
3. **包括的なコマンド体系** - `/spec`を中心とした統合開発フロー
4. **マルチプロジェクト対応** - Vue.js、.NET、Python等の幅広い技術スタック

### KIRO方式の優れた点
1. **段階的承認ワークフロー** - 各フェーズでの人間レビューを必須化
2. **プロジェクトステアリング** - 開発開始前の方向性定義
3. **進捗の透明性** - `/kiro:spec-status`による明確な進捗追跡
4. **ドリフト検出** - 仕様からの逸脱を自動検出

## ✅ 採用すべき改善点

### 1. 🎯 プロジェクトステアリング機能の追加

#### 実装案
```markdown
## 新コマンド: /steering
- プロジェクト開始前の方向性定義
- ゴール、制約、優先順位の明確化
- .claude/steering/ディレクトリに保存

## ステアリング文書の構成
1. プロジェクトゴール
2. 制約条件（技術、予算、期限）
3. 優先順位マトリクス
4. ステークホルダー定義
5. 成功基準
```

### 2. 📝 段階的承認プロセスの強化

#### 現在のフローの改善
```markdown
## 改善前: /spec コマンド
1. 要件定義 → 2. 設計 → 3. 実装 → 4. テスト

## 改善後: 承認ゲート追加
1. 要件定義
   ↓ [人間レビュー & 承認]
2. 技術設計
   ↓ [人間レビュー & 承認]
3. タスク分解
   ↓ [人間レビュー & 承認]
4. 実装開始
```

### 3. 🔍 進捗管理の透明化

#### 新機能追加
```markdown
## /spec-status コマンドの新設
- 各フェーズの完了率表示
- ブロッカーの可視化
- 次のアクションの明確化
- ドリフト検出機能

## 出力例
Phase 1: Requirements ✅ 100% (Approved)
Phase 2: Design ⏳ 60% (Under Review)
Phase 3: Tasks ⏸️ 0% (Waiting)
Blockers: Design approval pending
Next Action: Review and approve design document
```

### 4. 📁 ディレクトリ構造の整理

#### 追加するディレクトリ
```
.claude/
├── steering/           # 🆕 プロジェクトステアリング文書
│   └── [project-name]/
├── specs/             # 🆕 承認済み仕様書の保管
│   ├── requirements/
│   ├── designs/
│   └── tasks/
├── progress/          # 🆕 進捗追跡
│   └── [project-name]/
└── (既存のディレクトリ)
```

### 5. 🤖 経営企画部への統合

#### ステアリング機能の配置
- **経営企画部**がプロジェクトステアリングを主導
- 戦略的方向性と技術選定の整合性確保
- MCP連携時は戦略データアナリストが市場分析を提供

## 📋 実装優先順位

### Phase 1: 即座に実装（1週間）
1. ✅ `/steering`コマンドの追加
2. ✅ 承認ゲートの組み込み
3. ✅ ステアリング文書テンプレート作成

### Phase 2: 短期実装（2週間）
1. ⏳ `/spec-status`コマンドの開発
2. ⏳ ドリフト検出機能
3. ⏳ 進捗ダッシュボード

### Phase 3: 中期実装（1ヶ月）
1. 📅 自動進捗レポート生成
2. 📅 仕様変更管理システム
3. 📅 品質メトリクス統合

## 🎯 期待される効果

1. **品質向上**: 段階的レビューによる問題の早期発見
2. **透明性向上**: ステークホルダーへの進捗可視化
3. **リスク低減**: ドリフト検出による仕様逸脱防止
4. **効率化**: 明確な承認プロセスによる手戻り削減

## 📝 実装時の注意点

1. **既存ワークフローとの互換性維持**
   - 現在の`/spec`コマンドは維持
   - オプションとして承認ゲートを追加

2. **段階的導入**
   - 新規プロジェクトから適用
   - 既存プロジェクトは移行期間を設定

3. **ツール統合**
   - MCP連携時の自動化強化
   - GitHub連携による承認フロー

### 6. 🔄 既存プロジェクト解析の効率化

#### 解析キャッシュシステム
```markdown
## 新機能: 要件定義書・技術設計書の自動生成と活用

### 初回解析時
- ソースコード全体を解析
- 要件定義書を自動生成
- 技術設計書を自動生成
- チェックサムで状態を記録

### 2回目以降の解析
- 設計書から情報を高速取得（70-80%時間削減）
- ソースコードとの差分を検出
- 変更箇所のみ再解析
- 設計書を自動更新

### 原則
- ソースコードが常に正（Single Source of Truth）
- 設計書は解析キャッシュとして機能
- 不整合時は自動的にソースコードに合わせる
```

#### 新コマンド体系
```markdown
## /analyze - 既存プロジェクト高速解析
- --generate-docs: 初回解析で設計書生成
- --use-cache: キャッシュ活用で高速化
- --diff-only: 差分のみ解析

## /sync-docs - 設計書同期
- 手動/自動同期
- Git hooks統合
- 整合性検証

## /validate-docs - 整合性チェック
- ソースコードと設計書の一致確認
- 不整合の自動修正
```

## 🚀 次のアクション

1. このドキュメントのレビューと承認
2. `/analyze`コマンドの実装開始（既存プロジェクト解析）
3. `/steering`コマンドの実装開始（新規プロジェクト）
4. 経営企画部への機能統合
5. パイロットプロジェクトでの検証

## 📊 実装優先順位（更新版）

### Phase 1: 即座に実装（1週間）
1. ✅ `/analyze`コマンド（既存プロジェクト解析）
2. ✅ 要件定義書・技術設計書の自動生成
3. ✅ `/steering`コマンドの追加
4. ✅ 承認ゲートの組み込み

### Phase 2: 短期実装（2週間）
1. ⏳ 解析キャッシュシステム
2. ⏳ 差分検出と高速解析
3. ⏳ `/spec-status`コマンドの開発
4. ⏳ ドリフト検出機能

### Phase 3: 中期実装（1ヶ月）
1. 📅 設計書の自動同期メカニズム
2. 📅 Git hooks統合
3. 📅 自動進捗レポート生成
4. 📅 品質メトリクス統合

---

*このドキュメントは、gotalab/claude-code-specのKIRO方式から学んだベストプラクティスと、既存プロジェクト解析の効率化を統合した提案書です。*

## 関連ドキュメント
- [既存プロジェクト解析のためのSDD拡張仕様](./sdd_existing_project_analysis.md)