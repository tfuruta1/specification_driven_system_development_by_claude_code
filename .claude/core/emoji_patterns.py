#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
çµµæ–‡å­—ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« - Claude Code Core v12.0
emoji_validatorã‚·ã‚¹ãƒ†ãƒ ã§ä½¿ç”¨ã•ã‚Œã‚‹çµµæ–‡å­—ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ç½®æ›ãƒãƒƒãƒ—

TDDãƒ†ã‚¹ãƒˆè¦æ±‚:
- å…¨çµµæ–‡å­—ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡º
- ç½®æ›ãƒãƒƒãƒ”ãƒ³ã‚°ã®æ­£ç¢ºæ€§
- å›½éš›åŒ–å¯¾å¿œ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§å¯¾å¿œï¼ˆæ–°è¦ä¿®æ­£ã•ã‚ŒãŸéƒ¨åˆ†ï¼‰
"""

import re
from typing import Dict, List, Set, Any

# åŸºæœ¬çµµæ–‡å­—ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆUnicodeç¯„å›²ï¼‰
EMOJI_UNICODE_RANGES = [
    r'\U0001F600-\U0001F64F',  # æ„Ÿæƒ…ãƒ»äººç‰©
    r'\U0001F300-\U0001F5FF',  # ãã®ä»–ã®ã‚·ãƒ³ãƒœãƒ«
    r'\U0001F680-\U0001F6FF',  # äº¤é€šãƒ»åœ°å›³
    r'\U0001F1E0-\U0001F1FF',  # æ——
    r'\U00002600-\U000026FF',  # ãã®ä»–ã®ã‚·ãƒ³ãƒœãƒ«
    r'\U00002700-\U000027BF',  # è£…é£¾è¨˜å·
    r'\U0001F900-\U0001F9FF',  # è£œåŠ©çµµæ–‡å­—
    r'\U0001FA70-\U0001FAFF',  # ã‚·ãƒ³ãƒœãƒ«ã¨çµµæ–‡å­—ã®æ‹¡å¼µ
]

# çµ±åˆçµµæ–‡å­—æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³
EMOJI_PATTERN = re.compile(
    '[' + ''.join(EMOJI_UNICODE_RANGES) + ']',
    re.UNICODE
)

# çµµæ–‡å­—ã‹ã‚‰å¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆã¸ã®ç½®æ›ãƒãƒƒãƒ—
EMOJI_REPLACEMENTS: Dict[str, str] = {
    # æ„Ÿæƒ…ãƒ»è¡¨æƒ…
    'ğŸ˜€': '[ç¬‘é¡”]',
    'ğŸ˜ƒ': '[å¤§ããªç¬‘é¡”]',
    'ğŸ˜„': '[ç›®ã‚’ç´°ã‚ãŸç¬‘é¡”]',
    'ğŸ˜': '[æ­¯ã‚’è¦‹ã›ãŸç¬‘é¡”]',
    'ğŸ˜†': '[å¤§ç¬‘ã„]',
    'ğŸ˜…': '[æ±—ã‚’ã‹ã„ãŸç¬‘é¡”]',
    'ğŸ¤£': '[ç¬‘ã„è»¢ã’ã‚‹]',
    'ğŸ˜‚': '[æ¶™ã‚’æµã—ã¦ç¬‘ã†]',
    'ğŸ™‚': '[å¾®ç¬‘ã¿]',
    'ğŸ™ƒ': '[é€†ã•é¡”]',
    'ğŸ˜‰': '[ã‚¦ã‚£ãƒ³ã‚¯]',
    'ğŸ˜Š': '[å¹¸ã›ãªé¡”]',
    'ğŸ˜‡': '[å¤©ä½¿ã®è¼ª]',
    'ğŸ˜': '[ãƒãƒ¼ãƒˆç›®]',
    'ğŸ¤©': '[æ˜Ÿç›®]',
    'ğŸ˜˜': '[æŠ•ã’ã‚­ã‚¹]',
    'ğŸ˜—': '[ã‚­ã‚¹é¡”]',
    'ğŸ˜š': '[ç›®ã‚’é–‰ã˜ã¦ã‚­ã‚¹]',
    'ğŸ˜™': '[å¾®ç¬‘ã¿ã‚­ã‚¹]',
    'ğŸ˜‹': '[ãŠã„ã—ã„]',
    'ğŸ˜›': '[èˆŒå‡ºã—]',
    'ğŸ˜œ': '[ã‚¦ã‚£ãƒ³ã‚¯èˆŒå‡ºã—]',
    'ğŸ¤ª': '[å¤‰ãªé¡”]',
    'ğŸ˜': '[èˆŒå‡ºã—ç›®é–‰ã˜]',
    'ğŸ¤‘': '[ãŠé‡‘ç›®]',
    'ğŸ¤—': '[ãƒã‚°]',
    'ğŸ¤­': '[æ‰‹ã§å£ã‚’éš ã™]',
    'ğŸ¤«': '[ã—ãƒ¼ã£]',
    'ğŸ¤”': '[è€ƒãˆä¸­]',
    'ğŸ¤': '[å£ã«ãƒ•ã‚¡ã‚¹ãƒŠãƒ¼]',
    'ğŸ¤¨': '[çœ‰ã‚’ä¸Šã’ã‚‹]',
    'ğŸ˜': '[ç„¡è¡¨æƒ…]',
    'ğŸ˜‘': '[ç„¡è¨€]',
    'ğŸ˜¶': '[å£ãªã—]',
    'ğŸ˜': '[ã«ã‚„ã‚Š]',
    'ğŸ˜’': '[ä¸æº€]',
    'ğŸ™„': '[ç›®ã‚’å›ã™]',
    'ğŸ˜¬': '[æ­¯ã‚’é£Ÿã„ã—ã°ã‚‹]',
    'ğŸ¤¥': '[å˜˜ã¤ã]',
    'ğŸ˜”': '[è½ã¡è¾¼ã¿]',
    'ğŸ˜ª': '[çœ ã„]',
    'ğŸ¤¤': '[ã‚ˆã ã‚Œ]',
    'ğŸ˜´': '[å¯ã‚‹]',
    'ğŸ˜·': '[ãƒã‚¹ã‚¯]',
    'ğŸ¤’': '[ç†±]',
    'ğŸ¤•': '[åŒ…å¸¯]',
    'ğŸ¤¢': '[åãæ°—]',
    'ğŸ¤®': '[å˜”å]',
    'ğŸ¤§': '[ãã—ã‚ƒã¿]',
    'ğŸ˜µ': '[ç›®ãŒå›ã‚‹]',
    'ğŸ¤¯': '[é ­çˆ†ç™º]',
    'ğŸ˜•': '[å›°ã£ãŸ]',
    'ğŸ˜Ÿ': '[å¿ƒé…]',
    'ğŸ™': '[è»½ãè½ã¡è¾¼ã¿]',
    'ğŸ˜®': '[é©šãé–‹å£]',
    'ğŸ˜¯': '[é©šã]',
    'ğŸ˜²': '[ã³ã£ãã‚Š]',
    'ğŸ˜³': '[èµ¤é¢]',
    'ğŸ¥º': '[æ‡‡é¡˜]',
    'ğŸ˜¦': '[è½èƒ†é–‹å£]',
    'ğŸ˜§': '[è‹¦æ‚©]',
    'ğŸ˜¨': '[ææ€–]',
    'ğŸ˜°': '[å†·ã‚„æ±—]',
    'ğŸ˜¥': '[ãŒã£ã‹ã‚Šå®‰å µ]',
    'ğŸ˜¢': '[æ¶™]',
    'ğŸ˜­': '[å¤§æ³£ã]',
    'ğŸ˜±': '[ææ€–å«ã³]',
    'ğŸ˜–': '[æ··ä¹±]',
    'ğŸ˜£': '[å¿è€]',
    'ğŸ˜': '[å¤±æœ›]',
    'ğŸ˜“': '[å†·ã‚„æ±—]',
    'ğŸ˜©': '[ç–²ã‚ŒãŸ]',
    'ğŸ˜«': '[ç–²åŠ´å›°æ†Š]',
    'ğŸ˜¤': '[æ€’ã‚Šé¼»æ¯]',
    'ğŸ˜¡': '[æ€’ã‚Šèµ¤]',
    'ğŸ˜ ': '[æ€’ã‚Š]',
    'ğŸ¤¬': '[ç½µå€’]',
    
    # æ‰‹ã¨ä½“ã®å‹•ä½œ
    'ğŸ‘': '[ã„ã„ã­]',
    'ğŸ‘': '[ã ã‚]',
    'ğŸ‘Œ': '[OK]',
    'âœŒ': '[ãƒ”ãƒ¼ã‚¹]',
    'ğŸ¤': '[é¡˜ã†]',
    'ğŸ¤Ÿ': '[æ„›ã—ã¦ã‚‹]',
    'ğŸ¤˜': '[ãƒ­ãƒƒã‚¯]',
    'ğŸ¤™': '[é›»è©±]',
    'ğŸ‘ˆ': '[å·¦æŒ‡å·®ã—]',
    'ğŸ‘‰': '[å³æŒ‡å·®ã—]',
    'ğŸ‘†': '[ä¸ŠæŒ‡å·®ã—]',
    'ğŸ‘‡': '[ä¸‹æŒ‡å·®ã—]',
    'â˜': '[äººå·®ã—æŒ‡]',
    'âœ‹': '[æ‰‹ã®ã²ã‚‰]',
    'ğŸ¤š': '[æ‰‹ã®ç”²]',
    'ğŸ––': '[ãƒãƒ«ã‚«ãƒ³æŒ¨æ‹¶]',
    'ğŸ‘‹': '[æ‰‹ã‚’æŒ¯ã‚‹]',
    'ğŸ¤': '[æ¡æ‰‹]',
    'ğŸ‘': '[æ‹æ‰‹]',
    'ğŸ™Œ': '[ä¸‡æ­³]',
    'ğŸ‘': '[é–‹ã„ãŸæ‰‹]',
    'ğŸ¤²': '[æ‰‹ã®ã²ã‚‰ä¸Šå‘ã]',
    'ğŸ™': '[ç¥ˆã‚Š]',
    
    # ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ»ã‚·ãƒ³ãƒœãƒ«
    'ğŸ’»': '[ãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³]',
    'ğŸ’º': '[åº§å¸­]',
    'ğŸš—': '[è»Š]',
    'âœˆï¸': '[é£›è¡Œæ©Ÿ]',
    'ğŸ ': '[å®¶]',
    'ğŸ¢': '[ã‚ªãƒ•ã‚£ã‚¹ãƒ“ãƒ«]',
    'ğŸ“±': '[ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³]',
    'ğŸ’¡': '[é›»çƒ]',
    'ğŸ”§': '[ãƒ¬ãƒ³ãƒ]',
    'ğŸ”¨': '[ãƒãƒ³ãƒãƒ¼]',
    'âš¡': '[é›·]',
    'ğŸ”¥': '[ç«]',
    'ğŸ’§': '[æ°´æ»´]',
    'ğŸŒŸ': '[è¼ãæ˜Ÿ]',
    'â­': '[æ˜Ÿ]',
    'ğŸŒˆ': '[è™¹]',
    'ğŸŒ™': '[ä¸‰æ—¥æœˆ]',
    'â˜€ï¸': '[å¤ªé™½]',
    'â›…': '[é›²ã¨å¤ªé™½]',
    'â˜ï¸': '[é›²]',
    'ğŸŒ§': '[é›¨é›²]',
    'â›ˆ': '[é›·é›¨]',
    'ğŸŒ©': '[é›·]',
    'â„ï¸': '[é›ª]',
    
    # æ´»å‹•ãƒ»ã‚¹ãƒãƒ¼ãƒ„
    'âš½': '[ã‚µãƒƒã‚«ãƒ¼]',
    'ğŸ€': '[ãƒã‚¹ã‚±ãƒƒãƒˆãƒœãƒ¼ãƒ«]',
    'ğŸˆ': '[ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ•ãƒƒãƒˆãƒœãƒ¼ãƒ«]',
    'âš¾': '[é‡çƒ]',
    'ğŸ¾': '[ãƒ†ãƒ‹ã‚¹]',
    'ğŸ': '[ãƒãƒ¬ãƒ¼ãƒœãƒ¼ãƒ«]',
    'ğŸ“': '[å“çƒ]',
    'ğŸ¸': '[ãƒãƒ‰ãƒŸãƒ³ãƒˆãƒ³]',
    'ğŸ¥…': '[ã‚´ãƒ¼ãƒ«]',
    'ğŸ†': '[ãƒˆãƒ­ãƒ•ã‚£ãƒ¼]',
    'ğŸ¥‡': '[é‡‘ãƒ¡ãƒ€ãƒ«]',
    'ğŸ¥ˆ': '[éŠ€ãƒ¡ãƒ€ãƒ«]',
    'ğŸ¥‰': '[éŠ…ãƒ¡ãƒ€ãƒ«]',
    
    # é£Ÿã¹ç‰©ãƒ»é£²ã¿ç‰©
    'ğŸ': '[ã‚Šã‚“ã”]',
    'ğŸŒ': '[ãƒãƒŠãƒŠ]',
    'ğŸŠ': '[ã‚ªãƒ¬ãƒ³ã‚¸]',
    'ğŸ“': '[ã„ã¡ã”]',
    'ğŸ¥': '[ã‚­ã‚¦ã‚¤]',
    'ğŸ…': '[ãƒˆãƒãƒˆ]',
    'ğŸ¥•': '[ã«ã‚“ã˜ã‚“]',
    'ğŸŒ½': '[ã¨ã†ã‚‚ã‚ã“ã—]',
    'ğŸ¥’': '[ãã‚…ã†ã‚Š]',
    'ğŸ¥¬': '[ãƒ¬ã‚¿ã‚¹]',
    'ğŸ§„': '[ã«ã‚“ã«ã]',
    'ğŸ§…': '[ç‰ã­ã]',
    'ğŸ': '[ãƒ‘ãƒ³]',
    'ğŸ¥': '[ã‚¯ãƒ­ãƒ¯ãƒƒã‚µãƒ³]',
    'ğŸ¥–': '[ãƒ•ãƒ©ãƒ³ã‚¹ãƒ‘ãƒ³]',
    'ğŸ•': '[ãƒ”ã‚¶]',
    'ğŸ”': '[ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼]',
    'ğŸŒ­': '[ãƒ›ãƒƒãƒˆãƒ‰ãƒƒã‚°]',
    'ğŸ¥ª': '[ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒ]',
    'ğŸŒ®': '[ã‚¿ã‚³ã‚¹]',
    'ğŸŒ¯': '[ãƒ–ãƒªãƒˆãƒ¼]',
    'ğŸ': '[ã‚¹ãƒ‘ã‚²ãƒ†ã‚£]',
    'ğŸœ': '[ãƒ©ãƒ¼ãƒ¡ãƒ³]',
    'ğŸ²': '[é‹æ–™ç†]',
    'ğŸ±': '[å¼å½“]',
    'ğŸ£': '[å¯¿å¸]',
    'ğŸ¤': '[ã‚¨ãƒ“ãƒ•ãƒ©ã‚¤]',
    'ğŸ™': '[ãŠã«ãã‚Š]',
    'ğŸš': '[ã”é£¯]',
    'ğŸ›': '[ã‚«ãƒ¬ãƒ¼]',
    'ğŸ¥˜': '[ãƒ‘ã‚¨ãƒªã‚¢]',
    'â˜•': '[ã‚³ãƒ¼ãƒ’ãƒ¼]',
    'ğŸµ': '[ç·‘èŒ¶]',
    'ğŸ¥¤': '[ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯]',
    'ğŸº': '[ãƒ“ãƒ¼ãƒ«]',
    'ğŸ·': '[ãƒ¯ã‚¤ãƒ³]',
    
    # è¨˜å·ãƒ»ãƒãƒ¼ã‚¯
    'â¤ï¸': '[ãƒãƒ¼ãƒˆ]',
    'ğŸ§¡': '[ã‚ªãƒ¬ãƒ³ã‚¸ãƒãƒ¼ãƒˆ]',
    'ğŸ’›': '[é»„è‰²ãƒãƒ¼ãƒˆ]',
    'ğŸ’š': '[ç·‘ãƒãƒ¼ãƒˆ]',
    'ğŸ’™': '[é’ãƒãƒ¼ãƒˆ]',
    'ğŸ’œ': '[ç´«ãƒãƒ¼ãƒˆ]',
    'ğŸ–¤': '[é»’ãƒãƒ¼ãƒˆ]',
    'ğŸ¤': '[ç™½ãƒãƒ¼ãƒˆ]',
    'ğŸ¤': '[èŒ¶è‰²ãƒãƒ¼ãƒˆ]',
    'ğŸ’•': '[2ã¤ã®ãƒãƒ¼ãƒˆ]',
    'ğŸ’–': '[è¼ããƒãƒ¼ãƒˆ]',
    'ğŸ’—': '[æˆé•·ã™ã‚‹ãƒãƒ¼ãƒˆ]',
    'ğŸ’˜': '[çŸ¢ãŒåˆºã•ã£ãŸãƒãƒ¼ãƒˆ]',
    'ğŸ’': '[ãƒªãƒœãƒ³ä»˜ããƒãƒ¼ãƒˆ]',
    'ğŸ’Ÿ': '[ãƒãƒ¼ãƒˆã®è£…é£¾]',
    'â™¥ï¸': '[ãƒãƒ¼ãƒˆã‚¹ãƒ¼ãƒ„]',
    'ğŸ’Œ': '[ãƒ©ãƒ–ãƒ¬ã‚¿ãƒ¼]',
    'ğŸ’¤': '[ZZZ]',
    'ğŸ’¢': '[æ€’ã‚Šãƒãƒ¼ã‚¯]',
    'ğŸ’£': '[çˆ†å¼¾]',
    'ğŸ’¥': '[çˆ†ç™º]',
    'ğŸ’«': '[ã‚ã¾ã„]',
    'ğŸ’¨': '[çªé¢¨]',
    'ğŸ’¦': '[æ±—ã—ã¶ã]',
    'ğŸ’ª': '[ä¸Šè…•äºŒé ­ç­‹]',
    
    # ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ»è¨˜å·
    'âœ…': '[ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯]',
    'âŒ': '[Ã—ãƒãƒ¼ã‚¯]',
    'â­•': '[â—‹ãƒãƒ¼ã‚¯]',
    'â—': '[æ„Ÿå˜†ç¬¦]',
    'â“': '[ç–‘å•ç¬¦]',
    'â”': '[ç™½ã„ç–‘å•ç¬¦]',
    'â•': '[ç™½ã„æ„Ÿå˜†ç¬¦]',
    'â€¼ï¸': '[äºŒé‡æ„Ÿå˜†ç¬¦]',
    'â‰ï¸': '[æ„Ÿå˜†ç–‘å•ç¬¦]',
    'ğŸ”´': '[èµ¤ã„å††]',
    'ğŸŸ ': '[ã‚ªãƒ¬ãƒ³ã‚¸ã®å††]',
    'ğŸŸ¡': '[é»„è‰²ã„å††]',
    'ğŸŸ¢': '[ç·‘ã®å††]',
    'ğŸ”µ': '[é’ã„å††]',
    'ğŸŸ£': '[ç´«ã®å††]',
    'âš«': '[é»’ã„å††]',
    'âšª': '[ç™½ã„å††]',
    'ğŸŸ¤': '[èŒ¶è‰²ã®å††]',
    
    # çŸ¢å°
    'â¬†ï¸': '[ä¸ŠçŸ¢å°]',
    'â†—ï¸': '[å³ä¸ŠçŸ¢å°]',
    'â¡ï¸': '[å³çŸ¢å°]',
    'â†˜ï¸': '[å³ä¸‹çŸ¢å°]',
    'â¬‡ï¸': '[ä¸‹çŸ¢å°]',
    'â†™ï¸': '[å·¦ä¸‹çŸ¢å°]',
    'â¬…ï¸': '[å·¦çŸ¢å°]',
    'â†–ï¸': '[å·¦ä¸ŠçŸ¢å°]',
    'â†•ï¸': '[ä¸Šä¸‹çŸ¢å°]',
    'â†”ï¸': '[å·¦å³çŸ¢å°]',
    'â†©ï¸': '[å³å·»ãçŸ¢å°]',
    'â†ªï¸': '[å·¦å·»ãçŸ¢å°]',
    'â¤´ï¸': '[å³ä¸Šã‚«ãƒ¼ãƒ–çŸ¢å°]',
    'â¤µï¸': '[å³ä¸‹ã‚«ãƒ¼ãƒ–çŸ¢å°]',
    'ğŸ”ƒ': '[æ™‚è¨ˆå›ã‚ŠçŸ¢å°]',
    'ğŸ”„': '[åæ™‚è¨ˆå›ã‚ŠçŸ¢å°]',
    'ğŸ”™': '[BACK]',
    'ğŸ”š': '[END]',
    'ğŸ”›': '[ON]',
    'ğŸ”œ': '[SOON]',
    'ğŸ”': '[TOP]',
}

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã®ãƒãƒƒãƒ”ãƒ³ã‚°
FILE_TYPE_MAP: Dict[str, str] = {
    '.py': 'python',
    '.js': 'javascript',
    '.ts': 'typescript',
    '.vue': 'vue',
    '.jsx': 'react',
    '.tsx': 'react_typescript',
    '.html': 'html',
    '.css': 'css',
    '.scss': 'scss',
    '.sass': 'sass',
    '.less': 'less',
    '.md': 'markdown',
    '.txt': 'text',
    '.json': 'json',
    '.xml': 'xml',
    '.yaml': 'yaml',
    '.yml': 'yaml',
    '.toml': 'toml',
    '.ini': 'ini',
    '.cfg': 'config',
    '.conf': 'config',
    '.sh': 'shell',
    '.bash': 'bash',
    '.zsh': 'zsh',
    '.fish': 'fish',
    '.ps1': 'powershell',
    '.sql': 'sql',
    '.rb': 'ruby',
    '.php': 'php',
    '.java': 'java',
    '.c': 'c',
    '.cpp': 'cpp',
    '.h': 'header',
    '.hpp': 'header',
    '.cs': 'csharp',
    '.go': 'go',
    '.rs': 'rust',
    '.swift': 'swift',
    '.kt': 'kotlin',
    '.scala': 'scala',
    '.r': 'r',
    '.m': 'matlab',
    '.pl': 'perl',
    '.lua': 'lua',
    '.dart': 'dart',
    '.elm': 'elm',
    '.ex': 'elixir',
    '.fs': 'fsharp',
    '.hs': 'haskell',
    '.clj': 'clojure',
    '.jl': 'julia',
}

# å„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã§ã®çµµæ–‡å­—ä½¿ç”¨ã®è¨±å¯ãƒ¬ãƒ™ãƒ«
EMOJI_PERMISSION_LEVELS: Dict[str, str] = {
    'commit': 'strict',      # ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å³æ ¼
    'log': 'strict',         # ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚å³æ ¼
    'code': 'strict',        # ã‚³ãƒ¼ãƒ‰ã¯å³æ ¼
    'docs': 'moderate',      # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ä¸­ç¨‹åº¦
    'markdown': 'moderate',  # Markdownã¯ä¸­ç¨‹åº¦
    'comments': 'lenient',   # ã‚³ãƒ¡ãƒ³ãƒˆã¯å¯›å®¹
    'test': 'lenient',       # ãƒ†ã‚¹ãƒˆã¯å¯›å®¹ï¼ˆãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ï¼‰
    'config': 'strict',      # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯å³æ ¼
    'unknown': 'moderate',   # ä¸æ˜ãªã‚¿ã‚¤ãƒ—ã¯ä¸­ç¨‹åº¦
}

def get_replacement_suggestions(emoji: str) -> List[str]:
    """
    æŒ‡å®šã•ã‚ŒãŸçµµæ–‡å­—ã®ç½®æ›å€™è£œã‚’å–å¾—
    
    Args:
        emoji: ç½®æ›ã—ãŸã„çµµæ–‡å­—
        
    Returns:
        ç½®æ›å€™è£œã®ãƒªã‚¹ãƒˆ
    """
    if emoji in EMOJI_REPLACEMENTS:
        primary = EMOJI_REPLACEMENTS[emoji]
        return [primary, primary.replace('[', '(').replace(']', ')'), emoji + '_text']
    
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æ±ç”¨çš„ãªç½®æ›å€™è£œ
    return ['[çµµæ–‡å­—]', '(çµµæ–‡å­—)', 'emoji']

def get_emoji_categories() -> Dict[str, List[str]]:
    """
    çµµæ–‡å­—ã‚’ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«åˆ†é¡
    
    Returns:
        ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®çµµæ–‡å­—è¾æ›¸
    """
    categories = {
        'emotions': [],
        'gestures': [],
        'objects': [],
        'activities': [],
        'food': [],
        'symbols': [],
        'arrows': [],
        'colors': [],
    }
    
    # ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç°¡ç•¥ç‰ˆï¼‰
    for emoji, replacement in EMOJI_REPLACEMENTS.items():
        if any(word in replacement.lower() for word in ['ç¬‘', 'æ¶™', 'æ€’', 'å›°', 'é©š', 'é¡”']):
            categories['emotions'].append(emoji)
        elif any(word in replacement.lower() for word in ['æ‰‹', 'æŒ‡', 'æ‹æ‰‹', 'æ¡æ‰‹', 'ç¥ˆã‚Š']):
            categories['gestures'].append(emoji)
        elif any(word in replacement.lower() for word in ['ãƒ‘ã‚½ã‚³ãƒ³', 'è»Š', 'å®¶', 'é›»è©±', 'é›»çƒ']):
            categories['objects'].append(emoji)
        elif any(word in replacement.lower() for word in ['ã‚µãƒƒã‚«ãƒ¼', 'ãƒã‚¹ã‚±', 'ãƒ†ãƒ‹ã‚¹', 'ãƒˆãƒ­ãƒ•ã‚£ãƒ¼']):
            categories['activities'].append(emoji)
        elif any(word in replacement.lower() for word in ['ã‚Šã‚“ã”', 'ãƒ‘ãƒ³', 'ãƒ”ã‚¶', 'ã‚³ãƒ¼ãƒ’ãƒ¼', 'å¯¿å¸']):
            categories['food'].append(emoji)
        elif any(word in replacement.lower() for word in ['ãƒãƒ¼ãƒˆ', 'ãƒãƒ¼ã‚¯', 'å††']):
            categories['symbols'].append(emoji)
        elif 'çŸ¢å°' in replacement.lower():
            categories['arrows'].append(emoji)
        else:
            categories['symbols'].append(emoji)  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã‚·ãƒ³ãƒœãƒ«
    
    return categories

def is_emoji_allowed_in_context(emoji: str, context_type: str) -> bool:
    """
    æŒ‡å®šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§çµµæ–‡å­—ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    
    Args:
        emoji: ãƒã‚§ãƒƒã‚¯ã™ã‚‹çµµæ–‡å­—
        context_type: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¿ã‚¤ãƒ—
        
    Returns:
        è¨±å¯ã•ã‚Œã¦ã„ã‚‹å ´åˆTrue
    """
    permission_level = EMOJI_PERMISSION_LEVELS.get(context_type, 'moderate')
    
    if permission_level == 'lenient':
        return True
    elif permission_level == 'strict':
        return False
    else:  # moderate
        # ä¸­ç¨‹åº¦ï¼šä¸€éƒ¨ã®çµµæ–‡å­—ã®ã¿è¨±å¯ï¼ˆä¾‹ï¼šçŸ¢å°ã€ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ç­‰ï¼‰
        allowed_moderate = ['âœ…', 'âŒ', 'â­•', 'â¡ï¸', 'â¬†ï¸', 'â¬‡ï¸', 'â¬…ï¸', 'â†—ï¸', 'â†˜ï¸', 'â†™ï¸', 'â†–ï¸']
        return emoji in allowed_moderate

def get_security_risk_emojis() -> Set[str]:
    """
    ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®ã‚ã‚‹çµµæ–‡å­—ã‚’å–å¾—
    æ–°ã—ãä¿®æ­£ã•ã‚ŒãŸè„†å¼±æ€§å¯¾å¿œéƒ¨åˆ†
    
    Returns:
        ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®ã‚ã‚‹çµµæ–‡å­—ã®ã‚»ãƒƒãƒˆ
    """
    # è¦–è¦šçš„ã«ç´›ã‚‰ã‚ã—ã„çµµæ–‡å­—ï¼ˆãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°ç­‰ã«æ‚ªç”¨ã•ã‚Œã‚‹å¯èƒ½æ€§ï¼‰
    risk_emojis = {
        'ğŸ”’', 'ğŸ”“', 'ğŸ”‘',  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆå½è£…ãƒªã‚¹ã‚¯ï¼‰
        'âš ï¸', 'â›”', 'ğŸš«',  # è­¦å‘Šç³»ï¼ˆå½ã®è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«æ‚ªç”¨ï¼‰
        'ğŸ“§', 'ğŸ“¨', 'ğŸ“©',  # ãƒ¡ãƒ¼ãƒ«é–¢é€£ï¼ˆãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°ãƒ¡ãƒ¼ãƒ«å½è£…ï¼‰
        'ğŸ¦', 'ğŸ§', 'ğŸ’³',  # é‡‘èé–¢é€£ï¼ˆé‡‘èè©æ¬ºã«æ‚ªç”¨ï¼‰
        'ğŸ‘®', 'ğŸ‘¨â€ğŸ’¼', 'ğŸ‘©â€ğŸ’¼',  # æ¨©å¨ã‚’ç¤ºã™è·æ¥­ï¼ˆãªã‚Šã™ã¾ã—ãƒªã‚¹ã‚¯ï¼‰
        'ğŸ†˜', 'ğŸš¨',        # ç·Šæ€¥äº‹æ…‹ï¼ˆå½ã®ç·Šæ€¥é€šçŸ¥ï¼‰
        'âœ…',              # ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼ˆå½ã®æ‰¿èªï¼‰
    }
    return risk_emojis

def validate_emoji_security(emoji: str) -> Dict[str, Any]:
    """
    çµµæ–‡å­—ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚’è©•ä¾¡
    
    Args:
        emoji: è©•ä¾¡ã™ã‚‹çµµæ–‡å­—
        
    Returns:
        ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è©•ä¾¡çµæœ
    """
    risk_emojis = get_security_risk_emojis()
    
    return {
        'emoji': emoji,
        'is_high_risk': emoji in risk_emojis,
        'risk_level': 'HIGH' if emoji in risk_emojis else 'LOW',
        'risk_reason': 'ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°/è©æ¬ºã«æ‚ªç”¨ã•ã‚Œã‚‹å¯èƒ½æ€§' if emoji in risk_emojis else None,
        'recommendation': 'ä½¿ç”¨ã‚’é¿ã‘ã‚‹' if emoji in risk_emojis else 'ä½¿ç”¨å¯èƒ½'
    }

# ãƒ†ã‚¹ãƒˆç”¨é–¢æ•°
def get_test_emojis() -> Dict[str, List[str]]:
    """
    ãƒ†ã‚¹ãƒˆç”¨ã®çµµæ–‡å­—ã‚»ãƒƒãƒˆã‚’å–å¾—
    
    Returns:
        ãƒ†ã‚¹ãƒˆç”¨çµµæ–‡å­—è¾æ›¸
    """
    return {
        'basic': ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜'],
        'gestures': ['ğŸ‘', 'ğŸ‘', 'ğŸ‘Œ', 'âœŒï¸'],
        'objects': ['ğŸ’»', 'ğŸ“±', 'ğŸ ', 'ğŸš—'],
        'symbols': ['â¤ï¸', 'âœ…', 'âŒ', 'â­•'],
        'high_risk': list(get_security_risk_emojis())[:5],
        'mixed': ['ğŸ˜€', 'ğŸ’»', 'âœ…', 'ğŸ”’', 'ğŸ‘']
    }

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆç”¨ã®å¤§é‡çµµæ–‡å­—
def generate_large_emoji_text(count: int = 1000) -> str:
    """
    ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆç”¨ã®å¤§é‡çµµæ–‡å­—ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆ
    
    Args:
        count: ç”Ÿæˆã™ã‚‹çµµæ–‡å­—ã®æ•°
        
    Returns:
        å¤§é‡ã®çµµæ–‡å­—ã‚’å«ã‚€ãƒ†ã‚­ã‚¹ãƒˆ
    """
    import random
    emojis = list(EMOJI_REPLACEMENTS.keys())
    selected_emojis = random.choices(emojis, k=count)
    return ' '.join(selected_emojis)

# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
def validate_patterns() -> Dict[str, Any]:
    """
    ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©ã®æ•´åˆæ€§ã‚’ãƒã‚§ãƒƒã‚¯
    
    Returns:
        ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœ
    """
    results = {
        'total_replacements': len(EMOJI_REPLACEMENTS),
        'total_file_types': len(FILE_TYPE_MAP),
        'pattern_valid': True,
        'security_risks': len(get_security_risk_emojis()),
        'issues': []
    }
    
    # ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ‰åŠ¹æ€§ãƒã‚§ãƒƒã‚¯
    try:
        test_text = "ãƒ†ã‚¹ãƒˆ ğŸ˜€ ğŸš€ ğŸ’»"
        matches = EMOJI_PATTERN.findall(test_text)
        if len(matches) != 3:
            results['pattern_valid'] = False
            results['issues'].append(f"ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ç•°å¸¸: æœŸå¾…3å€‹ã€å®Ÿéš›{len(matches)}å€‹")
    except Exception as e:
        results['pattern_valid'] = False
        results['issues'].append(f"ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ©ãƒ¼: {str(e)}")
    
    # ç½®æ›ãƒãƒƒãƒ—ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
    for emoji, replacement in EMOJI_REPLACEMENTS.items():
        if not replacement.strip():
            results['issues'].append(f"ç©ºã®ç½®æ›ãƒ†ã‚­ã‚¹ãƒˆ: {emoji}")
        if not (replacement.startswith('[') and replacement.endswith(']')):
            results['issues'].append(f"ç½®æ›å½¢å¼ç•°å¸¸: {emoji} -> {replacement}")
    
    return results

if __name__ == "__main__":
    print("=== çµµæ–‡å­—ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« v12.0 ===")
    
    # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
    validation = validate_patterns()
    print(f"ç½®æ›ãƒãƒƒãƒ—æ•°: {validation['total_replacements']}")
    print(f"å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: {validation['total_file_types']}")
    print(f"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯çµµæ–‡å­—: {validation['security_risks']}")
    print(f"ãƒ‘ã‚¿ãƒ¼ãƒ³æœ‰åŠ¹æ€§: {'OK' if validation['pattern_valid'] else 'NG'}")
    
    if validation['issues']:
        print("\nâš ï¸ å•é¡Œç™ºè¦‹:")
        for issue in validation['issues']:
            print(f"  - {issue}")
    
    # ãƒ†ã‚¹ãƒˆä¾‹
    test_emojis = get_test_emojis()
    print(f"\nãƒ†ã‚¹ãƒˆç”¨çµµæ–‡å­—ã‚»ãƒƒãƒˆ:")
    for category, emojis in test_emojis.items():
        print(f"  {category}: {emojis}")
    
    # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ä¾‹
    print("\nã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ä¾‹:")
    for emoji in ['âœ…', 'ğŸ”’', 'ğŸ˜€']:
        security = validate_emoji_security(emoji)
        print(f"  {emoji}: {security['risk_level']} - {security['recommendation']}")