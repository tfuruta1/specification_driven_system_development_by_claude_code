# 👥 SDD+TDD 役割分担マトリクス

## 🎯 概要
SDD（仕様書駆動開発）とTDD（テスト駆動開発）の各工程における、階層型エージェントシステムの役割分担を定義します。

## 🏢 組織構造の確認

### ユーザー対応窓口
- **@cto** - すべてのユーザー要求の受付・統括

### CTOが管理する内部部門
1. **🛡️ 品質保証部** - GitHub操作、品質管理
2. **🏢 人事部** - チーム編成、リソース管理
3. **💡 経営企画部** - 戦略立案、ステアリング
4. **💻 システム開発部** - 実装チーム（内部）

### プロフェッショナルメンバー（MCP連携）
- **Gemini-CLI系** - データ分析、コンテンツ戦略
- **o3 MCP系** - システム設計、DevOps、セキュリティ
- **Claude Code内蔵** - 基本機能（MCP非連携時）

## 📊 Path A: 新規開発時の役割分担

| 工程 | コマンド | 主担当 | 副担当 | プロフェッショナルメンバー | 承認者 |
|------|----------|--------|--------|---------------------------|--------|
| **1. プロジェクトステアリング** | `/steering` | 💡 経営企画部 | 🎯 CTO | 📊 戦略データアナリスト（Gemini） | ユーザー |
| **2. 仕様初期化** | `/spec-init` | 🎯 CTO | 💡 経営企画部 | 🎯 戦略プロダクトマネージャー（Gemini） | ユーザー |
| **3. 要件定義** | `/spec-requirements` | 💡 経営企画部 | 🎯 CTO | 📊 戦略データアナリスト（Gemini）<br>🎯 戦略プロダクトマネージャー（Gemini） | ユーザー |
| **4. 技術設計** | `/spec-design` | 🎯 CTO | 💻 システム開発部 | 🏗️ システムアーキテクト（o3）<br>⚙️ DevOpsエンジニア（o3） | ユーザー |
| **5. タスク分解** | `/spec-tasks` | 🎯 CTO | 🏢 人事部 | 🎭 プロジェクトコーディネーター（共通） | ユーザー |
| **6. チーム編成** | （内部処理） | 🏢 人事部 | 🎯 CTO | - | CTO |
| **7. 実装** | `/spec-implement` | 💻 システム開発部 | 🛡️ 品質保証部 | 各種技術スペシャリスト | CTO |
| **8. テスト** | （TDD内） | 🛡️ 品質保証部 | 💻 システム開発部 | ✅ 強化QAスペシャリスト（共通） | CTO |
| **9. デプロイ** | （GitHub操作） | 🛡️ 品質保証部 | 🎯 CTO | ⚙️ DevOpsエンジニア（o3） | ユーザー |

## 📊 Path B: 既存プロジェクト解析・修正時の役割分担

| 工程 | コマンド | 主担当 | 副担当 | プロフェッショナルメンバー | 承認者 |
|------|----------|--------|--------|---------------------------|--------|
| **1. 初回解析** | `/analyze` | 🎯 CTO | 💻 システム開発部 | 📊 技術データアナリスト（Gemini） | - |
| **2. 設計書自動生成** | （自動処理） | 🎯 CTO | 💡 経営企画部 | 📝 戦略ドキュメンター（Claude） | - |
| **3. 修正要求分析** | `/modify-request` | 🎯 CTO | 💡 経営企画部 | 📊 戦略データアナリスト（Gemini） | ユーザー |
| **4. 影響分析** | （分析内） | 💻 システム開発部 | 🛡️ 品質保証部 | 🏗️ システムアーキテクト（o3） | CTO |
| **5. 修正要件定義** | `/modify-requirements` | 💡 経営企画部 | 🎯 CTO | 🎯 戦略プロダクトマネージャー（Gemini） | ユーザー |
| **6. 修正技術設計** | `/modify-design` | 🎯 CTO | 💻 システム開発部 | 🏗️ システムアーキテクト（o3）<br>🔒 セキュリティスペシャリスト（o3） | ユーザー |
| **7. テスト作成（Red）** | `/tdd-start` | 🛡️ 品質保証部 | 💻 システム開発部 | ✅ 強化QAスペシャリスト（共通） | CTO |
| **8. 実装（Green）** | （TDD内） | 💻 システム開発部 | 🛡️ 品質保証部 | 各種技術スペシャリスト | CTO |
| **9. リファクタリング** | （TDD内） | 💻 システム開発部 | 🛡️ 品質保証部 | 🏗️ システムアーキテクト（o3） | CTO |
| **10. 設計書更新** | `/sync-docs` | 🎯 CTO | 💡 経営企画部 | 📝 戦略ドキュメンター（Claude） | - |

## 🔄 工程間の連携フロー

### 新規開発時の情報フロー
```
経営企画部（戦略・要件）
    ↓
CTO（技術判断・調整）
    ↓
人事部（チーム編成）
    ↓
システム開発部（実装）
    ↓
品質保証部（テスト・リリース）
```

### 既存修正時の情報フロー
```
CTO（解析・影響評価）
    ↓
経営企画部（要件整理）
    ↓
CTO（設計）
    ↓
品質保証部（テスト作成）
    ↓
システム開発部（実装）
    ↓
品質保証部（検証）
    ↓
CTO（設計書更新）
```

## 👤 各部門の詳細責任

### 🎯 CTO（プロジェクト担当役員）
**主要責任**
- ユーザー要求の受付・理解
- 技術的実現可能性の判断
- 全体調整・進捗管理
- 品質最終責任

**担当工程**
- 仕様初期化
- 技術設計主導
- 解析実行
- 設計書管理

### 💡 経営企画部
**主要責任**
- ビジネス要件の整理
- 戦略的方向性の定義
- ROI評価
- ステークホルダー調整

**担当工程**
- プロジェクトステアリング
- 要件定義作成
- 修正要件定義

**常設プロフェッショナル**
- 📊 戦略データアナリスト（Gemini-CLI連携時）
- 📝 戦略コンテンツストラテジスト（Gemini-CLI連携時）
- 🎯 戦略プロダクトマネージャー（Gemini-CLI連携時）

### 🏢 人事部
**主要責任**
- 最適なチーム構成の提案
- リソース配分
- スキルマッチング
- MCP連携確認

**担当工程**
- チーム編成
- プロフェッショナルメンバー採用
- タスク分解支援

### 🛡️ 品質保証部
**主要責任**
- 品質基準の設定・維持
- テスト戦略立案
- GitHub操作全般
- リリース管理

**担当工程**
- テスト作成（TDD Red）
- テスト実行・検証
- CI/CD管理
- デプロイ実行

### 💻 システム開発部（内部組織）
**主要責任**
- 実装作業
- 技術的詳細設計
- コードレビュー
- リファクタリング

**担当工程**
- 実装（TDD Green）
- リファクタリング
- 影響分析支援

**オンデマンドプロフェッショナル**
- 🏗️ システムアーキテクト（o3 MCP連携時）
- ⚙️ DevOpsエンジニア（o3 MCP連携時）
- 🔒 セキュリティスペシャリスト（o3 MCP連携時）
- ✅ 強化QAスペシャリスト（Gemini+o3連携時）

## 🤝 承認権限マトリクス

| 承認レベル | 対象 | 承認者 | 承認基準 |
|-----------|------|--------|----------|
| **Level 1** | 要件定義・設計 | ユーザー | ビジネス要求との合致 |
| **Level 2** | 技術的判断 | CTO | 技術的実現可能性・品質 |
| **Level 3** | リソース配分 | CTO + 人事部 | 利用可能リソース・優先度 |
| **Level 4** | リリース判断 | ユーザー | 受入条件の充足 |

## ⚠️ エスカレーションパス

### 技術的課題
```
システム開発部 → CTO → ユーザー
```

### 要件の不明確さ
```
CTO → 経営企画部 → ユーザー
```

### リソース不足
```
CTO → 人事部 → （外部リソース検討）
```

### 品質問題
```
品質保証部 → CTO → ユーザー
```

## 📋 チェックポイント

### 工程移行条件
- [ ] 前工程の成果物が完成
- [ ] 必要な承認を取得
- [ ] 次工程の担当者がアサイン済み
- [ ] 必要なMCPツールが利用可能

### 品質ゲート
- [ ] 要件定義書レビュー完了
- [ ] 技術設計書レビュー完了
- [ ] テストケース網羅性確認
- [ ] コードレビュー完了

## 🚀 効率化のポイント

### 並行作業可能な工程
1. **要件定義と技術調査** - 経営企画部と技術チームで並行
2. **テスト作成と環境準備** - 品質保証部とDevOpsで並行
3. **ドキュメント更新と次フェーズ準備** - 並行実施

### ボトルネック回避策
1. **早期のMCP連携確認** - プロジェクト開始時に確認
2. **段階的承認** - 部分承認で次工程開始可能に
3. **プロフェッショナルメンバーの事前確保** - 人事部が先行手配

---

*この役割分担マトリクスにより、各部門が明確な責任を持ち、効率的にSDD+TDD開発を進めることができます。*