# 📋 階層型エージェントシステム - コマンド実行権限表

## 🎯 概要
階層型エージェントシステムのカスタムコマンド一覧と実行権限を定義します。

## 🔐 コマンド実行権限

### ユーザーとの対話フロー
```
ユーザー
  ↓ （日本語で自然な指示）
 @cto
  ↓ （内部でコマンドを実行）
各部門（コマンド実行可能）
```

### 実行権限を持つエージェント
- 🎯 **CTO** - 全コマンド実行可能
- 💡 **経営企画部** - 戦略・要件系コマンド実行可能
- 💻 **システム開発部** - 技術実装系コマンド実行可能
- 🏢 **人事部** - チーム管理系コマンド実行可能
- 🛡️ **品質保証部** - レビュー・品質系コマンド実行可能（読み取り専用）

## 📚 コマンド一覧

### 統合開発フロー
| コマンド | 説明 | CTO | 経営企画部 | システム開発部 | 人事部 | 品質保証部 |
|---------|------|-----|-----------|--------------|--------|-----------|
| `/spec` | 統合開発フロー管理 | ✅ | ✅ | ✅ | 🔍 | 🔍 |
| `/spec init` | プロジェクト初期化 | ✅ | ✅ | ❌ | ❌ | ❌ |
| `/spec requirements` | 要件定義フェーズ | ✅ | ✅ | 🔍 | 🔍 | 🔍 |
| `/spec design` | 技術設計フェーズ | ✅ | 🔍 | ✅ | ❌ | 🔍 |
| `/spec tasks` | タスク分割フェーズ | ✅ | 🔍 | ✅ | ✅ | 🔍 |
| `/spec implement` | 実装開始フェーズ | ✅ | ❌ | ✅ | ❌ | 🔍 |
| `/spec status` | 状態確認 | ✅ | ✅ | ✅ | ✅ | ✅ |

### 要件・設計コマンド
| コマンド | 説明 | CTO | 経営企画部 | システム開発部 | 人事部 | 品質保証部 |
|---------|------|-----|-----------|--------------|--------|-----------|
| `/requirements` | 要件定義書生成 | ✅ | ✅ | 🔍 | ❌ | 🔍 |
| `/design` | 技術設計書作成 | ✅ | 🔍 | ✅ | ❌ | 🔍 |
| `/design architecture` | アーキテクチャ設計 | ✅ | ❌ | ✅ | ❌ | 🔍 |
| `/design database` | データベース設計 | ✅ | ❌ | ✅ | ❌ | 🔍 |
| `/design api` | API設計 | ✅ | ❌ | ✅ | ❌ | 🔍 |
| `/design security` | セキュリティ設計 | ✅ | ❌ | ✅ | ❌ | 🔍 |

### タスク管理コマンド
| コマンド | 説明 | CTO | 経営企画部 | システム開発部 | 人事部 | 品質保証部 |
|---------|------|-----|-----------|--------------|--------|-----------|
| `/tasks` | タスク分割・実装計画 | ✅ | 🔍 | ✅ | ✅ | 🔍 |
| `/tasks breakdown` | タスク分割のみ | ✅ | ❌ | ✅ | ✅ | 🔍 |
| `/tasks estimate` | 工数見積もり | ✅ | ❌ | ✅ | ✅ | 🔍 |
| `/tasks assign` | チーム割り当て | ✅ | ❌ | ❌ | ✅ | ❌ |
| `/tasks timeline` | スケジュール作成 | ✅ | ✅ | ✅ | ✅ | 🔍 |

### 分析・修正コマンド
| コマンド | 説明 | CTO | 経営企画部 | システム開発部 | 人事部 | 品質保証部 |
|---------|------|-----|-----------|--------------|--------|-----------|
| `/analyze` | プロジェクト分析 | ✅ | ✅ | ✅ | 🔍 | ✅ |
| `/modify-request` | 修正要求分析 | ✅ | ✅ | ✅ | ❌ | 🔍 |

### MCP連携コマンド
| コマンド | 説明 | CTO | 経営企画部 | システム開発部 | 人事部 | 品質保証部 |
|---------|------|-----|-----------|--------------|--------|-----------|
| `/modeltest` | AI連携テスト | ✅ | ✅ | ✅ | ❌ | 🔍 |

## 🔑 権限記号の説明
- ✅ **実行可能**: コマンドを実行できる
- 🔍 **読み取り専用**: 結果の参照のみ可能
- ❌ **アクセス不可**: 実行・参照不可

## 🔧 コマンド管理責任者

### 管理責任の定義
各カスタムコマンドの管理責任者は、以下の役割を担います：
1. **障害対応**: コマンドが正常に動作しない場合の修正
2. **カスタマイズ**: プロジェクトの要求に合わせたコマンドの最適化
3. **ドキュメント更新**: コマンド仕様書の保守

### コマンド別管理責任者
| コマンド | 管理責任者 | 理由 |
|---------|-----------|------|
| `/spec` | 💻 システム開発部 | 統合開発フローの技術的実装を管理 |
| `/spec init` | 🎯 CTO | プロジェクト全体の初期化権限を持つ |
| `/spec requirements` | 💡 経営企画部 | 要件定義の専門性を持つ |
| `/spec design` | 💻 システム開発部 | 技術設計の専門性を持つ |
| `/spec tasks` | 🏢 人事部 | チーム編成・タスク割り当ての専門性を持つ |
| `/spec implement` | 💻 システム開発部 | 実装フェーズの管理 |
| `/spec status` | 🎯 CTO | 全体進捗の統括 |
| `/requirements` | 💡 経営企画部 | 要件定義書の作成・管理 |
| `/design` | 💻 システム開発部 | 技術設計書の作成・管理 |
| `/design architecture` | 💻 システム開発部 | アーキテクチャ設計の専門性 |
| `/design database` | 💻 システム開発部 | データベース設計の専門性 |
| `/design api` | 💻 システム開発部 | API設計の専門性 |
| `/design security` | 💻 システム開発部 | セキュリティ設計の専門性 |
| `/tasks` | 🏢 人事部 | タスク分割・リソース管理 |
| `/tasks breakdown` | 🏢 人事部 | タスク分解の専門性 |
| `/tasks estimate` | 🏢 人事部 | 工数見積もりの専門性 |
| `/tasks assign` | 🏢 人事部 | チーム割り当ての専門性 |
| `/tasks timeline` | 🏢 人事部 | スケジュール管理の専門性 |
| `/analyze` | 💻 システム開発部 | プロジェクト分析の技術的実装 |
| `/modify-request` | 💻 システム開発部 | 修正要求の技術的分析 |
| `/modeltest` | 💡 経営企画部 | AI連携戦略の管理 |

### 管理ガイドライン
1. **CTOのみ実行可能なコマンド**: CTOが直接管理
2. **部門が主に使用するコマンド**: その部門が管理責任を持つ
3. **複数部門が使用するコマンド**: 最も専門性の高い部門が管理

## 📋 実行フローの例

### ユーザーからの依頼を受けた場合
```
ユーザー: "@cto 新しいECサイトを作りたい"
    ↓
CTO: "承知しました。プロジェクトを開始します。"
    ↓ （内部処理）
CTO実行: /spec init
    ↓
経営企画部実行: /requirements "ECサイトプロジェクト"
    ↓
システム開発部実行: /design architecture
    ↓
人事部実行: /tasks assign
    ↓
CTO: "プロジェクトの準備が完了しました。"
```

### 部門間連携の例
```
CTO: "技術設計を開始します"
    ↓
システム開発部: /design database
    ↓
品質保証部: （設計レビュー - 読み取りのみ）
    ↓
システム開発部: （レビュー結果を反映）
    ↓
CTO: "設計が完了しました"
```

## 📝 注意事項

### ユーザーへの対応
- ユーザーは**直接コマンドを実行しません**
- ユーザーは**日本語で自然に**CTOに依頼します
- CTOがユーザーの意図を理解し、適切なコマンドを内部で実行します

### 内部実行ルール
1. CTOが全体を統括し、必要に応じて各部門にコマンド実行を指示
2. 各部門は権限範囲内でコマンドを実行
3. 品質保証部は主に読み取り・レビュー権限
4. 実行結果はCTOに集約され、ユーザーに報告

### コマンド実行時の表示
```
# ユーザーには見せない内部処理
[内部] CTO実行: /spec init
[内部] 経営企画部実行: /requirements
[内部] システム開発部実行: /design

# ユーザーに見せる結果
CTO: "要件定義と設計が完了しました。以下が主な内容です..."
```

## 🔄 更新履歴
- v8.4.0: コマンド実行権限を階層化
- v8.3.0: ActivityReport情報共有体系を追加
- v8.2.0: Claude Code新機能監視を追加
- v8.1.0: 自動可視化・自動管理機能を追加

---

*このドキュメントは階層型エージェントシステムのコマンド実行権限を定義しています。*