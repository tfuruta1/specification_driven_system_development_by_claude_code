(function(P,G){typeof exports=="object"&&typeof module<"u"?G(exports):typeof define=="function"&&define.amd?define(["exports"],G):(P=typeof globalThis<"u"?globalThis:P||self,G(P.OpenAIAgentsRealtime={}))})(this,function(P){"use strict";var Oc=Object.defineProperty;var Ia=P=>{throw TypeError(P)};var Nc=(P,G,X)=>G in P?Oc(P,G,{enumerable:!0,configurable:!0,writable:!0,value:X}):P[G]=X;var _=(P,G,X)=>Nc(P,typeof G!="symbol"?G+"":G,X),Pr=(P,G,X)=>G.has(P)||Ia("Cannot "+X);var u=(P,G,X)=>(Pr(P,G,"read from private field"),X?X.call(P):G.get(P)),T=(P,G,X)=>G.has(P)?Ia("Cannot add the same private member more than once"):G instanceof WeakSet?G.add(P):G.set(P,X),y=(P,G,X,Pt)=>(Pr(P,G,"write to private field"),Pt?Pt.call(P,X):G.set(P,X),X),L=(P,G,X)=>(Pr(P,G,"access private method"),X);var wt,Ht,bt,Yt,Xt,xt,ae,je,Je,Be,St,ce,jr,Mr,Dt,pe,Qt,Kt,en,tn,at,qe,Ge,it,nn,Tt,Me,se,ot,qn,Ca,fe,rn,kt,xe,Ve,It,sn,an,on,At,ie,Zr,$r,Lr,Ea,Fr,ut,un,he,cn,dn,z,ln,ct,pn,dt,lt,te,fn,Ze,pt,ft,Gn,Oa,B,Z,hn,M,Et,Ot,mn,W,Nt,Rt,Ee,H,Vn,zn,Na,Wn,Ra,Ur,Da;const G={version:"0.0.13"};function X(n){const e=atob(n),t=e.length,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return r.buffer}function Pt(n){const e=String.fromCharCode(...new Uint8Array(n));return btoa(e)}function Jr(n){if(typeof n>"u"||n===null||typeof n!="object"||!("type"in n)||typeof n.type!="string"||!n.type||n.type!=="message"||!("content"in n)||!Array.isArray(n.content)||n.content.length<1)return;const e=n.content[n.content.length-1];if(!(!("type"in e)||typeof e.type!="string")){if(e.type==="text")return typeof e.text=="string"?e.text:void 0;if(e.type==="audio")return typeof e.transcript=="string"?e.transcript:void 0}}function Pa(n,e){const t=n.filter(a=>!e.some(i=>i.itemId===a.itemId)),r=e.filter(a=>!n.some(i=>i.itemId===a.itemId)),s=e.filter(a=>n.some(i=>i.itemId===a.itemId&&JSON.stringify(i)!==JSON.stringify(a)));return{removals:t,additions:r,updates:s}}function ja(){return typeof window>"u"?!1:typeof window.RTCPeerConnection<"u"}function Br(n){return n.role==="system"?n:n.role==="assistant"?{...n,content:n.content.map(e=>e.type==="audio"?{...e,audio:null}:e)}:n.role==="user"?{...n,content:n.content.map(e=>e.type==="input_audio"?{...e,audio:null}:e)}:n}function qr(n,e,t){if(e.type==="conversation.item.input_audio_transcription.completed")return n.map(a=>{if(a.itemId===e.item_id&&a.type==="message"&&"role"in a&&a.role==="user"){const i=a.content.map(o=>o.type==="input_audio"?{...o,transcript:e.transcript}:o);return{...a,content:i,status:"completed"}}return a});const r=!t&&e.type==="message"?Br(e):e,s=n.findIndex(a=>a.itemId===e.itemId);if(s!==-1)return n.map((a,i)=>i===s?r:!t&&a.type==="message"?Br(a):a);if(e.previousItemId){const a=n.findIndex(i=>i.itemId===e.previousItemId);return a!==-1?[...n.slice(0,a+1),r,...n.slice(a+1)]:[...n,r]}else return[...n,r]}const Ma={"User-Agent":`Agents/JavaScript ${G.version}`,"X-OpenAI-Agents-SDK":`openai-agents-sdk.${G.version}`},Za=`openai-agents-sdk.${G.version}`;async function Hn(n){try{return[null,await n()]}catch(e){return[e,null]}}function $a(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}const La=Symbol("Let zodToJsonSchema decide on which parser to use"),Gr={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Fa=n=>typeof n=="string"?{...Gr,basePath:["#"],definitions:{},name:n}:{...Gr,basePath:["#"],definitions:{},...n},Yn=n=>"_def"in n?n._def:n;function Ua(n){if(!n)return!0;for(const e in n)return!1;return!0}const Ja=n=>{const e=Fa(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[Yn(s),{def:Yn(s),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function Vr(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function V(n,e,t,r,s){n[e]=t,Vr(n,e,r,s)}var jt;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return n.objectValues(i)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},n.find=(s,a)=>{for(const i of s)if(a(i))return i},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}n.joinValues=r,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(jt||(jt={}));var zr;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(zr||(zr={})),jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);let Wr=class Aa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,c=0;for(;c<i.path.length;){const l=i.path[c];c===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof Aa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};Wr.create=n=>new Wr(n);var Hr;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Hr||(Hr={}));var D;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(D||(D={}));function Ba(){return{}}function qa(n,e){var r,s;const t={type:"array"};return((s=(r=n.type)==null?void 0:r._def)==null?void 0:s.typeName)!==D.ZodAny&&(t.items=J(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&V(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&V(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(V(t,"minItems",n.exactLength.value,n.exactLength.message,e),V(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function Ga(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?V(t,"minimum",r.value,r.message,e):V(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?V(t,"maximum",r.value,r.message,e):V(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",r.value,r.message,e));break;case"multipleOf":V(t,"multipleOf",r.value,r.message,e);break}return t}function Va(){return{type:"boolean"}}function za(n,e){return J(n.type._def,e)}const Wa=(n,e)=>J(n.innerType._def,e);function Yr(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,a)=>Yr(n,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ha(n,e)}}const Ha=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":V(t,"minimum",r.value,r.message,e);break;case"max":V(t,"maximum",r.value,r.message,e);break}return t};function Ya(n,e){return{...J(n.innerType._def,e),default:n.defaultValue()}}function Xa(n,e,t){return e.effectStrategy==="input"?J(n.schema._def,e,t):{}}function Qa(n){return{type:"string",enum:[...n.values]}}const Ka=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function ei(n,e){const t=[J(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),J(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return t.forEach(a=>{if(Ka(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...c}=a;i=c}else r=void 0;s.push(i)}}),s.length?{allOf:s,...r}:void 0}function ti(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let Xn;const ze={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Xn===void 0&&(Xn=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Xn),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Xr(n,e){const t={type:"string"};function r(s){return e.patternStrategy==="escape"?ni(s):s}if(n.checks)for(const s of n.checks)switch(s.kind){case"min":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ye(t,"email",s.message,e);break;case"format:idn-email":ye(t,"idn-email",s.message,e);break;case"pattern:zod":ve(t,ze.email,s.message,e);break}break;case"url":ye(t,"uri",s.message,e);break;case"uuid":ye(t,"uuid",s.message,e);break;case"regex":ve(t,s.regex,s.message,e);break;case"cuid":ve(t,ze.cuid,s.message,e);break;case"cuid2":ve(t,ze.cuid2,s.message,e);break;case"startsWith":ve(t,RegExp(`^${r(s.value)}`),s.message,e);break;case"endsWith":ve(t,RegExp(`${r(s.value)}$`),s.message,e);break;case"datetime":ye(t,"date-time",s.message,e);break;case"date":ye(t,"date",s.message,e);break;case"time":ye(t,"time",s.message,e);break;case"duration":ye(t,"duration",s.message,e);break;case"length":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{ve(t,RegExp(r(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&ye(t,"ipv4",s.message,e),s.version!=="v4"&&ye(t,"ipv6",s.message,e);break}case"emoji":ve(t,ze.emoji,s.message,e);break;case"ulid":{ve(t,ze.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ye(t,"binary",s.message,e);break}case"contentEncoding:base64":{V(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{ve(t,ze.base64,s.message,e);break}}break}case"nanoid":ve(t,ze.nanoid,s.message,e)}return t}const ni=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),ye=(n,e,t,r)=>{var s;n.format||(s=n.anyOf)!=null&&s.some(a=>a.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):V(n,"format",e,t,r)},ve=(n,e,t,r)=>{var s;n.pattern||(s=n.allOf)!=null&&s.some(a=>a.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:Qr(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):V(n,"pattern",Qr(e,r),t,r)},Qr=(n,e)=>{var l;const t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},s=r.i?t.source.toLowerCase():t.source;let a="",i=!1,o=!1,c=!1;for(let p=0;p<s.length;p++){if(i){a+=s[p],i=!1;continue}if(r.i){if(o){if(s[p].match(/[a-z]/)){c?(a+=s[p],a+=`${s[p-2]}-${s[p]}`.toUpperCase(),c=!1):s[p+1]==="-"&&((l=s[p+2])!=null&&l.match(/[a-z]/))?(a+=s[p],c=!0):a+=`${s[p]}${s[p].toUpperCase()}`;continue}}else if(s[p].match(/[a-z]/)){a+=`[${s[p]}${s[p].toUpperCase()}]`;continue}}if(r.m){if(s[p]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[p]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&s[p]==="."){a+=o?`${s[p]}\r
`:`[${s[p]}\r
]`;continue}a+=s[p],s[p]==="\\"?i=!0:o&&s[p]==="]"?o=!1:!o&&s[p]==="["&&(o=!0)}try{const p=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function Kr(n,e){var r,s,a,i;if(e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===D.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((o,c)=>({...o,[c]:J(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",c]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:J(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((s=n.keyType)==null?void 0:s._def.typeName)===D.ZodString&&((a=n.keyType._def.checks)!=null&&a.length)){const o=Object.entries(Xr(n.keyType._def,e)).reduce((c,[l,p])=>l==="type"?c:{...c,[l]:p},{});return{...t,propertyNames:o}}else if(((i=n.keyType)==null?void 0:i._def.typeName)===D.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};return t}function ri(n,e){if(e.mapStrategy==="record")return Kr(n,e);const t=J(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=J(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function si(n){const e=n.values,r=Object.keys(n.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(r.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function ai(){return{not:{}}}function ii(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const _n={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function oi(n,e){if(e.target==="openApi3")return es(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in _n&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((s,a)=>{const i=_n[a._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((s,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===t.length){const s=r.filter((a,i,o)=>o.indexOf(a)===i);return{type:s.length>1?s:s[0],enum:t.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,s)=>[...r,...s._def.values.filter(a=>!r.includes(a))],[])};return es(n,e)}const es=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,s)=>J(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function ui(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:_n[n.innerType._def.typeName],nullable:!0}:{type:[_n[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=J(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=J(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function ci(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",Vr(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?V(t,"minimum",r.value,r.message,e):V(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?V(t,"maximum",r.value,r.message,e):V(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",r.value,r.message,e));break;case"multipleOf":V(t,"multipleOf",r.value,r.message,e);break}return t}function di(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":J(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":J(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function li(n,e){const t={type:"object",...Object.entries(n.shape()).reduce((r,[s,a])=>{var c;if(a===void 0||a._def===void 0)return r;const i=[...e.currentPath,"properties",s],o=J(a._def,{...e,currentPath:i,propertyPath:i});if(o===void 0)return r;if(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&typeof((c=a._def)==null?void 0:c.defaultValue)>"u")throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[s]:o},required:a.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,s]}},{properties:{},required:[]}),additionalProperties:di(n,e)};return t.required.length||delete t.required,t}const pi=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return J(n.innerType._def,e);const t=J(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},fi=(n,e)=>{if(e.pipeStrategy==="input")return J(n.in._def,e);if(e.pipeStrategy==="output")return J(n.out._def,e);const t=J(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=J(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(s=>s!==void 0)}};function hi(n,e){return J(n.type._def,e)}function mi(n,e){const r={type:"array",uniqueItems:!0,items:J(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&V(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&V(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function gi(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>J(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:J(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>J(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function _i(){return{not:{}}}function yi(){return{}}const vi=(n,e)=>J(n.innerType._def,e);function J(n,e,t=!1){var i;const r=e.seen.get(n);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,n,e,r,t);if(o!==La)return o}if(r&&!t){const o=wi(r,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const s={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,s);const a=xi(n,n.typeName,e,t);return a&&Si(n,e,a),s.jsonSchema=a,a}const wi=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":const t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:bi(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},bi=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},xi=(n,e,t,r)=>{switch(e){case D.ZodString:return Xr(n,t);case D.ZodNumber:return ci(n,t);case D.ZodObject:return li(n,t);case D.ZodBigInt:return Ga(n,t);case D.ZodBoolean:return Va();case D.ZodDate:return Yr(n,t);case D.ZodUndefined:return _i();case D.ZodNull:return ii(t);case D.ZodArray:return qa(n,t);case D.ZodUnion:case D.ZodDiscriminatedUnion:return oi(n,t);case D.ZodIntersection:return ei(n,t);case D.ZodTuple:return gi(n,t);case D.ZodRecord:return Kr(n,t);case D.ZodLiteral:return ti(n,t);case D.ZodEnum:return Qa(n);case D.ZodNativeEnum:return si(n);case D.ZodNullable:return ui(n,t);case D.ZodOptional:return pi(n,t);case D.ZodMap:return ri(n,t);case D.ZodSet:return mi(n,t);case D.ZodLazy:return J(n.getter()._def,t);case D.ZodPromise:return hi(n,t);case D.ZodNaN:case D.ZodNever:return ai();case D.ZodEffects:return Xa(n,t,r);case D.ZodAny:return Ba();case D.ZodUnknown:return yi();case D.ZodDefault:return Ya(n,t);case D.ZodBranded:return za(n,t);case D.ZodReadonly:return vi(n,t);case D.ZodCatch:return Wa(n,t);case D.ZodPipeline:return fi(n,t);case D.ZodFunction:case D.ZodVoid:case D.ZodSymbol:return;default:return(s=>{})()}},Si=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),Ti=(n,e)=>{const t=Ja(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=J(n._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(s.title=a);const i=(()=>{if(Ua(t.definitions))return;const c={},l=new Set;for(let p=0;p<500;p++){const f=Object.entries(t.definitions).filter(([h])=>!l.has(h));if(f.length===0)break;for(const[h,x]of f)c[h]=J(Yn(x),{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??{},l.add(h)}return c})(),o=r===void 0?i?{...s,[t.definitionPath]:i}:s:t.nameStrategy==="duplicate-ref"?{...s,...i||t.seenRefs.size?{[t.definitionPath]:{...i,...t.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...i,[r]:s}};return t.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function ki(n,{parser:e,callback:t}){const r={...n};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:t,enumerable:!1}}),r}function ts(n,e){return Ti(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Ii(n,e,t){return $a({type:"json_schema",...t,name:e,strict:!0,schema:ts(n,{name:e})},r=>n.parse(JSON.parse(r)))}function Ai(n){return ki({type:"function",name:n.name,parameters:ts(n.parameters,{name:n.name}),strict:!0},{callback:n.function,parser:e=>n.parameters.parse(JSON.parse(e))})}class $e extends Error{constructor(t,r){super(t);_(this,"state");this.state=r}}class Ci extends $e{}class ns extends $e{}class de extends $e{}class K extends $e{}class rs extends $e{constructor(t,r,s){super(t,s);_(this,"error");this.error=r}}class Ei extends $e{constructor(t,r,s){super(t,s);_(this,"error");this.error=r}}class ss extends $e{constructor(t,r,s){super(t,s);_(this,"result");this.result=r}}class yn extends $e{constructor(t,r,s){super(t,s);_(this,"result");this.result=r}}function We(n){return typeof n=="object"&&n!==null&&"_def"in n&&typeof n._def=="object"&&n._def!==null&&"typeName"in n._def&&n._def.typeName==="ZodObject"}function Oi(n){return typeof n=="object"&&n!==null&&"input"in n&&typeof n.input=="string"}function vn(n){if(n=n.replace(/\s/g,"_"),n=n.replace(/[^a-zA-Z0-9]/g,"_"),n.length===0)throw new Error("Tool name cannot be empty");return n}function Qn(n,e){const t=r=>JSON.parse(r);if(We(n)){const r=Ai({name:e,parameters:n,function:()=>{}});return{schema:r.parameters,parser:r.$parseRaw}}else if(typeof n=="object"&&n!==null)return{schema:n,parser:t};throw new K("Input type is not a ZodObject or a valid JSON schema")}function as(n){if(n==="text")return"text";if(We(n)){const e=Ii(n,"output");return{type:e.type,name:e.name,strict:e.strict||!1,schema:e.schema}}return n}function Ni(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wn={exports:{}},Kn,is;function Ri(){if(is)return Kn;is=1;var n=1e3,e=n*60,t=e*60,r=t*24,s=r*7,a=r*365.25;Kn=function(p,f){f=f||{};var h=typeof p;if(h==="string"&&p.length>0)return i(p);if(h==="number"&&isFinite(p))return f.long?c(p):o(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function i(p){if(p=String(p),!(p.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(f){var h=parseFloat(f[1]),x=(f[2]||"ms").toLowerCase();switch(x){case"years":case"year":case"yrs":case"yr":case"y":return h*a;case"weeks":case"week":case"w":return h*s;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*t;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(p){var f=Math.abs(p);return f>=r?Math.round(p/r)+"d":f>=t?Math.round(p/t)+"h":f>=e?Math.round(p/e)+"m":f>=n?Math.round(p/n)+"s":p+"ms"}function c(p){var f=Math.abs(p);return f>=r?l(p,f,r,"day"):f>=t?l(p,f,t,"hour"):f>=e?l(p,f,e,"minute"):f>=n?l(p,f,n,"second"):p+" ms"}function l(p,f,h,x){var b=f>=h*1.5;return Math.round(p/h)+" "+x+(b?"s":"")}return Kn}var er,os;function Di(){if(os)return er;os=1;function n(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=a,r.enabled=c,r.humanize=Ri(),r.destroy=p,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let h=0;for(let x=0;x<f.length;x++)h=(h<<5)-h+f.charCodeAt(x),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(f){let h,x=null,b,w;function E(...R){if(!E.enabled)return;const Y=E,ne=Number(new Date),me=ne-(h||ne);Y.diff=me,Y.prev=h,Y.curr=ne,h=ne,R[0]=r.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let ge=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(Dr,Cc)=>{if(Dr==="%%")return"%";ge++;const ka=r.formatters[Cc];if(typeof ka=="function"){const Ec=R[ge];Dr=ka.call(Y,Ec),R.splice(ge,1),ge--}return Dr}),r.formatArgs.call(Y,R),(Y.log||r.log).apply(Y,R)}return E.namespace=f,E.useColors=r.useColors(),E.color=r.selectColor(f),E.extend=s,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(b!==r.namespaces&&(b=r.namespaces,w=r.enabled(f)),w),set:R=>{x=R}}),typeof r.init=="function"&&r.init(E),E}function s(f,h){const x=r(this.namespace+(typeof h>"u"?":":h)+f);return x.log=this.log,x}function a(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const h=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const x of h)x[0]==="-"?r.skips.push(x.slice(1)):r.names.push(x)}function i(f,h){let x=0,b=0,w=-1,E=0;for(;x<f.length;)if(b<h.length&&(h[b]===f[x]||h[b]==="*"))h[b]==="*"?(w=b,E=x,b++):(x++,b++);else if(w!==-1)b=w+1,E++,x=E;else return!1;for(;b<h.length&&h[b]==="*";)b++;return b===h.length}function o(){const f=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),f}function c(f){for(const h of r.skips)if(i(f,h))return!1;for(const h of r.names)if(i(f,h))return!0;return!1}function l(f){return f instanceof Error?f.stack||f.message:f}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return er=n,er}var us;function Pi(){return us||(us=1,function(n,e){e.formatArgs=r,e.save=s,e.load=a,e.useColors=t,e.storage=i(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let p=0,f=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(p++,h==="%c"&&(f=p))}),c.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function i(){try{return localStorage}catch{}}n.exports=Di()(e);const{formatters:o}=n.exports;o.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}(wn,wn.exports)),wn.exports}var ji=Pi();const Mi=Ni(ji);function Zi(){return yo()}function cs(n){const e=Zi();return typeof e<"u"&&(e[n]==="true"||e[n]==="1")}const ds={get disabled(){return!0}},ls={get dontLogModelData(){return cs("OPENAI_AGENTS_DONT_LOG_MODEL_DATA")},get dontLogToolData(){return cs("OPENAI_AGENTS_DONT_LOG_TOOL_DATA")}},$i=ls.dontLogModelData,Li=ls.dontLogToolData;function ps(n="openai-agents"){return{namespace:n,debug:Mi(n),error:console.error,warn:console.warn,dontLogModelData:$i,dontLogToolData:Li}}const C=ps("openai-agents:core");function He(n){if(n==null)return String(n);if(typeof n=="string")return n;if(typeof n=="object")try{return JSON.stringify(n)}catch{return"[object with circular references]"}return String(n)}function Fi(n,e){return`An error occurred while running the tool. Please try again. Error: ${e instanceof Error?e.toString():String(e)}`}function bn(n){const e=n.name?vn(n.name):vn(n.execute.name),t=typeof n.errorFunction>"u"?Fi:n.errorFunction;if(!e)throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");const r=n.strict??!0;if(!r&&We(n.parameters))throw new K("Strict mode is required for Zod parameters");const{parser:s,schema:a}=Qn(n.parameters,e);async function i(l,p){const[f,h]=await Hn(()=>s(p));if(f!==null)throw C.dontLogToolData?C.debug(`Invalid JSON input for tool ${e}`):C.debug(`Invalid JSON input for tool ${e}: ${p}`),new de("Invalid JSON input for tool");C.dontLogToolData?C.debug(`Invoking tool ${e}`):C.debug(`Invoking tool ${e} with input ${p}`);const x=await n.execute(h,l),b=He(x);return C.dontLogToolData?C.debug(`Tool ${e} completed`):C.debug(`Tool ${e} returned: ${b}`),x}async function o(l,p){return i(l,p).catch(f=>{if(t){const h=Ut();return h==null||h.setError({message:"Error running tool (non-fatal)",data:{tool_name:e,error:f.toString()}}),t(l,f)}throw f})}const c=typeof n.needsApproval=="function"?n.needsApproval:async()=>typeof n.needsApproval=="boolean"?n.needsApproval:!1;return{type:"function",name:e,description:n.description,parameters:a,strict:r,invoke:o,needsApproval:c}}var U;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return n.objectValues(i)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},n.find=(s,a)=>{for(const i of s)if(a(i))return i},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}n.joinValues=r,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(U||(U={}));var fs;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(fs||(fs={}));const k=U.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Le=n=>{switch(typeof n){case"undefined":return k.undefined;case"string":return k.string;case"number":return Number.isNaN(n)?k.nan:k.number;case"boolean":return k.boolean;case"function":return k.function;case"bigint":return k.bigint;case"symbol":return k.symbol;case"object":return Array.isArray(n)?k.array:n===null?k.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?k.promise:typeof Map<"u"&&n instanceof Map?k.map:typeof Set<"u"&&n instanceof Set?k.set:typeof Date<"u"&&n instanceof Date?k.date:k.object;default:return k.unknown}},v=U.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Oe extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,c=0;for(;c<i.path.length;){const l=i.path[c];c===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof Oe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,U.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Oe.create=n=>new Oe(n);const tr=(n,e)=>{let t;switch(n.code){case v.invalid_type:n.received===k.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case v.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,U.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:t=`Unrecognized key(s) in object: ${U.joinValues(n.keys,", ")}`;break;case v.invalid_union:t="Invalid input";break;case v.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${U.joinValues(n.options)}`;break;case v.invalid_enum_value:t=`Invalid enum value. Expected ${U.joinValues(n.options)}, received '${n.received}'`;break;case v.invalid_arguments:t="Invalid function arguments";break;case v.invalid_return_type:t="Invalid function return type";break;case v.invalid_date:t="Invalid date";break;case v.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:U.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case v.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case v.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case v.custom:t="Invalid input";break;case v.invalid_intersection_types:t="Intersection results could not be merged";break;case v.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case v.not_finite:t="Number must be finite";break;default:t=e.defaultError,U.assertNever(n)}return{message:t}};let Ui=tr;function Ji(){return Ui}const Bi=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,a=[...t,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let o="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)o=l(i,{data:e,defaultError:o}).message;return{...s,path:a,message:o}};function S(n,e){const t=Ji(),r=Bi({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===tr?void 0:tr].filter(s=>!!s)});n.common.issues.push(r)}class oe{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return O;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const a=await s.key,i=await s.value;r.push({key:a,value:i})}return oe.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return O;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(r[a.value]=i.value)}return{status:e.value,value:r}}}const O=Object.freeze({status:"aborted"}),Mt=n=>({status:"dirty",value:n}),_e=n=>({status:"valid",value:n}),hs=n=>n.status==="aborted",ms=n=>n.status==="dirty",ht=n=>n.status==="valid",xn=n=>typeof Promise<"u"&&n instanceof Promise;var I;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(I||(I={}));class Se{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const gs=(n,e)=>{if(ht(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Oe(n.common.issues);return this._error=t,this._error}}};function j(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,o)=>{const{message:c}=n;return i.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??r??o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:c??t??o.defaultError}},description:s}}class ${get description(){return this._def.description}_getType(e){return Le(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new oe,ctx:{common:e.parent.common,data:e.data,parsedType:Le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(xn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)},s=this._parseSync({data:e,path:r.path,parent:r});return gs(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return ht(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>ht(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(xn(s)?s:Promise.resolve(s));return gs(r,a)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{const i=e(s),o=()=>a.addIssue({code:v.custom,...r(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Qe({schema:this,typeName:N.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return De.create(this,this._def)}nullable(){return Ke.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Te.create(this)}promise(){return En.create(this,this._def)}or(e){return Tn.create([this,e],this._def)}and(e){return kn.create(this,e,this._def)}transform(e){return new Qe({...j(this._def),schema:this,typeName:N.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new On({...j(this._def),innerType:this,defaultValue:t,typeName:N.ZodDefault})}brand(){return new ks({typeName:N.ZodBranded,type:this,...j(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Nn({...j(this._def),innerType:this,catchValue:t,typeName:N.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return dr.create(this,e)}readonly(){return Rn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qi=/^c[^\s-]{8,}$/i,Gi=/^[0-9a-z]+$/,Vi=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Wi=/^[a-z0-9_-]{21}$/i,Hi=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Yi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Xi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nr;const Ki=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,to=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,no=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ro=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,so=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_s="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ao=new RegExp(`^${_s}$`);function ys(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function io(n){return new RegExp(`^${ys(n)}$`)}function oo(n){let e=`${_s}T${ys(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function uo(n,e){return!!((e==="v4"||!e)&&Ki.test(n)||(e==="v6"||!e)&&to.test(n))}function co(n,e){if(!Hi.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function lo(n,e){return!!((e==="v4"||!e)&&eo.test(n)||(e==="v6"||!e)&&no.test(n))}class Ne extends ${_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==k.string){const a=this._getOrReturnCtx(e);return S(a,{code:v.invalid_type,expected:k.string,received:a.parsedType}),O}const r=new oe;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),S(s,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),S(s,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(s=this._getOrReturnCtx(e,s),i?S(s,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&S(s,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Xi.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"email",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")nr||(nr=new RegExp(Qi,"u")),nr.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"emoji",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")zi.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"uuid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Wi.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"nanoid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")qi.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"cuid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Gi.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"cuid2",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Vi.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"ulid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),S(s,{validation:"url",code:v.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"regex",code:v.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),S(s,{code:v.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),S(s,{code:v.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),S(s,{code:v.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?oo(a).test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{code:v.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?ao.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{code:v.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?io(a).test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{code:v.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Yi.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"duration",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?uo(e.data,a.version)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"ip",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?co(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"jwt",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?lo(e.data,a.version)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"cidr",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?ro.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"base64",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?so.test(e.data)||(s=this._getOrReturnCtx(e,s),S(s,{validation:"base64url",code:v.invalid_string,message:a.message}),r.dirty()):U.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:v.invalid_string,...I.errToObj(r)})}_addCheck(e){return new Ne({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...I.errToObj(e)})}url(e){return this._addCheck({kind:"url",...I.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...I.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...I.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...I.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...I.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...I.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...I.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...I.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...I.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...I.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...I.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...I.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...I.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...I.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...I.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...I.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...I.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...I.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...I.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...I.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...I.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...I.errToObj(t)})}nonempty(e){return this.min(1,I.errToObj(e))}trim(){return new Ne({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ne({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ne({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ne.create=n=>new Ne({checks:[],typeName:N.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...j(n)});function po(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,a=Number.parseInt(n.toFixed(s).replace(".","")),i=Number.parseInt(e.toFixed(s).replace(".",""));return a%i/10**s}class mt extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==k.number){const a=this._getOrReturnCtx(e);return S(a,{code:v.invalid_type,expected:k.number,received:a.parsedType}),O}let r;const s=new oe;for(const a of this._def.checks)a.kind==="int"?U.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),S(r,{code:v.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),S(r,{code:v.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),S(r,{code:v.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?po(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),S(r,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),S(r,{code:v.not_finite,message:a.message}),s.dirty()):U.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,I.toString(t))}gt(e,t){return this.setLimit("min",e,!1,I.toString(t))}lte(e,t){return this.setLimit("max",e,!0,I.toString(t))}lt(e,t){return this.setLimit("max",e,!1,I.toString(t))}setLimit(e,t,r,s){return new mt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:I.toString(s)}]})}_addCheck(e){return new mt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:I.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:I.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:I.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:I.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:I.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&U.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}mt.create=n=>new mt({checks:[],typeName:N.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...j(n)});class Zt extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==k.bigint)return this._getInvalidInput(e);let r;const s=new oe;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),S(r,{code:v.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),S(r,{code:v.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),S(r,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):U.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return S(t,{code:v.invalid_type,expected:k.bigint,received:t.parsedType}),O}gte(e,t){return this.setLimit("min",e,!0,I.toString(t))}gt(e,t){return this.setLimit("min",e,!1,I.toString(t))}lte(e,t){return this.setLimit("max",e,!0,I.toString(t))}lt(e,t){return this.setLimit("max",e,!1,I.toString(t))}setLimit(e,t,r,s){return new Zt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:I.toString(s)}]})}_addCheck(e){return new Zt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:I.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Zt.create=n=>new Zt({checks:[],typeName:N.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...j(n)});class rr extends ${_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==k.boolean){const r=this._getOrReturnCtx(e);return S(r,{code:v.invalid_type,expected:k.boolean,received:r.parsedType}),O}return _e(e.data)}}rr.create=n=>new rr({typeName:N.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...j(n)});class Sn extends ${_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==k.date){const a=this._getOrReturnCtx(e);return S(a,{code:v.invalid_type,expected:k.date,received:a.parsedType}),O}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return S(a,{code:v.invalid_date}),O}const r=new oe;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),S(s,{code:v.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),S(s,{code:v.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):U.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Sn({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:I.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:I.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Sn.create=n=>new Sn({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:N.ZodDate,...j(n)});class vs extends ${_parse(e){if(this._getType(e)!==k.symbol){const r=this._getOrReturnCtx(e);return S(r,{code:v.invalid_type,expected:k.symbol,received:r.parsedType}),O}return _e(e.data)}}vs.create=n=>new vs({typeName:N.ZodSymbol,...j(n)});class sr extends ${_parse(e){if(this._getType(e)!==k.undefined){const r=this._getOrReturnCtx(e);return S(r,{code:v.invalid_type,expected:k.undefined,received:r.parsedType}),O}return _e(e.data)}}sr.create=n=>new sr({typeName:N.ZodUndefined,...j(n)});class ar extends ${_parse(e){if(this._getType(e)!==k.null){const r=this._getOrReturnCtx(e);return S(r,{code:v.invalid_type,expected:k.null,received:r.parsedType}),O}return _e(e.data)}}ar.create=n=>new ar({typeName:N.ZodNull,...j(n)});class ir extends ${constructor(){super(...arguments),this._any=!0}_parse(e){return _e(e.data)}}ir.create=n=>new ir({typeName:N.ZodAny,...j(n)});class ws extends ${constructor(){super(...arguments),this._unknown=!0}_parse(e){return _e(e.data)}}ws.create=n=>new ws({typeName:N.ZodUnknown,...j(n)});class Fe extends ${_parse(e){const t=this._getOrReturnCtx(e);return S(t,{code:v.invalid_type,expected:k.never,received:t.parsedType}),O}}Fe.create=n=>new Fe({typeName:N.ZodNever,...j(n)});class bs extends ${_parse(e){if(this._getType(e)!==k.undefined){const r=this._getOrReturnCtx(e);return S(r,{code:v.invalid_type,expected:k.void,received:r.parsedType}),O}return _e(e.data)}}bs.create=n=>new bs({typeName:N.ZodVoid,...j(n)});class Te extends ${_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==k.array)return S(t,{code:v.invalid_type,expected:k.array,received:t.parsedType}),O;if(s.exactLength!==null){const i=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(i||o)&&(S(t,{code:i?v.too_big:v.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(S(t,{code:v.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(S(t,{code:v.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>s.type._parseAsync(new Se(t,i,t.path,o)))).then(i=>oe.mergeArray(r,i));const a=[...t.data].map((i,o)=>s.type._parseSync(new Se(t,i,t.path,o)));return oe.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new Te({...this._def,minLength:{value:e,message:I.toString(t)}})}max(e,t){return new Te({...this._def,maxLength:{value:e,message:I.toString(t)}})}length(e,t){return new Te({...this._def,exactLength:{value:e,message:I.toString(t)}})}nonempty(e){return this.min(1,e)}}Te.create=(n,e)=>new Te({type:n,minLength:null,maxLength:null,exactLength:null,typeName:N.ZodArray,...j(e)});function gt(n){if(n instanceof Q){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=De.create(gt(r))}return new Q({...n._def,shape:()=>e})}else return n instanceof Te?new Te({...n._def,type:gt(n.element)}):n instanceof De?De.create(gt(n.unwrap())):n instanceof Ke?Ke.create(gt(n.unwrap())):n instanceof Ye?Ye.create(n.items.map(e=>gt(e))):n}class Q extends ${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=U.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==k.object){const l=this._getOrReturnCtx(e);return S(l,{code:v.invalid_type,expected:k.object,received:l.parsedType}),O}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Fe&&this._def.unknownKeys==="strip"))for(const l in s.data)i.includes(l)||o.push(l);const c=[];for(const l of i){const p=a[l],f=s.data[l];c.push({key:{status:"valid",value:l},value:p._parse(new Se(s,f,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Fe){const l=this._def.unknownKeys;if(l==="passthrough")for(const p of o)c.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(l==="strict")o.length>0&&(S(s,{code:v.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const p of o){const f=s.data[p];c.push({key:{status:"valid",value:p},value:l._parse(new Se(s,f,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const p of c){const f=await p.key,h=await p.value;l.push({key:f,value:h,alwaysSet:p.alwaysSet})}return l}).then(l=>oe.mergeObjectSync(r,l)):oe.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return I.errToObj,new Q({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,i;const s=((i=(a=this._def).errorMap)==null?void 0:i.call(a,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:I.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Q({...this._def,unknownKeys:"strip"})}passthrough(){return new Q({...this._def,unknownKeys:"passthrough"})}extend(e){return new Q({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Q({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:N.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Q({...this._def,catchall:e})}pick(e){const t={};for(const r of U.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Q({...this._def,shape:()=>t})}omit(e){const t={};for(const r of U.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Q({...this._def,shape:()=>t})}deepPartial(){return gt(this)}partial(e){const t={};for(const r of U.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new Q({...this._def,shape:()=>t})}required(e){const t={};for(const r of U.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof De;)a=a._def.innerType;t[r]=a}return new Q({...this._def,shape:()=>t})}keyof(){return Ss(U.objectKeys(this.shape))}}Q.create=(n,e)=>new Q({shape:()=>n,unknownKeys:"strip",catchall:Fe.create(),typeName:N.ZodObject,...j(e)}),Q.strictCreate=(n,e)=>new Q({shape:()=>n,unknownKeys:"strict",catchall:Fe.create(),typeName:N.ZodObject,...j(e)}),Q.lazycreate=(n,e)=>new Q({shape:n,unknownKeys:"strip",catchall:Fe.create(),typeName:N.ZodObject,...j(e)});class Tn extends ${_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new Oe(o.ctx.common.issues));return S(t,{code:v.invalid_union,unionErrors:i}),O}if(t.common.async)return Promise.all(r.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const c of r){const l={...t,common:{...t.common,issues:[]},parent:null},p=c._parseSync({data:t.data,path:t.path,parent:l});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(c=>new Oe(c));return S(t,{code:v.invalid_union,unionErrors:o}),O}}get options(){return this._def.options}}Tn.create=(n,e)=>new Tn({options:n,typeName:N.ZodUnion,...j(e)});const Re=n=>n instanceof An?Re(n.schema):n instanceof Qe?Re(n.innerType()):n instanceof Cn?[n.value]:n instanceof Xe?n.options:n instanceof cr?U.objectValues(n.enum):n instanceof On?Re(n._def.innerType):n instanceof sr?[void 0]:n instanceof ar?[null]:n instanceof De?[void 0,...Re(n.unwrap())]:n instanceof Ke?[null,...Re(n.unwrap())]:n instanceof ks||n instanceof Rn?Re(n.unwrap()):n instanceof Nn?Re(n._def.innerType):[];class or extends ${_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==k.object)return S(t,{code:v.invalid_type,expected:k.object,received:t.parsedType}),O;const r=this.discriminator,s=t.data[r],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(S(t,{code:v.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),O)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const a of t){const i=Re(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,a)}}return new or({typeName:N.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...j(r)})}}function ur(n,e){const t=Le(n),r=Le(e);if(n===e)return{valid:!0,data:n};if(t===k.object&&r===k.object){const s=U.objectKeys(e),a=U.objectKeys(n).filter(o=>s.indexOf(o)!==-1),i={...n,...e};for(const o of a){const c=ur(n[o],e[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(t===k.array&&r===k.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<n.length;a++){const i=n[a],o=e[a],c=ur(i,o);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===k.date&&r===k.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class kn extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(a,i)=>{if(hs(a)||hs(i))return O;const o=ur(a.value,i.value);return o.valid?((ms(a)||ms(i))&&t.dirty(),{status:t.value,value:o.data}):(S(r,{code:v.invalid_intersection_types}),O)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}kn.create=(n,e,t)=>new kn({left:n,right:e,typeName:N.ZodIntersection,...j(t)});class Ye extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==k.array)return S(r,{code:v.invalid_type,expected:k.array,received:r.parsedType}),O;if(r.data.length<this._def.items.length)return S(r,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),O;!this._def.rest&&r.data.length>this._def.items.length&&(S(r,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((i,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Se(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(a).then(i=>oe.mergeArray(t,i)):oe.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Ye({...this._def,rest:e})}}Ye.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ye({items:n,typeName:N.ZodTuple,rest:null,...j(e)})};class In extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==k.object)return S(r,{code:v.invalid_type,expected:k.object,received:r.parsedType}),O;const s=[],a=this._def.keyType,i=this._def.valueType;for(const o in r.data)s.push({key:a._parse(new Se(r,o,r.path,o)),value:i._parse(new Se(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?oe.mergeObjectAsync(t,s):oe.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof $?new In({keyType:e,valueType:t,typeName:N.ZodRecord,...j(r)}):new In({keyType:Ne.create(),valueType:e,typeName:N.ZodRecord,...j(t)})}}class xs extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==k.map)return S(r,{code:v.invalid_type,expected:k.map,received:r.parsedType}),O;const s=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([o,c],l)=>({key:s._parse(new Se(r,o,r.path,[l,"key"])),value:a._parse(new Se(r,c,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of i){const l=await c.key,p=await c.value;if(l.status==="aborted"||p.status==="aborted")return O;(l.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(l.value,p.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of i){const l=c.key,p=c.value;if(l.status==="aborted"||p.status==="aborted")return O;(l.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(l.value,p.value)}return{status:t.value,value:o}}}}xs.create=(n,e,t)=>new xs({valueType:e,keyType:n,typeName:N.ZodMap,...j(t)});class $t extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==k.set)return S(r,{code:v.invalid_type,expected:k.set,received:r.parsedType}),O;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(S(r,{code:v.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(S(r,{code:v.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function i(c){const l=new Set;for(const p of c){if(p.status==="aborted")return O;p.status==="dirty"&&t.dirty(),l.add(p.value)}return{status:t.value,value:l}}const o=[...r.data.values()].map((c,l)=>a._parse(new Se(r,c,r.path,l)));return r.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(e,t){return new $t({...this._def,minSize:{value:e,message:I.toString(t)}})}max(e,t){return new $t({...this._def,maxSize:{value:e,message:I.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}$t.create=(n,e)=>new $t({valueType:n,minSize:null,maxSize:null,typeName:N.ZodSet,...j(e)});class An extends ${get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}An.create=(n,e)=>new An({getter:n,typeName:N.ZodLazy,...j(e)});class Cn extends ${_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return S(t,{received:t.data,code:v.invalid_literal,expected:this._def.value}),O}return{status:"valid",value:e.data}}get value(){return this._def.value}}Cn.create=(n,e)=>new Cn({value:n,typeName:N.ZodLiteral,...j(e)});function Ss(n,e){return new Xe({values:n,typeName:N.ZodEnum,...j(e)})}class Xe extends ${_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return S(t,{expected:U.joinValues(r),received:t.parsedType,code:v.invalid_type}),O}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return S(t,{received:t.data,code:v.invalid_enum_value,options:r}),O}return _e(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Xe.create(e,{...this._def,...t})}exclude(e,t=this._def){return Xe.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Xe.create=Ss;class cr extends ${_parse(e){const t=U.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==k.string&&r.parsedType!==k.number){const s=U.objectValues(t);return S(r,{expected:U.joinValues(s),received:r.parsedType,code:v.invalid_type}),O}if(this._cache||(this._cache=new Set(U.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=U.objectValues(t);return S(r,{received:r.data,code:v.invalid_enum_value,options:s}),O}return _e(e.data)}get enum(){return this._def.values}}cr.create=(n,e)=>new cr({values:n,typeName:N.ZodNativeEnum,...j(e)});class En extends ${unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==k.promise&&t.common.async===!1)return S(t,{code:v.invalid_type,expected:k.promise,received:t.parsedType}),O;const r=t.parsedType===k.promise?t.data:Promise.resolve(t.data);return _e(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}En.create=(n,e)=>new En({type:n,typeName:N.ZodPromise,...j(e)});class Qe extends ${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===N.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:i=>{S(r,i),i.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(r.data,a);if(r.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return O;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?O:c.status==="dirty"||t.value==="dirty"?Mt(c.value):c});{if(t.value==="aborted")return O;const o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?O:o.status==="dirty"||t.value==="dirty"?Mt(o.value):o}}if(s.type==="refinement"){const i=o=>{const c=s.refinement(o,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?O:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?O:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ht(i))return O;const o=s.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>ht(i)?Promise.resolve(s.transform(i.value,a)).then(o=>({status:t.value,value:o})):O);U.assertNever(s)}}Qe.create=(n,e,t)=>new Qe({schema:n,typeName:N.ZodEffects,effect:e,...j(t)}),Qe.createWithPreprocess=(n,e,t)=>new Qe({schema:e,effect:{type:"preprocess",transform:n},typeName:N.ZodEffects,...j(t)});class De extends ${_parse(e){return this._getType(e)===k.undefined?_e(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}De.create=(n,e)=>new De({innerType:n,typeName:N.ZodOptional,...j(e)});class Ke extends ${_parse(e){return this._getType(e)===k.null?_e(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ke.create=(n,e)=>new Ke({innerType:n,typeName:N.ZodNullable,...j(e)});class On extends ${_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===k.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}On.create=(n,e)=>new On({innerType:n,typeName:N.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...j(e)});class Nn extends ${_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return xn(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Oe(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Oe(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Nn.create=(n,e)=>new Nn({innerType:n,typeName:N.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...j(e)});class Ts extends ${_parse(e){if(this._getType(e)!==k.nan){const r=this._getOrReturnCtx(e);return S(r,{code:v.invalid_type,expected:k.nan,received:r.parsedType}),O}return{status:"valid",value:e.data}}}Ts.create=n=>new Ts({typeName:N.ZodNaN,...j(n)});class ks extends ${_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class dr extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?O:a.status==="dirty"?(t.dirty(),Mt(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?O:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new dr({in:e,out:t,typeName:N.ZodPipeline})}}class Rn extends ${_parse(e){const t=this._def.innerType._parse(e),r=s=>(ht(s)&&(s.value=Object.freeze(s.value)),s);return xn(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}Rn.create=(n,e)=>new Rn({innerType:n,typeName:N.ZodReadonly,...j(e)});var N;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(N||(N={}));const d=Ne.create,A=mt.create,Lt=rr.create,F=ir.create;Fe.create;const q=Te.create,g=Q.create,Is=Tn.create,le=or.create;kn.create,Ye.create;const ee=In.create,fo=An.create,m=Cn.create,ue=Xe.create;En.create,De.create,Ke.create,g({name:d(),description:d().optional(),inputSchema:g({type:m("object"),properties:ee(d(),F()),required:q(d()),additionalProperties:Lt()})});async function ho(n,e=!1){const t=[],r=new Set;for(const s of n){const a=await mo(s,e),o=[...new Set(a.map(c=>c.name))].filter(c=>r.has(c));if(o.length>0)throw new K(`Duplicate tool names found across MCP servers: ${o.join(", ")}`);for(const c of a)r.add(c.name),t.push(c)}return t}const lr={};async function mo(n,e){return n.cacheToolsList&&lr[n.name]?lr[n.name].map(t=>As(t,n,e)):Uo(async t=>{const r=await n.listTools();t.spanData.result=r.map(a=>a.name);const s=r.map(a=>As(a,n,e));return n.cacheToolsList&&(lr[n.name]=r),s},{data:{server:n.name}})}async function go(n,e=!1){return ho(n,e)}function As(n,e,t){var i,o,c,l;async function r(p,f){let h={};typeof p=="string"&&p?h=JSON.parse(p):typeof p=="object"&&p!=null&&(h=p);const x=Ut();x&&(x.spanData.mcp_data={server:e.name});const b=await e.callTool(n.name,h);return b.length===1?b[0]:b}const s={type:((i=n.inputSchema)==null?void 0:i.type)??"object",properties:((o=n.inputSchema)==null?void 0:o.properties)??{},required:((c=n.inputSchema)==null?void 0:c.required)??[],additionalProperties:((l=n.inputSchema)==null?void 0:l.additionalProperties)??!1};if(t||s.additionalProperties===!0)try{const p=_o(s);return bn({name:n.name,description:n.description||"",parameters:p,strict:!0,execute:r})}catch(p){C.warn(`Error converting MCP schema to strict mode: ${p}`)}const a={...s,additionalProperties:!0};return bn({name:n.name,description:n.description||"",parameters:a,strict:!1,execute:r})}function _o(n){const e={...n,additionalProperties:!1};return e.required||(e.required=[]),e}function yo(){return{}}class Dn{constructor(){T(this,wt,new EventTarget)}on(e,t){return u(this,wt).addEventListener(e,r=>t(...r.detail??[])),this}off(e,t){return u(this,wt).removeEventListener(e,r=>t(...r.detail??[])),this}emit(e,...t){const r=new CustomEvent(e,{detail:t});return u(this,wt).dispatchEvent(r)}once(e,t){const r=(...s)=>{this.off(e,r),t(...s)};return this.on(e,r),this}}wt=new WeakMap;const Cs=crypto.randomUUID.bind(crypto),vo=class{constructor(){}pipeTo(e,t){}pipeThrough(e,t){}},wo=globalThis.ReadableStream,bo=globalThis.TransformStream;class xo{constructor(){_(this,"context",null)}run(e,t){return this.context=e,t()}getStore(){return this.context}enterWith(e){this.context=e}}class So{constructor(){}setTimeout(e,t){const r=setTimeout(e,t);return r.ref=typeof r.ref=="function"?r.ref:()=>r,r.unref=typeof r.unref=="function"?r.unref:()=>r,r.hasRef=typeof r.hasRef=="function"?r.hasRef:()=>!0,r.refresh=typeof r.refresh=="function"?r.refresh:()=>r,r}clearTimeout(e){window.clearTimeout(e)}}const To=new So;let Es;function ke(){return Es??(Es=new xo),Es}function Ft(){const n=ke().getStore();return n!=null&&n.trace?n.trace:null}function Ut(){const n=ke().getStore();return n!=null&&n.span?n.span:null}function Os(n){return async()=>{const e=Ft();if(!e)throw new Error("No trace found");await e.start();const t=await n(e);return await e.end(),t}}async function ko(n,e,t={}){const r=typeof n=="string"?Ie().createTrace({...t,name:n}):n;return ke().run({trace:r},Os(e))}async function Io(n,e={}){if(Ft())return await n();const r=Ie().createTrace(e);return ke().run({trace:r},Os(n))}function Pn(n){const e=ke().getStore();if(!e)throw new Error("No existing trace found");e.span&&(e.span.previousSpan=e.previousSpan,e.previousSpan=e.span),e.span=n,ke().enterWith(e)}function Jt(){var e;const n=ke().getStore();n&&(n.span=n.previousSpan,n.previousSpan=(e=n.previousSpan)==null?void 0:e.previousSpan,ke().enterWith(n))}function _t(n){const e=Ut();e&&e.setError(n)}function Ao(n){var e,t,r;return{trace:(e=n.trace)==null?void 0:e.clone(),span:(t=n.span)==null?void 0:t.clone(),previousSpan:(r=n.previousSpan)==null?void 0:r.clone()}}function pr(n){const e=ke().getStore();if(!e)throw new Error("No existing trace found");const t=Ao(e);return ke().run(t,n)}class Co{async export(e){if(ds.disabled){C.debug("Tracing is disabled. Skipping export");return}for(const t of e)t.type==="trace"?console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}`):console.log(`[Exporter] Export span: ${JSON.stringify(t)}`)}}class Eo{constructor(e,{maxQueueSize:t=1e3,maxBatchSize:r=100,scheduleDelay:s=5e3,exportTriggerRatio:a=.8}={}){T(this,ce);T(this,Ht);T(this,bt);T(this,Yt);T(this,Xt);T(this,xt);T(this,ae,[]);T(this,je);T(this,Je,null);T(this,Be,!1);T(this,St,null);y(this,Ht,t),y(this,bt,r),y(this,Yt,s),y(this,Xt,t*a),y(this,xt,e),y(this,je,To),C.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.")}start(){y(this,St,new AbortController),L(this,ce,Mr).call(this)}async onTraceStart(e){await L(this,ce,jr).call(this,e)}async onTraceEnd(e){}async onSpanStart(e){}async onSpanEnd(e){await L(this,ce,jr).call(this,e)}async shutdown(e){var t;for(e&&u(this,je).setTimeout(()=>{var r;(r=u(this,St))==null||r.abort()},e),C.debug("Shutting down gracefully");u(this,ae).length>0;){if(C.debug(`Waiting for buffer to empty. Items left: ${u(this,ae).length}`),u(this,Be)||await L(this,ce,Dt).call(this,!0),(t=u(this,St))!=null&&t.signal.aborted){C.debug("Timeout reached, force flushing"),await L(this,ce,Dt).call(this,!0);break}await new Promise(r=>u(this,je).setTimeout(r,500))}C.debug("Buffer empty. Exiting"),u(this,je)&&u(this,Je)&&u(this,je).clearTimeout(u(this,Je))}async forceFlush(){u(this,ae).length>0&&await L(this,ce,Dt).call(this,!0)}}Ht=new WeakMap,bt=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,xt=new WeakMap,ae=new WeakMap,je=new WeakMap,Je=new WeakMap,Be=new WeakMap,St=new WeakMap,ce=new WeakSet,jr=async function(e){if(u(this,ae).length+1>u(this,Ht)){C.error("Dropping trace because buffer is full");return}u(this,ae).push(e),u(this,ae).length>u(this,Xt)&&await L(this,ce,Dt).call(this)},Mr=function(){y(this,Je,u(this,je).setTimeout(async()=>{await L(this,ce,Dt).call(this),L(this,ce,Mr).call(this)},u(this,Yt))),typeof u(this,Je).unref=="function"&&u(this,Je).unref()},Dt=async function(e=!1){if(u(this,ae).length!==0){if(C.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this,ae).length}`),e||u(this,ae).length<u(this,bt)){const t=[...u(this,ae)];y(this,ae,[]),y(this,Be,!0),await u(this,xt).export(t),y(this,Be,!1)}else if(u(this,ae).length>0){const t=u(this,ae).splice(0,u(this,bt));y(this,Be,!0),await u(this,xt).export(t),y(this,Be,!1)}}};class Oo{constructor(){T(this,pe,[])}start(){for(const e of u(this,pe))e.start&&e.start()}addTraceProcessor(e){u(this,pe).push(e)}setProcessors(e){C.debug("Shutting down old processors");for(const t of u(this,pe))t.shutdown();y(this,pe,e)}async onTraceStart(e){for(const t of u(this,pe))await t.onTraceStart(e)}async onTraceEnd(e){for(const t of u(this,pe))await t.onTraceEnd(e)}async onSpanStart(e){for(const t of u(this,pe))await t.onSpanStart(e)}async onSpanEnd(e){for(const t of u(this,pe))await t.onSpanEnd(e)}async shutdown(e){for(const t of u(this,pe))await t.shutdown(e)}async forceFlush(){for(const e of u(this,pe))await e.forceFlush()}}pe=new WeakMap;let fr=null,hr=null;function No(){return fr||(fr=new Co),fr}function Ns(){return hr||(hr=new Eo(No())),hr}function Rs(){return new Date().toISOString()}function Ds(){return`trace_${Cs().replace(/-/g,"")}`}function Ro(){return`span_${Cs().replace(/-/g,"").slice(0,24)}`}function Do(n){return Object.fromEntries(Object.entries(n).filter(([e])=>!e.startsWith("_")))}const Or=class Or{constructor(e,t){_(this,"type","trace.span");T(this,Qt);T(this,Kt);T(this,en);T(this,tn);T(this,at);T(this,qe);T(this,Ge);T(this,it);T(this,nn);y(this,Kt,e.traceId),y(this,en,e.spanId??Ro()),y(this,Qt,e.data),y(this,at,t),y(this,tn,e.parentId??null),y(this,it,e.error??null),y(this,qe,e.startedAt??null),y(this,Ge,e.endedAt??null)}get traceId(){return u(this,Kt)}get spanData(){return u(this,Qt)}get spanId(){return u(this,en)}get parentId(){return u(this,tn)}get previousSpan(){return u(this,nn)}set previousSpan(e){y(this,nn,e)}start(){if(u(this,qe)){C.warn("Span already started");return}y(this,qe,Rs()),u(this,at).onSpanStart(this)}end(){if(u(this,Ge)){C.debug("Span already finished",this.spanData);return}y(this,Ge,Rs()),u(this,at).onSpanEnd(this)}setError(e){y(this,it,e)}get error(){return u(this,it)}get startedAt(){return u(this,qe)}get endedAt(){return u(this,Ge)}clone(){var t;const e=new Or({traceId:this.traceId,spanId:this.spanId,parentId:this.parentId??void 0,data:this.spanData,startedAt:u(this,qe)??void 0,endedAt:u(this,Ge)??void 0,error:u(this,it)??void 0},u(this,at));return e.previousSpan=(t=this.previousSpan)==null?void 0:t.clone(),e}toJSON(){return{object:this.type,id:this.spanId,trace_id:this.traceId,parent_id:this.parentId,started_at:this.startedAt,ended_at:this.endedAt,span_data:Do(this.spanData),error:this.error}}};Qt=new WeakMap,Kt=new WeakMap,en=new WeakMap,tn=new WeakMap,at=new WeakMap,qe=new WeakMap,Ge=new WeakMap,it=new WeakMap,nn=new WeakMap;let Bt=Or;class Ue extends Bt{constructor(e,t){super({traceId:"no-op",spanId:"no-op",data:e},t)}start(){}end(){}setError(){}toJSON(){return null}}const Nr=class Nr{constructor(e,t){_(this,"type","trace");_(this,"traceId");_(this,"name");_(this,"groupId",null);_(this,"metadata");T(this,Tt);T(this,Me);this.traceId=e.traceId??Ds(),this.name=e.name??"Agent workflow",this.groupId=e.groupId??null,this.metadata=e.metadata??{},y(this,Tt,t??Ns()),y(this,Me,e.started??!1)}async start(){u(this,Me)||(y(this,Me,!0),await u(this,Tt).onTraceStart(this))}async end(){u(this,Me)&&(y(this,Me,!1),await u(this,Tt).onTraceEnd(this))}clone(){return new Nr({traceId:this.traceId,name:this.name,groupId:this.groupId??void 0,metadata:this.metadata,started:u(this,Me)})}toJSON(){return{object:this.type,id:this.traceId,workflow_name:this.name,group_id:this.groupId,metadata:this.metadata}}};Tt=new WeakMap,Me=new WeakMap;let qt=Nr;class mr extends qt{constructor(){super({})}async start(){}async end(){}toJSON(){return null}}class Po{constructor(){T(this,qn);T(this,se);T(this,ot);y(this,se,new Oo),y(this,ot,ds.disabled),L(this,qn,Ca).call(this)}registerProcessor(e){u(this,se).addTraceProcessor(e)}setProcessors(e){u(this,se).setProcessors(e)}getCurrentTrace(){return Ft()}getCurrentSpan(){return Ut()}setDisabled(e){y(this,ot,e)}startExportLoop(){u(this,se).start()}createTrace(e){if(u(this,ot))return C.debug("Tracing is disabled, Not creating trace %o",e),new mr;const t=e.traceId??Ds(),r=e.name??"Agent workflow";return C.debug("Creating trace %s with name %s",t,r),new qt({...e,name:r,traceId:t},u(this,se))}createSpan(e,t){if(u(this,ot)||e.disabled)return C.debug("Tracing is disabled, Not creating span %o",e),new Ue(e.data,u(this,se));let r,s;if(t){if(t instanceof qt){if(t instanceof mr)return C.debug("Parent trace is no-op, returning NoopSpan"),new Ue(e.data,u(this,se));s=t.traceId}else if(t instanceof Bt){if(t instanceof Ue)return C.debug("Parent span is no-op, returning NoopSpan"),new Ue(e.data,u(this,se));r=t.spanId,s=t.traceId}}else{const a=Ft(),i=Ut();if(!a)return C.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new Ue(e.data,u(this,se));if(i instanceof Ue||a instanceof mr)return C.debug(`Parent ${i} or ${a} is no-op, returning NoopSpan`),new Ue(e.data,u(this,se));s=a.traceId,i?(C.debug("Using parent span %s",i.spanId),r=i.spanId):C.debug("No parent span, using current trace %s",a.traceId)}return s?(C.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId??s}`),new Bt({...e,traceId:s,parentId:r},u(this,se))):(C.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new Ue(e.data,u(this,se)))}async shutdown(e){try{C.debug("Shutting down tracing provider"),await u(this,se).shutdown(e)}catch(t){C.error("Error shutting down tracing provider %o",t)}}async forceFlush(){await u(this,se).forceFlush()}}se=new WeakMap,ot=new WeakMap,qn=new WeakSet,Ca=function(){if(typeof process<"u"&&typeof process.on=="function"){const e=async()=>{const t=setTimeout(()=>{console.warn("Cleanup timeout, forcing exit"),process.exit(1)},5e3);try{await this.shutdown()}finally{clearTimeout(t)}};process.on("beforeExit",e),process.on("SIGINT",async()=>{await e(),Ps("SIGINT")||process.exit(130)}),process.on("SIGTERM",async()=>{await e(),Ps("SIGTERM")||process.exit(0)}),process.on("unhandledRejection",async(t,r)=>{C.error("Unhandled rejection",t,r),await e(),jo("unhandledRejection")||process.exit(1)})}};function Ps(n){return process.listeners(n).length>1}function jo(n){return process.listeners(n).length>1}let gr;function Ie(){return gr||(gr=new Po),gr}function jn(n){return async(e,...t)=>pr(async()=>{const r=n(...t);Pn(r);try{return r.start(),await e(r)}catch(s){throw r.setError({message:s.message,data:s.data}),s}finally{r.end(),Jt()}})}function js(n,e){var t;return Ie().createSpan({...n,data:{type:"agent",name:((t=n==null?void 0:n.data)==null?void 0:t.name)??"Agent",...n==null?void 0:n.data}},e)}function Mo(n,e){var t,r;return Ie().createSpan({...n,data:{type:"function",input:((t=n==null?void 0:n.data)==null?void 0:t.input)??"",output:((r=n==null?void 0:n.data)==null?void 0:r.output)??"",...n==null?void 0:n.data}},e)}const Ms=jn(Mo);function Zo(n,e){return Ie().createSpan({...n,data:{type:"handoff",...n==null?void 0:n.data}},e)}const $o=jn(Zo);function Lo(n,e){return Ie().createSpan({...n,data:{type:"guardrail",triggered:!1,...n==null?void 0:n.data}},e)}const Zs=jn(Lo);function Fo(n,e){return Ie().createSpan({...n,data:{type:"mcp_tools",...n==null?void 0:n.data}},e)}const Uo=jn(Fo);function Jo(n){Ie().registerProcessor(n)}class _r{on(e,t){return this.eventEmitter.on(e,t),this.eventEmitter}off(e,t){return this.eventEmitter.off(e,t),this.eventEmitter}emit(e,...t){return this.eventEmitter.emit(e,...t)}once(e,t){return this.eventEmitter.once(e,t),this.eventEmitter}}class Bo extends _r{constructor(){super(...arguments);_(this,"eventEmitter",new Dn)}}class qo extends _r{constructor(){super(...arguments);_(this,"eventEmitter",new Dn)}}function $s({name:n,execute:e}){return{type:"input",name:n,guardrailFunction:e,async run(t){return{guardrail:{type:"input",name:n},output:await e(t)}}}}function yr({name:n,execute:e}){return{type:"output",name:n,guardrailFunction:e,async run(t){return{guardrail:{type:"output",name:n},agent:t.agent,agentOutput:t.agentOutput,output:await e(t)}}}}function Ls(n){return JSON.stringify({assistant:n.name})}function Go(n){return`transfer_to_${vn(n.name)}`}function Vo(n){return`Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription??""}`}class Fs{constructor(e,t){_(this,"toolName");_(this,"toolDescription");_(this,"inputJsonSchema",{type:"object",properties:{},required:[],additionalProperties:!1});_(this,"strictJsonSchema",!0);_(this,"onInvokeHandoff");_(this,"agentName");_(this,"inputFilter");_(this,"agent");this.agentName=e.name,this.onInvokeHandoff=t,this.toolName=Go(e),this.toolDescription=Vo(e),this.agent=e}getHandoffAsFunctionTool(){return{type:"function",name:this.toolName,description:this.toolDescription,parameters:this.inputJsonSchema,strict:this.strictJsonSchema}}}function Us(n,e={}){let t;const r=!!e.onHandoff,s=!!e.inputType;if(!(r===s))throw new K("You must provide either both `onHandoff` and `inputType` or neither.");async function i(c,l){var p;if(t){if(!l)throw _t({message:`Handoff function expected non empty input but got: ${l}`,data:{details:"input is empty"}}),new de("Handoff function expected non empty input");try{const f=await t(l);e.onHandoff&&await e.onHandoff(c,f)}catch(f){throw _t({message:"Invalid JSON provided",data:{}}),C.dontLogToolData||C.error(`Invalid JSON when parsing: ${l}. Error: ${f}`),new de("Invalid JSON provided")}}else await((p=e.onHandoff)==null?void 0:p.call(e,c));return n}const o=new Fs(n,i);if(e.inputType){const c=Qn(e.inputType,o.toolName);o.inputJsonSchema=c.schema,o.strictJsonSchema=!0,t=c.parser}return e.toolNameOverride&&(o.toolName=e.toolNameOverride),e.toolDescriptionOverride&&(o.toolDescription=e.toolDescriptionOverride),e.inputFilter&&(o.inputFilter=e.inputFilter),o}function Mn(n){return n instanceof Fs?n:Us(n)}function zo(){throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.")}const re=g({providerData:ee(d(),F()).optional()}),et=re.extend({id:d().optional()}),Wo=re.extend({type:m("refusal"),refusal:d()}),Ho=re.extend({type:m("output_text"),text:d()}),vr=re.extend({type:m("input_text"),text:d()}),Yo=re.extend({type:m("input_image"),image:d().or(g({id:d()})).describe("Could be a URL, base64 or an object with a file ID.")}),Xo=re.extend({type:m("input_file"),file:d().describe("Either base64 encoded file data or a publicly accessible file URL").or(g({id:d().describe("OpenAI file ID")})).or(g({url:d().describe("Publicly accessible PDF file URL")})).describe("Contents of the file or an object with a file ID.")}),Js=re.extend({type:m("audio"),audio:d().or(g({id:d()})).describe("Base64 encoded audio data or file id"),format:d().nullable().optional(),transcript:d().nullable().optional()}),Qo=re.extend({type:m("image"),image:d().describe("Base64 encoded image data")}),Ko=re.extend({type:m("text"),text:d()}),eu=re.extend({type:m("image"),data:d().describe("Base64 encoded image data"),mediaType:d().describe("IANA media type of the image")}),tu=re.extend({type:m("computer_screenshot"),data:d().describe("Base64 encoded image data or URL")}),nu=le("type",[g({type:m("screenshot")}),g({type:m("click"),x:A(),y:A(),button:ue(["left","right","wheel","back","forward"])}),g({type:m("double_click"),x:A(),y:A()}),g({type:m("scroll"),x:A(),y:A(),scroll_x:A(),scroll_y:A()}),g({type:m("type"),text:d()}),g({type:m("wait")}),g({type:m("move"),x:A(),y:A()}),g({type:m("keypress"),keys:q(d())}),g({type:m("drag"),path:q(g({x:A(),y:A()}))})]),ru=le("type",[Ho,Wo,vr,Js,Qo]),wr=et.extend({type:m("message").optional()}),Zn=wr.extend({role:m("assistant"),status:ue(["in_progress","completed","incomplete"]),content:q(ru)}),su=le("type",[vr,Yo,Xo,Js]),Bs=wr.extend({role:m("user"),content:q(su).or(d())}),qs=wr.extend({role:m("system"),content:d()});le("role",[qs,Zn,Bs]);const Gt=et.extend({type:m("hosted_tool_call"),name:d().describe("The name of the hosted tool"),arguments:d().describe("The arguments of the hosted tool call").optional(),status:d().optional(),output:d().optional()}),Vt=et.extend({type:m("function_call"),callId:d().describe("The ID of the tool call"),name:d().describe("The name of the function"),status:ue(["in_progress","completed","incomplete"]).optional(),arguments:d()}),br=et.extend({type:m("function_call_result"),name:d().describe("The name of the tool"),callId:d().describe("The ID of the tool call"),status:ue(["in_progress","completed","incomplete"]),output:le("type",[Ko,eu])}),xr=et.extend({type:m("computer_call"),callId:d().describe("The ID of the computer call"),status:ue(["in_progress","completed","incomplete"]),action:nu}),au=et.extend({type:m("computer_call_result"),callId:d().describe("The ID of the computer call"),output:tu}),iu=le("type",[xr,Vt,Gt]),Sr=re.extend({id:d().optional(),type:m("reasoning"),content:q(vr)}),Gs=et.extend({type:m("unknown")}),Tr=le("type",[Zn,Gt,Vt,xr,Sr,Gs]),ou=Is([Bs,Zn,qs,Gt,Vt,xr,br,au,Sr,Gs]),uu=g({requests:A().optional(),inputTokens:A(),outputTokens:A(),totalTokens:A(),inputTokensDetails:ee(d(),A()).optional(),outputTokensDetails:ee(d(),A()).optional()}),Vs=re.extend({type:m("output_text_delta"),delta:d()}),cu=re.extend({type:m("response_started")}),zs=re.extend({type:m("response_done"),response:re.extend({id:d(),usage:uu,output:q(Tr)})}),du=re.extend({type:m("model"),event:F().describe("The event from the model")});le("type",[Vs,zs,cu,du]);class $n{constructor(e){_(this,"requests");_(this,"inputTokens");_(this,"outputTokens");_(this,"totalTokens");_(this,"inputTokensDetails",[]);_(this,"outputTokensDetails",[]);typeof e>"u"?(this.requests=0,this.inputTokens=0,this.outputTokens=0,this.totalTokens=0,this.inputTokensDetails=[],this.outputTokensDetails=[]):(this.requests=(e==null?void 0:e.requests)??1,this.inputTokens=(e==null?void 0:e.inputTokens)??0,this.outputTokens=(e==null?void 0:e.outputTokens)??0,this.totalTokens=(e==null?void 0:e.totalTokens)??0,this.inputTokensDetails=e!=null&&e.inputTokensDetails?[e.inputTokensDetails]:[],this.outputTokensDetails=e!=null&&e.outputTokensDetails?[e.outputTokensDetails]:[])}add(e){this.requests+=e.requests,this.inputTokens+=e.inputTokens,this.outputTokens+=e.outputTokens,this.totalTokens+=e.totalTokens,e.inputTokensDetails&&this.inputTokensDetails.push(...e.inputTokensDetails),e.outputTokensDetails&&this.outputTokensDetails.push(...e.outputTokensDetails)}}class yt{constructor(e={}){_(this,"context");_(this,"usage");T(this,fe);this.context=e,this.usage=new $n,y(this,fe,new Map)}_rebuildApprovals(e){y(this,fe,new Map(Object.entries(e)))}isToolApproved({toolName:e,callId:t}){const r=u(this,fe).get(e);if((r==null?void 0:r.approved)===!0&&r.rejected===!0)return C.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"),!0;if((r==null?void 0:r.approved)===!0)return!0;if((r==null?void 0:r.rejected)===!0)return!1;const s=Array.isArray(r==null?void 0:r.approved)?r.approved.includes(t):!1,a=Array.isArray(r==null?void 0:r.rejected)?r.rejected.includes(t):!1;if(s&&a)return C.warn(`Tool call ${t} is both approved and rejected at the same time. Approval takes precedence`),!0;if(s)return!0;if(a)return!1}approveTool(e,{alwaysApprove:t=!1}={}){const r=e.rawItem.name;if(t){u(this,fe).set(r,{approved:!0,rejected:[]});return}const s=u(this,fe).get(r)??{approved:[],rejected:[]};if(Array.isArray(s.approved)){const a="callId"in e.rawItem?e.rawItem.callId:e.rawItem.id;s.approved.push(a)}u(this,fe).set(r,s)}rejectTool(e,{alwaysReject:t=!1}={}){const r=e.rawItem.name;if(t){u(this,fe).set(r,{approved:!1,rejected:!0});return}const s=u(this,fe).get(r)??{approved:[],rejected:[]};if(Array.isArray(s.rejected)){const a="callId"in e.rawItem?e.rawItem.callId:e.rawItem.id;s.rejected.push(a)}u(this,fe).set(r,s)}toJSON(){return{context:this.context,usage:this.usage,approvals:Object.fromEntries(u(this,fe).entries())}}}fe=new WeakMap;class Ws{constructor(e){_(this,"state");this.state=e}get history(){return Bn(this.input,this.newItems)}get output(){return Bn([],this.newItems)}get input(){return this.state._originalInput}get newItems(){return this.state._generatedItems}get rawResponses(){return this.state._modelResponses}get lastResponseId(){const e=this.rawResponses;return e&&e.length>0?e[e.length-1].responseId:void 0}get lastAgent(){return this.state._currentAgent}get inputGuardrailResults(){return this.state._inputGuardrailResults}get outputGuardrailResults(){return this.state._outputGuardrailResults}get interruptions(){var e;return((e=this.state._currentStep)==null?void 0:e.type)==="next_step_interruption"?this.state._currentStep.data.interruptions:[]}get finalOutput(){var e;if(((e=this.state._currentStep)==null?void 0:e.type)==="next_step_final_output")return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);C.warn("Accessed finalOutput before agent run is completed.")}}class kr extends Ws{constructor(e){super(e)}}class lu extends Ws{constructor(t={}){super(t.state);_(this,"currentTurn",0);_(this,"maxTurns");T(this,rn,null);T(this,kt);T(this,xe);T(this,Ve);T(this,It);T(this,sn);T(this,an);T(this,on,!1);y(this,kt,t.signal),u(this,kt)&&u(this,kt).addEventListener("abort",async()=>{await u(this,Ve).cancel()}),y(this,Ve,new wo({start:r=>{y(this,xe,r)},cancel:()=>{y(this,on,!0)}})),y(this,It,new Promise((r,s)=>{y(this,sn,r),y(this,an,s)}))}get currentAgent(){return this.lastAgent}_addItem(t){var r;this.cancelled||(r=u(this,xe))==null||r.enqueue(t)}_done(){var t;!this.cancelled&&u(this,xe)&&(u(this,xe).close(),y(this,xe,void 0),(t=u(this,sn))==null||t.call(this))}_raiseError(t){var r;!this.cancelled&&u(this,xe)&&(u(this,xe).error(t),y(this,xe,void 0)),y(this,rn,t),(r=u(this,an))==null||r.call(this,t),u(this,It).catch(s=>{C.debug(`Resulted in an error: ${s}`)})}get cancelled(){return u(this,on)}toStream(){return u(this,Ve)}get completed(){return u(this,It)}get error(){return u(this,rn)}toTextStream(t={}){const r=u(this,Ve).pipeThrough(new bo({transform(s,a){if(s.type==="raw_model_stream_event"&&s.data.type==="output_text_delta"){const i=Vs.parse(s.data);a.enqueue(i.delta)}}}));return t.compatibleWithNodeStreams?vo.fromWeb(r):r}[Symbol.asyncIterator](){return u(this,Ve)[Symbol.asyncIterator]()}}rn=new WeakMap,kt=new WeakMap,xe=new WeakMap,Ve=new WeakMap,It=new WeakMap,sn=new WeakMap,an=new WeakMap,on=new WeakMap;function Hs(n){return n.type==="function"?{type:"function",name:n.name,description:n.description,parameters:n.parameters,strict:n.strict}:n.type==="computer"?{type:"computer",name:n.name,environment:n.computer.environment,dimensions:n.computer.dimensions}:{type:"hosted_tool",name:n.name,providerData:n.providerData}}function Ys(n){return{toolName:n.toolName,toolDescription:n.toolDescription,inputJsonSchema:n.inputJsonSchema,strictJsonSchema:n.strictJsonSchema}}class tt{constructor(){_(this,"type","base_item");_(this,"rawItem")}toJSON(){return{type:this.type,rawItem:this.rawItem}}}class Ln extends tt{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","message_output_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}get content(){let t="";for(const r of this.rawItem.content)r.type==="output_text"&&(t+=r.text);return t}}class nt extends tt{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","tool_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class vt extends tt{constructor(t,r,s){super();_(this,"rawItem");_(this,"agent");_(this,"output");_(this,"type","tool_call_output_item");this.rawItem=t,this.agent=r,this.output=s}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON(),output:He(this.output)}}}class Ir extends tt{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","reasoning_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Ar extends tt{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","handoff_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Cr extends tt{constructor(t,r,s){super();_(this,"rawItem");_(this,"sourceAgent");_(this,"targetAgent");_(this,"type","handoff_output_item");this.rawItem=t,this.sourceAgent=r,this.targetAgent=s}toJSON(){return{...super.toJSON(),sourceAgent:this.sourceAgent.toJSON(),targetAgent:this.targetAgent.toJSON()}}}class Ae extends tt{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","tool_approval_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}function Xs(n){if(n.type!=="message"||n.role!=="assistant")return;const e=n.content[n.content.length-1];if(e.type==="output_text")return e.text}function pu(n){return n.output.length===0?"":Xs(n.output[n.output.length-1])||""}class fu{constructor(e){_(this,"data");_(this,"type","raw_model_stream_event");this.data=e}}class hu{constructor(e,t){_(this,"name");_(this,"item");_(this,"type","run_item_stream_event");this.name=e,this.item=t}}class mu{constructor(e){_(this,"agent");_(this,"type","agent_updated_stream_event");this.agent=e}}function Qs(n,e,t,r){var b;const s=[],a=[],i=[],o=[],c=[],l=[],p=new Map(r.map(w=>[w.toolName,w])),f=new Map(t.filter(w=>w.type==="function").map(w=>[w.name,w])),h=t.find(w=>w.type==="computer"),x=new Map(t.filter(w=>{var E;return w.type==="hosted_tool"&&((E=w.providerData)==null?void 0:E.type)==="mcp"}).map(w=>w).map(w=>[w.providerData.server_label,w]));for(const w of n.output){if(w.type==="message")w.role==="assistant"&&s.push(new Ln(w,e));else if(w.type==="hosted_tool_call"){s.push(new nt(w,e));const R=w.name;if(l.push(R),((b=w.providerData)==null?void 0:b.type)==="mcp_approval_request"||w.name==="mcp_approval_request"){const Y=w.providerData,ne=Y.server_label,me=x.get(ne);if(typeof me>"u"){const gn=`MCP server (${ne}) not found in Agent (${e.name})`;throw _t({message:gn,data:{mcp_server_label:ne}}),new de(gn)}const ge=new Ae({type:"hosted_tool_call",name:Y.name,id:Y.id,status:"in_progress",providerData:Y},e);c.push({requestItem:ge,mcpTool:me}),me.providerData.on_approval||s.push(ge)}}else if(w.type==="reasoning")s.push(new Ir(w,e));else if(w.type==="computer_call"){if(s.push(new nt(w,e)),l.push("computer_use"),!h)throw _t({message:"Model produced computer action without a computer tool.",data:{agent_name:e.name}}),new de("Model produced computer action without a computer tool.");o.push({toolCall:w,computer:h})}if(w.type!=="function_call")continue;l.push(w.name);const E=p.get(w.name);if(E)s.push(new Ar(w,e)),a.push({toolCall:w,handoff:E});else{const R=f.get(w.name);if(!R)throw _t({message:`Tool ${w.name} not found in agent ${e.name}.`,data:{tool_name:w.name,agent_name:e.name}}),new de(`Tool ${w.name} not found in agent ${e.name}.`);s.push(new nt(w,e)),i.push({toolCall:w,tool:R})}}return{newItems:s,handoffs:a,functions:i,computerActions:o,mcpApprovalRequests:c,toolsUsed:l,hasToolsOrApprovalsToRun(){return a.length>0||i.length>0||c.length>0||o.length>0}}}const gu=le("type",[g({type:m("next_step_handoff"),newAgent:F()}),g({type:m("next_step_final_output"),output:d()}),g({type:m("next_step_run_again")}),g({type:m("next_step_interruption"),data:ee(d(),F())})]);class we{constructor(e,t,r,s,a){_(this,"originalInput");_(this,"modelResponse");_(this,"preStepItems");_(this,"newStepItems");_(this,"nextStep");this.originalInput=e,this.modelResponse=t,this.preStepItems=r,this.newStepItems=s,this.nextStep=a}get generatedItems(){return this.preStepItems.concat(this.newStepItems)}}function Ks(n,e,t){return n.resetToolChoice&&e.hasUsedTools(n)?{...t,toolChoice:void 0}:t}async function ea(n,e,t,r,s,a,i){const o=t.filter(b=>b instanceof Ae&&"callId"in b.rawItem&&b.rawItem.type==="function_call").map(b=>b.rawItem.callId),c=s.functions.filter(b=>o.includes(b.toolCall.callId)),l=await na(n,c,a,i),p=l.map(b=>b.runItem),f=s.mcpApprovalRequests.filter(b=>{var w;return b.requestItem.type==="tool_approval_item"&&b.requestItem.rawItem.type==="hosted_tool_call"&&((w=b.requestItem.rawItem.providerData)==null?void 0:w.type)==="mcp_approval_request"});for(const b of f){const w=b.requestItem.rawItem.id,E=i._context.isToolApproved({toolName:b.requestItem.rawItem.name,callId:w});if(typeof E<"u"){const R={approve:E,approval_request_id:w,reason:void 0};p.push(new nt({type:"hosted_tool_call",name:"mcp_approval_response",providerData:R},n))}}const h=await ra(n,l,i),x=t.filter(b=>!(b instanceof Ae));return h.isFinalOutput?(a.emit("agent_end",i._context,n,h.finalOutput),n.emit("agent_end",i._context,h.finalOutput),new we(e,r,x,p,{type:"next_step_final_output",output:h.finalOutput})):h.isInterrupted?new we(e,r,x,p,{type:"next_step_interruption",data:{interruptions:h.interruptions}}):new we(e,r,x,p,{type:"next_step_run_again"})}async function ta(n,e,t,r,s,a,i){const o=t;let c=s.newItems;const[l,p]=await Promise.all([na(n,s.functions,a,i),yu(n,s.computerActions,a,i._context)]);if(c=c.concat(l.map(b=>b.runItem)),c=c.concat(p),s.mcpApprovalRequests.length>0)for(const b of s.mcpApprovalRequests){const w=b.mcpTool.providerData,E=b.requestItem.rawItem.providerData;if(w.on_approval){const R=await w.on_approval(i._context,b.requestItem),Y={approve:R.approve,approval_request_id:E.id,reason:R.reason};c.push(new nt({type:"hosted_tool_call",name:"mcp_approval_response",providerData:Y},n))}else{c.push(b.requestItem);const R={type:"hosted_mcp_tool_approval",tool:b.mcpTool,runItem:new Ae({type:"hosted_tool_call",name:E.name,id:E.id,arguments:E.arguments,status:"in_progress",providerData:E},n)};l.push(R)}}if(s.handoffs.length>0)return await vu(n,e,o,c,r,s.handoffs,a,i._context);const f=await ra(n,l,i);if(f.isFinalOutput)return a.emit("agent_end",i._context,n,f.finalOutput),n.emit("agent_end",i._context,f.finalOutput),new we(e,r,o,c,{type:"next_step_final_output",output:f.finalOutput});if(f.isInterrupted)return new we(e,r,o,c,{type:"next_step_interruption",data:{interruptions:f.interruptions}});const h=c.filter(b=>b instanceof Ln),x=h.length>0?Xs(h[h.length-1].rawItem):void 0;if(!x)return new we(e,r,o,c,{type:"next_step_run_again"});if(n.outputType==="text"&&!s.hasToolsOrApprovalsToRun())return new we(e,r,o,c,{type:"next_step_final_output",output:x});if(n.outputType!=="text"&&x){const{parser:b}=Qn(n.outputType,"final_output"),[w]=await Hn(()=>b(x));if(w)throw _t({message:"Invalid output type",data:{error:String(w)}}),new de("Invalid output type");return new we(e,r,o,c,{type:"next_step_final_output",output:x})}return new we(e,r,o,c,{type:"next_step_run_again"})}function Fn(n,e){return{type:"function_call_result",name:n.name,callId:n.callId,status:"completed",output:{type:"text",text:He(e)}}}async function na(n,e,t,r){async function s(a){let i=a.toolCall.arguments;if(a.tool.parameters&&(We(a.tool.parameters)?i=a.tool.parameters.parse(i):i=JSON.parse(i)),await a.tool.needsApproval(r._context,i,a.toolCall.callId)){const c=r._context.isToolApproved({toolName:a.tool.name,callId:a.toolCall.callId});if(c===!1)return Ms(async l=>{const p="Tool execution was not approved.";return l.setError({message:p,data:{tool_name:a.tool.name,error:`Tool execution for ${a.toolCall.callId} was manually rejected by user.`}}),l.spanData.output=p,{type:"function_output",tool:a.tool,output:p,runItem:new vt(Fn(a.toolCall,p),n,p)}},{data:{name:a.tool.name}});if(c!==!0)return{type:"function_approval",tool:a.tool,runItem:new Ae(a.toolCall,n)}}return Ms(async c=>{t.config.traceIncludeSensitiveData&&(c.spanData.input=a.toolCall.arguments);try{t.emit("agent_tool_start",r._context,n,a.tool,{toolCall:a.toolCall}),n.emit("agent_tool_start",r._context,a.tool,{toolCall:a.toolCall});const l=await a.tool.invoke(r._context,a.toolCall.arguments),p=He(l);return t.emit("agent_tool_end",r._context,n,a.tool,p,{toolCall:a.toolCall}),n.emit("agent_tool_end",r._context,a.tool,p,{toolCall:a.toolCall}),t.config.traceIncludeSensitiveData&&(c.spanData.output=p),{type:"function_output",tool:a.tool,output:l,runItem:new vt(Fn(a.toolCall,l),n,l)}}catch(l){throw c.setError({message:"Error running tool",data:{tool_name:a.tool.name,error:String(l)}}),l}},{data:{name:a.tool.name}})}try{return await Promise.all(e.map(s))}catch(a){throw new Ei(`Failed to run function tools: ${a}`,a,r)}}async function _u(n,e){const t=e.action;let r;switch(t.type){case"click":await n.click(t.x,t.y,t.button);break;case"double_click":await n.doubleClick(t.x,t.y);break;case"drag":await n.drag(t.path.map(s=>[s.x,s.y]));break;case"keypress":await n.keypress(t.keys);break;case"move":await n.move(t.x,t.y);break;case"screenshot":r=await n.screenshot();break;case"scroll":await n.scroll(t.x,t.y,t.scroll_x,t.scroll_y);break;case"type":await n.type(t.text);break;case"wait":await n.wait();break}if(typeof r<"u"||typeof n.screenshot=="function"&&(r=await n.screenshot(),typeof r<"u"))return r;throw new Error("Computer does not implement screenshot()")}async function yu(n,e,t,r,s=void 0){const a=s??C,i=[];for(const o of e){const c=o.computer.computer,l=o.toolCall;t.emit("agent_tool_start",r,n,o.computer,{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_start",r,o.computer,{toolCall:l});let p;try{p=await _u(c,l)}catch(x){a.error("Failed to execute computer action:",x),p=""}t.emit("agent_tool_end",r,n,o.computer,p,{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_end",r,o.computer,p,{toolCall:l});const f=p?`data:image/png;base64,${p}`:"",h={type:"computer_call_result",callId:l.callId,output:{type:"computer_screenshot",data:f}};i.push(new vt(h,n,f))}return i}async function vu(n,e,t,r,s,a,i,o){if(r=[...r],a.length===0)return C.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."),new we(e,s,t,r,{type:"next_step_run_again"});if(a.length>1){const l="Multiple handoffs detected, ignoring this one.";for(let p=1;p<a.length;p++)r.push(new vt(Fn(a[p].toolCall,l),n,l))}const c=a[0];return $o(async l=>{const p=c.handoff,f=await p.onInvokeHandoff(o,c.toolCall.arguments);if(l.spanData.to_agent=f.name,a.length>1){const x=a.map(b=>b.handoff.agentName);l.setError({message:"Multiple handoffs requested",data:{requested_agents:x}})}r.push(new Cr(Fn(c.toolCall,Ls(f)),n,f)),i.emit("agent_handoff",o,n,f),n.emit("agent_handoff",o,f);const h=p.inputFilter??i.config.handoffInputFilter;if(h){C.debug("Filtering inputs for handoff"),typeof h!="function"&&l.setError({message:"Invalid input filter",data:{details:"not callable"}});const x={inputHistory:Array.isArray(e)?[...e]:e,preHandoffItems:[...t],newItems:[...r]},b=h(x);e=b.inputHistory,t=b.preHandoffItems,r=b.newItems}return new we(e,s,t,r,{type:"next_step_handoff",newAgent:f})},{data:{from_agent:n.name}})}const Un={isFinalOutput:!1,isInterrupted:void 0};async function ra(n,e,t){if(e.length===0)return Un;const r=e.filter(i=>i.runItem instanceof Ae).map(i=>i.runItem);if(r.length>0)return{isFinalOutput:!1,isInterrupted:!0,interruptions:r};if(n.toolUseBehavior==="run_llm_again")return Un;const s=e[0];if(n.toolUseBehavior==="stop_on_first_tool")return(s==null?void 0:s.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:He(s.output)}:Un;const a=n.toolUseBehavior;if(typeof a=="object"){const i=e.find(o=>a.stopAtToolNames.includes(o.tool.name));return(i==null?void 0:i.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:He(i.output)}:Un}if(typeof a=="function")return a(t._context,e);throw new K(`Invalid toolUseBehavior: ${a}`,t)}function sa(n,e){for(const t of e.newStepItems){let r;if(t instanceof Ln)r="message_output_created";else if(t instanceof Ar)r="handoff_requested";else if(t instanceof Cr)r="handoff_occurred";else if(t instanceof nt)r="tool_called";else if(t instanceof vt)r="tool_output";else if(t instanceof Ir)r="reasoning_item_created";else if(t instanceof Ae)r="tool_approval_requested";else{C.warn("Unknown item type: ",t);continue}n._addItem(new hu(r,t))}}class aa{constructor(){T(this,At,new Map)}addToolUse(e,t){u(this,At).set(e,t)}hasUsedTools(e){return u(this,At).has(e)}toJSON(){return Object.fromEntries(Array.from(u(this,At).entries()).map(([e,t])=>[e.name,t]))}}At=new WeakMap;const Jn="1.0",wu=m(Jn),Ce=g({name:d()}),ia=g({object:m("trace.span"),id:d(),trace_id:d(),parent_id:d().nullable(),started_at:d().nullable(),ended_at:d().nullable(),error:g({message:d(),data:ee(d(),F()).optional()}).nullable(),span_data:ee(d(),F())}).extend({previous_span:fo(()=>ia).optional()}),oa=g({requests:A(),inputTokens:A(),outputTokens:A(),totalTokens:A()}),ua=g({usage:oa,output:q(Tr),responseId:d().optional(),providerData:ee(d(),F()).optional()}),ca=le("type",[g({type:m("message_output_item"),rawItem:Zn,agent:Ce}),g({type:m("tool_call_item"),rawItem:iu.or(Gt),agent:Ce}),g({type:m("tool_call_output_item"),rawItem:br,agent:Ce,output:d()}),g({type:m("reasoning_item"),rawItem:Sr,agent:Ce}),g({type:m("handoff_call_item"),rawItem:Vt,agent:Ce}),g({type:m("handoff_output_item"),rawItem:br,sourceAgent:Ce,targetAgent:Ce}),g({type:m("tool_approval_item"),rawItem:Vt.or(Gt),agent:Ce})]),bu=g({object:m("trace"),id:d(),workflow_name:d(),group_id:d().nullable(),metadata:ee(d(),F())}),xu=g({newItems:q(ca),toolsUsed:q(d()),handoffs:q(g({toolCall:F(),handoff:F()})),functions:q(g({toolCall:F(),tool:F()})),computerActions:q(g({toolCall:F(),computer:F()})),mcpApprovalRequests:q(g({requestItem:g({rawItem:g({type:m("hosted_tool_call"),name:d(),arguments:d().optional(),status:d().optional(),output:d().optional(),providerData:ee(d(),F()).nullable().optional()})}),mcpTool:g({type:m("hosted_tool"),name:m("hosted_mcp"),providerData:ee(d(),F())})})).optional()}),da=g({tripwireTriggered:Lt(),outputInfo:F()}),Su=g({guardrail:g({type:m("input"),name:d()}),output:da}),Tu=g({guardrail:g({type:m("output"),name:d()}),agentOutput:F(),agent:Ce,output:da}),la=g({$schemaVersion:wu,currentTurn:A(),currentAgent:Ce,originalInput:d().or(q(ou)),modelResponses:q(ua),context:g({usage:oa,approvals:ee(d(),g({approved:q(d()).or(Lt()),rejected:q(d()).or(Lt())})),context:ee(d(),F())}),toolUseTracker:ee(d(),q(d())),maxTurns:A(),currentAgentSpan:ia.nullable().optional(),noActiveAgentRun:Lt(),inputGuardrailResults:q(Su),outputGuardrailResults:q(Tu),currentStep:gu.optional(),lastModelResponse:ua.optional(),generatedItems:q(ca),lastProcessedResponse:xu.optional(),trace:bu.nullable()});class rt{constructor(e,t,r,s){_(this,"_currentTurn",0);_(this,"_currentAgent");_(this,"_originalInput");_(this,"_modelResponses");_(this,"_currentAgentSpan");_(this,"_context");_(this,"_toolUseTracker");_(this,"_generatedItems");_(this,"_maxTurns");_(this,"_noActiveAgentRun",!0);_(this,"_lastTurnResponse");_(this,"_inputGuardrailResults");_(this,"_outputGuardrailResults");_(this,"_currentStep");_(this,"_lastProcessedResponse");_(this,"_trace",null);this._context=e,this._originalInput=structuredClone(t),this._modelResponses=[],this._currentAgentSpan=void 0,this._currentAgent=r,this._toolUseTracker=new aa,this._generatedItems=[],this._maxTurns=s,this._inputGuardrailResults=[],this._outputGuardrailResults=[],this._trace=Ft()}getInterruptions(){var e;return((e=this._currentStep)==null?void 0:e.type)!=="next_step_interruption"?[]:this._currentStep.data.interruptions}approve(e,t={alwaysApprove:!1}){this._context.approveTool(e,t)}reject(e,t={alwaysReject:!1}){this._context.rejectTool(e,t)}toJSON(){var r;const e={$schemaVersion:Jn,currentTurn:this._currentTurn,currentAgent:{name:this._currentAgent.name},originalInput:this._originalInput,modelResponses:this._modelResponses.map(s=>({usage:{requests:s.usage.requests,inputTokens:s.usage.inputTokens,outputTokens:s.usage.outputTokens,totalTokens:s.usage.totalTokens},output:s.output,responseId:s.responseId,providerData:s.providerData})),context:this._context.toJSON(),toolUseTracker:this._toolUseTracker.toJSON(),maxTurns:this._maxTurns,currentAgentSpan:(r=this._currentAgentSpan)==null?void 0:r.toJSON(),noActiveAgentRun:this._noActiveAgentRun,inputGuardrailResults:this._inputGuardrailResults,outputGuardrailResults:this._outputGuardrailResults.map(s=>({...s,agent:s.agent.toJSON()})),currentStep:this._currentStep,lastModelResponse:this._lastTurnResponse,generatedItems:this._generatedItems.map(s=>s.toJSON()),lastProcessedResponse:this._lastProcessedResponse,trace:this._trace?this._trace.toJSON():null},t=la.safeParse(e);if(!t.success)throw new Ci(`Failed to serialize run state. ${t.error.message}`);return t.data}toString(){return JSON.stringify(this.toJSON())}static async fromString(e,t){var f,h,x,b,w;const[r,s]=await Hn(()=>JSON.parse(t));if(r)throw new K(`Failed to parse run state. ${r instanceof Error?r.message:String(r)}`);const a=s.$schemaVersion;if(!a)throw new K("Run state is missing schema version");if(a!==Jn)throw new K(`Run state schema version ${a} is not supported. Please use version ${Jn}`);const i=la.parse(JSON.parse(t)),o=ku(e),c=new yt(i.context.context);c._rebuildApprovals(i.context.approvals);const l=o.get(i.currentAgent.name);if(!l)throw new K(`Agent ${i.currentAgent.name} not found`);const p=new rt(c,"",l,i.maxTurns);p._currentTurn=i.currentTurn,p._toolUseTracker=new aa;for(const[E,R]of Object.entries(i.toolUseTracker))p._toolUseTracker.addToolUse(o.get(E),R);if(i.currentAgentSpan){i.trace||C.warn("Trace is not set, skipping tracing setup");const E=Ie().createTrace({traceId:(f=i.trace)==null?void 0:f.id,name:(h=i.trace)==null?void 0:h.workflow_name,groupId:((x=i.trace)==null?void 0:x.group_id)??void 0,metadata:(b=i.trace)==null?void 0:b.metadata});p._currentAgentSpan=pa(E,i.currentAgentSpan),p._trace=E}return p._noActiveAgentRun=i.noActiveAgentRun,p._inputGuardrailResults=i.inputGuardrailResults,p._outputGuardrailResults=i.outputGuardrailResults.map(E=>({...E,agent:o.get(E.agent.name)})),p._currentStep=i.currentStep,p._originalInput=i.originalInput,p._modelResponses=i.modelResponses.map(fa),p._lastTurnResponse=i.lastModelResponse?fa(i.lastModelResponse):void 0,p._generatedItems=i.generatedItems.map(E=>ha(E,o)),p._lastProcessedResponse=i.lastProcessedResponse?await Iu(o,p._currentAgent,i.lastProcessedResponse):void 0,((w=i.currentStep)==null?void 0:w.type)==="next_step_handoff"&&(p._currentStep={type:"next_step_handoff",newAgent:o.get(i.currentStep.newAgent.name)}),p}}function ku(n){const e=new Map,t=[n];for(;t.length>0;){const r=t.shift();if(!e.has(r.name)){e.set(r.name,r);for(const s of r.handoffs)s instanceof st?e.has(s.name)||t.push(s):s.agent&&(e.has(s.agent.name)||t.push(s.agent))}}return e}function pa(n,e){const t=e.span_data,r=e.previous_span?pa(n,e.previous_span):void 0,s=Ie().createSpan({spanId:e.id,traceId:e.trace_id,parentId:e.parent_id??void 0,startedAt:e.started_at??void 0,endedAt:e.ended_at??void 0,data:t},n);return s.previousSpan=r,s}function fa(n){const e=new $n;return e.requests=n.usage.requests,e.inputTokens=n.usage.inputTokens,e.outputTokens=n.usage.outputTokens,e.totalTokens=n.usage.totalTokens,{usage:e,output:n.output.map(t=>Tr.parse(t)),responseId:n.responseId,providerData:n.providerData}}function ha(n,e){switch(n.type){case"message_output_item":return new Ln(n.rawItem,e.get(n.agent.name));case"tool_call_item":return new nt(n.rawItem,e.get(n.agent.name));case"tool_call_output_item":return new vt(n.rawItem,e.get(n.agent.name),n.output);case"reasoning_item":return new Ir(n.rawItem,e.get(n.agent.name));case"handoff_call_item":return new Ar(n.rawItem,e.get(n.agent.name));case"handoff_output_item":return new Cr(n.rawItem,e.get(n.sourceAgent.name),e.get(n.targetAgent.name));case"tool_approval_item":return new Ae(n.rawItem,e.get(n.agent.name))}}async function Iu(n,e,t){const r=await e.getAllTools(),s=new Map(r.filter(c=>c.type==="function").map(c=>[c.name,c])),a=new Map(r.filter(c=>c.type==="computer").map(c=>[c.name,c])),i=new Map(e.handoffs.map(c=>c instanceof st?[c.name,Us(c)]:[c.toolName,c])),o={newItems:t.newItems.map(c=>ha(c,n)),toolsUsed:t.toolsUsed,handoffs:t.handoffs.map(c=>{if(!i.has(c.handoff.toolName))throw new K(`Handoff ${c.handoff.toolName} not found`);return{toolCall:c.toolCall,handoff:i.get(c.handoff.toolName)}}),functions:await Promise.all(t.functions.map(async c=>{if(!s.has(c.tool.name))throw new K(`Tool ${c.tool.name} not found`);return{toolCall:c.toolCall,tool:s.get(c.tool.name)}})),computerActions:t.computerActions.map(c=>{const l=c.computer.name;if(!a.has(l))throw new K(`Computer tool ${l} not found`);return{toolCall:c.toolCall,computer:a.get(l)}}),mcpApprovalRequests:(t.mcpApprovalRequests??[]).map(c=>({requestItem:new Ae(c.requestItem.rawItem,e),mcpTool:c.mcpTool}))};return{...o,hasToolsOrApprovalsToRun(){return o.handoffs.length>0||o.functions.length>0||o.mcpApprovalRequests.length>0||o.computerActions.length>0}}}const ma=10;function ga(n,e){return n?!1:e?!0:"enabled_without_data"}function Bn(n,e){const t=e.filter(r=>r.type!=="tool_approval_item").map(r=>r.rawItem);return typeof n=="string"&&(n=[{type:"message",role:"user",content:n}]),[...n,...t]}class Au extends qo{constructor(t={}){super();T(this,ie);_(this,"config");_(this,"inputGuardrailDefs");_(this,"outputGuardrailDefs");this.config={modelProvider:t.modelProvider??zo(),model:t.model,modelSettings:t.modelSettings,handoffInputFilter:t.handoffInputFilter,inputGuardrails:t.inputGuardrails,outputGuardrails:t.outputGuardrails,tracingDisabled:t.tracingDisabled??!1,traceIncludeSensitiveData:t.traceIncludeSensitiveData??!0,workflowName:t.workflowName??"Agent workflow",traceId:t.traceId,groupId:t.groupId,traceMetadata:t.traceMetadata},this.inputGuardrailDefs=(t.inputGuardrails??[]).map($s),this.outputGuardrailDefs=(t.outputGuardrails??[]).map(yr)}run(t,r,s={stream:!1,context:void 0}){return r instanceof rt&&r._trace?ko(r._trace,async()=>(r._currentAgentSpan&&Pn(r._currentAgentSpan),s!=null&&s.stream?L(this,ie,Fr).call(this,t,r,s):L(this,ie,Zr).call(this,t,r,s))):Io(async()=>s!=null&&s.stream?L(this,ie,Fr).call(this,t,r,s):L(this,ie,Zr).call(this,t,r,s),{traceId:this.config.traceId,name:this.config.workflowName,groupId:this.config.groupId,metadata:this.config.traceMetadata})}}ie=new WeakSet,Zr=async function(t,r,s){return pr(async()=>{var i,o;const a=r instanceof rt?r:new rt(s.context instanceof yt?s.context:new yt(s.context),r,t,s.maxTurns??ma);try{for(;;){let c=_a(a._currentAgent.model,this.config.model);if(typeof c=="string"&&(c=await this.config.modelProvider.getModel(c)),a._currentStep=a._currentStep??{type:"next_step_run_again"},a._currentStep.type==="next_step_interruption"){if(C.debug("Continuing from interruption"),!a._lastTurnResponse||!a._lastProcessedResponse)throw new K("No model response found in previous state",a);const l=await ea(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);if(a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=l.originalInput,a._generatedItems=l.generatedItems,a._currentStep=l.nextStep,l.nextStep.type==="next_step_interruption")return new kr(a);continue}if(a._currentStep.type==="next_step_run_again"){const l=[];if(a._currentAgent.handoffs&&l.push(...a._currentAgent.handoffs.map(Mn)),!a._currentAgentSpan){const R=l.map(Y=>Y.agentName);a._currentAgentSpan=js({data:{name:a._currentAgent.name,handoffs:R,output_type:a._currentAgent.outputSchemaName}}),a._currentAgentSpan.start(),Pn(a._currentAgentSpan)}const p=await a._currentAgent.getAllTools(),f=p.map(R=>Hs(R)),h=l.map(R=>Ys(R));if(a._currentAgentSpan&&(a._currentAgentSpan.spanData.tools=p.map(R=>R.name)),a._currentTurn++,a._currentTurn>a._maxTurns)throw(i=a._currentAgentSpan)==null||i.setError({message:"Max turns exceeded",data:{max_turns:a._maxTurns}}),new ns(`Max turns (${a._maxTurns}) exceeded`,a);C.debug(`Running agent ${a._currentAgent.name} (turn ${a._currentTurn})`),a._currentTurn===1&&await L(this,ie,$r).call(this,a);const x=Bn(a._originalInput,a._generatedItems);a._noActiveAgentRun&&(a._currentAgent.emit("agent_start",a._context,a._currentAgent),this.emit("agent_start",a._context,a._currentAgent));let b={...this.config.modelSettings,...a._currentAgent.modelSettings};b=Ks(a._currentAgent,a._toolUseTracker,b),a._lastTurnResponse=await c.getResponse({systemInstructions:await a._currentAgent.getSystemPrompt(a._context),prompt:await a._currentAgent.getPrompt(a._context),input:x,previousResponseId:s.previousResponseId,modelSettings:b,tools:f,outputType:as(a._currentAgent.outputType),handoffs:h,tracing:ga(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:s.signal}),a._modelResponses.push(a._lastTurnResponse),a._context.usage.add(a._lastTurnResponse.usage),a._noActiveAgentRun=!1;const w=Qs(a._lastTurnResponse,a._currentAgent,p,l);a._lastProcessedResponse=w;const E=await ta(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=E.originalInput,a._generatedItems=E.generatedItems,a._currentStep=E.nextStep}if(a._currentStep&&a._currentStep.type==="next_step_final_output")return await L(this,ie,Lr).call(this,a,a._currentStep.output),this.emit("agent_end",a._context,a._currentAgent,a._currentStep.output),a._currentAgent.emit("agent_end",a._context,a._currentStep.output),new kr(a);if(a._currentStep&&a._currentStep.type==="next_step_handoff")a._currentAgent=a._currentStep.newAgent,a._currentAgentSpan&&(a._currentAgentSpan.end(),Jt(),a._currentAgentSpan=void 0),a._noActiveAgentRun=!0,a._currentStep={type:"next_step_run_again"};else{if(a._currentStep&&a._currentStep.type==="next_step_interruption")return new kr(a);C.debug("Running next loop")}}}catch(c){throw a._currentAgentSpan&&a._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(c)}}),c}finally{a._currentAgentSpan&&(((o=a._currentStep)==null?void 0:o.type)!=="next_step_interruption"&&a._currentAgentSpan.end(),Jt())}})},$r=async function(t){const r=this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map($s));if(r.length>0){const s={agent:t._currentAgent,input:t._originalInput,context:t._context};try{const a=await Promise.all(r.map(async i=>Zs(async o=>{const c=await i.run(s);return o.spanData.triggered=c.output.tripwireTriggered,c},{data:{name:i.name}},t._currentAgentSpan)));for(const i of a)if(i.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:i.guardrail.name}}),new ss(`Input guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`,i,t)}catch(a){throw a instanceof ss?a:(t._currentTurn--,new rs(`Input guardrail failed to complete: ${a}`,a,t))}}},Lr=async function(t,r){const s=this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(yr));if(s.length>0){const a=t._currentAgent.processFinalOutput(r),i={agent:t._currentAgent,agentOutput:a,context:t._context,details:{modelResponse:t._lastTurnResponse}};try{const o=await Promise.all(s.map(async c=>Zs(async l=>{const p=await c.run(i);return l.spanData.triggered=p.output.tripwireTriggered,p},{data:{name:c.name}},t._currentAgentSpan)));for(const c of o)if(c.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:c.guardrail.name}}),new yn(`Output guardrail triggered: ${JSON.stringify(c.output.outputInfo)}`,c,t)}catch(o){throw o instanceof yn?o:new rs(`Output guardrail failed to complete: ${o}`,o,t)}}},Ea=async function(t,r){var s,a,i;try{for(;;){const o=t.state._currentAgent,c=o.handoffs.map(Mn),l=await o.getAllTools(),p=l.map(h=>Hs(h)),f=c.map(h=>Ys(h));if(t.state._currentStep=t.state._currentStep??{type:"next_step_run_again"},t.state._currentStep.type==="next_step_interruption"){if(C.debug("Continuing from interruption"),!t.state._lastTurnResponse||!t.state._lastProcessedResponse)throw new K("No model response found in previous state",t.state);const h=await ea(t.state._currentAgent,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);if(sa(t,h),t.state._toolUseTracker.addToolUse(t.state._currentAgent,t.state._lastProcessedResponse.toolsUsed),t.state._originalInput=h.originalInput,t.state._generatedItems=h.generatedItems,t.state._currentStep=h.nextStep,h.nextStep.type==="next_step_interruption")return;continue}if(t.state._currentStep.type==="next_step_run_again"){if(!t.state._currentAgentSpan){const Y=c.map(ne=>ne.agentName);t.state._currentAgentSpan=js({data:{name:o.name,handoffs:Y,tools:l.map(ne=>ne.name),output_type:o.outputSchemaName}}),t.state._currentAgentSpan.start(),Pn(t.state._currentAgentSpan)}if(t.state._currentTurn++,t.state._currentTurn>t.state._maxTurns)throw(s=t.state._currentAgentSpan)==null||s.setError({message:"Max turns exceeded",data:{max_turns:t.state._maxTurns}}),new ns(`Max turns (${t.state._maxTurns}) exceeded`,t.state);C.debug(`Running agent ${o.name} (turn ${t.state._currentTurn})`);let h=_a(o.model,this.config.model);typeof h=="string"&&(h=await this.config.modelProvider.getModel(h)),t.state._currentTurn===1&&await L(this,ie,$r).call(this,t.state);let x={...this.config.modelSettings,...o.modelSettings};x=Ks(o,t.state._toolUseTracker,x);const b=Bn(t.input,t.newItems);t.state._noActiveAgentRun&&(o.emit("agent_start",t.state._context,o),this.emit("agent_start",t.state._context,o));let w;for await(const Y of h.getStreamedResponse({systemInstructions:await o.getSystemPrompt(t.state._context),prompt:await o.getPrompt(t.state._context),input:b,previousResponseId:r.previousResponseId,modelSettings:x,tools:p,handoffs:f,outputType:as(o.outputType),tracing:ga(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:r.signal})){if(Y.type==="response_done"){const ne=zs.parse(Y);w={usage:new $n(ne.response.usage),output:ne.response.output,responseId:ne.response.id}}if(t.cancelled)return;t._addItem(new fu(Y))}if(t.state._noActiveAgentRun=!1,!w)throw new de("Model did not produce a final response!",t.state);t.state._lastTurnResponse=w,t.state._modelResponses.push(t.state._lastTurnResponse);const E=Qs(t.state._lastTurnResponse,o,l,c);t.state._lastProcessedResponse=E;const R=await ta(o,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);sa(t,R),t.state._toolUseTracker.addToolUse(o,E.toolsUsed),t.state._originalInput=R.originalInput,t.state._generatedItems=R.generatedItems,t.state._currentStep=R.nextStep}if(t.state._currentStep.type==="next_step_final_output"){await L(this,ie,Lr).call(this,t.state,t.state._currentStep.output);return}else{if(t.state._currentStep.type==="next_step_interruption")return;t.state._currentStep.type==="next_step_handoff"?(t.state._currentAgent=(a=t.state._currentStep)==null?void 0:a.newAgent,t.state._currentAgentSpan&&(t.state._currentAgentSpan.end(),Jt()),t.state._currentAgentSpan=void 0,t._addItem(new mu(t.state._currentAgent)),t.state._noActiveAgentRun=!0,t.state._currentStep={type:"next_step_run_again"}):C.debug("Running next loop")}}}catch(o){throw t.state._currentAgentSpan&&t.state._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(o)}}),o}finally{t.state._currentAgentSpan&&(((i=t.state._currentStep)==null?void 0:i.type)!=="next_step_interruption"&&t.state._currentAgentSpan.end(),Jt())}},Fr=async function(t,r,s){return s=s??{},pr(async()=>{const a=r instanceof rt?r:new rt(s.context instanceof yt?s.context:new yt(s.context),r,t,s.maxTurns??ma),i=new lu({signal:s.signal,state:a});return i.maxTurns=s.maxTurns??a._maxTurns,L(this,ie,Ea).call(this,i,s).then(()=>{i._done()},o=>{i._raiseError(o)}),i})};function _a(n,e){return typeof n=="string"&&n!==st.DEFAULT_MODEL_PLACEHOLDER||n?n:e??n??st.DEFAULT_MODEL_PLACEHOLDER}const Ct=class Ct extends Bo{constructor(t){super();_(this,"name");_(this,"instructions");_(this,"prompt");_(this,"handoffDescription");_(this,"handoffs");_(this,"model");_(this,"modelSettings");_(this,"tools");_(this,"mcpServers");_(this,"inputGuardrails");_(this,"outputGuardrails");_(this,"outputType","text");_(this,"toolUseBehavior");_(this,"resetToolChoice");if(typeof t.name!="string"||t.name.trim()==="")throw new K("Agent must have a name.");if(this.name=t.name,this.instructions=t.instructions??Ct.DEFAULT_MODEL_PLACEHOLDER,this.prompt=t.prompt,this.handoffDescription=t.handoffDescription??"",this.handoffs=t.handoffs??[],this.model=t.model??"",this.modelSettings=t.modelSettings??{},this.tools=t.tools??[],this.mcpServers=t.mcpServers??[],this.inputGuardrails=t.inputGuardrails??[],this.outputGuardrails=t.outputGuardrails??[],t.outputType&&(this.outputType=t.outputType),this.toolUseBehavior=t.toolUseBehavior??"run_llm_again",this.resetToolChoice=t.resetToolChoice??!0,(t.handoffOutputTypeWarningEnabled===void 0||t.handoffOutputTypeWarningEnabled)&&this.handoffs&&this.outputType){const r=new Set([JSON.stringify(this.outputType)]);for(const s of this.handoffs)"outputType"in s&&s.outputType?r.add(JSON.stringify(s.outputType)):"agent"in s&&s.agent.outputType&&r.add(JSON.stringify(s.agent.outputType));r.size>1&&C.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`)}}static create(t){return new Ct({...t,handoffs:t.handoffs,outputType:t.outputType,handoffOutputTypeWarningEnabled:!1})}get outputSchemaName(){if(this.outputType==="text")return"text";if(We(this.outputType))return"ZodOutput";if(typeof this.outputType=="object")return this.outputType.name;throw new Error(`Unknown output type: ${this.outputType}`)}clone(t){return new Ct({...this,...t})}asTool(t){const{toolName:r,toolDescription:s,customOutputExtractor:a}=t;return bn({name:r??vn(this.name),description:s??"",parameters:{type:"object",properties:{input:{type:"string"}},required:["input"],additionalProperties:!1},strict:!0,execute:async(i,o)=>{if(!Oi(i))throw new de("Agent tool called with invalid input");const l=await new Au().run(this,i.input,{context:o==null?void 0:o.context});return typeof a=="function"?a(l):pu(l.rawResponses[l.rawResponses.length-1])}})}async getSystemPrompt(t){return typeof this.instructions=="function"?await this.instructions(t,this):this.instructions}async getPrompt(t){return typeof this.prompt=="function"?await this.prompt(t,this):this.prompt}async getMcpTools(){return this.mcpServers.length>0?go(this.mcpServers):[]}async getAllTools(){return[...await this.getMcpTools(),...this.tools]}processFinalOutput(t){if(this.outputType==="text")return t;if(typeof this.outputType=="object"){const r=JSON.parse(t);return We(this.outputType)?this.outputType.parse(r):r}throw new Error(`Unknown output type: ${this.outputType}`)}toJSON(){return{name:this.name}}};_(Ct,"DEFAULT_MODEL_PLACEHOLDER","");let st=Ct;Jo(Ns());class Cu extends st{constructor(t){super(t);_(this,"voice");this.voice=t.voice??"ash"}}function Eu(n){return{debounceTextLength:n.debounceTextLength??100}}function Ou({policyHint:n,...e}){const t=yr(e),r=n??t.name;return{...t,policyHint:r,run:async s=>{const a=await t.run(s);return{...a,guardrail:{...a.guardrail,policyHint:r}}}}}function Nu(n){return`
⚠️ Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo??{})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim()}const Pe=ps("openai-agents:realtime");g({itemId:d()});const ya=le("role",[g({itemId:d(),previousItemId:d().nullable().optional(),type:m("message"),role:m("system"),content:q(g({type:m("input_text"),text:d()}))}),g({itemId:d(),previousItemId:d().nullable().optional(),type:m("message"),role:m("user"),status:ue(["in_progress","completed"]),content:q(g({type:m("input_text"),text:d()}).or(g({type:m("input_audio"),audio:d().nullable().optional(),transcript:d().nullable()})))}),g({itemId:d(),previousItemId:d().nullable().optional(),type:m("message"),role:m("assistant"),status:ue(["in_progress","completed","incomplete"]),content:q(g({type:m("text"),text:d()}).or(g({type:m("audio"),audio:d().nullable().optional(),transcript:d().nullable().optional()})))})]),va=g({itemId:d(),previousItemId:d().nullable().optional(),type:m("function_call"),status:ue(["in_progress","completed"]),arguments:d(),name:d(),output:d().nullable()}),wa=g({id:d().optional().nullable(),conversation_id:d().optional().nullable(),max_output_tokens:A().or(m("inf")).optional().nullable(),metadata:ee(d(),F()).optional().nullable(),modalities:q(d()).optional().nullable(),object:m("realtime.response").optional().nullable(),output:q(F()).optional().nullable(),output_audio_format:d().optional().nullable(),status:ue(["completed","incomplete","failed","cancelled","in_progress"]).optional().nullable(),status_details:ee(d(),F()).optional().nullable(),usage:g({input_tokens:A().optional(),input_tokens_details:ee(d(),F()).optional().nullable(),output_tokens:A().optional(),output_tokens_details:ee(d(),F()).optional().nullable()}).optional().nullable(),voice:d().optional().nullable()}),Ru=g({id:d().optional(),audio:d().nullable().optional(),text:d().nullable().optional(),transcript:d().nullable().optional(),type:Is([m("input_text"),m("input_audio"),m("item_reference"),m("text"),m("audio")])}),zt=g({id:d().optional(),arguments:d().optional(),call_id:d().optional(),content:q(Ru).optional(),name:d().optional(),object:m("realtime.item").optional(),output:d().optional(),role:ue(["user","assistant","system"]).optional(),status:ue(["completed","incomplete","in_progress"]).optional(),type:ue(["message","function_call","function_call_output"]).optional()}),Du=g({type:m("conversation.created"),event_id:d(),conversation:g({id:d().optional(),object:m("realtime.conversation").optional()})}),Pu=g({type:m("conversation.item.created"),event_id:d(),item:zt,previous_item_id:d().nullable().optional()}),ju=g({type:m("conversation.item.deleted"),event_id:d(),item_id:d()}),Mu=g({type:m("conversation.item.input_audio_transcription.completed"),event_id:d(),item_id:d(),content_index:A(),transcript:d(),logprobs:q(F()).nullable().optional()}),Zu=g({type:m("conversation.item.input_audio_transcription.delta"),event_id:d(),item_id:d(),content_index:A().optional(),delta:d().optional(),logprobs:q(F()).nullable().optional()}),$u=g({type:m("conversation.item.input_audio_transcription.failed"),event_id:d(),item_id:d(),content_index:A(),error:g({code:d().optional(),message:d().optional(),param:d().optional(),type:d().optional()})}),Lu=g({type:m("conversation.item.retrieved"),event_id:d(),item:zt}),Fu=g({type:m("conversation.item.truncated"),event_id:d(),item_id:d(),audio_end_ms:A(),content_index:A()}),Uu=g({type:m("conversation.item.create"),item:zt,event_id:d().optional(),previous_item_id:d().nullable().optional()}),Ju=g({type:m("conversation.item.delete"),item_id:d(),event_id:d().optional()}),Bu=g({type:m("conversation.item.retrieve"),item_id:d(),event_id:d().optional()}),qu=g({type:m("conversation.item.truncate"),item_id:d(),audio_end_ms:A(),content_index:A(),event_id:d().optional()}),Gu=g({type:m("error"),event_id:d().optional(),error:F().optional()}),Vu=g({type:m("input_audio_buffer.cleared"),event_id:d()}),zu=g({type:m("input_audio_buffer.append"),audio:d(),event_id:d().optional()}),Wu=g({type:m("input_audio_buffer.clear"),event_id:d().optional()}),Hu=g({type:m("input_audio_buffer.commit"),event_id:d().optional()}),Yu=g({type:m("input_audio_buffer.committed"),event_id:d(),item_id:d(),previous_item_id:d().nullable().optional()}),Xu=g({type:m("input_audio_buffer.speech_started"),event_id:d(),item_id:d(),audio_start_ms:A()}),Qu=g({type:m("input_audio_buffer.speech_stopped"),event_id:d(),item_id:d(),audio_end_ms:A()}),Ku=g({type:m("output_audio_buffer.started"),event_id:d()}).passthrough(),ec=g({type:m("output_audio_buffer.stopped"),event_id:d()}).passthrough(),tc=g({type:m("output_audio_buffer.cleared"),event_id:d()}),nc=g({type:m("rate_limits.updated"),event_id:d(),rate_limits:q(g({limit:A().optional(),name:ue(["requests","tokens"]).optional(),remaining:A().optional(),reset_seconds:A().optional()}))}),rc=g({type:m("response.audio.delta"),event_id:d(),item_id:d(),content_index:A(),delta:d(),output_index:A(),response_id:d()}),sc=g({type:m("response.audio.done"),event_id:d(),item_id:d(),content_index:A(),output_index:A(),response_id:d()}),ac=g({type:m("response.audio_transcript.delta"),event_id:d(),item_id:d(),content_index:A(),delta:d(),output_index:A(),response_id:d()}),ic=g({type:m("response.audio_transcript.done"),event_id:d(),item_id:d(),content_index:A(),transcript:d(),output_index:A(),response_id:d()}),oc=g({type:m("response.content_part.added"),event_id:d(),item_id:d(),content_index:A(),output_index:A(),response_id:d(),part:g({audio:d().optional(),text:d().optional(),transcript:d().optional(),type:ue(["text","audio"]).optional()})}),uc=g({type:m("response.content_part.done"),event_id:d(),item_id:d(),content_index:A(),output_index:A(),response_id:d(),part:g({audio:d().optional(),text:d().optional(),transcript:d().optional(),type:ue(["text","audio"]).optional()})}),cc=g({type:m("response.created"),event_id:d(),response:wa}),ba=g({type:m("response.done"),event_id:d(),response:wa}),dc=g({type:m("response.function_call_arguments.delta"),event_id:d(),item_id:d(),call_id:d(),delta:d(),output_index:A(),response_id:d()}),lc=g({type:m("response.function_call_arguments.done"),event_id:d(),item_id:d(),call_id:d(),arguments:d(),output_index:A(),response_id:d()}),pc=g({type:m("response.output_item.added"),event_id:d(),item:zt,output_index:A(),response_id:d()}),fc=g({type:m("response.output_item.done"),event_id:d(),item:zt,output_index:A(),response_id:d()}),hc=g({type:m("response.text.delta"),event_id:d(),item_id:d(),content_index:A(),delta:d(),output_index:A(),response_id:d()}),mc=g({type:m("response.text.done"),event_id:d(),item_id:d(),content_index:A(),text:d(),output_index:A(),response_id:d()}),gc=g({type:m("session.created"),event_id:d(),session:F()}),_c=g({type:m("session.updated"),event_id:d(),session:F()}),yc=g({type:m("response.cancel"),event_id:d().optional(),response_id:d().optional()}),vc=g({type:m("response.create"),event_id:d().optional(),response:F().optional()}),wc=g({type:m("session.update"),event_id:d().optional(),session:F()}),bc=g({type:m("transcription_session.update"),event_id:d().optional(),session:F()}),xc=g({type:m("transcription_session.updated"),event_id:d(),session:F()}),Sc=g({type:d(),event_id:d().optional().nullable()}).passthrough(),Tc=le("type",[Du,Pu,ju,Mu,Zu,$u,Lu,Fu,Gu,Vu,Yu,Xu,Qu,Ku,ec,tc,nc,rc,sc,ac,ic,oc,uc,cc,ba,dc,lc,pc,fc,hc,mc,gc,_c,xc]);le("type",[Uu,Ju,Bu,qu,zu,Wu,Hu,yc,vc,wc,bc]);function Er(n){const e=JSON.parse(n.data.toString()),t=Tc.safeParse(e);if(!t.success){const r=Sc.safeParse(e);return r.success?{data:r.data,isGeneric:!0}:{data:null,isGeneric:!0}}return{data:t.data,isGeneric:!1}}const xa="gpt-4o-realtime-preview",be={voice:"ash",modalities:["text","audio"],inputAudioFormat:"pcm16",outputAudioFormat:"pcm16",inputAudioTranscription:{model:"gpt-4o-mini-transcribe"},turnDetection:{type:"semantic_vad"},inputAudioNoiseReduction:null,speed:1},Rr=class Rr extends _r{constructor(t={}){super();T(this,ut);T(this,un);T(this,he,null);T(this,cn,null);_(this,"eventEmitter",new Dn);y(this,ut,t.model??xa),y(this,un,t.apiKey)}get currentModel(){return u(this,ut)}set currentModel(t){y(this,ut,t)}get _rawSessionConfig(){return u(this,cn)??null}async _getApiKey(t){const r=t.apiKey??u(this,un);return typeof r=="function"?await r():r}_onMessage(t){var a,i,o,c,l,p;const{data:r,isGeneric:s}=Er(t);if(r!==null&&(this.emit("*",r),!s)){if(r.type==="error"?this.emit("error",{type:"error",error:r}):this.emit(r.type,r),r.type==="response.created"){this.emit("turn_started",{type:"response_started",providerData:{...r}});return}if(r.type==="session.updated"&&y(this,cn,r.session),r.type==="response.done"){const f=ba.safeParse(r);if(!f.success){Pe.error("Error parsing response done event",f.error);return}const h=((a=f.data.response.usage)==null?void 0:a.input_tokens)??0,x=((i=f.data.response.usage)==null?void 0:i.output_tokens)??0,b=h+x,w=new $n({inputTokens:h,inputTokensDetails:((o=f.data.response.usage)==null?void 0:o.input_tokens_details)??{},outputTokens:x,outputTokensDetails:((c=f.data.response.usage)==null?void 0:c.output_tokens_details)??{},totalTokens:b});this.emit("usage_update",w),this.emit("turn_done",{type:"response_done",response:{id:f.data.response.id??"",output:f.data.response.output??[],usage:{inputTokens:h,inputTokensDetails:((l=f.data.response.usage)==null?void 0:l.input_tokens_details)??{},outputTokens:x,outputTokensDetails:((p=f.data.response.usage)==null?void 0:p.output_tokens_details)??{},totalTokens:b}}});return}if(r.type==="response.audio.done"){this.emit("audio_done");return}if(r.type==="conversation.item.deleted"){this.emit("item_deleted",{itemId:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.completed"||r.type==="conversation.item.truncated"){this.sendEvent({type:"conversation.item.retrieve",item_id:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.delta"||r.type==="response.text.delta"||r.type==="response.audio_transcript.delta"||r.type==="response.function_call_arguments.delta"){r.type==="response.audio_transcript.delta"&&this.emit("audio_transcript_delta",{type:"transcript_delta",delta:r.delta,itemId:r.item_id,responseId:r.response_id});return}if((r.type==="conversation.item.created"||r.type==="conversation.item.retrieved")&&r.item.type==="message"){const f=r.type==="conversation.item.created"?r.previous_item_id:null,h=ya.parse({itemId:r.item.id,previousItemId:f,type:r.item.type,role:r.item.role,content:r.item.content,status:r.item.status});this.emit("item_update",h);return}if(r.type==="response.output_item.done"||r.type==="response.output_item.added"){const f=r.item;if(f.type==="function_call"&&f.status==="completed"){const h=va.parse({itemId:f.id,type:f.type,status:"in_progress",arguments:f.arguments,name:f.name,output:null});this.emit("item_update",h),this.emit("function_call",{id:f.id,type:"function_call",callId:f.call_id??"",arguments:f.arguments??"",name:f.name??""});return}if(f.type==="message"){const h=ya.parse({itemId:r.item.id,type:r.item.type,role:r.item.role,content:r.item.content,status:"in_progress"});this.emit("item_update",h);return}}}}_onError(t){this.emit("error",{type:"error",error:t})}_onOpen(){this.emit("connected")}_onClose(){this.emit("disconnected")}sendMessage(t,r){this.sendEvent({type:"conversation.item.create",item:typeof t=="string"?{type:"message",role:"user",content:[{type:"input_text",text:t}]}:t,...r}),this.sendEvent({type:"response.create"})}_getMergedSessionConfig(t){var s;return{instructions:t.instructions,model:t.model??u(this,ut)??be.model,voice:t.voice??be.voice,speed:t.speed??be.speed,modalities:t.modalities??be.modalities,input_audio_format:t.inputAudioFormat??be.inputAudioFormat,output_audio_format:t.outputAudioFormat??be.outputAudioFormat,input_audio_transcription:t.inputAudioTranscription??be.inputAudioTranscription,input_audio_noise_reduction:t.inputAudioNoiseReduction??be.inputAudioNoiseReduction,turn_detection:Rr.buildTurnDetectionConfig(t.turnDetection)??be.turnDetection,tool_choice:t.toolChoice??be.toolChoice,tools:(s=t.tools)==null?void 0:s.map(a=>({...a,strict:void 0})),...t.providerData??{}}}static buildTurnDetectionConfig(t){if(typeof t>"u")return;const{type:r,createResponse:s,create_response:a,eagerness:i,interruptResponse:o,interrupt_response:c,prefixPaddingMs:l,prefix_padding_ms:p,silenceDurationMs:f,silence_duration_ms:h,threshold:x,...b}=t,w={type:r,create_response:s||a,eagerness:i,interrupt_response:o||c,prefix_padding_ms:l||p,silence_duration_ms:f||h,threshold:x,...b};return Object.keys(w).forEach(E=>{w[E]===void 0&&delete w[E]}),Object.keys(w).length>0?w:void 0}set _tracingConfig(t){y(this,he,t)}_updateTracingConfig(t){var r,s,a;if(typeof u(this,he)>"u"&&y(this,he,null),t==="auto"){this.sendEvent({type:"session.update",session:{tracing:"auto"}});return}if(typeof u(this,he)!="string"&&typeof t!="string"){Pe.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");return}if(t===null){Pe.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."),this.sendEvent({type:"session.update",session:{tracing:null}});return}if(u(this,he)===null||typeof u(this,he)=="string"){this.sendEvent({type:"session.update",session:{tracing:t}});return}if((t==null?void 0:t.group_id)!==((r=u(this,he))==null?void 0:r.group_id)||(t==null?void 0:t.metadata)!==((s=u(this,he))==null?void 0:s.metadata)||(t==null?void 0:t.workflow_name)!==((a=u(this,he))==null?void 0:a.workflow_name)){Pe.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s",JSON.stringify(u(this,he)),JSON.stringify(t));return}this.sendEvent({type:"session.update",session:{tracing:t}})}updateSessionConfig(t){const r=this._getMergedSessionConfig(t);this.sendEvent({type:"session.update",session:r})}sendFunctionCallOutput(t,r,s=!0){this.sendEvent({type:"conversation.item.create",item:{type:"function_call_output",output:r,call_id:t.callId}});try{const a=va.parse({itemId:t.id,previousItemId:t.previousItemId,type:"function_call",status:"completed",arguments:t.arguments,name:t.name,output:r});this.emit("item_update",a)}catch(a){Pe.error("Error parsing tool call item",a,t)}s&&this.sendEvent({type:"response.create"})}sendAudio(t,{commit:r=!1}={}){this.sendEvent({type:"input_audio_buffer.append",audio:Pt(t)}),r&&this.sendEvent({type:"input_audio_buffer.commit"})}resetHistory(t,r){const{removals:s,additions:a,updates:i}=Pa(t,r),o=new Set(s.map(l=>l.itemId));for(const l of i)o.add(l.itemId);if(o.size>0)for(const l of o)this.sendEvent({type:"conversation.item.delete",item_id:l});const c=[...a,...i];for(const l of c)if(l.type==="message"){const p={type:"message",role:l.role,content:l.content,id:l.itemId};l.role!=="system"&&l.status&&(p.status=l.status),this.sendEvent({type:"conversation.item.create",item:p})}else l.type==="function_call"&&Pe.warn("Function calls cannot be manually added or updated at the moment. Ignoring.")}};ut=new WeakMap,un=new WeakMap,he=new WeakMap,cn=new WeakMap;let Wt=Rr;class Sa extends Wt{constructor(t={}){if(typeof RTCPeerConnection>"u")throw new Error("WebRTC is not supported in this environment");super(t);_(this,"options");T(this,dn);T(this,z,{status:"disconnected",peerConnection:void 0,dataChannel:void 0});T(this,ln);T(this,ct,!1);T(this,pn,!1);this.options=t,y(this,dn,t.baseUrl??"https://api.openai.com/v1/realtime"),y(this,ln,t.useInsecureApiKey??!1)}get status(){return u(this,z).status}get connectionState(){return u(this,z)}get muted(){return u(this,pn)}async connect(t){if(u(this,z).status==="connected")return;u(this,z).status==="connecting"&&Pe.warn("Realtime connection already in progress. Please await original promise");const r=t.model??this.currentModel;this.currentModel=r;const s=t.url??u(this,dn),a=await this._getApiKey(t),i=typeof a=="string"&&a.startsWith("ek_");if(!u(this,ln)&&!i)throw new K("Using the WebRTC connection in a browser environment requires an insecure API key. Please use a WebSocket connection instead or set the useInsecureApiKey option to true.");return new Promise(async(o,c)=>{try{const l={...t.initialSessionConfig||{},model:this.currentModel},p=new URL(s);let f=new RTCPeerConnection;const h=f.createDataChannel("oai-events");y(this,z,{status:"connecting",peerConnection:f,dataChannel:h}),this.emit("connection_change",u(this,z).status),h.addEventListener("open",()=>{y(this,z,{status:"connected",peerConnection:f,dataChannel:h}),this.updateSessionConfig(l),this.emit("connection_change",u(this,z).status),this._onOpen(),o()}),h.addEventListener("error",me=>{this.close(),this._onError(me),c(me)}),h.addEventListener("message",me=>{this._onMessage(me);const{data:ge,isGeneric:gn}=Er(me);!ge||gn||(ge.type==="response.created"?y(this,ct,!0):ge.type==="response.done"&&y(this,ct,!1),ge.type==="session.created"&&(this._tracingConfig=ge.session.tracing,this._updateTracingConfig(l.tracing??"auto")))});const x=this.options.audioElement??document.createElement("audio");x.autoplay=!0,f.ontrack=me=>{x.srcObject=me.streams[0]};const b=this.options.mediaStream??await navigator.mediaDevices.getUserMedia({audio:!0});f.addTrack(b.getAudioTracks()[0]),this.options.changePeerConnection&&(f=await this.options.changePeerConnection(f),y(this,z,{...u(this,z),peerConnection:f}));const w=await f.createOffer();if(await f.setLocalDescription(w),!w.sdp)throw new Error("Failed to create offer");const E={...this._getMergedSessionConfig(l),model:this.currentModel},R=new FormData;R.append("sdp",w.sdp),R.append("session",JSON.stringify(E));const ne={type:"answer",sdp:await(await fetch(p,{method:"POST",body:R,headers:{Authorization:`Bearer ${a}`,"X-OpenAI-Agents-SDK":Ma["X-OpenAI-Agents-SDK"]}})).text()};await f.setRemoteDescription(ne)}catch(l){this.close(),this._onError(l),c(l)}})}sendEvent(t){if(!u(this,z).dataChannel||u(this,z).dataChannel.readyState!=="open")throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");u(this,z).dataChannel.send(JSON.stringify(t))}mute(t){y(this,pn,t),u(this,z).peerConnection&&u(this,z).peerConnection.getSenders().forEach(s=>{s.track&&(s.track.enabled=!t)})}close(){if(u(this,z).dataChannel&&u(this,z).dataChannel.close(),u(this,z).peerConnection){const t=u(this,z).peerConnection;t.getSenders().forEach(r=>{var s;(s=r.track)==null||s.stop()}),t.close()}u(this,z).status!=="disconnected"&&(y(this,z,{status:"disconnected",peerConnection:void 0,dataChannel:void 0}),this.emit("connection_change",u(this,z).status),this._onClose())}interrupt(){u(this,ct)&&(this.sendEvent({type:"response.cancel"}),y(this,ct,!1)),this.sendEvent({type:"output_audio_buffer.clear"})}}dn=new WeakMap,z=new WeakMap,ln=new WeakMap,ct=new WeakMap,pn=new WeakMap;const kc=globalThis.WebSocket;class Ta extends Wt{constructor(t={}){super(t);T(this,Gn);T(this,dt);T(this,lt);T(this,te,{status:"disconnected",websocket:void 0});T(this,fn);T(this,Ze);T(this,pt);_(this,"_firstAudioTimestamp");_(this,"_audioLengthMs",0);T(this,ft,!1);y(this,lt,t.url),y(this,fn,t.useInsecureApiKey??!1)}get status(){return u(this,te).status}get connectionState(){return u(this,te)}get muted(){return null}get currentItemId(){return u(this,Ze)}_onAudio(t){this.emit("audio",t)}async connect(t){const r=t.model??this.currentModel;this.currentModel=r,y(this,dt,await this._getApiKey(t));const s=t.url??u(this,lt)??`wss://api.openai.com/v1/realtime?model=${this.currentModel}`;y(this,lt,s);const a={...t.initialSessionConfig||{},model:this.currentModel};await new Promise((i,o)=>{try{L(this,Gn,Oa).call(this,i,o,a)}catch(c){o(c)}}),await this.updateSessionConfig(a)}sendEvent(t){if(!u(this,te).websocket)throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");u(this,te).websocket.send(JSON.stringify(t))}close(){var t;(t=u(this,te).websocket)==null||t.close(),y(this,Ze,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,y(this,pt,void 0)}mute(t){throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.")}sendAudio(t,r={}){u(this,te).status==="connected"&&super.sendAudio(t,r)}_cancelResponse(){u(this,ft)&&(this.sendEvent({type:"response.cancel"}),y(this,ft,!1))}_interrupt(t,r=!0){t<0||t>this._audioLengthMs||(r&&this._cancelResponse(),this.emit("audio_interrupted"),this.sendEvent({type:"conversation.item.truncate",item_id:u(this,Ze),content_index:u(this,pt),audio_end_ms:t}))}interrupt(t=!0){if(!u(this,Ze)||typeof this._firstAudioTimestamp!="number")return;const r=Date.now()-this._firstAudioTimestamp;r>=0&&this._interrupt(r,t),y(this,Ze,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,y(this,pt,void 0)}}dt=new WeakMap,lt=new WeakMap,te=new WeakMap,fn=new WeakMap,Ze=new WeakMap,pt=new WeakMap,ft=new WeakMap,Gn=new WeakSet,Oa=function(t,r,s){if(u(this,te).websocket){t();return}if(!u(this,dt))throw new K("API key is not set. Please call `connect()` with an API key first.");if(!u(this,dt).startsWith("ek_")&&!u(this,fn))throw new K("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");const a=["realtime","openai-insecure-api-key."+u(this,dt),"openai-beta.realtime-v1",Za],i=new kc(u(this,lt),a);y(this,te,{status:"connecting",websocket:i}),this.emit("connection_change",u(this,te).status),i.addEventListener("open",()=>{y(this,te,{status:"connected",websocket:i}),this.emit("connection_change",u(this,te).status),this._onOpen(),t()}),i.addEventListener("error",o=>{this._onError(o),y(this,te,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,te).status),r(o)}),i.addEventListener("message",o=>{var p,f,h;this._onMessage(o);const{data:c,isGeneric:l}=Er(o);if(!(!c||l))if(c.type==="response.audio.delta"){y(this,pt,c.content_index),y(this,Ze,c.item_id),this._firstAudioTimestamp===void 0&&(this._firstAudioTimestamp=Date.now(),this._audioLengthMs=0);const x=X(c.delta);(((p=this._rawSessionConfig)==null?void 0:p.output_audio_format)??"pcm16").startsWith("g711_")?this._audioLengthMs+=x.byteLength/8:this._audioLengthMs+=x.byteLength/24/2;const w={type:"audio",data:x,responseId:c.response_id};this._onAudio(w)}else if(c.type==="input_audio_buffer.speech_started"){const x=((h=(f=this._rawSessionConfig)==null?void 0:f.turn_detection)==null?void 0:h.interrupt_response)??!1;this.interrupt(!x)}else c.type==="response.created"?y(this,ft,!0):c.type==="response.done"?y(this,ft,!1):c.type==="session.created"&&(this._tracingConfig=c.session.tracing,this._updateTracingConfig(s.tracing??"auto"))}),i.addEventListener("close",()=>{y(this,te,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,te).status),this._onClose()})};class Ic extends Dn{constructor(t,r={}){super();T(this,H);_(this,"initialAgent");_(this,"options");T(this,B);T(this,Z);T(this,hn,[]);T(this,M);T(this,Et,[]);T(this,Ot);T(this,mn,{});T(this,W,[]);T(this,Nt);T(this,Rt,{});T(this,Ee,!1);this.initialAgent=t,this.options=r,typeof r.transport>"u"&&ja()||r.transport==="webrtc"?y(this,B,new Sa):r.transport==="websocket"||typeof r.transport>"u"?y(this,B,new Ta):y(this,B,r.transport),y(this,Z,t),y(this,M,new yt({...r.context??{},history:u(this,W)})),y(this,Et,(r.outputGuardrails??[]).map(Ou)),y(this,Ot,Eu(r.outputGuardrailSettings??{})),y(this,Nt,r.historyStoreAudio??!1)}get transport(){return u(this,B)}get currentAgent(){return u(this,Z)}get usage(){return u(this,M).usage}get context(){return u(this,M)}get muted(){return u(this,B).muted}get history(){return u(this,W)}async updateAgent(t){return u(this,Z).emit("agent_handoff",u(this,M),t),this.emit("agent_handoff",u(this,M),u(this,Z),t),await L(this,H,Vn).call(this,t),await u(this,B).updateSessionConfig(await L(this,H,zn).call(this)),t}async connect(t){await L(this,H,Vn).call(this,this.initialAgent),L(this,H,Da).call(this),await u(this,B).connect({apiKey:t.apiKey??this.options.apiKey,model:this.options.model,url:t.url,initialSessionConfig:await L(this,H,zn).call(this,this.options.config)}),y(this,W,[]),this.emit("history_updated",u(this,W))}updateHistory(t){let r;typeof t=="function"?r=t(u(this,W)):r=t,u(this,B).resetHistory(u(this,W),r)}sendMessage(t,r={}){u(this,B).sendMessage(t,r)}mute(t){u(this,B).mute(t)}close(){y(this,Rt,{}),u(this,B).close()}sendAudio(t,r={}){u(this,B).sendAudio(t,r)}interrupt(){u(this,B).interrupt()}async approve(t,r={alwaysApprove:!1}){u(this,M).approveTool(t,r);const s=u(this,Z).tools.find(a=>a.name===t.rawItem.name);if(s&&s.type==="function"&&t.rawItem.type==="function_call")await L(this,H,Wn).call(this,t.rawItem,s);else throw new de(`Tool ${t.rawItem.name} not found`)}async reject(t,r={alwaysReject:!1}){u(this,M).rejectTool(t,r);const s=u(this,Z).tools.find(a=>a.name===t.rawItem.name);if(s&&s.type==="function"&&t.rawItem.type==="function_call")await L(this,H,Wn).call(this,t.rawItem,s);else throw new de(`Tool ${t.rawItem.name} not found`)}}B=new WeakMap,Z=new WeakMap,hn=new WeakMap,M=new WeakMap,Et=new WeakMap,Ot=new WeakMap,mn=new WeakMap,W=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Ee=new WeakMap,H=new WeakSet,Vn=async function(t){y(this,Z,t);const s=u(this,Z).handoffs.map(Mn).map(a=>a.getHandoffAsFunctionTool());y(this,hn,[...(await u(this,Z).getAllTools()).filter(a=>a.type==="function"),...s])},zn=async function(t={}){const r=await u(this,Z).getSystemPrompt(u(this,M)),s=this.options.tracingDisabled?null:this.options.workflowName?{workflow_name:this.options.workflowName}:"auto";return s!==null&&s!=="auto"?(this.options.groupId&&(s.group_id=this.options.groupId),this.options.traceMetadata&&(s.metadata=this.options.traceMetadata)):(this.options.groupId||this.options.traceMetadata)&&Pe.warn("In order to set traceMetadata or a groupId you need to specify a workflowName."),{instructions:r,voice:u(this,Z).voice,model:this.options.model,tools:u(this,hn),tracing:s,...t}},Na=async function(t,r){const s=await r.onInvokeHandoff(u(this,M),t.arguments);u(this,Z).emit("agent_handoff",u(this,M),s),this.emit("agent_handoff",u(this,M),u(this,Z),s),await L(this,H,Vn).call(this,s),await u(this,B).updateSessionConfig(await L(this,H,zn).call(this));const a=Ls(s);return u(this,B).sendFunctionCallOutput(t,a,!0),s},Wn=async function(t,r){u(this,M).context.history=JSON.parse(JSON.stringify(u(this,W)));let s=t.arguments;if(r.parameters&&(We(r.parameters)?s=r.parameters.parse(s):s=JSON.parse(s)),await r.needsApproval(u(this,M),s,t.callId)){const c=this.context.isToolApproved({toolName:r.name,callId:t.callId});if(c===!1){this.emit("agent_tool_start",u(this,M),u(this,Z),r,{toolCall:t}),u(this,Z).emit("agent_tool_start",u(this,M),r,{toolCall:t});const l="Tool execution was not approved.";u(this,B).sendFunctionCallOutput(t,l,!0),this.emit("agent_tool_end",u(this,M),u(this,Z),r,l,{toolCall:t}),u(this,Z).emit("agent_tool_end",u(this,M),r,l,{toolCall:t});return}else if(typeof c>"u"){this.emit("tool_approval_requested",u(this,M),u(this,Z),{type:"function_approval",tool:r,approvalItem:new Ae(t,u(this,Z))});return}}this.emit("agent_tool_start",u(this,M),u(this,Z),r,{toolCall:t}),u(this,Z).emit("agent_tool_start",u(this,M),r,{toolCall:t}),u(this,M).context.history=JSON.parse(JSON.stringify(u(this,W)));const i=await r.invoke(u(this,M),t.arguments),o=He(i);u(this,B).sendFunctionCallOutput(t,o,!0),this.emit("agent_tool_end",u(this,M),u(this,Z),r,o,{toolCall:t}),u(this,Z).emit("agent_tool_end",u(this,M),r,o,{toolCall:t})},Ra=async function(t){const r=new Map(u(this,Z).handoffs.map(Mn).map(i=>[i.toolName,i])),s=new Map((await u(this,Z).getAllTools()).map(i=>[i.name,i])),a=r.get(t.name);if(a)await L(this,H,Na).call(this,t,a);else{const i=s.get(t.name);if(i&&i.type==="function")await L(this,H,Wn).call(this,t,i);else throw new de(`Tool ${t.name} not found`)}},Ur=async function(t,r,s){if(u(this,Et).length===0)return;const a={agent:u(this,Z),agentOutput:t,context:u(this,M)},o=(await Promise.all(u(this,Et).map(c=>c.run(a)))).find(c=>c.output.tripwireTriggered);if(o){if(u(this,Rt)[r])return;u(this,Rt)[r]=!0;const c=new yn(`Output guardrail triggered: ${JSON.stringify(o.output.outputInfo)}`,o);this.emit("guardrail_tripped",u(this,M),u(this,Z),c,{itemId:s}),this.interrupt();const l=Nu(o);this.sendMessage(l);return}},Da=function(){u(this,B).on("*",s=>{if(this.emit("transport_event",s),s.type==="conversation.item.input_audio_transcription.completed")try{const a=s;y(this,W,qr(u(this,W),a,u(this,Nt))),u(this,M).context.history=u(this,W),this.emit("history_updated",u(this,W))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,B).on("audio",s=>{u(this,Ee)||(y(this,Ee,!0),this.emit("audio_start",u(this,M),u(this,Z))),this.emit("audio",s)}),u(this,B).on("turn_started",()=>{y(this,Ee,!1),this.emit("agent_start",u(this,M),u(this,Z)),u(this,Z).emit("agent_start",u(this,M),u(this,Z))}),u(this,B).on("turn_done",s=>{const a=s.response.output[s.response.output.length-1],i=Jr(a)??"",o=(a==null?void 0:a.id)??"";this.emit("agent_end",u(this,M),u(this,Z),i),u(this,Z).emit("agent_end",u(this,M),i),L(this,H,Ur).call(this,i,s.response.id,o)}),u(this,B).on("audio_done",()=>{u(this,Ee)&&y(this,Ee,!1),this.emit("audio_stopped",u(this,M),u(this,Z))});let t=0,r;u(this,B).on("audio_transcript_delta",s=>{try{const a=s.delta,i=s.itemId,o=s.responseId;r!==i&&(r=i,t=0);const l=(u(this,mn)[i]??"")+a;if(u(this,mn)[i]=l,u(this,Ot).debounceTextLength<0)return;const p=Math.floor(l.length/u(this,Ot).debounceTextLength);p>t&&(t=p,L(this,H,Ur).call(this,l,o,i))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,B).on("item_update",s=>{try{const a=!u(this,W).some(i=>i.itemId===s.itemId);if(y(this,W,qr(u(this,W),s,u(this,Nt))),u(this,M).context.history=u(this,W),a){const i=u(this,W).find(o=>o.itemId===s.itemId);i&&this.emit("history_added",i)}this.emit("history_updated",u(this,W))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,B).on("item_deleted",s=>{try{y(this,W,u(this,W).filter(a=>a.itemId!==s.itemId)),u(this,M).context.history=u(this,W),this.emit("history_updated",u(this,W))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,B).on("function_call",async s=>{try{await L(this,H,Ra).call(this,s)}catch(a){Pe.error("Error handling function call",a),this.emit("error",{type:"error",error:a})}}),u(this,B).on("usage_update",s=>{u(this,M).usage.add(s)}),u(this,B).on("audio_interrupted",()=>{u(this,Ee)&&y(this,Ee,!1),this.emit("audio_interrupted",u(this,M),u(this,Z))}),u(this,B).on("error",s=>{this.emit("error",s)})};const Ac={base64ToArrayBuffer:X,arrayBufferToBase64:Pt,getLastTextFromAudioOutputMessage:Jr};P.DEFAULT_OPENAI_REALTIME_MODEL=xa,P.DEFAULT_OPENAI_REALTIME_SESSION_CONFIG=be,P.ModelBehaviorError=de,P.OpenAIRealtimeBase=Wt,P.OpenAIRealtimeWebRTC=Sa,P.OpenAIRealtimeWebSocket=Ta,P.OutputGuardrailTripwireTriggered=yn,P.RealtimeAgent=Cu,P.RealtimeSession=Ic,P.UserError=K,P.tool=bn,P.utils=Ac,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy51bWQuanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvcGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvT3B0aW9ucy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3V0aWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9SZWZzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvZXJyb3JNZXNzYWdlcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvZXJyb3JVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC9kaXN0L2VzbS92My90eXBlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hbnkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FycmF5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9iaWdpbnQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2Jvb2xlYW4ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2JyYW5kZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2NhdGNoLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kYXRlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kZWZhdWx0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lZmZlY3RzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2xpdGVyYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3N0cmluZy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVjb3JkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9tYXAubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25hdGl2ZUVudW0ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25ldmVyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udWxsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmlvbi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbGFibGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bWJlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb2JqZWN0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vcHRpb25hbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcGlwZWxpbmUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Byb21pc2UubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3NldC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3VuZGVmaW5lZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5rbm93bi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVhZG9ubHkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZURlZi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3pvZFRvSnNvblNjaGVtYS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9oZWxwZXJzL3pvZC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2Vycm9ycy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3R5cGVHdWFyZHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvbG9jYWxlcy9lbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9wYXJzZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9lcnJvclV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvdHlwZXMuanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L21jcC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jcmVhdGVTcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvaW5kZXgubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9saWZlY3ljbGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ndWFyZHJhaWwubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9oYW5kb2ZmLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL21lc3NhZ2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXZlbnRzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuSW1wbGVtZW50YXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5TdGF0ZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwiLi4vcmVhbHRpbWVBZ2VudC5tanMiLCIuLi9ndWFyZHJhaWwubWpzIiwiLi4vbG9nZ2VyLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lQmFzZS5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMiLCIuLi9zaGltcy9zaGltcy1icm93c2VyLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjAuMTNcIixcbiAgICBcInZlcnNpb25zXCI6IHtcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiOiBcIjAuMC4xM1wiLFxuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLWNvcmVcIjogXCJ3b3Jrc3BhY2U6KlwiLFxuICAgICAgICBcIkBvcGVuYWkvem9kXCI6IFwibnBtOnpvZEAzLjI1LjQwIC0gMy4yNS42N1wiXG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IE1FVEFEQVRBO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0YWRhdGEubWpzLm1hcCIsImltcG9ydCBNRVRBREFUQSBmcm9tIFwiLi9tZXRhZGF0YS5tanNcIjtcbi8qKlxuICogQ29udmVydHMgYSBiYXNlNjQgc3RyaW5nIHRvIGFuIEFycmF5QnVmZmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0XG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcy5idWZmZXI7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIEFycmF5QnVmZmVyIHRvIGEgYmFzZTY0IHN0cmluZ1xuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyKSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcikpO1xuICAgIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gYW4gYXVkaW8gb3V0cHV0IG1lc3NhZ2VcbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlKGl0ZW0pIHtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0gPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnIHx8XG4gICAgICAgICEoJ3R5cGUnIGluIGl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtLnR5cGUgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICFpdGVtLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghKCdjb250ZW50JyBpbiBpdGVtKSB8fFxuICAgICAgICAhQXJyYXkuaXNBcnJheShpdGVtLmNvbnRlbnQpIHx8XG4gICAgICAgIGl0ZW0uY29udGVudC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RDb250ZW50SXRlbSA9IGl0ZW0uY29udGVudFtpdGVtLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKCEoJ3R5cGUnIGluIGxhc3RDb250ZW50SXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGxhc3RDb250ZW50SXRlbS50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50ZXh0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udGV4dFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50cmFuc2NyaXB0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENvbXBhcmUgdHdvIGNvbnZlcnNhdGlvbiBoaXN0b3JpZXMgdG8gZGV0ZXJtaW5lIHRoZSByZW1vdmFscywgYWRkaXRpb25zLCBhbmQgdXBkYXRlcy5cbiAqIEBwYXJhbSBvbGRIaXN0b3J5IC0gVGhlIG9sZCBoaXN0b3J5LlxuICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkuXG4gKiBAcmV0dXJucyBBIGRpZmYgb2YgdGhlIHR3byBoaXN0b3JpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICBjb25zdCByZW1vdmFscyA9IG9sZEhpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiAhbmV3SGlzdG9yeS5zb21lKChuZXdJdGVtKSA9PiBuZXdJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQpKTtcbiAgICBjb25zdCBhZGRpdGlvbnMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW9sZEhpc3Rvcnkuc29tZSgob2xkSXRlbSkgPT4gb2xkSXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgdXBkYXRlcyA9IG5ld0hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCAmJlxuICAgICAgICBKU09OLnN0cmluZ2lmeShvbGRJdGVtKSAhPT0gSlNPTi5zdHJpbmdpZnkoaXRlbSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmFscyxcbiAgICAgICAgYWRkaXRpb25zLFxuICAgICAgICB1cGRhdGVzLFxuICAgIH07XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIFdlYlJUQy5cbiAqIEByZXR1cm5zIFRydWUgaWYgV2ViUlRDIGlzIHN1cHBvcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzV2ViUlRDU3VwcG9ydCgpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvd1snUlRDUGVlckNvbm5lY3Rpb24nXSAhPT0gJ3VuZGVmaW5lZCc7XG59XG4vKipcbiAqIFJlbW92ZXMgdGhlIGF1ZGlvIGRhdGEgZnJvbSBhbGwgY29udGVudCBpbiBhIG1lc3NhZ2UgYnkgc2V0dGluZyBpdCB0byBudWxsLlxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBdWRpb0Zyb21Db250ZW50KGl0ZW0pIHtcbiAgICBpZiAoaXRlbS5yb2xlID09PSAnc3lzdGVtJykge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSByZWFsdGltZSBoaXN0b3J5IGFycmF5IGJhc2VkIG9uIHRoZSBpbmNvbWluZyBldmVudCBhbmQgb3B0aW9ucy5cbiAqIEBwYXJhbSBoaXN0b3J5IC0gVGhlIGN1cnJlbnQgaGlzdG9yeSBhcnJheS5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwcm9jZXNzIChSZWFsdGltZUl0ZW0pLlxuICogQHBhcmFtIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEgLSBXaGV0aGVyIHRvIGluY2x1ZGUgYXVkaW8gZGF0YSBpbiBtZXNzYWdlIGl0ZW1zLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgaGlzdG9yeSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeShoaXN0b3J5LCBldmVudCwgc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSkge1xuICAgIC8vIE1lcmdlIHRyYW5zY3JpcHQgaW50byBwbGFjZWhvbGRlciBpbnB1dF9hdWRpbyBtZXNzYWdlXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1faWQgJiZcbiAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJyAmJlxuICAgICAgICAgICAgICAgICdyb2xlJyBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IGV2ZW50LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB1cGRhdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGl0ZW1cbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChpZHggPT09IGV4aXN0aW5nSW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNob3VsZEluY2x1ZGVBdWRpb0RhdGEgJiYgaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnQucHJldmlvdXNJdGVtSWQpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGFmdGVyIHByZXZpb3VzSXRlbUlkIGlmIGZvdW5kLCBlbHNlIGF0IGVuZFxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50LnByZXZpb3VzSXRlbUlkKTtcbiAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZSgwLCBwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBoZWFkZXJzIHRvIHVzZSBmb3IgdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IEhFQURFUlMgPSB7XG4gICAgJ1VzZXItQWdlbnQnOiBgQWdlbnRzL0phdmFTY3JpcHQgJHtNRVRBREFUQS52ZXJzaW9ufWAsXG4gICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWAsXG59O1xuLyoqXG4gKiBCcm93c2VyIHdlYnNvY2tldCBoZWFkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFdFQlNPQ0tFVF9NRVRBID0gYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRXhlY3V0ZShmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgYXdhaXQgZm4oKV07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gW2Vycm9yLCBudWxsXTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYWZlRXhlY3V0ZS5tanMubWFwIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0Py5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbXBsZXRpb24sXG4gICAgICAgICAgICBjaG9pY2VzOiBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIC4uLnRvb2xDYWxsLmZ1bmN0aW9uLFxuICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0ID8gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZXIubWpzLm1hcCIsImV4cG9ydCBjb25zdCBpZ25vcmVPdmVycmlkZSA9IFN5bWJvbCgnTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZScpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogJ3Jvb3QnLFxuICAgIGVmZmVjdFN0cmF0ZWd5OiAnaW5wdXQnLFxuICAgIHBpcGVTdHJhdGVneTogJ2FsbCcsXG4gICAgZGF0ZVN0cmF0ZWd5OiAnZm9ybWF0OmRhdGUtdGltZScsXG4gICAgbWFwU3RyYXRlZ3k6ICdlbnRyaWVzJyxcbiAgICBudWxsYWJsZVN0cmF0ZWd5OiAnZnJvbS10YXJnZXQnLFxuICAgIHJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneTogJ3Bhc3N0aHJvdWdoJyxcbiAgICBkZWZpbml0aW9uUGF0aDogJ2RlZmluaXRpb25zJyxcbiAgICB0YXJnZXQ6ICdqc29uU2NoZW1hNycsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICBtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcbiAgICBwYXR0ZXJuU3RyYXRlZ3k6ICdlc2NhcGUnLFxuICAgIGFwcGx5UmVnZXhGbGFnczogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogJ2Zvcm1hdDplbWFpbCcsXG4gICAgYmFzZTY0U3RyYXRlZ3k6ICdjb250ZW50RW5jb2Rpbmc6YmFzZTY0JyxcbiAgICBuYW1lU3RyYXRlZ3k6ICdyZWYnLFxufTtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgYGRlZmluaXRpb25zYCBoZXJlIGFzIHdlIG1heSBtdXRhdGUgaXRcbiAgICByZXR1cm4gKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9ucy5tanMubWFwIiwiZXhwb3J0IGNvbnN0IHpvZERlZiA9ICh6b2RTY2hlbWEpID0+IHtcbiAgICByZXR1cm4gJ19kZWYnIGluIHpvZFNjaGVtYSA/IHpvZFNjaGVtYS5fZGVmIDogem9kU2NoZW1hO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgIGlmICghb2JqKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IF9rIGluIG9iailcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmV4cG9ydCBjb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gX29wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgX29wdGlvbnMubmFtZV1cbiAgICAgICAgOiBfb3B0aW9ucy5iYXNlUGF0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5fb3B0aW9ucyxcbiAgICAgICAgY3VycmVudFBhdGg6IGN1cnJlbnRQYXRoLFxuICAgICAgICBwcm9wZXJ0eVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VlblJlZnM6IG5ldyBTZXQoKSxcbiAgICAgICAgc2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW1xuICAgICAgICAgICAgem9kRGVmKGRlZiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVmOiB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHV0aW9uIG9mIHJlZmVyZW5jZXMgd2lsbCBiZSBmb3JjZWQgZXZlbiB0aG91Z2ggc2Vlbiwgc28gaXQncyBvayB0aGF0IHRoZSBzY2hlbWEgaXMgdW5kZWZpbmVkIGhlcmUgZm9yIG5vdy5cbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWZzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5yZXMuZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgW2tleV06IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIGtleSwgdmFsdWUsIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5tanMubWFwIiwiZXhwb3J0IHZhciB1dGlsO1xuKGZ1bmN0aW9uICh1dGlsKSB7XG4gICAgdXRpbC5hc3NlcnRFcXVhbCA9IChfKSA9PiB7IH07XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKSkuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG5leHBvcnQgdmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBab2RQYXJzZWRUeXBlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJzdHJpbmdcIixcbiAgICBcIm5hblwiLFxuICAgIFwibnVtYmVyXCIsXG4gICAgXCJpbnRlZ2VyXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiYm9vbGVhblwiLFxuICAgIFwiZGF0ZVwiLFxuICAgIFwiYmlnaW50XCIsXG4gICAgXCJzeW1ib2xcIixcbiAgICBcImZ1bmN0aW9uXCIsXG4gICAgXCJ1bmRlZmluZWRcIixcbiAgICBcIm51bGxcIixcbiAgICBcImFycmF5XCIsXG4gICAgXCJvYmplY3RcIixcbiAgICBcInVua25vd25cIixcbiAgICBcInByb21pc2VcIixcbiAgICBcInZvaWRcIixcbiAgICBcIm5ldmVyXCIsXG4gICAgXCJtYXBcIixcbiAgICBcInNldFwiLFxuXSk7XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuZXhwb3J0IGNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGZvcm1hdChfbWFwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWUudW5pb25FcnJvcnMubWFwKHByb2Nlc3NFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfYXJndW1lbnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLmFyZ3VtZW50c0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRFcnJvcnMuX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlLnBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGlzc3VlLnBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc3QgZXJyb3JBcnJheTogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlcnJvckFycmF5Ll9lcnJvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgZXJyb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3VycltlbF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRXJyb3JzO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgWm9kRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBhIFpvZEVycm9yOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMuY3VycmVudFBhdGgudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGg/LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0LCBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCwgbWFrZVBhcnNlYWJsZVRvb2wsIH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgYXMgX3pvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wgfSBmcm9tIFwiLi4vbGliL1Jlc3BvbnNlc1BhcnNlci5tanNcIjtcbmZ1bmN0aW9uIHpvZFRvSnNvblNjaGVtYShzY2hlbWEsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX3pvZFRvSnNvblNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgb3BlbmFpU3RyaWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBuYW1lU3RyYXRlZ3k6ICdkdXBsaWNhdGUtcmVmJyxcbiAgICAgICAgJHJlZlN0cmF0ZWd5OiAnZXh0cmFjdC10by1yb290JyxcbiAgICAgICAgbnVsbGFibGVTdHJhdGVneTogJ3Byb3BlcnR5JyxcbiAgICB9KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgSlNPTlNjaGVtYWAgcmVzcG9uc2UgZm9ybWF0IG9iamVjdCBmcm9tXG4gKiB0aGUgZ2l2ZW4gWm9kIHNjaGVtYS5cbiAqXG4gKiBJZiB0aGlzIGlzIHBhc3NlZCB0byB0aGUgYC5wYXJzZSgpYCwgYC5zdHJlYW0oKWAgb3IgYC5ydW5Ub29scygpYFxuICogY2hhdCBjb21wbGV0aW9uIG1ldGhvZHMgdGhlbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSB3aWxsIGNvbnRhaW4gYVxuICogYC5wYXJzZWRgIHByb3BlcnR5IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSBjb250ZW50IHdpdGhcbiAqIHRoZSBnaXZlbiBab2Qgb2JqZWN0LlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMucGFyc2Uoe1xuICogICAgbW9kZWw6ICdncHQtNG8tMjAyNC0wOC0wNicsXG4gKiAgICBtZXNzYWdlczogW1xuICogICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgbWF0aCB0dXRvci4nIH0sXG4gKiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnc29sdmUgOHggKyAzMSA9IDInIH0sXG4gKiAgICBdLFxuICogICAgcmVzcG9uc2VfZm9ybWF0OiB6b2RSZXNwb25zZUZvcm1hdChcbiAqICAgICAgei5vYmplY3Qoe1xuICogICAgICAgIHN0ZXBzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAqICAgICAgICAgIGV4cGxhbmF0aW9uOiB6LnN0cmluZygpLFxuICogICAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICAgIH0pKSxcbiAqICAgICAgICBmaW5hbF9hbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgIH0pLFxuICogICAgICAnbWF0aF9hbnN3ZXInLFxuICogICAgKSxcbiAqICB9KTtcbiAqICBjb25zdCBtZXNzYWdlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlO1xuICogIGlmIChtZXNzYWdlPy5wYXJzZWQpIHtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkKTtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkLmZpbmFsX2Fuc3dlcik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIGAuY3JlYXRlKClgIG1ldGhvZCBidXQgd2lsbCBub3RcbiAqIHJlc3VsdCBpbiBhbnkgYXV0b21hdGljIHBhcnNpbmcsIHlvdSdsbCBoYXZlIHRvIHBhcnNlIHRoZSByZXNwb25zZSB5b3Vyc2VsZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlRm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgICAgICB9LFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFRleHRGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBuYW1lLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBmdW5jdGlvbmAgdG9vbCB0aGF0IGNhbiBiZSBpbnZva2VkXG4gKiBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjaGF0IGNvbXBsZXRpb24gYC5ydW5Ub29scygpYCBtZXRob2Qgb3IgYXV0b21hdGljYWxseVxuICogcGFyc2VkIGJ5IGAucGFyc2UoKWAgLyBgLnN0cmVhbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZEZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE9cbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5kZXNjcmlwdGlvbiA/IHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgIH0sXG4gICAgfSwge1xuICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5mdW5jdGlvbixcbiAgICAgICAgcGFyc2VyOiAoYXJncykgPT4gb3B0aW9ucy5wYXJhbWV0ZXJzLnBhcnNlKEpTT04ucGFyc2UoYXJncykpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlc0Z1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZC5tanMubWFwIiwiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgZXJyb3JzIHRocm93biBieSB0aGUgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCIvKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdfZGVmJyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuX2RlZiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQuX2RlZiAhPT0gbnVsbCAmJlxuICAgICAgICAndHlwZU5hbWUnIGluIGlucHV0Ll9kZWYgJiZcbiAgICAgICAgaW5wdXQuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE9iamVjdCcpO1xufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGFuIG9iamVjdCB3aXRoIGFuIGBpbnB1dGAgcHJvcGVydHkuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FnZW50VG9vbElucHV0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdpbnB1dCcgaW4gaW5wdXQgJiZcbiAgICAgICAgdHlwZW9mIGlucHV0LmlucHV0ID09PSAnc3RyaW5nJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlR3VhcmRzLm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgZnVuY3Rpb24gdG9vbCBuYW1lIGJ5IHJlcGxhY2luZyBzcGFjZXMgd2l0aCB1bmRlcnNjb3JlcyBhbmRcbiAqIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBmdW5jdGlvbiB0b29sIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Z1bmN0aW9uVG9vbE5hbWUobmFtZSkge1xuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbiAgICAvLyBSZXBsYWNlIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldL2csICdfJyk7XG4gICAgLy8gRW5zdXJlIHRoZSBuYW1lIGlzIG5vdCBlbXB0eVxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rvb2wgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWU7XG59XG4vKipcbiAqIEdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbSBhbiBpbnB1dCB0eXBlLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIFpvZE9iamVjdCwgd2Ugd2lsbCBjb252ZXJ0XG4gKiBpdCBpbnRvIGEgSlNPTiBTY2hlbWEgYW5kIHVzZSBab2QgYXMgcGFyc2VyLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIEpTT04gc2NoZW1hLCB3ZSB1c2UgdGhlXG4gKiBKU09OLnBhcnNlIGZ1bmN0aW9uIHRvIGdldCB0aGUgcGFyc2VyLlxuICogQHBhcmFtIGlucHV0VHlwZSAtIFRoZSBpbnB1dCB0eXBlIHRvIGdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgc2NoZW1hIGFuZCBwYXJzZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGlucHV0VHlwZSwgbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlciA9IChpbnB1dCkgPT4gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgaWYgKGlzWm9kT2JqZWN0KGlucHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRnVuY3Rpb24gPSB6b2RSZXNwb25zZXNGdW5jdGlvbih7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogaW5wdXRUeXBlLFxuICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcGFyc2VyOiBmb3JtYXR0ZWRGdW5jdGlvbi4kcGFyc2VSYXcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gem9kVGV4dEZvcm1hdChvdXRwdXRUeXBlLCAnb3V0cHV0Jyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0VHlwZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xzLm1qcy5tYXAiLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblx0XHRsZXQgbmFtZXNwYWNlc0NhY2hlO1xuXHRcdGxldCBlbmFibGVkQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG5cdFx0XHQvLyBEaXNhYmxlZD9cblx0XHRcdGlmICghZGVidWcuZW5hYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNlbGYgPSBkZWJ1ZztcblxuXHRcdFx0Ly8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0XHRcdGNvbnN0IGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjb25zdCBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG5cdFx0XHRzZWxmLmRpZmYgPSBtcztcblx0XHRcdHNlbGYucHJldiA9IHByZXZUaW1lO1xuXHRcdFx0c2VsZi5jdXJyID0gY3Vycjtcblx0XHRcdHByZXZUaW1lID0gY3VycjtcblxuXHRcdFx0YXJnc1swXSA9IGNyZWF0ZURlYnVnLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlT1xuXHRcdFx0XHRhcmdzLnVuc2hpZnQoJyVPJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IGFueSBgZm9ybWF0dGVyc2AgdHJhbnNmb3JtYXRpb25zXG5cdFx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdFx0YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG5cdFx0XHRcdC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcblx0XHRcdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICclJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsID0gYXJnc1tpbmRleF07XG5cdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG5cdFx0XHRcdFx0Ly8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKVxuXHRcdFx0Y3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuXG5cdFx0XHRjb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcblx0XHRcdGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRkZWJ1Zy51c2VDb2xvcnMgPSBjcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKTtcblx0XHRkZWJ1Zy5jb2xvciA9IGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG5cdFx0ZGVidWcuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcdGRlYnVnLmRlc3Ryb3kgPSBjcmVhdGVEZWJ1Zy5kZXN0cm95OyAvLyBYWFggVGVtcG9yYXJ5LiBXaWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuXHRcdFx0XHRcdG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG5cdFx0XHRcdFx0ZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVuYWJsZWRDYWNoZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cdFx0Y3JlYXRlRGVidWcubmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCAnLCcpXG5cdFx0XHQuc3BsaXQoJywnKVxuXHRcdFx0LmZpbHRlcihCb29sZWFuKTtcblxuXHRcdGZvciAoY29uc3QgbnMgb2Ygc3BsaXQpIHtcblx0XHRcdGlmIChuc1swXSA9PT0gJy0nKSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLnNraXBzLnB1c2gobnMuc2xpY2UoMSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcubmFtZXMucHVzaChucyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBuYW1lc3BhY2UgdGVtcGxhdGUsIGhvbm9yaW5nXG5cdCAqIGFzdGVyaXNrcyBhcyB3aWxkY2FyZHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRjaGVzVGVtcGxhdGUoc2VhcmNoLCB0ZW1wbGF0ZSkge1xuXHRcdGxldCBzZWFyY2hJbmRleCA9IDA7XG5cdFx0bGV0IHRlbXBsYXRlSW5kZXggPSAwO1xuXHRcdGxldCBzdGFySW5kZXggPSAtMTtcblx0XHRsZXQgbWF0Y2hJbmRleCA9IDA7XG5cblx0XHR3aGlsZSAoc2VhcmNoSW5kZXggPCBzZWFyY2gubGVuZ3RoKSB7XG5cdFx0XHRpZiAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09IHNlYXJjaFtzZWFyY2hJbmRleF0gfHwgdGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykpIHtcblx0XHRcdFx0Ly8gTWF0Y2ggY2hhcmFjdGVyIG9yIHByb2NlZWQgd2l0aCB3aWxkY2FyZFxuXHRcdFx0XHRpZiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykge1xuXHRcdFx0XHRcdHN0YXJJbmRleCA9IHRlbXBsYXRlSW5kZXg7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleCA9IHNlYXJjaEluZGV4O1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKzsgLy8gU2tpcCB0aGUgJyonXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VhcmNoSW5kZXgrKztcblx0XHRcdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc3RhckluZGV4ICE9PSAtMSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5lZ2F0ZWQtY29uZGl0aW9uXG5cdFx0XHRcdC8vIEJhY2t0cmFjayB0byB0aGUgbGFzdCAnKicgYW5kIHRyeSB0byBtYXRjaCBtb3JlIGNoYXJhY3RlcnNcblx0XHRcdFx0dGVtcGxhdGVJbmRleCA9IHN0YXJJbmRleCArIDE7XG5cdFx0XHRcdG1hdGNoSW5kZXgrKztcblx0XHRcdFx0c2VhcmNoSW5kZXggPSBtYXRjaEluZGV4O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBtYXRjaFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSB0cmFpbGluZyAnKicgaW4gdGVtcGxhdGVcblx0XHR3aGlsZSAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRlbXBsYXRlSW5kZXggPT09IHRlbXBsYXRlLmxlbmd0aDtcblx0fVxuXG5cdC8qKlxuXHQqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuXHQqXG5cdCogQHJldHVybiB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0XHRjb25zdCBuYW1lc3BhY2VzID0gW1xuXHRcdFx0Li4uY3JlYXRlRGVidWcubmFtZXMsXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5za2lwcy5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGZvciAoY29uc3Qgc2tpcCBvZiBjcmVhdGVEZWJ1Zy5za2lwcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBza2lwKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBjcmVhdGVEZWJ1Zy5uYW1lcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBucykpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiIsIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuZXhwb3J0cy5kZXN0cm95ID0gKCgpID0+IHtcblx0bGV0IHdhcm5lZCA9IGZhbHNlO1xuXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKCF3YXJuZWQpIHtcblx0XHRcdHdhcm5lZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcblx0JyMwMDAwQ0MnLFxuXHQnIzAwMDBGRicsXG5cdCcjMDAzM0NDJyxcblx0JyMwMDMzRkYnLFxuXHQnIzAwNjZDQycsXG5cdCcjMDA2NkZGJyxcblx0JyMwMDk5Q0MnLFxuXHQnIzAwOTlGRicsXG5cdCcjMDBDQzAwJyxcblx0JyMwMENDMzMnLFxuXHQnIzAwQ0M2NicsXG5cdCcjMDBDQzk5Jyxcblx0JyMwMENDQ0MnLFxuXHQnIzAwQ0NGRicsXG5cdCcjMzMwMENDJyxcblx0JyMzMzAwRkYnLFxuXHQnIzMzMzNDQycsXG5cdCcjMzMzM0ZGJyxcblx0JyMzMzY2Q0MnLFxuXHQnIzMzNjZGRicsXG5cdCcjMzM5OUNDJyxcblx0JyMzMzk5RkYnLFxuXHQnIzMzQ0MwMCcsXG5cdCcjMzNDQzMzJyxcblx0JyMzM0NDNjYnLFxuXHQnIzMzQ0M5OScsXG5cdCcjMzNDQ0NDJyxcblx0JyMzM0NDRkYnLFxuXHQnIzY2MDBDQycsXG5cdCcjNjYwMEZGJyxcblx0JyM2NjMzQ0MnLFxuXHQnIzY2MzNGRicsXG5cdCcjNjZDQzAwJyxcblx0JyM2NkNDMzMnLFxuXHQnIzk5MDBDQycsXG5cdCcjOTkwMEZGJyxcblx0JyM5OTMzQ0MnLFxuXHQnIzk5MzNGRicsXG5cdCcjOTlDQzAwJyxcblx0JyM5OUNDMzMnLFxuXHQnI0NDMDAwMCcsXG5cdCcjQ0MwMDMzJyxcblx0JyNDQzAwNjYnLFxuXHQnI0NDMDA5OScsXG5cdCcjQ0MwMENDJyxcblx0JyNDQzAwRkYnLFxuXHQnI0NDMzMwMCcsXG5cdCcjQ0MzMzMzJyxcblx0JyNDQzMzNjYnLFxuXHQnI0NDMzM5OScsXG5cdCcjQ0MzM0NDJyxcblx0JyNDQzMzRkYnLFxuXHQnI0NDNjYwMCcsXG5cdCcjQ0M2NjMzJyxcblx0JyNDQzk5MDAnLFxuXHQnI0NDOTkzMycsXG5cdCcjQ0NDQzAwJyxcblx0JyNDQ0NDMzMnLFxuXHQnI0ZGMDAwMCcsXG5cdCcjRkYwMDMzJyxcblx0JyNGRjAwNjYnLFxuXHQnI0ZGMDA5OScsXG5cdCcjRkYwMENDJyxcblx0JyNGRjAwRkYnLFxuXHQnI0ZGMzMwMCcsXG5cdCcjRkYzMzMzJyxcblx0JyNGRjMzNjYnLFxuXHQnI0ZGMzM5OScsXG5cdCcjRkYzM0NDJyxcblx0JyNGRjMzRkYnLFxuXHQnI0ZGNjYwMCcsXG5cdCcjRkY2NjMzJyxcblx0JyNGRjk5MDAnLFxuXHQnI0ZGOTkzMycsXG5cdCcjRkZDQzAwJyxcblx0JyNGRkNDMzMnXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcblx0Ly8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2Vcblx0Ly8gZXhwbGljaXRseVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgKHdpbmRvdy5wcm9jZXNzLnR5cGUgPT09ICdyZW5kZXJlcicgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRsZXQgbTtcblxuXHQvLyBJcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmV0dXJuLWFzc2lnblxuXHRyZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcblx0XHQvLyBJcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG5cdFx0KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcblx0XHQvLyBJcyBmaXJlZm94ID49IHYzMT9cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAobSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pKSAmJiBwYXJzZUludChtWzFdLCAxMCkgPj0gMzEpIHx8XG5cdFx0Ly8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG5cdGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICtcblx0XHR0aGlzLm5hbWVzcGFjZSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICtcblx0XHRhcmdzWzBdICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgK1xuXHRcdCcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0aWYgKCF0aGlzLnVzZUNvbG9ycykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuXHRhcmdzLnNwbGljZSgxLCAwLCBjLCAnY29sb3I6IGluaGVyaXQnKTtcblxuXHQvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXHRsZXQgaW5kZXggPSAwO1xuXHRsZXQgbGFzdEMgPSAwO1xuXHRhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgbWF0Y2ggPT4ge1xuXHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpbmRleCsrO1xuXHRcdGlmIChtYXRjaCA9PT0gJyVjJykge1xuXHRcdFx0Ly8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdFx0XHQvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuXHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHR9XG5cdH0pO1xuXG5cdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmRlYnVnKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2tcbiAqIHRvIGBjb25zb2xlLmxvZ2AuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7fSk7XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcblx0dHJ5IHtcblx0XHRpZiAobmFtZXNwYWNlcykge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oJ2RlYnVnJywgbmFtZXNwYWNlcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbG9hZCgpIHtcblx0bGV0IHI7XG5cdHRyeSB7XG5cdFx0ciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpIHx8IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdERUJVRycpIDtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cblxuXHQvLyBJZiBkZWJ1ZyBpc24ndCBzZXQgaW4gTFMsIGFuZCB3ZSdyZSBpbiBFbGVjdHJvbiwgdHJ5IHRvIGxvYWQgJERFQlVHXG5cdGlmICghciAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2VudicgaW4gcHJvY2Vzcykge1xuXHRcdHIgPSBwcm9jZXNzLmVudi5ERUJVRztcblx0fVxuXG5cdHJldHVybiByO1xufVxuXG4vKipcbiAqIExvY2Fsc3RvcmFnZSBhdHRlbXB0cyB0byByZXR1cm4gdGhlIGxvY2Fsc3RvcmFnZS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNhZmFyaSB0aHJvd3NcbiAqIHdoZW4gYSB1c2VyIGRpc2FibGVzIGNvb2tpZXMvbG9jYWxzdG9yYWdlXG4gKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuICpcbiAqIEByZXR1cm4ge0xvY2FsU3RvcmFnZX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHtcblx0dHJ5IHtcblx0XHQvLyBUVk1MS2l0IChBcHBsZSBUViBKUyBSdW50aW1lKSBkb2VzIG5vdCBoYXZlIGEgd2luZG93IG9iamVjdCwganVzdCBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0XG5cdFx0Ly8gVGhlIEJyb3dzZXIgYWxzbyBoYXMgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dC5cblx0XHRyZXR1cm4gbG9jYWxTdG9yYWdlO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY29tbW9uJykoZXhwb3J0cyk7XG5cbmNvbnN0IHtmb3JtYXR0ZXJzfSA9IG1vZHVsZS5leHBvcnRzO1xuXG4vKipcbiAqIE1hcCAlaiB0byBgSlNPTi5zdHJpbmdpZnkoKWAsIHNpbmNlIG5vIFdlYiBJbnNwZWN0b3JzIGRvIHRoYXQgYnkgZGVmYXVsdC5cbiAqL1xuXG5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbiAodikge1xuXHR0cnkge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4gJ1tVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiAnICsgZXJyb3IubWVzc2FnZTtcblx0fVxufTtcbiIsImltcG9ydCB7IGxvYWRFbnYgYXMgX2xvYWRFbnYsIGlzQnJvd3NlckVudmlyb25tZW50LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbi8qKlxuICogTG9hZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gdGhlIHByb2Nlc3MgZW52aXJvbm1lbnQuXG4gKlxuICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIF9sb2FkRW52KCk7XG59XG4vKipcbiAqIENoZWNrcyBpZiBhIGZsYWcgaXMgZW5hYmxlZCBpbiB0aGUgZW52aXJvbm1lbnQuXG4gKlxuICogQHBhcmFtIGZsYWdOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZsYWcgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZsYWcgaXMgZW5hYmxlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzRW5hYmxlZChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGVudiA9IGxvYWRFbnYoKTtcbiAgICByZXR1cm4gKHR5cGVvZiBlbnYgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIChlbnZbZmxhZ05hbWVdID09PSAndHJ1ZScgfHwgZW52W2ZsYWdOYW1lXSA9PT0gJzEnKSk7XG59XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciB0cmFjaW5nLlxuICovXG5leHBvcnQgY29uc3QgdHJhY2luZyA9IHtcbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsb2FkRW52KCkuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgLy8gZGlzYWJsaW5nIGJ5IGRlZmF1bHQgaW4gdGVzdHNcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRElTQUJMRV9UUkFDSU5HJyk7XG4gICAgfSxcbn07XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciBsb2dnaW5nLlxuICovXG5leHBvcnQgY29uc3QgbG9nZ2luZyA9IHtcbiAgICBnZXQgZG9udExvZ01vZGVsRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19NT0RFTF9EQVRBJyk7XG4gICAgfSxcbiAgICBnZXQgZG9udExvZ1Rvb2xEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX1RPT0xfREFUQScpO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLm1qcy5tYXAiLCJpbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgbG9nZ2luZyB9IGZyb20gXCIuL2NvbmZpZy5tanNcIjtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgTExNIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nTW9kZWxEYXRhID0gbG9nZ2luZy5kb250TG9nTW9kZWxEYXRhO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyB0b29sIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nVG9vbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dUb29sRGF0YTtcbi8qKlxuICogR2V0IGEgbG9nZ2VyIGZvciBhIGdpdmVuIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIG5hbWVzcGFjZSAtIHRoZSBuYW1lc3BhY2UgdG8gdXNlIGZvciB0aGUgbG9nZ2VyLlxuICogQHJldHVybnMgQSBsb2dnZXIgb2JqZWN0IHdpdGggYGRlYnVnYCBhbmQgYGVycm9yYCBtZXRob2RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWVzcGFjZSA9ICdvcGVuYWktYWdlbnRzJykge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgZGVidWc6IGRlYnVnKG5hbWVzcGFjZSksXG4gICAgICAgIGVycm9yOiBjb25zb2xlLmVycm9yLFxuICAgICAgICB3YXJuOiBjb25zb2xlLndhcm4sXG4gICAgICAgIGRvbnRMb2dNb2RlbERhdGEsXG4gICAgICAgIGRvbnRMb2dUb29sRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpjb3JlJyk7XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiB0b1NtYXJ0U3RyaW5nKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZSkge1xuICAgICAgICAgICAgcmV0dXJuICdbb2JqZWN0IHdpdGggY2lyY3VsYXIgcmVmZXJlbmNlc10nO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c21hcnRTdHJpbmcubWpzLm1hcCIsImltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG4vKipcbiAqIEV4cG9zZXMgYSBjb21wdXRlciB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZFxuICpcbiAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbXB1dGVyIHRvb2wgbGlrZSBzcGVjaWZ5aW5nIHRoZSBsb2NhdGlvbiBvZiB5b3VyIGFnZW50XG4gKiBAcmV0dXJucyBhIGNvbXB1dGVyIHRvb2wgZGVmaW5pdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZXJUb29sKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2NvbXB1dGVyX3VzZV9wcmV2aWV3JyxcbiAgICAgICAgY29tcHV0ZXI6IG9wdGlvbnMuY29tcHV0ZXIsXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhvc3RlZCBNQ1AgdG9vbCBkZWZpbml0aW9uLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJMYWJlbCAtIFRoZSBsYWJlbCBpZGVudGlmeWluZyB0aGUgTUNQIHNlcnZlci5cbiAqIEBwYXJhbSBzZXJ2ZXJVcmwgLSBUaGUgVVJMIG9mIHRoZSBNQ1Agc2VydmVyLlxuICogQHBhcmFtIHJlcXVpcmVBcHByb3ZhbCAtIFdoZXRoZXIgdG9vbCBjYWxscyByZXF1aXJlIGFwcHJvdmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdGVkTWNwVG9vbChvcHRpb25zKSB7XG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ25ldmVyJ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgc2VydmVyX3VybDogb3B0aW9ucy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgOiBidWlsZFJlcXVpcmVBcHByb3ZhbChvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCksXG4gICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIGFuIGVycm9yIG9jY3VycyB3aGlsZSBydW5uaW5nIHRoZSB0b29sLlxuICpcbiAqIEFsd2F5cyByZXR1cm5zIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBydW5uaW5nIHRoZSB0b29sLiBQbGVhc2UgdHJ5IGFnYWluLiBFcnJvcjogPGVycm9yIGRldGFpbHM+YFxuICpcbiAqIEBwYXJhbSBjb250ZXh0IEFuIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IFJ1bkNvbnRleHRcbiAqIEBwYXJhbSBlcnJvciBUaGUgZXJyb3IgdGhhdCBvY2N1cnJlZFxuICovXG5mdW5jdGlvbiBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24oY29udGV4dCwgZXJyb3IpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnRvU3RyaW5nKCkgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6ICR7ZGV0YWlsc31gO1xufVxuLyoqXG4gKiBFeHBvc2VzIGEgZnVuY3Rpb24gdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIHRvb2xcbiAqIEByZXR1cm5zIEEgbmV3IHRvb2xcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICAgICAgPyB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5uYW1lKVxuICAgICAgICA6IHRvRnVuY3Rpb25Ub29sTmFtZShvcHRpb25zLmV4ZWN1dGUubmFtZSk7XG4gICAgY29uc3QgdG9vbEVycm9yRnVuY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5lcnJvckZ1bmN0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGRlZmF1bHRUb29sRXJyb3JGdW5jdGlvblxuICAgICAgICA6IG9wdGlvbnMuZXJyb3JGdW5jdGlvbjtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5LiBFaXRoZXIgbmFtZSB5b3VyIGZ1bmN0aW9uIG9yIHByb3ZpZGUgYSBuYW1lIGluIHRoZSBvcHRpb25zLicpO1xuICAgIH1cbiAgICBjb25zdCBzdHJpY3RNb2RlID0gb3B0aW9ucy5zdHJpY3QgPz8gdHJ1ZTtcbiAgICBpZiAoIXN0cmljdE1vZGUgJiYgaXNab2RPYmplY3Qob3B0aW9ucy5wYXJhbWV0ZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdTdHJpY3QgbW9kZSBpcyByZXF1aXJlZCBmb3IgWm9kIHBhcmFtZXRlcnMnKTtcbiAgICB9XG4gICAgY29uc3QgeyBwYXJzZXIsIHNjaGVtYTogcGFyYW1ldGVycyB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShvcHRpb25zLnBhcmFtZXRlcnMsIG5hbWUpO1xuICAgIGFzeW5jIGZ1bmN0aW9uIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQpIHtcbiAgICAgICAgY29uc3QgW2Vycm9yLCBwYXJzZWRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKGlucHV0KSk7XG4gICAgICAgIGlmIChlcnJvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9OiAke2lucHV0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52b2tpbmcgdG9vbCAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfSB3aXRoIGlucHV0ICR7aW5wdXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW9ucy5leGVjdXRlKHBhcnNlZCwgcnVuQ29udGV4dCk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IGNvbXBsZXRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUb29sICR7bmFtZX0gcmV0dXJuZWQ6ICR7c3RyaW5nUmVzdWx0fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShydW5Db250ZXh0LCBpbnB1dCkge1xuICAgICAgICByZXR1cm4gX2ludm9rZShydW5Db250ZXh0LCBpbnB1dCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAodG9vbEVycm9yRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCAobm9uLWZhdGFsKScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sRXJyb3JGdW5jdGlvbihydW5Db250ZXh0LCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgc3RyaWN0OiBzdHJpY3RNb2RlLFxuICAgICAgICBpbnZva2UsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVxdWlyZUFwcHJvdmFsKHJlcXVpcmVBcHByb3ZhbCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChyZXF1aXJlQXBwcm92YWwuYWx3YXlzKSB7XG4gICAgICAgIHJlc3VsdC5hbHdheXMgPSB7IHRvb2xfbmFtZXM6IHJlcXVpcmVBcHByb3ZhbC5hbHdheXMudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIGlmIChyZXF1aXJlQXBwcm92YWwubmV2ZXIpIHtcbiAgICAgICAgcmVzdWx0Lm5ldmVyID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwubmV2ZXIudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihhbGxvd2VkVG9vbHMpIHtcbiAgICBpZiAodHlwZW9mIGFsbG93ZWRUb29scyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsb3dlZFRvb2xzKSkge1xuICAgICAgICByZXR1cm4geyB0b29sX25hbWVzOiBhbGxvd2VkVG9vbHMgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzPy50b29sTmFtZXMgPz8gW10gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2wubWpzLm1hcCIsImV4cG9ydCB2YXIgdXRpbDtcbihmdW5jdGlvbiAodXRpbCkge1xuICAgIHV0aWwuYXNzZXJ0RXF1YWwgPSAoXykgPT4geyB9O1xuICAgIGZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsgfVxuICAgIHV0aWwuYXNzZXJ0SXMgPSBhc3NlcnRJcztcbiAgICBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgdXRpbC5hc3NlcnROZXZlciA9IGFzc2VydE5ldmVyO1xuICAgIHV0aWwuYXJyYXlUb0VudW0gPSAoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgb2JqW2l0ZW1dID0gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gICAgdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhvYmopLmZpbHRlcigoaykgPT4gdHlwZW9mIG9ialtvYmpba11dICE9PSBcIm51bWJlclwiKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIHZhbGlkS2V5cykge1xuICAgICAgICAgICAgZmlsdGVyZWRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKGZpbHRlcmVkKTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0VmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RLZXlzKG9iaikubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2VdO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0S2V5cyA9IHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gXCJmdW5jdGlvblwiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA/IChvYmopID0+IE9iamVjdC5rZXlzKG9iaikgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH07XG4gICAgdXRpbC5maW5kID0gKGFyciwgY2hlY2tlcikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tlcihpdGVtKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgdXRpbC5pc0ludGVnZXIgPSB0eXBlb2YgTnVtYmVyLmlzSW50ZWdlciA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gKHZhbCkgPT4gTnVtYmVyLmlzSW50ZWdlcih2YWwpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbCkgJiYgTWF0aC5mbG9vcih2YWwpID09PSB2YWw7XG4gICAgZnVuY3Rpb24gam9pblZhbHVlcyhhcnJheSwgc2VwYXJhdG9yID0gXCIgfCBcIikge1xuICAgICAgICByZXR1cm4gYXJyYXkubWFwKCh2YWwpID0+ICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiID8gYCcke3ZhbH0nYCA6IHZhbCkpLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9XG4gICAgdXRpbC5qb2luVmFsdWVzID0gam9pblZhbHVlcztcbiAgICB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciA9IChfLCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn0pKHV0aWwgfHwgKHV0aWwgPSB7fSkpO1xuZXhwb3J0IHZhciBvYmplY3RVdGlsO1xuKGZ1bmN0aW9uIChvYmplY3RVdGlsKSB7XG4gICAgb2JqZWN0VXRpbC5tZXJnZVNoYXBlcyA9IChmaXJzdCwgc2Vjb25kKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5maXJzdCxcbiAgICAgICAgICAgIC4uLnNlY29uZCwgLy8gc2Vjb25kIG92ZXJ3cml0ZXMgZmlyc3RcbiAgICAgICAgfTtcbiAgICB9O1xufSkob2JqZWN0VXRpbCB8fCAob2JqZWN0VXRpbCA9IHt9KSk7XG5leHBvcnQgY29uc3QgWm9kUGFyc2VkVHlwZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwic3RyaW5nXCIsXG4gICAgXCJuYW5cIixcbiAgICBcIm51bWJlclwiLFxuICAgIFwiaW50ZWdlclwiLFxuICAgIFwiZmxvYXRcIixcbiAgICBcImJvb2xlYW5cIixcbiAgICBcImRhdGVcIixcbiAgICBcImJpZ2ludFwiLFxuICAgIFwic3ltYm9sXCIsXG4gICAgXCJmdW5jdGlvblwiLFxuICAgIFwidW5kZWZpbmVkXCIsXG4gICAgXCJudWxsXCIsXG4gICAgXCJhcnJheVwiLFxuICAgIFwib2JqZWN0XCIsXG4gICAgXCJ1bmtub3duXCIsXG4gICAgXCJwcm9taXNlXCIsXG4gICAgXCJ2b2lkXCIsXG4gICAgXCJuZXZlclwiLFxuICAgIFwibWFwXCIsXG4gICAgXCJzZXRcIixcbl0pO1xuZXhwb3J0IGNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zdHJpbmc7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBab2RQYXJzZWRUeXBlLm5hbiA6IFpvZFBhcnNlZFR5cGUubnVtYmVyO1xuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYm9vbGVhbjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbjtcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYmlnaW50O1xuICAgICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zeW1ib2w7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50aGVuICYmIHR5cGVvZiBkYXRhLnRoZW4gPT09IFwiZnVuY3Rpb25cIiAmJiBkYXRhLmNhdGNoICYmIHR5cGVvZiBkYXRhLmNhdGNoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5wcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBNYXAgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm1hcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIERhdGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5kYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUub2JqZWN0O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5rbm93bjtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHsgdXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0IFpvZElzc3VlQ29kZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwiaW52YWxpZF90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2xpdGVyYWxcIixcbiAgICBcImN1c3RvbVwiLFxuICAgIFwiaW52YWxpZF91bmlvblwiLFxuICAgIFwiaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yXCIsXG4gICAgXCJpbnZhbGlkX2VudW1fdmFsdWVcIixcbiAgICBcInVucmVjb2duaXplZF9rZXlzXCIsXG4gICAgXCJpbnZhbGlkX2FyZ3VtZW50c1wiLFxuICAgIFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiLFxuICAgIFwiaW52YWxpZF9kYXRlXCIsXG4gICAgXCJpbnZhbGlkX3N0cmluZ1wiLFxuICAgIFwidG9vX3NtYWxsXCIsXG4gICAgXCJ0b29fYmlnXCIsXG4gICAgXCJpbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlc1wiLFxuICAgIFwibm90X211bHRpcGxlX29mXCIsXG4gICAgXCJub3RfZmluaXRlXCIsXG5dKTtcbmV4cG9ydCBjb25zdCBxdW90ZWxlc3NKc29uID0gKG9iaikgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpO1xuICAgIHJldHVybiBqc29uLnJlcGxhY2UoL1wiKFteXCJdKylcIjovZywgXCIkMTpcIik7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGdldCBlcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaXNzdWVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gW107XG4gICAgICAgIHRoaXMuYWRkSXNzdWUgPSAoc3ViKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3Vlcywgc3ViXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZXMgPSAoc3VicyA9IFtdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3VlcywgLi4uc3Vic107XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFjdHVhbFByb3RvID0gbmV3LnRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgYWN0dWFsUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fX3Byb3RvX18gPSBhY3R1YWxQcm90bztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBcIlpvZEVycm9yXCI7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gaXNzdWVzO1xuICAgIH1cbiAgICBmb3JtYXQoX21hcHBlcikge1xuICAgICAgICBjb25zdCBtYXBwZXIgPSBfbWFwcGVyIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoaXNzdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWUubWVzc2FnZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0geyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICBjb25zdCBwcm9jZXNzRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF91bmlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlLnVuaW9uRXJyb3JzLm1hcChwcm9jZXNzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfcmV0dXJuX3R5cGVcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUucmV0dXJuVHlwZUVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2FyZ3VtZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5hcmd1bWVudHNFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyID0gZmllbGRFcnJvcnM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBpc3N1ZS5wYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBpc3N1ZS5wYXRoW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1pbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIGlmICh0eXBlb2YgZWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnN0IGVycm9yQXJyYXk6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZXJyb3JBcnJheS5fZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IGVycm9yQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0uX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnJbZWxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwcm9jZXNzRXJyb3IodGhpcyk7XG4gICAgICAgIHJldHVybiBmaWVsZEVycm9ycztcbiAgICB9XG4gICAgc3RhdGljIGFzc2VydCh2YWx1ZSkge1xuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIFpvZEVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSBab2RFcnJvcjogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlzc3VlcywgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIsIDIpO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgZmxhdHRlbihtYXBwZXIgPSAoaXNzdWUpID0+IGlzc3VlLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7fTtcbiAgICAgICAgY29uc3QgZm9ybUVycm9ycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiB0aGlzLmlzc3Vlcykge1xuICAgICAgICAgICAgaWYgKHN1Yi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gPSBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUVycm9ycy5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmb3JtRXJyb3JzLCBmaWVsZEVycm9ycyB9O1xuICAgIH1cbiAgICBnZXQgZm9ybUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdHRlbigpO1xuICAgIH1cbn1cblpvZEVycm9yLmNyZWF0ZSA9IChpc3N1ZXMpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihpc3N1ZXMpO1xuICAgIHJldHVybiBlcnJvcjtcbn07XG4iLCJpbXBvcnQgeyBab2RJc3N1ZUNvZGUgfSBmcm9tIFwiLi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUgfSBmcm9tIFwiLi4vaGVscGVycy91dGlsLmpzXCI7XG5jb25zdCBlcnJvck1hcCA9IChpc3N1ZSwgX2N0eCkgPT4ge1xuICAgIGxldCBtZXNzYWdlO1xuICAgIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGU6XG4gICAgICAgICAgICBpZiAoaXNzdWUucmVjZWl2ZWQgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWw6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgbGl0ZXJhbCB2YWx1ZSwgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5leHBlY3RlZCwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYFVucmVjb2duaXplZCBrZXkocykgaW4gb2JqZWN0OiAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5rZXlzLCBcIiwgXCIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGVudW0gdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfSwgcmVjZWl2ZWQgJyR7aXNzdWUucmVjZWl2ZWR9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIHJldHVybiB0eXBlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGF0ZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbmNsdWRlc1wiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24ucG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBhdCBvbmUgb3IgbW9yZSBwb3NpdGlvbnMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7aXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IHN0YXJ0IHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uc3RhcnRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwiZW5kc1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlLnZhbGlkYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnZhbGlkYXRpb24gIT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCAke2lzc3VlLnZhbGlkYXRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fc21hbGw6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgbW9yZSB0aGFuYH0gJHtpc3N1ZS5taW5pbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1pbmltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fYmlnOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYHVuZGVyYH0gJHtpc3N1ZS5tYXhpbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0b2AgOiBgc21hbGxlciB0aGFuYH0gJHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWF4aW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmN1c3RvbTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlLm11bHRpcGxlT2Z9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfZmluaXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiTnVtYmVyIG11c3QgYmUgZmluaXRlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZXJyb3JNYXA7XG4iLCJpbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuL2xvY2FsZXMvZW4uanNcIjtcbmxldCBvdmVycmlkZUVycm9yTWFwID0gZGVmYXVsdEVycm9yTWFwO1xuZXhwb3J0IHsgZGVmYXVsdEVycm9yTWFwIH07XG5leHBvcnQgZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwKSB7XG4gICAgb3ZlcnJpZGVFcnJvck1hcCA9IG1hcDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1hcCgpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVFcnJvck1hcDtcbn1cbiIsImltcG9ydCB7IGdldEVycm9yTWFwIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi4vbG9jYWxlcy9lbi5qc1wiO1xuZXhwb3J0IGNvbnN0IG1ha2VJc3N1ZSA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZnVsbFBhdGggPSBbLi4ucGF0aCwgLi4uKGlzc3VlRGF0YS5wYXRoIHx8IFtdKV07XG4gICAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgIH07XG4gICAgaWYgKGlzc3VlRGF0YS5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgbWVzc2FnZTogaXNzdWVEYXRhLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIGNvbnN0IG1hcHMgPSBlcnJvck1hcHNcbiAgICAgICAgLmZpbHRlcigobSkgPT4gISFtKVxuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAucmV2ZXJzZSgpO1xuICAgIGZvciAoY29uc3QgbWFwIG9mIG1hcHMpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gbWFwKGZ1bGxJc3N1ZSwgeyBkYXRhLCBkZWZhdWx0RXJyb3I6IGVycm9yTWVzc2FnZSB9KS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVNYXAgPSBnZXRFcnJvck1hcCgpO1xuICAgIGNvbnN0IGlzc3VlID0gbWFrZUlzc3VlKHtcbiAgICAgICAgaXNzdWVEYXRhOiBpc3N1ZURhdGEsXG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgLy8gY29udGV4dHVhbCBlcnJvciBtYXAgaXMgZmlyc3QgcHJpb3JpdHlcbiAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCwgLy8gdGhlbiBzY2hlbWEtYm91bmQgbWFwIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAsIC8vIHRoZW4gZ2xvYmFsIG92ZXJyaWRlIG1hcFxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAgPT09IGRlZmF1bHRFcnJvck1hcCA/IHVuZGVmaW5lZCA6IGRlZmF1bHRFcnJvck1hcCwgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgfSk7XG4gICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG5leHBvcnQgY2xhc3MgUGFyc2VTdGF0dXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICAgIH1cbiAgICBkaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IFwidmFsaWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImRpcnR5XCI7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJhYm9ydGVkXCI7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cykge1xuICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBhcnJheVZhbHVlLnB1c2gocy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBhcnJheVZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBtZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiYgKHR5cGVvZiB2YWx1ZS52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiB8fCBwYWlyLmFsd2F5c1NldCkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbE9iamVjdFtrZXkudmFsdWVdID0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE9iamVjdCB9O1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJTlZBTElEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuZXhwb3J0IGNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgT0sgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBpc0Fib3J0ZWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmV4cG9ydCBjb25zdCBpc1ZhbGlkID0gKHgpID0+IHguc3RhdHVzID09PSBcInZhbGlkXCI7XG5leHBvcnQgY29uc3QgaXNBc3luYyA9ICh4KSA9PiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJpbXBvcnQgeyB0b29sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IE1DUFNlcnZlclN0ZGlvIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgYXMgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBsb2dnZXIgYXMgZ2xvYmFsTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUgPSAnb3BlbmFpLWFnZW50czpzdGRpby1tY3AtY2xpZW50JztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NUUkVBTUFCTEVfSFRUUF9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RyZWFtYWJsZS1odHRwLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/XG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNaW5pbXVtIE1DUCB0b29sIGRhdGEgZGVmaW5pdGlvbi5cbiAqIFRoaXMgdHlwZSBkZWZpbml0aW9uIGRvZXMgbm90IGludGVuZCB0byBjb3ZlciBhbGwgcG9zc2libGUgcHJvcGVydGllcy5cbiAqIEl0IHN1cHBvcnRzIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIHVzZWQgaW4gdGhpcyBTREsuXG4gKi9cbmV4cG9ydCBjb25zdCBNQ1BUb29sID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFNjaGVtYTogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ29iamVjdCcpLFxuICAgICAgICBwcm9wZXJ0aWVzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgcmVxdWlyZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB6LmJvb2xlYW4oKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBQdWJsaWMgaW50ZXJmYWNlIG9mIGFuIE1DUCBzZXJ2ZXIgdGhhdCBwcm92aWRlcyB0b29scy5cbiAqIFlvdSBjYW4gdXNlIHRoaXMgY2xhc3MgdG8gcGFzcyBNQ1Agc2VydmVyIHNldHRpbmdzIHRvIHlvdXIgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdGRpbyBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbi8qKlxuICogRmV0Y2hlcyBhbmQgZmxhdHRlbnMgYWxsIHRvb2xzIGZyb20gbXVsdGlwbGUgTUNQIHNlcnZlcnMuXG4gKiBMb2dzIGFuZCBza2lwcyBhbnkgc2VydmVycyB0aGF0IGZhaWwgdG8gcmVzcG9uZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbE1jcEZ1bmN0aW9uVG9vbHMobWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdCA9IGZhbHNlKSB7XG4gICAgY29uc3QgYWxsVG9vbHMgPSBbXTtcbiAgICBjb25zdCB0b29sTmFtZXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBzZXJ2ZXIgb2YgbWNwU2VydmVycykge1xuICAgICAgICBjb25zdCBzZXJ2ZXJUb29scyA9IGF3YWl0IGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCk7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xOYW1lcyA9IG5ldyBTZXQoc2VydmVyVG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gWy4uLnNlcnZlclRvb2xOYW1lc10uZmlsdGVyKChuKSA9PiB0b29sTmFtZXMuaGFzKG4pKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBEdXBsaWNhdGUgdG9vbCBuYW1lcyBmb3VuZCBhY3Jvc3MgTUNQIHNlcnZlcnM6ICR7aW50ZXJzZWN0aW9uLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHNlcnZlclRvb2xzKSB7XG4gICAgICAgICAgICB0b29sTmFtZXMuYWRkKHQubmFtZSk7XG4gICAgICAgICAgICBhbGxUb29scy5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxUb29scztcbn1cbmNvbnN0IF9jYWNoZWRUb29scyA9IHt9O1xuLyoqXG4gKiBSZW1vdmUgY2FjaGVkIHRvb2xzIGZvciB0aGUgZ2l2ZW4gc2VydmVyIHNvIHRoZSBuZXh0IGxvb2t1cCBmZXRjaGVzIGZyZXNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHNlcnZlck5hbWUgLSBOYW1lIG9mIHRoZSBNQ1Agc2VydmVyIHdob3NlIGNhY2hlIHNob3VsZCBiZSBjbGVhcmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW52YWxpZGF0ZVNlcnZlclRvb2xzQ2FjaGUoc2VydmVyTmFtZSkge1xuICAgIGRlbGV0ZSBfY2FjaGVkVG9vbHNbc2VydmVyTmFtZV07XG59XG4vKipcbiAqIEZldGNoZXMgYWxsIGZ1bmN0aW9uIHRvb2xzIGZyb20gYSBzaW5nbGUgTUNQIHNlcnZlci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIoc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSB7XG4gICAgaWYgKHNlcnZlci5jYWNoZVRvb2xzTGlzdCAmJiBfY2FjaGVkVG9vbHNbc2VydmVyLm5hbWVdKSB7XG4gICAgICAgIHJldHVybiBfY2FjaGVkVG9vbHNbc2VydmVyLm5hbWVdLm1hcCgodCkgPT4gbWNwVG9GdW5jdGlvblRvb2wodCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoTUNQTGlzdFRvb2xzU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBjb25zdCBtY3BUb29scyA9IGF3YWl0IHNlcnZlci5saXN0VG9vbHMoKTtcbiAgICAgICAgc3Bhbi5zcGFuRGF0YS5yZXN1bHQgPSBtY3BUb29scy5tYXAoKHQpID0+IHQubmFtZSk7XG4gICAgICAgIGNvbnN0IHRvb2xzID0gbWNwVG9vbHMubWFwKCh0KSA9PiBtY3BUb0Z1bmN0aW9uVG9vbCh0LCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpKTtcbiAgICAgICAgaWYgKHNlcnZlci5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXSA9IG1jcFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9LCB7IGRhdGE6IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9IH0pO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFsbCBNQ1AgdG9vbHMgZnJvbSB0aGUgcHJvdmlkZWQgc2VydmVycywgdXNpbmcgdGhlIGZ1bmN0aW9uIHRvb2wgY29udmVyc2lvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbE1jcFRvb2xzKG1jcFNlcnZlcnMsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIHJldHVybiBnZXRBbGxNY3BGdW5jdGlvblRvb2xzKG1jcFNlcnZlcnMsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBNQ1AgdG9vbCBkZWZpbml0aW9uIHRvIGEgZnVuY3Rpb24gdG9vbCBmb3IgdGhlIEFnZW50cyBTREsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtY3BUb0Z1bmN0aW9uVG9vbChtY3BUb29sLCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UoaW5wdXQsIF9jb250ZXh0KSB7XG4gICAgICAgIGxldCBhcmdzID0ge307XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnICYmIGlucHV0KSB7XG4gICAgICAgICAgICBhcmdzID0gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJiBpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgICAgICBhcmdzID0gaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgIGN1cnJlbnRTcGFuLnNwYW5EYXRhWydtY3BfZGF0YSddID0geyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHNlcnZlci5jYWxsVG9vbChtY3BUb29sLm5hbWUsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gY29udGVudC5sZW5ndGggPT09IDEgPyBjb250ZW50WzBdIDogY29udGVudDtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiBtY3BUb29sLmlucHV0U2NoZW1hPy50eXBlID8/ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5wcm9wZXJ0aWVzID8/IHt9LFxuICAgICAgICByZXF1aXJlZDogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucmVxdWlyZWQgPz8gW10sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5hZGRpdGlvbmFsUHJvcGVydGllcyA/PyBmYWxzZSxcbiAgICB9O1xuICAgIGlmIChjb252ZXJ0U2NoZW1hc1RvU3RyaWN0IHx8IHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gdHJ1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RyaWN0U2NoZW1hID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRvb2woe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1jcFRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBzdHJpY3RTY2hlbWEsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnbG9iYWxMb2dnZXIud2FybihgRXJyb3IgY29udmVydGluZyBNQ1Agc2NoZW1hIHRvIHN0cmljdCBtb2RlOiAke2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uU3RyaWN0U2NoZW1hID0ge1xuICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIHRvb2woe1xuICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBtY3BUb29sLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBwYXJhbWV0ZXJzOiBub25TdHJpY3RTY2hlbWEsXG4gICAgICAgIHN0cmljdDogZmFsc2UsXG4gICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICB9KTtcbn1cbi8qKlxuICogRW5zdXJlcyB0aGUgZ2l2ZW4gSlNPTiBzY2hlbWEgaXMgc3RyaWN0IChubyBhZGRpdGlvbmFsIHByb3BlcnRpZXMsIHJlcXVpcmVkIGZpZWxkcyBzZXQpLlxuICovXG5mdW5jdGlvbiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYSkge1xuICAgIGNvbnN0IG91dCA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoIW91dC5yZXF1aXJlZClcbiAgICAgICAgb3V0LnJlcXVpcmVkID0gW107XG4gICAgcmV0dXJuIG91dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1jcC5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbi8vIFVzZSBmdW5jdGlvbiBpbnN0ZWFkIG9mIGV4cG9ydGluZyB0aGUgdmFsdWUgdG8gcHJldmVudFxuLy8gY2lyY3VsYXIgZGVwZW5kZW5jeSByZXNvbHV0aW9uIGlzc3VlcyBjYXVzZWQgYnkgb3RoZXIgZXhwb3J0cyBpbiAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnQgY2xhc3MgQnJvd3NlckV2ZW50RW1pdHRlciB7XG4gICAgI3RhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpO1xuICAgIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuI3RhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuI3RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZW1pdCh0eXBlLCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBhcmdzIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy4jdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgdGhpcy5vZmYodHlwZSwgaGFuZGxlcik7XG4gICAgICAgICAgICBsaXN0ZW5lciguLi5hcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0IHsgQnJvd3NlckV2ZW50RW1pdHRlciBhcyBSdW50aW1lRXZlbnRFbWl0dGVyIH07XG5leHBvcnQgY29uc3QgcmFuZG9tVVVJRCA9IGNyeXB0by5yYW5kb21VVUlELmJpbmQoY3J5cHRvKTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZSA9IGNsYXNzIFJlYWRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHBpcGVUbyhfZGVzdGluYXRpb24sIF9vcHRpb25zKSB7IH1cbiAgICBwaXBlVGhyb3VnaChfdHJhbnNmb3JtLCBfb3B0aW9ucykgeyB9XG59O1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlU3RyZWFtID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIgPSBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI7XG5leHBvcnQgY29uc3QgVHJhbnNmb3JtU3RyZWFtID0gZ2xvYmFsVGhpcy5UcmFuc2Zvcm1TdHJlYW07XG5leHBvcnQgY2xhc3MgQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGNvbnRleHQgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgcnVuKGNvbnRleHQsIGZuKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgICB9XG4gICAgZW50ZXJXaXRoKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IHsgTUNQU2VydmVyU3RkaW8sIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIH0gZnJvbSBcIi4vbWNwLXNlcnZlci9icm93c2VyLm1qc1wiO1xuY2xhc3MgQnJvd3NlclRpbWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKSB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XG4gICAgICAgIHRpbWVvdXQucmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC51bnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC51bnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQudW5yZWYgOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0Lmhhc1JlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5oYXNSZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0Lmhhc1JlZiA6ICgpID0+IHRydWU7XG4gICAgICAgIHRpbWVvdXQucmVmcmVzaCA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWZyZXNoID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5yZWZyZXNoIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgcmV0dXJuIHRpbWVvdXQ7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cbn1cbmNvbnN0IHRpbWVyID0gbmV3IEJyb3dzZXJUaW1lcigpO1xuZXhwb3J0IHsgdGltZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xubGV0IF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2U7XG5mdW5jdGlvbiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKSB7XG4gICAgX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZSA/Pz0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlKCk7XG4gICAgcmV0dXJuIF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2U7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGN1cnJlbnQgdHJhY2UgZnJvbSB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHJldHVybnMgVGhlIGN1cnJlbnQgdHJhY2Ugb3IgbnVsbCBpZiB0aGVyZSBpcyBubyB0cmFjZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRUcmFjZSgpIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjdXJyZW50VHJhY2U/LnRyYWNlKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50VHJhY2UudHJhY2U7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IHNwYW4gZnJvbSB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHJldHVybnMgVGhlIGN1cnJlbnQgc3BhbiBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuPy5zcGFuKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50U3Bhbi5zcGFuO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBpcyBhbiBBc3luY0xvY2FsU3RvcmFnZSBpbnN0YW5jZSB0aGF0IHN0b3JlcyB0aGUgY3VycmVudCB0cmFjZS5cbiAqIEl0IHdpbGwgYXV0b21hdGljYWxseSBoYW5kbGUgdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIGRpZmZlcmVudCBldmVudCBsb29wIGV4ZWN1dGlvbnMuXG4gKlxuICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBzaG91bGQgYmUgdGhlIG9ubHkgd2F5IHRoYXQgdGhpcyBjb250ZXh0IGdldHMgaW50ZXJmYWNlZCB3aXRoLlxuICovXG5mdW5jdGlvbiBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuKSB7XG4gICAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICAgICAgaWYgKCF0cmFjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0cmFjZSBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRyYWNlLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKHRyYWNlKTtcbiAgICAgICAgYXdhaXQgdHJhY2UuZW5kKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSBhIG5ldyB0cmFjZSBhbmQgYXNzaWduIGl0IHRvIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiB0aGUgZnVuY3Rpb25cbiAqIHBhc3NlZCB0byBpdC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIGFuZCBhc3NpZ24gdGhlIHRyYWNlIGNvbnRleHQgdG8uXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBjcmVhdGlvbiBvZiB0aGUgdHJhY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFjZSh0cmFjZSwgZm4sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG5ld1RyYWNlID0gdHlwZW9mIHRyYWNlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZSh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgbmFtZTogdHJhY2UsXG4gICAgICAgIH0pXG4gICAgICAgIDogdHJhY2U7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bih7IHRyYWNlOiBuZXdUcmFjZSB9LCBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuKSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBhY3RpdmUgdHJhY2UgaW4gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LiBJZiB0aGVyZVxuICogaXMsIGl0IHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIHRoZSBleGlzdGluZyB0cmFjZS4gSWYgdGhlcmUgaXMgbm8gdHJhY2UsIGl0IHdpbGwgY3JlYXRlXG4gKiBhIG5ldyBvbmUgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmenVuY3Rpb24gdG8gcnVuIGFuZCBhc3NpZ24gdGhlIHRyYWNlIGNvbnRleHQgdG8uXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBjcmVhdGlvbiBvZiB0aGUgdHJhY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yQ3JlYXRlVHJhY2UoZm4sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgIGlmIChjdXJyZW50VHJhY2UpIHtcbiAgICAgICAgLy8gaWYgdGhpcyBleGVjdXRpb24gY29udGV4dCBhbHJlYWR5IGhhcyBhIHRyYWNlIGluc3RhbmNlIGluIGl0IHdlIGp1c3QgY29udGludWVcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld1RyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKG9wdGlvbnMpO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oeyB0cmFjZTogbmV3VHJhY2UgfSwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgc2V0IHRoZSBjdXJyZW50IHNwYW4gaW4gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSBzcGFuIC0gVGhlIHNwYW4gdG8gc2V0IGFzIHRoZSBjdXJyZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U3BhbihzcGFuKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZXhpc3RpbmcgdHJhY2UgZm91bmQnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQuc3Bhbikge1xuICAgICAgICBjb250ZXh0LnNwYW4ucHJldmlvdXNTcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgICAgIGNvbnRleHQucHJldmlvdXNTcGFuID0gY29udGV4dC5zcGFuO1xuICAgIH1cbiAgICBjb250ZXh0LnNwYW4gPSBzcGFuO1xuICAgIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmVudGVyV2l0aChjb250ZXh0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNldEN1cnJlbnRTcGFuKCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuPy5wcmV2aW91c1NwYW47XG4gICAgICAgIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmVudGVyV2l0aChjb250ZXh0KTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBhZGQgYW4gZXJyb3IgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqXG4gKiBAcGFyYW0gc3BhbkVycm9yIC0gVGhlIGVycm9yIHRvIGFkZCB0byB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHNwYW5FcnJvcikge1xuICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgY3VycmVudFNwYW4uc2V0RXJyb3Ioc3BhbkVycm9yKTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjbG9uZSB0aGUgY3VycmVudCBjb250ZXh0IGJ5IGNyZWF0aW5nIG5ldyBpbnN0YW5jZXMgb2YgdGhlIHRyYWNlLCBzcGFuLCBhbmRcbiAqIHByZXZpb3VzIHNwYW4uXG4gKlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB0byBjbG9uZS5cbiAqIEByZXR1cm5zIEEgY2xvbmUgb2YgdGhlIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZUN1cnJlbnRDb250ZXh0KGNvbnRleHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFjZTogY29udGV4dC50cmFjZT8uY2xvbmUoKSxcbiAgICAgICAgc3BhbjogY29udGV4dC5zcGFuPy5jbG9uZSgpLFxuICAgICAgICBwcmV2aW91c1NwYW46IGNvbnRleHQucHJldmlvdXNTcGFuPy5jbG9uZSgpLFxuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBydW4gdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggYSBuZXcgc3BhbiBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBydW4gd2l0aCB0aGUgbmV3IHNwYW4gY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhOZXdTcGFuQ29udGV4dChmbikge1xuICAgIGNvbnN0IGN1cnJlbnRDb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoIWN1cnJlbnRDb250ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZXhpc3RpbmcgdHJhY2UgZm91bmQnKTtcbiAgICB9XG4gICAgY29uc3QgY29weU9mQ29udGV4dCA9IGNsb25lQ3VycmVudENvbnRleHQoY3VycmVudENvbnRleHQpO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oY29weU9mQ29udGV4dCwgZm4pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGV4dC5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgdGltZXIgYXMgX3RpbWVyLCBpc1RyYWNpbmdMb29wUnVubmluZ0J5RGVmYXVsdCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyB0cmFjaW5nIH0gZnJvbSBcIi4uL2NvbmZpZy5tanNcIjtcbi8qKlxuICogUHJpbnRzIHRoZSB0cmFjZXMgYW5kIHNwYW5zIHRvIHRoZSBjb25zb2xlXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25zb2xlU3BhbkV4cG9ydGVyIHtcbiAgICBhc3luYyBleHBvcnQoaXRlbXMpIHtcbiAgICAgICAgaWYgKHRyYWNpbmcuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZC4gU2tpcHBpbmcgZXhwb3J0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndHJhY2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtFeHBvcnRlcl0gRXhwb3J0IHRyYWNlIHRyYWNlSWQ9JHtpdGVtLnRyYWNlSWR9IG5hbWU9JHtpdGVtLm5hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydGVyXSBFeHBvcnQgc3BhbjogJHtKU09OLnN0cmluZ2lmeShpdGVtKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXRjaFRyYWNlUHJvY2Vzc29yIHtcbiAgICAjbWF4UXVldWVTaXplO1xuICAgICNtYXhCYXRjaFNpemU7XG4gICAgI3NjaGVkdWxlRGVsYXk7XG4gICAgI2V4cG9ydFRyaWdnZXJTaXplO1xuICAgICNleHBvcnRlcjtcbiAgICAjYnVmZmVyID0gW107XG4gICAgI3RpbWVyO1xuICAgICN0aW1lb3V0ID0gbnVsbDtcbiAgICAjZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcihleHBvcnRlciwgeyBtYXhRdWV1ZVNpemUgPSAxMDAwLCBtYXhCYXRjaFNpemUgPSAxMDAsIHNjaGVkdWxlRGVsYXkgPSA1MDAwLCAvLyA1IHNlY29uZHNcbiAgICBleHBvcnRUcmlnZ2VyUmF0aW8gPSAwLjgsIH0gPSB7fSkge1xuICAgICAgICB0aGlzLiNtYXhRdWV1ZVNpemUgPSBtYXhRdWV1ZVNpemU7XG4gICAgICAgIHRoaXMuI21heEJhdGNoU2l6ZSA9IG1heEJhdGNoU2l6ZTtcbiAgICAgICAgdGhpcy4jc2NoZWR1bGVEZWxheSA9IHNjaGVkdWxlRGVsYXk7XG4gICAgICAgIHRoaXMuI2V4cG9ydFRyaWdnZXJTaXplID0gbWF4UXVldWVTaXplICogZXhwb3J0VHJpZ2dlclJhdGlvO1xuICAgICAgICB0aGlzLiNleHBvcnRlciA9IGV4cG9ydGVyO1xuICAgICAgICB0aGlzLiN0aW1lciA9IF90aW1lcjtcbiAgICAgICAgaWYgKGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQXV0b21hdGljIHRyYWNlIGV4cG9ydCBsb29wIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4gWW91IG5lZWQgdG8gbWFudWFsbHkgY2FsbCBgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmZvcmNlRmx1c2goKWAgdG8gZXhwb3J0IHRyYWNlcy4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy4jcnVuRXhwb3J0TG9vcCgpO1xuICAgIH1cbiAgICBhc3luYyAjc2FmZUFkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCArIDEgPiB0aGlzLiNtYXhRdWV1ZVNpemUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRHJvcHBpbmcgdHJhY2UgYmVjYXVzZSBidWZmZXIgaXMgZnVsbCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCB0aGUgaXRlbSB0byB0aGUgYnVmZmVyXG4gICAgICAgIHRoaXMuI2J1ZmZlci5wdXNoKGl0ZW0pO1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IHRoaXMuI2V4cG9ydFRyaWdnZXJTaXplKSB7XG4gICAgICAgICAgICAvLyBzdGFydCBleHBvcnRpbmcgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjcnVuRXhwb3J0TG9vcCgpIHtcbiAgICAgICAgdGhpcy4jdGltZW91dCA9IHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gc2NoZWR1bGVkIGV4cG9ydFxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICAgICAgdGhpcy4jcnVuRXhwb3J0TG9vcCgpO1xuICAgICAgICB9LCB0aGlzLiNzY2hlZHVsZURlbGF5KTtcbiAgICAgICAgLy8gV2Ugc2V0IHRoaXMgc28gdGhhdCBOb2RlIG5vIGxvbmdlciBjb25zaWRlcnMgdGhpcyBwYXJ0IG9mIHRoZSBldmVudCBsb29wIGFuZCBrZWVwcyB0aGVcbiAgICAgICAgLy8gcHJvY2VzcyBhbGl2ZSB1bnRpbCB0aGUgdGltZXIgaXMgZG9uZS5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0aW1lb3V0LnVucmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLiN0aW1lb3V0LnVucmVmKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI2V4cG9ydEJhdGNoZXMoZm9yY2UgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgRXhwb3J0aW5nIGJhdGNoZXMuIEZvcmNlOiAke2ZvcmNlfS4gQnVmZmVyIHNpemU6ICR7dGhpcy4jYnVmZmVyLmxlbmd0aH1gKTtcbiAgICAgICAgaWYgKGZvcmNlIHx8IHRoaXMuI2J1ZmZlci5sZW5ndGggPCB0aGlzLiNtYXhCYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvRXhwb3J0ID0gWy4uLnRoaXMuI2J1ZmZlcl07XG4gICAgICAgICAgICB0aGlzLiNidWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KHRvRXhwb3J0KTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLiNidWZmZXIuc3BsaWNlKDAsIHRoaXMuI21heEJhdGNoU2l6ZSk7XG4gICAgICAgICAgICB0aGlzLiNleHBvcnRJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydGVyLmV4cG9ydChiYXRjaCk7XG4gICAgICAgICAgICB0aGlzLiNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZVN0YXJ0KHRyYWNlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NhZmVBZGRJdGVtKHRyYWNlKTtcbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZUVuZChfdHJhY2UpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgc2VuZCB0cmFjZXMgb24gZW5kIGJlY2F1c2Ugd2UgYWxyZWFkeSBzZW5kIHRoZW0gb24gc3RhcnRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuU3RhcnQoX3NwYW4pIHtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgc2VuZCBzcGFucyBvbiBzdGFydCBiZWNhdXNlIHdlIHNlbmQgdGhlbSBhdCB0aGUgZW5kXG4gICAgfVxuICAgIGFzeW5jIG9uU3BhbkVuZChzcGFuKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NhZmVBZGRJdGVtKHNwYW4pO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bih0aW1lb3V0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSBzaHV0ZG93biB0aGUgSFRUUCByZXF1ZXN0XG4gICAgICAgICAgICAgICAgdGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlcj8uYWJvcnQoKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Jyk7XG4gICAgICAgIHdoaWxlICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBXYWl0aW5nIGZvciBidWZmZXIgdG8gZW1wdHkuIEl0ZW1zIGxlZnQ6ICR7dGhpcy4jYnVmZmVyLmxlbmd0aH1gKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIC8vIG5vIGN1cnJlbnQgZXhwb3J0IGluIHByb2dyZXNzLiBGb3JjaW5nIGFsbCBpdGVtcyB0byBiZSBleHBvcnRlZFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlcj8uc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RpbWVvdXQgcmVhY2hlZCwgZm9yY2UgZmx1c2hpbmcnKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdXNpbmcgc2V0VGltZW91dCB0byBhZGQgdG8gdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXAgdGhpcyBhbGl2ZSB1bnRpbCBkb25lXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gdGhpcy4jdGltZXIuc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoJ0J1ZmZlciBlbXB0eS4gRXhpdGluZycpO1xuICAgICAgICBpZiAodGhpcy4jdGltZXIgJiYgdGhpcy4jdGltZW91dCkge1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgdGhlcmUgYXJlIG5vIG1vcmUgcmVxdWVzdHNcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLmNsZWFyVGltZW91dCh0aGlzLiN0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTXVsdGlUcmFjaW5nUHJvY2Vzc29yIHtcbiAgICAjcHJvY2Vzc29ycyA9IFtdO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzc29yLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvcnMucHVzaChwcm9jZXNzb3IpO1xuICAgIH1cbiAgICBzZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIG9sZCBwcm9jZXNzb3JzJyk7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIHByb2Nlc3Nvci5zaHV0ZG93bigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvcnMgPSBwcm9jZXNzb3JzO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uVHJhY2VTdGFydCh0cmFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZUVuZCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZUVuZCh0cmFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25TcGFuU3RhcnQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuU3RhcnQoc3Bhbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uU3BhbkVuZChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bih0aW1lb3V0KSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5zaHV0ZG93bih0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IF9kZWZhdWx0RXhwb3J0ZXIgPSBudWxsO1xubGV0IF9kZWZhdWx0UHJvY2Vzc29yID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0RXhwb3J0ZXIoKSB7XG4gICAgaWYgKCFfZGVmYXVsdEV4cG9ydGVyKSB7XG4gICAgICAgIF9kZWZhdWx0RXhwb3J0ZXIgPSBuZXcgQ29uc29sZVNwYW5FeHBvcnRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gX2RlZmF1bHRFeHBvcnRlcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0UHJvY2Vzc29yKCkge1xuICAgIGlmICghX2RlZmF1bHRQcm9jZXNzb3IpIHtcbiAgICAgICAgX2RlZmF1bHRQcm9jZXNzb3IgPSBuZXcgQmF0Y2hUcmFjZVByb2Nlc3NvcihkZWZhdWx0RXhwb3J0ZXIoKSk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdFByb2Nlc3Nvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2Nlc3Nvci5tanMubWFwIiwiaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbi8qKlxuICogR2VuZXJhdGUgYW4gSVNPIDg2MDEgdGltZXN0YW1wIG9mIHRoZSBjdXJyZW50IHRpbWUuXG4gKiBAcmV0dXJucyBBbiBJU08gODYwMSB0aW1lc3RhbXAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aW1lSXNvKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgdHJhY2UgSUQgYnkgY3JlYXRpbmcgYSByYW5kb20gVVVJRCB2NCBhbmQgcmVtb3ZpbmcgdGhlIGRhc2hlcy4gVGhpcyBpcyB0aGUgZXF1aXZhbGVudFxuICogb2YgYHV1aWQ0KCkuaGV4YCBpbiBQeXRob24gYW5kIHByZWZpeGluZyBpdCB3aXRoIGB0cmFjZV9gLlxuICogQHJldHVybnMgQSB0cmFjZSBJRC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVHJhY2VJZCgpIHtcbiAgICByZXR1cm4gYHRyYWNlXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpfWA7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgc3BhbiBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHNwYW5fYC5cbiAqIEByZXR1cm5zIEEgc3BhbiBJRC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU3BhbklkKCkge1xuICAgIHJldHVybiBgc3Bhbl8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBncm91cCBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYGdyb3VwX2AuXG4gKiBAcmV0dXJucyBBIGdyb3VwIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVHcm91cElkKCkge1xuICAgIHJldHVybiBgZ3JvdXBfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJykuc2xpY2UoMCwgMjQpfWA7XG59XG4vKipcbiAqIFJlbW92ZSBmaWVsZHMgdGhhdCBzdGFydCB3aXRoIGFuIHVuZGVyc2NvcmUgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0gb2JqIC0gVGhlIG9iamVjdCB0byByZW1vdmUgcHJpdmF0ZSBmaWVsZHMgZnJvbS5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCB3aXRoIHByaXZhdGUgZmllbGRzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcml2YXRlRmllbGRzKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrZXldKSA9PiAha2V5LnN0YXJ0c1dpdGgoJ18nKSkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3BhbklkLCByZW1vdmVQcml2YXRlRmllbGRzLCB0aW1lSXNvIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgU3BhbiB7XG4gICAgdHlwZSA9ICd0cmFjZS5zcGFuJztcbiAgICAjZGF0YTtcbiAgICAjdHJhY2VJZDtcbiAgICAjc3BhbklkO1xuICAgICNwYXJlbnRJZDtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkQXQ7XG4gICAgI2VuZGVkQXQ7XG4gICAgI2Vycm9yO1xuICAgICNwcmV2aW91c1NwYW47XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgcHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuI3RyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQ7XG4gICAgICAgIHRoaXMuI3NwYW5JZCA9IG9wdGlvbnMuc3BhbklkID8/IGdlbmVyYXRlU3BhbklkKCk7XG4gICAgICAgIHRoaXMuI2RhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICAgICAgdGhpcy4jcGFyZW50SWQgPSBvcHRpb25zLnBhcmVudElkID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2Vycm9yID0gb3B0aW9ucy5lcnJvciA/PyBudWxsO1xuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSBvcHRpb25zLnN0YXJ0ZWRBdCA/PyBudWxsO1xuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gb3B0aW9ucy5lbmRlZEF0ID8/IG51bGw7XG4gICAgfVxuICAgIGdldCB0cmFjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhY2VJZDtcbiAgICB9XG4gICAgZ2V0IHNwYW5EYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZGF0YTtcbiAgICB9XG4gICAgZ2V0IHNwYW5JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NwYW5JZDtcbiAgICB9XG4gICAgZ2V0IHBhcmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcGFyZW50SWQ7XG4gICAgfVxuICAgIGdldCBwcmV2aW91c1NwYW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwcmV2aW91c1NwYW47XG4gICAgfVxuICAgIHNldCBwcmV2aW91c1NwYW4oc3Bhbikge1xuICAgICAgICB0aGlzLiNwcmV2aW91c1NwYW4gPSBzcGFuO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXJ0ZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1NwYW4gYWxyZWFkeSBzdGFydGVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhcnRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuU3RhcnQodGhpcyk7XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI2VuZGVkQXQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU3BhbiBhbHJlYWR5IGZpbmlzaGVkJywgdGhpcy5zcGFuRGF0YSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jZW5kZWRBdCA9IHRpbWVJc28oKTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yLm9uU3BhbkVuZCh0aGlzKTtcbiAgICB9XG4gICAgc2V0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXJyb3I7XG4gICAgfVxuICAgIGdldCBzdGFydGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGFydGVkQXQ7XG4gICAgfVxuICAgIGdldCBlbmRlZEF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZW5kZWRBdDtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBuZXcgU3Bhbih7XG4gICAgICAgICAgICB0cmFjZUlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICBzcGFuSWQ6IHRoaXMuc3BhbklkLFxuICAgICAgICAgICAgcGFyZW50SWQ6IHRoaXMucGFyZW50SWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGF0YTogdGhpcy5zcGFuRGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWRBdDogdGhpcy4jc3RhcnRlZEF0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IHRoaXMuI2VuZGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuI2Vycm9yID8/IHVuZGVmaW5lZCxcbiAgICAgICAgfSwgdGhpcy4jcHJvY2Vzc29yKTtcbiAgICAgICAgc3Bhbi5wcmV2aW91c1NwYW4gPSB0aGlzLnByZXZpb3VzU3Bhbj8uY2xvbmUoKTtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9iamVjdDogdGhpcy50eXBlLFxuICAgICAgICAgICAgaWQ6IHRoaXMuc3BhbklkLFxuICAgICAgICAgICAgdHJhY2VfaWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHBhcmVudF9pZDogdGhpcy5wYXJlbnRJZCxcbiAgICAgICAgICAgIHN0YXJ0ZWRfYXQ6IHRoaXMuc3RhcnRlZEF0LFxuICAgICAgICAgICAgZW5kZWRfYXQ6IHRoaXMuZW5kZWRBdCxcbiAgICAgICAgICAgIHNwYW5fZGF0YTogcmVtb3ZlUHJpdmF0ZUZpZWxkcyh0aGlzLnNwYW5EYXRhKSxcbiAgICAgICAgICAgIGVycm9yOiB0aGlzLmVycm9yLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOb29wU3BhbiBleHRlbmRzIFNwYW4ge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHByb2Nlc3Nvcikge1xuICAgICAgICBzdXBlcih7IHRyYWNlSWQ6ICduby1vcCcsIHNwYW5JZDogJ25vLW9wJywgZGF0YSB9LCBwcm9jZXNzb3IpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0RXJyb3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGFucy5tanMubWFwIiwiaW1wb3J0IHsgZGVmYXVsdFByb2Nlc3NvciB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlIHtcbiAgICB0eXBlID0gJ3RyYWNlJztcbiAgICB0cmFjZUlkO1xuICAgIG5hbWU7XG4gICAgZ3JvdXBJZCA9IG51bGw7XG4gICAgbWV0YWRhdGE7XG4gICAgI3Byb2Nlc3NvcjtcbiAgICAjc3RhcnRlZDtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy50cmFjZUlkID0gb3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgdGhpcy5ncm91cElkID0gb3B0aW9ucy5ncm91cElkID8/IG51bGw7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBvcHRpb25zLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3IgPSBwcm9jZXNzb3IgPz8gZGVmYXVsdFByb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNzdGFydGVkID0gb3B0aW9ucy5zdGFydGVkID8/IGZhbHNlO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VTdGFydCh0aGlzKTtcbiAgICB9XG4gICAgYXN5bmMgZW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGF3YWl0IHRoaXMuI3Byb2Nlc3Nvci5vblRyYWNlRW5kKHRoaXMpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7XG4gICAgICAgICAgICB0cmFjZUlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLmdyb3VwSWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgICAgICBzdGFydGVkOiB0aGlzLiNzdGFydGVkLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgd29ya2Zsb3dfbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgZ3JvdXBfaWQ6IHRoaXMuZ3JvdXBJZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOb29wVHJhY2UgZXh0ZW5kcyBUcmFjZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKHt9KTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXN5bmMgZW5kKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2VzLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IHRyYWNpbmcgfSBmcm9tIFwiLi4vY29uZmlnLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgTXVsdGlUcmFjaW5nUHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFNwYW4sIFNwYW4gfSBmcm9tIFwiLi9zcGFucy5tanNcIjtcbmltcG9ydCB7IE5vb3BUcmFjZSwgVHJhY2UgfSBmcm9tIFwiLi90cmFjZXMubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVRyYWNlSWQgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBUcmFjZVByb3ZpZGVyIHtcbiAgICAjbXVsdGlQcm9jZXNzb3I7XG4gICAgI2Rpc2FibGVkO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3NvciA9IG5ldyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IoKTtcbiAgICAgICAgdGhpcy4jZGlzYWJsZWQgPSB0cmFjaW5nLmRpc2FibGVkO1xuICAgICAgICB0aGlzLiNhZGRDbGVhbnVwTGlzdGVuZXJzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcm9jZXNzb3IgLSBUaGUgcHJvY2Vzc29yIHRvIGFkZC5cbiAgICAgKi9cbiAgICByZWdpc3RlclByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jbXVsdGlQcm9jZXNzb3IuYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvcnMgLSBUaGUgbGlzdCBvZiBwcm9jZXNzb3JzIHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICAgICAgdGhpcy4jbXVsdGlQcm9jZXNzb3Iuc2V0UHJvY2Vzc29ycyhwcm9jZXNzb3JzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHRyYWNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICovXG4gICAgZ2V0Q3VycmVudFRyYWNlKCkge1xuICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIGdldEN1cnJlbnRTcGFuKCkge1xuICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICB9XG4gICAgc2V0RGlzYWJsZWQoZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy4jZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG4gICAgc3RhcnRFeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zdGFydCgpO1xuICAgIH1cbiAgICBjcmVhdGVUcmFjZSh0cmFjZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyB0cmFjZSAlbycsIHRyYWNlT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYWNlSWQgPSB0cmFjZU9wdGlvbnMudHJhY2VJZCA/PyBnZW5lcmF0ZVRyYWNlSWQoKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRyYWNlT3B0aW9ucy5uYW1lID8/ICdBZ2VudCB3b3JrZmxvdyc7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3JlYXRpbmcgdHJhY2UgJXMgd2l0aCBuYW1lICVzJywgdHJhY2VJZCwgbmFtZSk7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2UoeyAuLi50cmFjZU9wdGlvbnMsIG5hbWUsIHRyYWNlSWQgfSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBjcmVhdGVTcGFuKHNwYW5PcHRpb25zLCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkIHx8IHNwYW5PcHRpb25zLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyBzcGFuICVvJywgc3Bhbk9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudElkO1xuICAgICAgICBsZXQgdHJhY2VJZDtcbiAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50VHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIGFjdGl2ZSB0cmFjZS4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4gaW5zdGFuY2VvZiBOb29wU3BhbiB8fFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFjZSBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUGFyZW50ICR7Y3VycmVudFNwYW59IG9yICR7Y3VycmVudFRyYWNlfSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gY3VycmVudFRyYWNlLnRyYWNlSWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1VzaW5nIHBhcmVudCBzcGFuICVzJywgY3VycmVudFNwYW4uc3BhbklkKTtcbiAgICAgICAgICAgICAgICBwYXJlbnRJZCA9IGN1cnJlbnRTcGFuLnNwYW5JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gcGFyZW50IHNwYW4sIHVzaW5nIGN1cnJlbnQgdHJhY2UgJXMnLCBjdXJyZW50VHJhY2UudHJhY2VJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgVHJhY2UpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBOb29wVHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCB0cmFjZSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgU3Bhbikge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BTcGFuKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQYXJlbnQgc3BhbiBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnRJZCA9IHBhcmVudC5zcGFuSWQ7XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0cmFjZUlkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIHRyYWNlSWQgZm91bmQuIE1ha2Ugc3VyZSB0byBzdGFydCBhIHRyYWNlIHdpdGggYHdpdGhUcmFjZSgpYCBmaXJzdC4gUmV0dXJuaW5nIE5vb3BTcGFuLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDcmVhdGluZyBzcGFuICR7SlNPTi5zdHJpbmdpZnkoc3Bhbk9wdGlvbnMuZGF0YSl9IHdpdGggaWQgJHtzcGFuT3B0aW9ucy5zcGFuSWQgPz8gdHJhY2VJZH1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGFuKHtcbiAgICAgICAgICAgIC4uLnNwYW5PcHRpb25zLFxuICAgICAgICAgICAgdHJhY2VJZCxcbiAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyJyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zaHV0ZG93bih0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyICVvJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBBZGRzIGxpc3RlbmVycyB0byBgcHJvY2Vzc2AgdG8gZW5zdXJlIGBzaHV0ZG93bmAgb2NjdXJzIGJlZm9yZSBleGl0LiAqL1xuICAgICNhZGRDbGVhbnVwTGlzdGVuZXJzKCkge1xuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBoYW5kbGluZyBOb2RlLmpzIHByb2Nlc3MgdGVybWluYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NsZWFudXAgdGltZW91dCwgZm9yY2luZyBleGl0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNodXRkb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBub3JtYWwgdGVybWluYXRpb25cbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ2JlZm9yZUV4aXQnLCBjbGVhbnVwKTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBDVFJMK0MgKFNJR0lOVClcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMoJ1NJR0lOVCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgbGlzdGVuZXJzLCBleGl0IHRoZSBwcm9jZXNzIG9uIHRoaXMgU0RLIHNpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEzMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgdGVybWluYXRpb24gKFNJR1RFUk0pXG4gICAgICAgICAgICBwcm9jZXNzLm9uKCdTSUdURVJNJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHVEVSTScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgbGlzdGVuZXJzLCBleGl0IHRoZSBwcm9jZXNzIG9uIHRoaXMgU0RLIHNpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgYXN5bmMgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIHJlamVjdGlvbicsIHJlYXNvbiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JFdmVudHMoJ3VuaGFuZGxlZFJlamVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgbGlzdGVuZXJzLCBleGl0IHRoZSBwcm9jZXNzIG9uIHRoaXMgU0RLIHNpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLmZvcmNlRmx1c2goKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMoZXZlbnQpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aCA+IDE7XG59XG5mdW5jdGlvbiBoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmxldCBHTE9CQUxfVFJBQ0VfUFJPVklERVIgPSB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpIHtcbiAgICBpZiAoIUdMT0JBTF9UUkFDRV9QUk9WSURFUikge1xuICAgICAgICBHTE9CQUxfVFJBQ0VfUFJPVklERVIgPSBuZXcgVHJhY2VQcm92aWRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gR0xPQkFMX1RSQUNFX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXIubWpzLm1hcCIsImltcG9ydCB7IHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmZ1bmN0aW9uIF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3Bhbikge1xuICAgIHJldHVybiBhc3luYyAoZm4sIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRpbmcgYSBuZXcgc3BhbiBjb250ZXh0IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBwcmV2aW91cyBzcGFuIGlzIGNvcnJlY3RseSByZXNldFxuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBjcmVhdGVTcGFuKC4uLmFyZ3MpO1xuICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oc3Bhbik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oc3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZXJyb3IuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoUmVzcG9uc2VTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBjcmVhdGVHZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgcmVzcG9uc2Ugc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICBvcHRpb25zID0ge307XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoUmVzcG9uc2VTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVSZXNwb25zZVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoQWdlbnRTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGFnZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZ2VudFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2FnZW50JyxcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnM/LmRhdGE/Lm5hbWUgPz8gJ0FnZW50JyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhBZ2VudFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUFnZW50U3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhGdW5jdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgZnVuY3Rpb24gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgaW5wdXQ6IG9wdGlvbnM/LmRhdGE/LmlucHV0ID8/ICcnLFxuICAgICAgICAgICAgb3V0cHV0OiBvcHRpb25zPy5kYXRhPy5vdXRwdXQgPz8gJycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoRnVuY3Rpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVGdW5jdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhIYW5kb2ZmU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBoYW5kb2ZmIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIYW5kb2ZmU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7IHR5cGU6ICdoYW5kb2ZmJywgLi4ub3B0aW9ucz8uZGF0YSB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhIYW5kb2ZmU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlSGFuZG9mZlNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ2VuZXJhdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhHZW5lcmF0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgZ2VuZXJhdGlvbiwgaW5jbHVkaW5nIGlucHV0L291dHB1dCBtZXNzYWdlXG4gKiBzZXF1ZW5jZXMsIG1vZGVsIGluZm9ybWF0aW9uLCBhbmQgdXNhZ2UgZGF0YS4gSWYgeW91IG9ubHkgbmVlZCB0byBjYXB0dXJlIGEgbW9kZWwgcmVzcG9uc2VcbiAqIGlkZW50aWZpZXIsIGNvbnNpZGVyIHVzaW5nIGBjcmVhdGVSZXNwb25zZVNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdlbmVyYXRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdnZW5lcmF0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKiBBdXRvbWF0aWNhbGx5IGNyZWF0ZSBhIGdlbmVyYXRpb24gc3BhbiwgcnVuIGZuIGFuZCBjbG9zZSB0aGUgc3BhbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhHZW5lcmF0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR2VuZXJhdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY3VzdG9tIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEN1c3RvbVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhDdXN0b21TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVDdXN0b21TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGd1YXJkcmFpbCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhHdWFyZHJhaWxTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUd1YXJkcmFpbFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2d1YXJkcmFpbCcsXG4gICAgICAgICAgICB0cmlnZ2VyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhHdWFyZHJhaWxTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHdWFyZHJhaWxTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHRyYW5zY3JpcHRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFRyYW5zY3JpcHRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVUcmFuc2NyaXB0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBncm91cCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hHcm91cFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaF9ncm91cCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaEdyb3VwU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoR3JvdXBTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IE1DUCBsaXN0IHRvb2xzIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1DUExpc3RUb29sc1NwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ21jcF90b29scycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aE1DUExpc3RUb29sc1NwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZU1DUExpc3RUb29sc1NwYW4pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlU3BhbnMubWpzLm1hcCIsImltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UsIGdldE9yQ3JlYXRlVHJhY2UsIHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NyZWF0ZVNwYW5zLm1qc1wiO1xuZXhwb3J0IHsgQmF0Y2hUcmFjZVByb2Nlc3NvciwgQ29uc29sZVNwYW5FeHBvcnRlciwgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5leHBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuZXhwb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmV4cG9ydCB7IGdlbmVyYXRlR3JvdXBJZCwgZ2VuZXJhdGVTcGFuSWQsIGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBBZGQgYSBwcm9jZXNzb3IgdG8gdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gRWFjaCBwcm9jZXNzb3Igd2lsbCByZWNlaXZlIGFsbCB0cmFjZXMvc3BhbnMuXG4gKlxuICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcik7XG59XG4vKipcbiAqIFNldCB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBUaGlzIHdpbGwgcmVwbGFjZSBhbnkgZXhpc3RpbmcgcHJvY2Vzc29ycy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2VQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuc2V0UHJvY2Vzc29ycyhwcm9jZXNzb3JzKTtcbn1cbi8qKlxuICogU2V0IHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgdHJhY2luZyBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0gZGlzYWJsZWQgLSBXaGV0aGVyIHRvIGRpc2FibGUgdHJhY2luZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFRyYWNpbmdEaXNhYmxlZChkaXNhYmxlZCkge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXREaXNhYmxlZChkaXNhYmxlZCk7XG59XG4vKipcbiAqIFN0YXJ0IHRoZSB0cmFjZSBleHBvcnQgbG9vcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0VHJhY2VFeHBvcnRMb29wKCkge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zdGFydEV4cG9ydExvb3AoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsIi8qKlxuICogRGVmaW5lcyBhbiBpbnB1dCBndWFyZHJhaWwgZGVmaW5pdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUlucHV0R3VhcmRyYWlsKHsgbmFtZSwgZXhlY3V0ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ2lucHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmZXJNZXNzYWdlKGFnZW50KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsgYXNzaXN0YW50OiBhZ2VudC5uYW1lIH0pO1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCkge1xuICAgIHJldHVybiBgdHJhbnNmZXJfdG9fJHt0b0Z1bmN0aW9uVG9vbE5hbWUoYWdlbnQubmFtZSl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCkge1xuICAgIHJldHVybiBgSGFuZG9mZiB0byB0aGUgJHthZ2VudC5uYW1lfSBhZ2VudCB0byBoYW5kbGUgdGhlIHJlcXVlc3QuICR7YWdlbnQuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnfWA7XG59XG4vKipcbiAqIEEgaGFuZG9mZiBpcyB3aGVuIGFuIGFnZW50IGRlbGVnYXRlcyBhIHRhc2sgdG8gYW5vdGhlciBhZ2VudC5cbiAqIEZvciBleGFtcGxlLCBpbiBhIGN1c3RvbWVyIHN1cHBvcnQgc2NlbmFyaW8geW91IG1pZ2h0IGhhdmUgYSBcInRyaWFnZSBhZ2VudFwiIHRoYXQgZGV0ZXJtaW5lcyB3aGljaFxuICogYWdlbnQgc2hvdWxkIGhhbmRsZSB0aGUgdXNlcidzIHJlcXVlc3QsIGFuZCBzdWItYWdlbnRzIHRoYXQgc3BlY2lhbGl6ZSBpbiBkaWZmZXJlbnQgYXJlYXMgbGlrZVxuICogYmlsbGluZywgYWNjb3VudCBtYW5hZ2VtZW50LCBldGMuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGNsYXNzIEhhbmRvZmYge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICB0b29sTmFtZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xEZXNjcmlwdGlvbjtcbiAgICAvKipcbiAgICAgKiBUaGUgSlNPTiBzY2hlbWEgZm9yIHRoZSBoYW5kb2ZmIGlucHV0LiBDYW4gYmUgZW1wdHkgaWYgdGhlIGhhbmRvZmYgZG9lcyBub3QgdGFrZSBhbiBpbnB1dFxuICAgICAqL1xuICAgIGlucHV0SnNvblNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICByZXF1aXJlZDogW10sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGlucHV0IEpTT04gc2NoZW1hIGlzIGluIHN0cmljdCBtb2RlLiBXZSAqKnN0cm9uZ2x5KiogcmVjb21tZW5kIHNldHRpbmcgdGhpcyB0b1xuICAgICAqIHRydWUsIGFzIGl0IGluY3JlYXNlcyB0aGUgbGlrZWxpaG9vZCBvZiBjb3JyZWN0IEpTT04gaW5wdXQuXG4gICAgICovXG4gICAgc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgLyoqXG4gICAgICogVGhlIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgaGFuZG9mZi4gVGhlIHBhcmFtZXRlcnMgcGFzc2VkIGFyZTpcbiAgICAgKiAxLiBUaGUgaGFuZG9mZiBydW4gY29udGV4dFxuICAgICAqIDIuIFRoZSBhcmd1bWVudHMgZnJvbSB0aGUgTExNLCBhcyBhIEpTT04gc3RyaW5nLiBFbXB0eSBzdHJpbmcgaWYgaW5wdXRKc29uU2NoZW1hIGlzIGVtcHR5LlxuICAgICAqXG4gICAgICogTXVzdCByZXR1cm4gYW4gYWdlbnRcbiAgICAgKi9cbiAgICBvbkludm9rZUhhbmRvZmY7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudE5hbWU7XG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGZpbHRlcnMgdGhlIGlucHV0cyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhlIG5leHQgYWdlbnQuIEJ5IGRlZmF1bHQsIHRoZSBuZXcgYWdlbnRcbiAgICAgKiBzZWVzIHRoZSBlbnRpcmUgY29udmVyc2F0aW9uIGhpc3RvcnkuIEluIHNvbWUgY2FzZXMsIHlvdSBtYXkgd2FudCB0byBmaWx0ZXIgaW5wdXRzIGUuZy4gdG9cbiAgICAgKiByZW1vdmUgb2xkZXIgaW5wdXRzLCBvciByZW1vdmUgdG9vbHMgZnJvbSBleGlzdGluZyBpbnB1dHMuXG4gICAgICpcbiAgICAgKiBUaGUgZnVuY3Rpb24gd2lsbCByZWNlaXZlIHRoZSBlbnRpcmUgY29udmVyc2F0aW9uIGhpc3N0b3J5IHNvIGZhciwgaW5jbHVkaW5nIHRoZSBpbnB1dCBpdGVtXG4gICAgICogdGhhdCB0cmlnZ2VyZWQgdGhlIGhhbmRvZmYgYW5kIGEgdG9vbCBjYWxsIG91dHB1dCBpdGVtIHJlcHJlc2VudGluZyB0aGUgaGFuZG9mZiB0b29sJ3Mgb3V0cHV0LlxuICAgICAqXG4gICAgICogWW91IGFyZSBmcmVlIHRvIG1vZGlmeSB0aGUgaW5wdXQgaGlzdG9yeSBvciBuZXcgaXRlbXMgYXMgeW91IHNlZSBmaXQuIFRoZSBuZXh0IGFnZW50IHRoYXQgcnVuc1xuICAgICAqIHdpbGwgcmVjZWl2ZSBgaGFuZG9mZklucHV0RGF0YS5hbGxJdGVtc1xuICAgICAqL1xuICAgIGlucHV0RmlsdGVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBhZ2VudCB0aGF0IGlzIGJlaW5nIGhhbmRlZCBvZmYgdG8uXG4gICAgICovXG4gICAgYWdlbnQ7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvb2wgZGVmaW5pdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGludm9rZSB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICBnZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgbmFtZTogdGhpcy50b29sTmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnRvb2xEZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRoaXMuaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICAgICAgc3RyaWN0OiB0aGlzLnN0cmljdEpzb25TY2hlbWEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGFnZW50LCBvbkludm9rZUhhbmRvZmYpIHtcbiAgICAgICAgdGhpcy5hZ2VudE5hbWUgPSBhZ2VudC5uYW1lO1xuICAgICAgICB0aGlzLm9uSW52b2tlSGFuZG9mZiA9IG9uSW52b2tlSGFuZG9mZjtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IGRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUoYWdlbnQpO1xuICAgICAgICB0aGlzLnRvb2xEZXNjcmlwdGlvbiA9IGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhhbmRvZmYgZnJvbSBhbiBhZ2VudC4gSGFuZG9mZnMgYXJlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCB3aGVuIHlvdSBwYXNzIGFuIGFnZW50XG4gKiBpbnRvIHRoZSBgaGFuZG9mZnNgIG9wdGlvbiBvZiB0aGUgYEFnZW50YCBjb25zdHJ1Y3Rvci4gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvblxuICogdG8gY3JlYXRlIGEgaGFuZG9mZiBtYW51YWxseSwgZ2l2aW5nIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciBjb25maWd1cmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVElucHV0VHlwZSBUaGUgaW5wdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZG9mZihhZ2VudCwgY29uZmlnID0ge30pIHtcbiAgICBsZXQgcGFyc2VyID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGhhc09uSGFuZG9mZiA9ICEhY29uZmlnLm9uSGFuZG9mZjtcbiAgICBjb25zdCBoYXNJbnB1dFR5cGUgPSAhIWNvbmZpZy5pbnB1dFR5cGU7XG4gICAgY29uc3QgaGFzQm90aE9yTmVpdGhlckhhbmRvZmZBbmRJbnB1dFR5cGUgPSBoYXNPbkhhbmRvZmYgPT09IGhhc0lucHV0VHlwZTtcbiAgICBpZiAoIWhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGJvdGggYG9uSGFuZG9mZmAgYW5kIGBpbnB1dFR5cGVgIG9yIG5laXRoZXIuJyk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uSW52b2tlSGFuZG9mZihjb250ZXh0LCBpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlcikge1xuICAgICAgICAgICAgaWYgKCFpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQgYnV0IGdvdDogJHtpbnB1dEpzb25TdHJpbmd9YCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogYGlucHV0IGlzIGVtcHR5YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdIYW5kb2ZmIGZ1bmN0aW9uIGV4cGVjdGVkIG5vbiBlbXB0eSBpbnB1dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgdGhhdCBpdCdzIHZhbGlkIGlucHV0IGJ1dCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZXIoaW5wdXRKc29uU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm9uSGFuZG9mZikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25maWcub25IYW5kb2ZmKGNvbnRleHQsIHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgSlNPTiBwcm92aWRlZGAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEludmFsaWQgSlNPTiB3aGVuIHBhcnNpbmc6ICR7aW5wdXRKc29uU3RyaW5nfS4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZj8uKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgY29uc3QgaGFuZG9mZiA9IG5ldyBIYW5kb2ZmKGFnZW50LCBvbkludm9rZUhhbmRvZmYpO1xuICAgIGlmIChjb25maWcuaW5wdXRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoY29uZmlnLmlucHV0VHlwZSwgaGFuZG9mZi50b29sTmFtZSk7XG4gICAgICAgIGhhbmRvZmYuaW5wdXRKc29uU2NoZW1hID0gcmVzdWx0LnNjaGVtYTtcbiAgICAgICAgaGFuZG9mZi5zdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyID0gcmVzdWx0LnBhcnNlcjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sTmFtZU92ZXJyaWRlKSB7XG4gICAgICAgIGhhbmRvZmYudG9vbE5hbWUgPSBjb25maWcudG9vbE5hbWVPdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xEZXNjcmlwdGlvbiA9IGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pbnB1dEZpbHRlcikge1xuICAgICAgICBoYW5kb2ZmLmlucHV0RmlsdGVyID0gY29uZmlnLmlucHV0RmlsdGVyO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZG9mZjtcbn1cbi8qKlxuICogUmV0dXJucyBhIGhhbmRvZmYgZm9yIHRoZSBnaXZlbiBhZ2VudC4gSWYgdGhlIGFnZW50IGlzIGFscmVhZHkgd3JhcHBlZCBpbnRvIGEgaGFuZG9mZixcbiAqIGl0IHdpbGwgYmUgcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgYSBuZXcgaGFuZG9mZiBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmRvZmYoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBIYW5kb2ZmKSB7XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmYoYWdlbnQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFuZG9mZi5tanMubWFwIiwibGV0IERFRkFVTFRfUFJPVklERVI7XG4vKipcbiAqIFNldCB0aGUgbW9kZWwgcHJvdmlkZXIgdXNlZCB3aGVuIG5vIGV4cGxpY2l0IHByb3ZpZGVyIGlzIHN1cHBsaWVkLlxuICpcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byB1c2UgYnkgZGVmYXVsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgREVGQVVMVF9QUk9WSURFUiA9IHByb3ZpZGVyO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICpcbiAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIoKSB7XG4gICAgaWYgKHR5cGVvZiBERUZBVUxUX1BST1ZJREVSID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIgc2V0LiBNYWtlIHN1cmUgdG8gc2V0IGEgcHJvdmlkZXIgdXNpbmcgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgYmVmb3JlIGNhbGxpbmcgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgb3IgcGFzcyBhbiBleHBsaWNpdCBwcm92aWRlci4nKTtcbiAgICB9XG4gICAgcmV0dXJuIERFRkFVTFRfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlcnMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTaGFyZWQgYmFzZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVyeSBpdGVtIGluIHRoZSBwcm90b2NvbCBwcm92aWRlcyBhIGBwcm92aWRlckRhdGFgIGZpZWxkIHRvIGFjY29tbW9kYXRlIGN1c3RvbSBmdW5jdGlvbmFsaXR5XG4gKiBvciBuZXcgZmllbGRzXG4gKi9cbmV4cG9ydCBjb25zdCBTaGFyZWRCYXNlID0gei5vYmplY3Qoe1xuICAgIC8qKlxuICAgICAqIEFkZGl0aW9uYWwgb3B0aW9uYWwgcHJvdmlkZXIgc3BlY2lmaWMgZGF0YS4gVXNlZCBmb3IgY3VzdG9tIGZ1bmN0aW9uYWxpdHkgb3IgbW9kZWwgcHJvdmlkZXJcbiAgICAgKiBzcGVjaWZpYyBmaWVsZHMuXG4gICAgICovXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaGFzIGEgc2hhcmVkIG9mIHNoYXJlZCBpdGVtIGRhdGEgaW5jbHVkaW5nIGFuIG9wdGlvbmFsIElELlxuICovXG5leHBvcnQgY29uc3QgSXRlbUJhc2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW4gSUQgdG8gaWRlbnRpZnkgdGhlIGl0ZW0uIFRoaXMgaXMgb3B0aW9uYWwgYnkgZGVmYXVsdC4gSWYgYSBtb2RlbCBwcm92aWRlciBhYnNvbHV0ZWx5XG4gICAgICogcmVxdWlyZXMgdGhpcyBmaWVsZCwgaXQgd2lsbCBiZSB2YWxpZGF0ZWQgb24gdGhlIG1vZGVsIGxldmVsLlxuICAgICAqL1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENvbnRlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWZ1c2FsID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVmdXNhbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSByZWZ1c2FsIGV4cGxhbmF0aW9uIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlZnVzYWw6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBBIHRleHQgaW5wdXQgZm9yIGV4YW1wbGUgYSBtZXNzYWdlIGZyb20gYSB1c2VyXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9pbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGEgVVJMLCBiYXNlNjQgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGltYWdlOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdDb3VsZCBiZSBhIFVSTCwgYmFzZTY0IG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0RmlsZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ZpbGUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZmlsZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGEgVVJMLCBiYXNlNjQgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGZpbGU6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnRWl0aGVyIGJhc2U2NCBlbmNvZGVkIGZpbGUgZGF0YSBvciBhIHB1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkwnKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKS5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQnKSxcbiAgICB9KSlcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgdXJsOiB6LnN0cmluZygpLmRlc2NyaWJlKCdQdWJsaWNseSBhY2Nlc3NpYmxlIFBERiBmaWxlIFVSTCcpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvbnRlbnRzIG9mIHRoZSBmaWxlIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEF1ZGlvQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgLyoqXG4gICAgICogVGhlIGF1ZGlvIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgYXVkaW86IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEgb3IgZmlsZSBpZCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmb3JtYXQgb2YgdGhlIGF1ZGlvLlxuICAgICAqL1xuICAgIGZvcm1hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zY3JpcHQgb2YgdGhlIGF1ZGlvLlxuICAgICAqL1xuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgSW1hZ2VDb250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgaW1hZ2UgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBpbWFnZTogei5zdHJpbmcoKS5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YScpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksXG4gICAgLyoqXG4gICAgICogVGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBkYXRhLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhJyksXG4gICAgLyoqXG4gICAgICogVGhlIG1lZGlhIHR5cGUgb2YgdGhlIGltYWdlLlxuICAgICAqL1xuICAgIG1lZGlhVHlwZTogei5zdHJpbmcoKS5kZXNjcmliZSgnSUFOQSBtZWRpYSB0eXBlIG9mIHRoZSBpbWFnZScpLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJUb29sT3V0cHV0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfc2NyZWVuc2hvdCcpLFxuICAgIC8qKlxuICAgICAqIEEgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhIFVSTCByZXByZXNlbnRpbmcgdGhlIHNjcmVlbnNob3QuXG4gICAgICovXG4gICAgZGF0YTogei5zdHJpbmcoKS5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBVUkwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbXB1dGVyQWN0aW9ucyA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdzY3JlZW5zaG90JykgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgICAgIGJ1dHRvbjogei5lbnVtKFsnbGVmdCcsICdyaWdodCcsICd3aGVlbCcsICdiYWNrJywgJ2ZvcndhcmQnXSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RvdWJsZV9jbGljaycpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdzY3JvbGwnKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3g6IHoubnVtYmVyKCksXG4gICAgICAgIHNjcm9sbF95OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0eXBlJyksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3dhaXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbW92ZScpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdrZXlwcmVzcycpLFxuICAgICAgICBrZXlzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdkcmFnJyksXG4gICAgICAgIHBhdGg6IHouYXJyYXkoei5vYmplY3QoeyB4OiB6Lm51bWJlcigpLCB5OiB6Lm51bWJlcigpIH0pKSxcbiAgICB9KSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWVzc2FnZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEFzc2lzdGFudENvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBPdXRwdXRUZXh0LFxuICAgIFJlZnVzYWwsXG4gICAgSW5wdXRUZXh0LFxuICAgIEF1ZGlvQ29udGVudCxcbiAgICBJbWFnZUNvbnRlbnQsXG5dKTtcbmNvbnN0IE1lc3NhZ2VCYXNlID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbnkgaXRlbSB3aXRob3V0IGEgdHlwZSBpcyB0cmVhdGVkIGFzIGEgbWVzc2FnZVxuICAgICAqL1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBBc3Npc3RhbnRNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSBhc3Npc3RhbnQgKGkuZS4gdGhlIG1vZGVsKVxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnYXNzaXN0YW50JyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoQXNzaXN0YW50Q29udGVudCksXG59KTtcbmV4cG9ydCBjb25zdCBVc2VyQ29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIElucHV0VGV4dCxcbiAgICBJbnB1dEltYWdlLFxuICAgIElucHV0RmlsZSxcbiAgICBBdWRpb0NvbnRlbnQsXG5dKTtcbmV4cG9ydCBjb25zdCBVc2VyTWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8vIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgndXNlcicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoVXNlckNvbnRlbnQpLm9yKHouc3RyaW5nKCkpLFxufSk7XG5jb25zdCBTeXN0ZW1NZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgc3lzdGVtIG1lc3NhZ2UgdG8gdGhlIHVzZXJcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ3N5c3RlbScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBNZXNzYWdlSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCdyb2xlJywgW1xuICAgIFN5c3RlbU1lc3NhZ2VJdGVtLFxuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIFVzZXJNZXNzYWdlSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVG9vbCBjYWxsIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgSG9zdGVkVG9vbENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2hvc3RlZF90b29sX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgaG9zdGVkIHRvb2wuIEZvciBleGFtcGxlIGB3ZWJfc2VhcmNoX2NhbGxgIG9yIGBmaWxlX3NlYXJjaF9jYWxsYFxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGhvc3RlZCB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ1RoZSBhcmd1bWVudHMgb2YgdGhlIGhvc3RlZCB0b29sIGNhbGwnKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHByaW1hcnkgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuIEFkZGl0aW9uYWwgb3V0cHV0IG1pZ2h0IGJlIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCB3YXMgY2FsbGVkXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIG91dHB1dDogei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbVG9vbE91dHB1dFRleHQsIFRvb2xPdXRwdXRJbWFnZV0pLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJVc2VDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYWN0aW9uIHRvIGJlIHBlcmZvcm1lZCBieSB0aGUgY29tcHV0ZXIuXG4gICAgICovXG4gICAgYWN0aW9uOiBjb21wdXRlckFjdGlvbnMsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlckNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBvdXRwdXQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiBDb21wdXRlclRvb2xPdXRwdXQsXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTcGVjaWFsIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWFzb25pbmdJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmcnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBmYWNpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlYXNvbmluZy4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShJbnB1dFRleHQpLFxufSk7XG4vKipcbiAqIFRoaXMgaXMgYSBjYXRjaCBhbGwgZm9yIGl0ZW1zIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgYSBtb2RlbCBtaWdodCByZXR1cm4gYW4gaXRlbSB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbCB1c2luZyB0aGlzIHR5cGUuXG4gKlxuICogSW4gdGhhdCBjYXNlIGV2ZXJ5dGhpbmcgcmV0dXJuZWQgZnJvbSB0aGUgbW9kZWwgc2hvdWxkIGJlIHBhc3NlZCBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gKlxuICogVGhpcyBlbmFibGVzIG5ldyBmZWF0dXJlcyB0byBiZSBhZGRlZCB0byBiZSBhZGRlZCBieSBhIG1vZGVsIHByb3ZpZGVyIHdpdGhvdXQgYnJlYWtpbmcgdGhlIHByb3RvY29sLlxuICovXG5leHBvcnQgY29uc3QgVW5rbm93bkl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndW5rbm93bicpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKb2luZWQgaXRlbSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IE91dHB1dE1vZGVsSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuZXhwb3J0IGNvbnN0IE1vZGVsSXRlbSA9IHoudW5pb24oW1xuICAgIFVzZXJNZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXRhIGRhdGEgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBVc2FnZURhdGEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0cmVhbSBldmVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBuZXcgb3V0cHV0IHRleHQgaXMgYXZhaWxhYmxlIHRvIHN0cmVhbSB0byB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50VGV4dFN0cmVhbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0X2RlbHRhJyksXG4gICAgLyoqXG4gICAgICogVGhlIGRlbHRhIHRleHQgdGhhdCB3YXMgc3RyZWFtZWQgYnkgdGhlIG1vZGVsdG8gdGhlIHVzZXIuXG4gICAgICovXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gYSBuZXcgcmVzcG9uc2UgaXMgc3RhcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Vfc3RhcnRlZCcpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgcmVzcG9uc2UgaXMgY29tcGxldGVkLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX2RvbmUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzcG9uc2UgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVzcG9uc2U6IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBJRCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1c2FnZSBkYXRhIGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICB1c2FnZTogVXNhZ2VEYXRhLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgICAgICovXG4gICAgICAgIG91dHB1dDogei5hcnJheShPdXRwdXRNb2RlbEl0ZW0pLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGZvciBldmVyeSBpdGVtIHRoYXQgZ2V0cyBzdHJlYW1lZCB0byB0aGUgbW9kZWwuIFVzZWQgdG8gZXhwb3NlIHRoZSByYXcgZXZlbnRzXG4gKiBmcm9tIHRoZSBtb2RlbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtb2RlbCcpLFxuICAgIGV2ZW50OiB6LmFueSgpLmRlc2NyaWJlKCdUaGUgZXZlbnQgZnJvbSB0aGUgbW9kZWwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgU3RyZWFtRXZlbnRUZXh0U3RyZWFtLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQsXG4gICAgU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQsXG4gICAgU3RyZWFtRXZlbnRHZW5lcmljSXRlbSxcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdG9jb2wubWpzLm1hcCIsImltcG9ydCB7IFVzYWdlRGF0YSB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuLyoqXG4gKiBUcmFja3MgdG9rZW4gdXNhZ2UgYW5kIHJlcXVlc3QgY291bnRzIGZvciBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2FnZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiByZXF1ZXN0cyBtYWRlIHRvIHRoZSBMTE0gQVBJLlxuICAgICAqL1xuICAgIHJlcXVlc3RzO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCwgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICB0b3RhbFRva2VucztcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IGlucHV0Py5yZXF1ZXN0cyA/PyAxO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IGlucHV0Py5pbnB1dFRva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLnRvdGFsVG9rZW5zID0gaW5wdXQ/LnRvdGFsVG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5pbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICA/IFtpbnB1dC5pbnB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5vdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICAgICAgPyBbaW5wdXQub3V0cHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZChuZXdVc2FnZSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RzICs9IG5ld1VzYWdlLnJlcXVlc3RzO1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zICs9IG5ld1VzYWdlLmlucHV0VG9rZW5zO1xuICAgICAgICB0aGlzLm91dHB1dFRva2VucyArPSBuZXdVc2FnZS5vdXRwdXRUb2tlbnM7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgKz0gbmV3VXNhZ2UudG90YWxUb2tlbnM7XG4gICAgICAgIGlmIChuZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMucHVzaCguLi5uZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFVzYWdlRGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNhZ2UubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbi8qKlxuICogQSBjb250ZXh0IG9iamVjdCB0aGF0IGlzIHBhc3NlZCB0byB0aGUgYFJ1bm5lci5ydW4oKWAgbWV0aG9kLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQ29udGV4dCB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRleHQgb2JqZWN0IHBhc3NlZCBieSB5b3UgdG8gdGhlIGBSdW5uZXIucnVuKClgXG4gICAgICovXG4gICAgY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUaGUgdXNhZ2Ugb2YgdGhlIGFnZW50IHJ1biBzbyBmYXIuIEZvciBzdHJlYW1lZCByZXNwb25zZXMsIHRoZSB1c2FnZSB3aWxsIGJlIHN0YWxlIHVudGlsIHRoZVxuICAgICAqIGxhc3QgY2h1bmsgb2YgdGhlIHN0cmVhbSBpcyBwcm9jZXNzZWQuXG4gICAgICovXG4gICAgdXNhZ2U7XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgdG9vbCBuYW1lcyB0byB3aGV0aGVyIHRoZXkgaGF2ZSBiZWVuIGFwcHJvdmVkLlxuICAgICAqL1xuICAgICNhcHByb3ZhbHM7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCA9IHt9KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMudXNhZ2UgPSBuZXcgVXNhZ2UoKTtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWJ1aWxkIHRoZSBhcHByb3ZhbHMgbWFwIGZyb20gYSBzZXJpYWxpemVkIHN0YXRlLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFscyAtIFRoZSBhcHByb3ZhbHMgbWFwIHRvIHJlYnVpbGQuXG4gICAgICovXG4gICAgX3JlYnVpbGRBcHByb3ZhbHMoYXBwcm92YWxzKSB7XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoYXBwcm92YWxzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgdG9vbCBjYWxsIGhhcyBiZWVuIGFwcHJvdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvb2xOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gICAgICogQHBhcmFtIGNhbGxJZCAtIFRoZSBjYWxsIElEIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQsIGBmYWxzZWAgaWYgYmxvY2tlZCBhbmQgYHVuZGVmaW5lZGAgaWYgbm90IHlldCBhcHByb3ZlZCBvciByZWplY3RlZC5cbiAgICAgKi9cbiAgICBpc1Rvb2xBcHByb3ZlZCh7IHRvb2xOYW1lLCBjYWxsSWQgfSkge1xuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSk7XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZCA9PT0gdHJ1ZSAmJiBhcHByb3ZhbEVudHJ5LnJlamVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVG9vbCBpcyBwZXJtYW5lbnRseSBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZScpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiA9IEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQpXG4gICAgICAgICAgICA/IGFwcHJvdmFsRW50cnkucmVqZWN0ZWQuaW5jbHVkZXMoY2FsbElkKVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwgJiYgaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUb29sIGNhbGwgJHtjYWxsSWR9IGlzIGJvdGggYXBwcm92ZWQgYW5kIHJlamVjdGVkIGF0IHRoZSBzYW1lIHRpbWUuIEFwcHJvdmFsIHRha2VzIHByZWNlZGVuY2VgKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvb2xOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gICAgICogQHBhcmFtIGNhbGxJZCAtIFRoZSBjYWxsIElEIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c0FwcHJvdmUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKSA/PyB7XG4gICAgICAgICAgICBhcHByb3ZlZDogW10sXG4gICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnkuYXBwcm92ZWQpKSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbiB0b29sIGhhcyBjYWxsX2lkLCBob3N0ZWQgdG9vbCBjYWxsIGhhcyBpZFxuICAgICAgICAgICAgY29uc3QgY2FsbElkID0gJ2NhbGxJZCcgaW4gYXBwcm92YWxJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICA/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmNhbGxJZCAvLyBmdW5jdGlvbiB0b29sc1xuICAgICAgICAgICAgICAgIDogYXBwcm92YWxJdGVtLnJhd0l0ZW0uaWQ7IC8vIGhvc3RlZCB0b29sc1xuICAgICAgICAgICAgYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5wdXNoKGNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwgYXBwcm92YWxFbnRyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdCBhIHRvb2wgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKi9cbiAgICByZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgeyBhbHdheXNSZWplY3QgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzUmVqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5yZWplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LnJlamVjdGVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgdXNhZ2U6IHRoaXMudXNhZ2UsXG4gICAgICAgICAgICBhcHByb3ZhbHM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLiNhcHByb3ZhbHMuZW50cmllcygpKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5Db250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSBhcyBfUmVhZGFibGVTdHJlYW0sIFRyYW5zZm9ybVN0cmVhbSwgUmVhZGFibGUsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFRleHRTdHJlYW0gfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmNsYXNzIFJ1blJlc3VsdEJhc2Uge1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZ1xuICAgICAqIHRoZSBhZ2VudCBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuaW5wdXQsIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhlc2UgaW5jbHVkZSB0aGluZ3MgbGlrZSBuZXcgbWVzc2FnZXMsIHRvb2xcbiAgICAgKiBjYWxscyBhbmQgdGhlaXIgb3V0cHV0cywgZXRjLlxuICAgICAqXG4gICAgICogSXQgZG9lcyBub3QgaW5jbHVkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYWdlbnRzIGFuZCBpbnN0ZWFkIHJlcHJlc2VudHMgdGhlIG1vZGVsIGRhdGEuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG91dHB1dCBpbmNsdWRpbmcgdGhlIGFnZW50cywgdXNlIHRoZSBgbmV3SXRlbXNgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQoW10sIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGlucHV0IGl0ZW1zLlxuICAgICAqL1xuICAgIGdldCBpbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX29yaWdpbmFsSW5wdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBydW4gaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGlzIGFzc29jaWF0ZXMgdGhlIG1vZGVsIGRhdGEgd2l0aCB0aGUgYWdlbnRzLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBtb2RlbCBkYXRhIHRoYXQgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4sIHVzZSB0aGUgYG91dHB1dGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG5ld0l0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgTExNIHJlc3BvbnNlcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCByYXdSZXNwb25zZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9tb2RlbFJlc3BvbnNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVzcG9uc2UgSUQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgbGFzdFJlc3BvbnNlSWQoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IHRoaXMucmF3UmVzcG9uc2VzO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VzICYmIHJlc3BvbnNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0ucmVzcG9uc2VJZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IGFnZW50IHRoYXQgd2FzIHJ1blxuICAgICAqL1xuICAgIGdldCBsYXN0QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW55IGludGVycnVwdGlvbnMgdGhhdCBvY2N1cnJlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biBmb3IgZXhhbXBsZSBmb3IgdG9vbCBhcHByb3ZhbHMuXG4gICAgICovXG4gICAgZ2V0IGludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuIElmIHRoZSBvdXRwdXQgdHlwZSB3YXMgc2V0IHRvIGFueXRoaW5nIG90aGVyIHRoYW4gYHRleHRgLFxuICAgICAqIHRoaXMgd2lsbCBiZSBwYXJzZWQgZWl0aGVyIGFzIEpTT04gb3IgdXNpbmcgdGhlIFpvZCBzY2hlbWEgeW91IHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGdldCBmaW5hbE91dHB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLndhcm4oJ0FjY2Vzc2VkIGZpbmFsT3V0cHV0IGJlZm9yZSBhZ2VudCBydW4gaXMgY29tcGxldGVkLicpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICBzdXBlcihzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1biBpbiBzdHJlYW1pbmcgbW9kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbWVkUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgdGhhdCBpcyBydW5uaW5nXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB0dXJuIG51bWJlclxuICAgICAqL1xuICAgIGN1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgdGhhdCBjYW4gYmUgcnVuXG4gICAgICovXG4gICAgbWF4VHVybnM7XG4gICAgI2Vycm9yID0gbnVsbDtcbiAgICAjc2lnbmFsO1xuICAgICNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlU3RyZWFtO1xuICAgICNjb21wbGV0ZWRQcm9taXNlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlamVjdDtcbiAgICAjY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3IocmVzdWx0ID0ge30pIHtcbiAgICAgICAgc3VwZXIocmVzdWx0LnN0YXRlKTtcbiAgICAgICAgdGhpcy4jc2lnbmFsID0gcmVzdWx0LnNpZ25hbDtcbiAgICAgICAgaWYgKHRoaXMuI3NpZ25hbCkge1xuICAgICAgICAgICAgdGhpcy4jc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3JlYWRhYmxlU3RyZWFtLmNhbmNlbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcmVhZGFibGVTdHJlYW0gPSBuZXcgX1JlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0YXJ0OiAoY29udHJvbGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBIYW5kbGVzIGFuIGVycm9yIGluIHRoZSBzdHJlYW0gbG9vcC5cbiAgICAgKi9cbiAgICBfcmFpc2VFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0Py4oZXJyKTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXN1bHRlZCBpbiBhbiBlcnJvcjogJHtlfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAqL1xuICAgIGdldCBjYW5jZWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjYW5jZWxsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgcmVhZGFibGUgc3RyZWFtLlxuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIG9mIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXQgdGhpcyBwcm9taXNlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkIGlmIHlvdSBhcmUgbm90IGNvbnN1bWluZyB0aGVcbiAgICAgKiBzdHJlYW0gZGlyZWN0bHkuXG4gICAgICovXG4gICAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbXBsZXRlZFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVycm9yIHRocm93biBkdXJpbmcgdGhlIHJ1biwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICB0b1RleHRTdHJlYW0ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuI3JlYWRhYmxlU3RyZWFtLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgICAgdHJhbnNmb3JtKGV2ZW50LCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JyAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgPT09ICdvdXRwdXRfdGV4dF9kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IFN0cmVhbUV2ZW50VGV4dFN0cmVhbS5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGl0ZW0uZGVsdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGF0aWJsZVdpdGhOb2RlU3RyZWFtcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWRhYmxlLmZyb21XZWIoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0Lm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplVG9vbCh0b29sKSB7XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgc3RyaWN0OiB0b29sLnN0cmljdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGVudmlyb25tZW50OiB0b29sLmNvbXB1dGVyLmVudmlyb25tZW50LFxuICAgICAgICAgICAgZGltZW5zaW9uczogdG9vbC5jb21wdXRlci5kaW1lbnNpb25zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2wnLFxuICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogdG9vbC5wcm92aWRlckRhdGEsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVIYW5kb2ZmKGgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b29sTmFtZTogaC50b29sTmFtZSxcbiAgICAgICAgdG9vbERlc2NyaXB0aW9uOiBoLnRvb2xEZXNjcmlwdGlvbixcbiAgICAgICAgaW5wdXRKc29uU2NoZW1hOiBoLmlucHV0SnNvblNjaGVtYSxcbiAgICAgICAgc3RyaWN0SnNvblNjaGVtYTogaC5zdHJpY3RKc29uU2NoZW1hLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJpYWxpemUubWpzLm1hcCIsImltcG9ydCB7IHRvU21hcnRTdHJpbmcgfSBmcm9tIFwiLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbmV4cG9ydCBjbGFzcyBSdW5JdGVtQmFzZSB7XG4gICAgdHlwZSA9ICdiYXNlX2l0ZW0nO1xuICAgIHJhd0l0ZW07XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgcmF3SXRlbTogdGhpcy5yYXdJdGVtLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5NZXNzYWdlT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnbWVzc2FnZV9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgY29udGVudCgpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMucmF3SXRlbS5jb250ZW50KSB7XG4gICAgICAgICAgICBpZiAocGFydC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBwYXJ0LnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAndG9vbF9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgb3V0cHV0O1xuICAgIHR5cGUgPSAndG9vbF9jYWxsX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCwgb3V0cHV0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICBvdXRwdXQ6IHRvU21hcnRTdHJpbmcodGhpcy5vdXRwdXQpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5SZWFzb25pbmdJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdyZWFzb25pbmdfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5IYW5kb2ZmQ2FsbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfY2FsbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgc291cmNlQWdlbnQ7XG4gICAgdGFyZ2V0QWdlbnQ7XG4gICAgdHlwZSA9ICdoYW5kb2ZmX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBzb3VyY2VBZ2VudCwgdGFyZ2V0QWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5zb3VyY2VBZ2VudCA9IHNvdXJjZUFnZW50O1xuICAgICAgICB0aGlzLnRhcmdldEFnZW50ID0gdGFyZ2V0QWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgc291cmNlQWdlbnQ6IHRoaXMuc291cmNlQWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICB0YXJnZXRBZ2VudDogdGhpcy50YXJnZXRBZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbEFwcHJvdmFsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAndG9vbF9hcHByb3ZhbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IGFsbCB0ZXh0IG91dHB1dCBmcm9tIGEgbGlzdCBvZiBydW4gaXRlbXMgYnkgY29uY2F0ZW5hdGluZyB0aGUgY29udGVudCBvZiBhbGxcbiAqIG1lc3NhZ2Ugb3V0cHV0IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIFRoZSBsaXN0IG9mIHJ1biBpdGVtcyB0byBleHRyYWN0IHRleHQgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIG9mIGFsbCB0aGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgcnVuIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEFsbFRleHRPdXRwdXQoaXRlbXMpIHtcbiAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSAnbWVzc2FnZV9vdXRwdXRfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uY29udGVudClcbiAgICAgICAgLmpvaW4oJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsIi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0TWVzc2FnZVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0TWVzc2FnZSkge1xuICAgIGlmIChvdXRwdXRNZXNzYWdlLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAob3V0cHV0TWVzc2FnZS5yb2xlICE9PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0SXRlbSA9IG91dHB1dE1lc3NhZ2UuY29udGVudFtvdXRwdXRNZXNzYWdlLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RJdGVtLnR5cGUgIT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RJdGVtLnRleHQ7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gdGhlIG91dHB1dCBtZXNzYWdlLlxuICogQHBhcmFtIG91dHB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE91dHB1dFRleHQob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC5vdXRwdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIChnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG91dHB1dC5vdXRwdXRbb3V0cHV0Lm91dHB1dC5sZW5ndGggLSAxXSkgfHwgJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXMubWpzLm1hcCIsIi8qKlxuICogU3RyZWFtaW5nIGV2ZW50IGZyb20gdGhlIExMTS4gVGhlc2UgYXJlIGByYXdgIGV2ZW50cywgaS5lLiB0aGV5IGFyZSBkaXJlY3RseSBwYXNzZWQgdGhyb3VnaCBmcm9tXG4gKiB0aGUgTExNLlxuICovXG5leHBvcnQgY2xhc3MgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCB7XG4gICAgZGF0YTtcbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgdHlwZSA9ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgcmF3IHJlc3BvbnNlcyBzdHJlYW0gZXZlbnRzIGZyb20gdGhlIExMTS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgfVxufVxuLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnRzIHRoYXQgd3JhcCBhIGBSdW5JdGVtYC4gQXMgdGhlIGFnZW50IHByb2Nlc3NlcyB0aGUgTExNIHJlc3BvbnNlLCBpdCB3aWxsIGdlbmVyYXRlXG4gKiB0aGVzZSBldmVudHMgZnJvbSBuZXcgbWVzc2FnZXMsIHRvb2wgY2FsbHMsIHRvb2wgb3V0cHV0cywgaGFuZG9mZnMsIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1TdHJlYW1FdmVudCB7XG4gICAgbmFtZTtcbiAgICBpdGVtO1xuICAgIHR5cGUgPSAncnVuX2l0ZW1fc3RyZWFtX2V2ZW50JztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICogQHBhcmFtIGl0ZW0gVGhlIGl0ZW0gdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpdGVtKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuaXRlbSA9IGl0ZW07XG4gICAgfVxufVxuLyoqXG4gKiBFdmVudCB0aGF0IG5vdGlmaWVzIHRoYXQgdGhlcmUgaXMgYSBuZXcgYWdlbnQgcnVubmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50IHtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ2FnZW50X3VwZGF0ZWRfc3RyZWFtX2V2ZW50JztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYWdlbnQgVGhlIG5ldyBhZ2VudFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudHMubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZSB9IGZyb20gXCIuL3V0aWxzL21lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgd2l0aEZ1bmN0aW9uU3Bhbiwgd2l0aEhhbmRvZmZTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jcmVhdGVTcGFucy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBSdW5JdGVtU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy9pbmRleC5tanNcIjtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzTW9kZWxSZXNwb25zZShtb2RlbFJlc3BvbnNlLCBhZ2VudCwgdG9vbHMsIGhhbmRvZmZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBjb25zdCBydW5IYW5kb2ZmcyA9IFtdO1xuICAgIGNvbnN0IHJ1bkZ1bmN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bkNvbXB1dGVyQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29scy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJykubWFwKCh0KSA9PiBbdC5uYW1lLCB0XSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgY29uc3QgbWNwVG9vbE1hcCA9IG5ldyBNYXAodG9vbHNcbiAgICAgICAgLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwJylcbiAgICAgICAgLm1hcCgodCkgPT4gdClcbiAgICAgICAgLm1hcCgodCkgPT4gW3QucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCwgdF0pKTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBtb2RlbFJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgaWYgKG91dHB1dC5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBvdXRwdXQubmFtZTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKHRvb2xOYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnIHx8XG4gICAgICAgICAgICAgICAgb3V0cHV0Lm5hbWUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBIb3N0ZWQgcmVtb3RlIE1DUCBzZXJ2ZXIncyBhcHByb3ZhbCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJMYWJlbCA9IHByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWw7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwU2VydmVyVG9vbCA9IG1jcFRvb2xNYXAuZ2V0KG1jcFNlcnZlckxhYmVsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1jcFNlcnZlclRvb2wgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTUNQIHNlcnZlciAoJHttY3BTZXJ2ZXJMYWJlbH0pIG5vdCBmb3VuZCBpbiBBZ2VudCAoJHthZ2VudC5uYW1lfSlgO1xuICAgICAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWNwX3NlcnZlcl9sYWJlbDogbWNwU2VydmVyTGFiZWwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERvIHRoaXMgYXBwcm92YWwgbGF0ZXI6XG4gICAgICAgICAgICAgICAgLy8gV2Ugc3VwcG9ydCBib3RoIG9uQXBwcm92YWwgY2FsbGJhY2sgKGxpa2UgdGhlIFB5dGhvbiBTREsgZG9lcykgYW5kIEhJVEwgcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXNlIHRoaXMgbmFtZSB0byBhbGlnbiB3aXRoIHRoZSBuYW1lIHNlbnQgZnJvbSB0aGUgc2VydmVyc1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm92aWRlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHByb3ZpZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpO1xuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBhcHByb3ZhbEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIG1jcFRvb2w6IG1jcFNlcnZlclRvb2wsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFtY3BTZXJ2ZXJUb29sLnByb3ZpZGVyRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG9uQXBwcm92YWwgZnVuY3Rpb24gZXhpc3RzLCBpdCBjb25maXJtcyB0aGUgYXBwcm92YWwgcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGh1cywgdGhpcyBhcHByb3ZhbCBpdGVtIG11c3QgYmUgYXBwZW5kZWQgb25seSBmb3IgdGhlIG5leHQgdHVybiBpbnRlcnJ1cHRpb24gcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdyZWFzb25pbmcnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5SZWFzb25pbmdJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2NvbXB1dGVyX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2NvbXB1dGVyX3VzZScpO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b29sc1VzZWQucHVzaChvdXRwdXQubmFtZSk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgIGlmIChoYW5kb2ZmKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuSGFuZG9mZnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2ZmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvbk1hcC5nZXQob3V0cHV0Lm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFmdW5jdGlvblRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVG9vbCAke291dHB1dC5uYW1lfSBub3QgZm91bmQgaW4gYWdlbnQgJHthZ2VudC5uYW1lfS5gLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHRvb2w6IGZ1bmN0aW9uVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBpdGVtcyxcbiAgICAgICAgaGFuZG9mZnM6IHJ1bkhhbmRvZmZzLFxuICAgICAgICBmdW5jdGlvbnM6IHJ1bkZ1bmN0aW9ucyxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBydW5Db21wdXRlckFjdGlvbnMsXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgIHRvb2xzVXNlZDogdG9vbHNVc2VkLFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5GdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG5jbGFzcyBTaW5nbGVTdGVwUmVzdWx0IHtcbiAgICBvcmlnaW5hbElucHV0O1xuICAgIG1vZGVsUmVzcG9uc2U7XG4gICAgcHJlU3RlcEl0ZW1zO1xuICAgIG5ld1N0ZXBJdGVtcztcbiAgICBuZXh0U3RlcDtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaW5wdXQgaXRlbXMgaS5lLiB0aGUgaXRlbXMgYmVmb3JlIHJ1bigpIHdhcyBjYWxsZWQuIE1heSBiZSBtdXRlZCBieSBoYW5kb2ZmIGlucHV0IGZpbHRlcnNcbiAgICAgKi9cbiAgICBvcmlnaW5hbElucHV0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBjdXJyZW50IHN0ZXBcbiAgICAgKi9cbiAgICBtb2RlbFJlc3BvbnNlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgYmVmb3JlIHRoZSBjdXJyZW50IHN0ZXAgd2FzIGV4ZWN1dGVkXG4gICAgICovXG4gICAgcHJlU3RlcEl0ZW1zLCBcbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgYWZ0ZXIgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBuZXdTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXh0IHN0ZXAgdG8gZXhlY3V0ZVxuICAgICAqL1xuICAgIG5leHRTdGVwKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxJbnB1dCA9IG9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHRoaXMubW9kZWxSZXNwb25zZSA9IG1vZGVsUmVzcG9uc2U7XG4gICAgICAgIHRoaXMucHJlU3RlcEl0ZW1zID0gcHJlU3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5ld1N0ZXBJdGVtcyA9IG5ld1N0ZXBJdGVtcztcbiAgICAgICAgdGhpcy5uZXh0U3RlcCA9IG5leHRTdGVwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuIChpLmUuIGV2ZXJ5dGhpbmcgZ2VuZXJhdGVkIGFmdGVyIG9yaWdpbmFsSW5wdXQpXG4gICAgICovXG4gICAgZ2V0IGdlbmVyYXRlZEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVTdGVwSXRlbXMuY29uY2F0KHRoaXMubmV3U3RlcEl0ZW1zKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVSZXNldFRvb2xDaG9pY2UoYWdlbnQsIHRvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKSB7XG4gICAgaWYgKGFnZW50LnJlc2V0VG9vbENob2ljZSAmJiB0b29sVXNlVHJhY2tlci5oYXNVc2VkVG9vbHMoYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1vZGVsU2V0dGluZ3MsIHRvb2xDaG9pY2U6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxTZXR0aW5ncztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzKGFnZW50LCBvcmlnaW5hbElucHV0LCBvcmlnaW5hbFByZVN0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLCBydW5uZXIsIHN0YXRlKSB7XG4gICAgLy8gY2FsbF9pZHMgZm9yIGZ1bmN0aW9uIHRvb2xzXG4gICAgY29uc3QgZnVuY3Rpb25DYWxsSWRzID0gb3JpZ2luYWxQcmVTdGVwSXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0gJiZcbiAgICAgICAgJ2NhbGxJZCcgaW4gaXRlbS5yYXdJdGVtICYmXG4gICAgICAgIGl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbS5jYWxsSWQpO1xuICAgIC8vIFJ1biBmdW5jdGlvbiB0b29scyB0aGF0IHJlcXVpcmUgYXBwcm92YWwgYWZ0ZXIgdGhleSBnZXQgdGhlaXIgYXBwcm92YWwgcmVzdWx0c1xuICAgIGNvbnN0IGZ1bmN0aW9uVG9vbFJ1bnMgPSBwcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMuZmlsdGVyKChydW4pID0+IHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uQ2FsbElkcy5pbmNsdWRlcyhydW4udG9vbENhbGwuY2FsbElkKTtcbiAgICB9KTtcbiAgICBjb25zdCBmdW5jdGlvblJlc3VsdHMgPSBhd2FpdCBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIGZ1bmN0aW9uVG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpO1xuICAgIC8vIENyZWF0ZSB0aGUgaW5pdGlhbCBzZXQgb2YgdGhlIG91dHB1dCBpdGVtc1xuICAgIGNvbnN0IG5ld0l0ZW1zID0gZnVuY3Rpb25SZXN1bHRzLm1hcCgocikgPT4gci5ydW5JdGVtKTtcbiAgICAvLyBSdW4gTUNQIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgbWNwQXBwcm92YWxSdW5zID0gcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gKHJ1bi5yZXF1ZXN0SXRlbS50eXBlID09PSAndG9vbF9hcHByb3ZhbF9pdGVtJyAmJlxuICAgICAgICAgICAgcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgICAgICBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpO1xuICAgIH0pO1xuICAgIGZvciAoY29uc3QgcnVuIG9mIG1jcEFwcHJvdmFsUnVucykge1xuICAgICAgICAvLyB0aGUgYXBwcm92YWxfcmVxdWVzdF9pZCBcIm1jcHJfMTIzLi4uXCJcbiAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5pZDtcbiAgICAgICAgY29uc3QgYXBwcm92ZWQgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGl0ZW0gbmFtZSBtdXN0IGJlIHRoZSBzYW1lIHdpdGggdGhlIG9uZSBzZW50IGZyb20gUmVzcG9uc2VzIEFQSSBzZXJ2ZXJcbiAgICAgICAgICAgIHRvb2xOYW1lOiBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5uYW1lLFxuICAgICAgICAgICAgY2FsbElkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYXBwcm92ZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZTogYXBwcm92ZWQsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgcmVhc29uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gVGVsbCBSZXNwb25zZXMgQVBJIHNlcnZlciB0aGUgYXBwcm92YWwgcmVzdWx0IGluIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hlY2tUb29sT3V0cHV0ID0gYXdhaXQgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgZnVuY3Rpb25SZXN1bHRzLCBzdGF0ZSk7XG4gICAgLy8gRXhjbHVkZSB0aGUgdG9vbCBhcHByb3ZhbCBpdGVtcywgd2hpY2ggc2hvdWxkIG5vdCBiZSBzZW50IHRvIFJlc3BvbnNlcyBBUEksXG4gICAgLy8gZnJvbSB0aGUgU2luZ2xlU3RlcFJlc3VsdCdzIHByZVN0ZXBJdGVtc1xuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSk7XG4gICAgfSk7XG4gICAgaWYgKGNoZWNrVG9vbE91dHB1dC5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgIG91dHB1dDogY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hlY2tUb29sT3V0cHV0LmlzSW50ZXJydXB0ZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0aW9uczogY2hlY2tUb29sT3V0cHV0LmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gd2Ugb25seSByYW4gbmV3IHRvb2xzIGFuZCBzaWRlIGVmZmVjdHMuIFdlIG5lZWQgdG8gcnVuIHRoZSByZXN0IG9mIHRoZSBhZ2VudFxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBjb25zdCBwcmVTdGVwSXRlbXMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtcztcbiAgICBsZXQgbmV3SXRlbXMgPSBwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcztcbiAgICBjb25zdCBbZnVuY3Rpb25SZXN1bHRzLCBjb21wdXRlclJlc3VsdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucywgcnVubmVyLCBzdGF0ZSksXG4gICAgICAgIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgXSk7XG4gICAgbmV3SXRlbXMgPSBuZXdJdGVtcy5jb25jYXQoZnVuY3Rpb25SZXN1bHRzLm1hcCgocikgPT4gci5ydW5JdGVtKSk7XG4gICAgbmV3SXRlbXMgPSBuZXdJdGVtcy5jb25jYXQoY29tcHV0ZXJSZXN1bHRzKTtcbiAgICAvLyBydW4gaG9zdGVkIE1DUCBhcHByb3ZhbCByZXF1ZXN0c1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbFJlcXVlc3Qgb2YgcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cykge1xuICAgICAgICAgICAgY29uc3QgdG9vbERhdGEgPSBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbFxuICAgICAgICAgICAgICAgIC5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGlmICh0b29sRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzbHkgaGFuZGxlIHRoZSBhcHByb3ZhbCBwcm9jZXNzIGhlcmVcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3VsdCA9IGF3YWl0IHRvb2xEYXRhLm9uX2FwcHJvdmFsKHN0YXRlLl9jb250ZXh0LCBhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZhbFJlc3VsdC5hcHByb3ZlLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBhcHByb3ZhbFJlc3VsdC5yZWFzb24sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IGFwcHJvdmFsUmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByZWNlaXZlIGEgdXNlcidzIGFwcHJvdmFsIG9uIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX21jcF90b29sX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3REYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcmVxdWVzdERhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHJlcXVlc3REYXRhLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVxdWVzdERhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0sIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0cy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgLy8gbmV3SXRlbXMucHVzaChhcHByb3ZhbEl0ZW0ucnVuSXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJvY2VzcyBoYW5kb2Zmc1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjaGVja1Rvb2xPdXRwdXQgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICBpZiAoY2hlY2tUb29sT3V0cHV0LmlzRmluYWxPdXRwdXQpIHtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGVja1Rvb2xPdXRwdXQuaXNJbnRlcnJ1cHRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zOiBjaGVja1Rvb2xPdXRwdXQuaW50ZXJydXB0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjaGVjayBpZiB0aGUgYWdlbnQgcHJvZHVjZWQgYW55IG1lc3NhZ2VzXG4gICAgY29uc3QgbWVzc2FnZUl0ZW1zID0gbmV3SXRlbXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUnVuTWVzc2FnZU91dHB1dEl0ZW0pO1xuICAgIC8vIHdlIHdpbGwgdXNlIHRoZSBsYXN0IGNvbnRlbnQgb3V0cHV0IGFzIHRoZSBmaW5hbCBvdXRwdXRcbiAgICBjb25zdCBwb3RlbnRpYWxGaW5hbE91dHB1dCA9IG1lc3NhZ2VJdGVtcy5sZW5ndGggPiAwXG4gICAgICAgID8gZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZShtZXNzYWdlSXRlbXNbbWVzc2FnZUl0ZW1zLmxlbmd0aCAtIDFdLnJhd0l0ZW0pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIC8vIGlmIHRoZXJlIGlzIG5vIG91dHB1dCB3ZSBqdXN0IHJ1biBhZ2FpblxuICAgIGlmICghcG90ZW50aWFsRmluYWxPdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgaWYgKGFnZW50Lm91dHB1dFR5cGUgPT09ICd0ZXh0JyAmJlxuICAgICAgICAhcHJvY2Vzc2VkUmVzcG9uc2UuaGFzVG9vbHNPckFwcHJvdmFsc1RvUnVuKCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgICAgICBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYWdlbnQub3V0cHV0VHlwZSAhPT0gJ3RleHQnICYmIHBvdGVudGlhbEZpbmFsT3V0cHV0KSB7XG4gICAgICAgIC8vIFN0cnVjdHVyZWQgb3V0cHV0IHNjaGVtYSA9PiBhbHdheXMgbGVhZHMgdG8gYSBmaW5hbCBvdXRwdXQgaWYgd2UgaGF2ZSB0ZXh0XG4gICAgICAgIGNvbnN0IHsgcGFyc2VyIH0gPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGFnZW50Lm91dHB1dFR5cGUsICdmaW5hbF9vdXRwdXQnKTtcbiAgICAgICAgY29uc3QgW2Vycm9yXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihwb3RlbnRpYWxGaW5hbE91dHB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgb3V0cHV0IHR5cGUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBvdXRwdXQgdHlwZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQgfSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xDYWxsLCBvdXRwdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiB0b1NtYXJ0U3RyaW5nKG91dHB1dCksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIHRvb2xSdW5zLCBydW5uZXIsIHN0YXRlKSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gcnVuU2luZ2xlVG9vbCh0b29sUnVuKSB7XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sUnVuLnRvb2wucGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sUnVuLnRvb2wubmVlZHNBcHByb3ZhbChzdGF0ZS5fY29udGV4dCwgcGFyc2VkQXJncywgdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAobmVlZHNBcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvLyByZWplY3RlZFxuICAgICAgICAgICAgICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgVG9vbCBleGVjdXRpb24gZm9yICR7dG9vbFJ1bi50b29sQ2FsbC5jYWxsSWR9IHdhcyBtYW51YWxseSByZWplY3RlZCBieSB1c2VyLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHJlc3BvbnNlKSwgYWdlbnQsIHJlc3BvbnNlKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFwcHJvdmFsICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBhcHByb3ZhbCBwcm9jZXNzIG5lZWRzIHRvIGJlIGRvbmUgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgYWdlbnQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpdGhGdW5jdGlvblNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uZXIuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLmlucHV0ID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbFJ1bi50b29sLmludm9rZShzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIC8vIFVzZSBzdHJpbmcgZGF0YSBmb3IgdHJhY2luZyBhbmQgZXZlbnQgZW1pdHRlclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xSdW4udG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsIH0pO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsIH0pO1xuICAgICAgICAgICAgICAgIGlmIChydW5uZXIuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSBzdHJpbmdSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCByZXN1bHQpLCBhZ2VudCwgcmVzdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBydW5uaW5nIHRvb2wnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodG9vbFJ1bnMubWFwKHJ1blNpbmdsZVRvb2wpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBUb29sQ2FsbEVycm9yKGBGYWlsZWQgdG8gcnVuIGZ1bmN0aW9uIHRvb2xzOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbi8vIEludGVybmFsIGhlbHBlcjogZGlzcGF0Y2ggYSBjb21wdXRlciBhY3Rpb24gYW5kIHJldHVybiBhIHNjcmVlbnNob3QgKHN5bmMvYXN5bmMpXG5hc3luYyBmdW5jdGlvbiBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IHRvb2xDYWxsLmFjdGlvbjtcbiAgICBsZXQgc2NyZWVuc2hvdDtcbiAgICAvLyBEaXNwYXRjaCBiYXNlZCBvbiBhY3Rpb24gdHlwZSBzdHJpbmcgKGFzc3VtZSBhY3Rpb24udHlwZSBleGlzdHMpXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5jbGljayhhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5idXR0b24pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RvdWJsZV9jbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kb3VibGVDbGljayhhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RyYWcnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZHJhZyhhY3Rpb24ucGF0aC5tYXAoKHApID0+IFtwLngsIHAueV0pKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdrZXlwcmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5rZXlwcmVzcyhhY3Rpb24ua2V5cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW92ZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5tb3ZlKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2NyZWVuc2hvdCc6XG4gICAgICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Njcm9sbCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5zY3JvbGwoYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uc2Nyb2xsX3gsIGFjdGlvbi5zY3JvbGxfeSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci50eXBlKGFjdGlvbi50ZXh0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3YWl0JzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLndhaXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYWN0aW9uOyAvLyBlbnN1cmVzIHRoYXQgd2UgaGFuZGxlIGV2ZXJ5IGFjdGlvbiB3ZSBrbm93IG9mXG4gICAgICAgICAgICAvLyBVbmtub3duIGFjdGlvbiwganVzdCB0YWtlIHNjcmVlbnNob3RcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgIH1cbiAgICAvLyBBbHdheXMgcmV0dXJuIHNjcmVlbnNob3QgYXMgYmFzZTY0IHN0cmluZ1xuICAgIGlmICh0eXBlb2YgY29tcHV0ZXIuc2NyZWVuc2hvdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXB1dGVyIGRvZXMgbm90IGltcGxlbWVudCBzY3JlZW5zaG90KCknKTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBhY3Rpb25zLCBydW5uZXIsIHJ1bkNvbnRleHQsIGN1c3RvbUxvZ2dlciA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IF9sb2dnZXIgPSBjdXN0b21Mb2dnZXIgPz8gbG9nZ2VyO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbXB1dGVyID0gYWN0aW9uLmNvbXB1dGVyLmNvbXB1dGVyO1xuICAgICAgICBjb25zdCB0b29sQ2FsbCA9IGFjdGlvbi50b29sQ2FsbDtcbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfc3RhcnQgKGdsb2JhbCArIGFnZW50KVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFnZW50LCBhY3Rpb24uY29tcHV0ZXIsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgYWN0aW9uLmNvbXB1dGVyLCB7IHRvb2xDYWxsIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJ1biB0aGUgYWN0aW9uIGFuZCBnZXQgc2NyZWVuc2hvdFxuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIGNvbXB1dGVyIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgb3V0cHV0ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfZW5kIChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0LCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWx3YXlzIHJldHVybiBhIHNjcmVlbnNob3QgYXMgYSBiYXNlNjQgZGF0YSBVUkxcbiAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSBvdXRwdXQgPyBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7b3V0cHV0fWAgOiAnJztcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcl9jYWxsX3Jlc3VsdCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogeyB0eXBlOiAnY29tcHV0ZXJfc2NyZWVuc2hvdCcsIGRhdGE6IGltYWdlVXJsIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCBpbWFnZVVybCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHJ1bkhhbmRvZmZzLCBydW5uZXIsIHJ1bkNvbnRleHQpIHtcbiAgICBuZXdTdGVwSXRlbXMgPSBbLi4ubmV3U3RlcEl0ZW1zXTtcbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbmNvcnJlY3RseSBjYWxsZWQgZXhlY3V0ZUhhbmRvZmZDYWxscyB3aXRoIG5vIGhhbmRvZmZzLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLiBNb3Zpbmcgb24uJyk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBtdWx0aXBsZSBoYW5kb2Zmcy4gSWdub3JpbmcgYWxsIGJ1dCB0aGUgZmlyc3Qgb25lIGJ5IGFkZGluZyByZWplY3QgcmVzcG9uc2VzIGZvciB0aG9zZVxuICAgICAgICBjb25zdCBvdXRwdXRNZXNzYWdlID0gJ011bHRpcGxlIGhhbmRvZmZzIGRldGVjdGVkLCBpZ25vcmluZyB0aGlzIG9uZS4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJ1bkhhbmRvZmZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShydW5IYW5kb2Zmc1tpXS50b29sQ2FsbCwgb3V0cHV0TWVzc2FnZSksIGFnZW50LCBvdXRwdXRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0dWFsSGFuZG9mZiA9IHJ1bkhhbmRvZmZzWzBdO1xuICAgIHJldHVybiB3aXRoSGFuZG9mZlNwYW4oYXN5bmMgKGhhbmRvZmZTcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBhY3R1YWxIYW5kb2ZmLmhhbmRvZmY7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYocnVuQ29udGV4dCwgYWN0dWFsSGFuZG9mZi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBoYW5kb2ZmU3Bhbi5zcGFuRGF0YS50b19hZ2VudCA9IG5ld0FnZW50Lm5hbWU7XG4gICAgICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRBZ2VudHMgPSBydW5IYW5kb2Zmcy5tYXAoKGgpID0+IGguaGFuZG9mZi5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNdWx0aXBsZSBoYW5kb2ZmcyByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkX2FnZW50czogcmVxdWVzdGVkQWdlbnRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKGFjdHVhbEhhbmRvZmYudG9vbENhbGwsIGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCkpLCBhZ2VudCwgbmV3QWdlbnQpKTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBhZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEZpbHRlciA9IGhhbmRvZmYuaW5wdXRGaWx0ZXIgPz8gcnVubmVyLmNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXI7XG4gICAgICAgIGlmIChpbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGaWx0ZXJpbmcgaW5wdXRzIGZvciBoYW5kb2ZmJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0RmlsdGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiAnbm90IGNhbGxhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZJbnB1dERhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRIaXN0b3J5OiBBcnJheS5pc0FycmF5KG9yaWdpbmFsSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gWy4uLm9yaWdpbmFsSW5wdXRdXG4gICAgICAgICAgICAgICAgICAgIDogb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBwcmVIYW5kb2ZmSXRlbXM6IFsuLi5wcmVTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zOiBbLi4ubmV3U3RlcEl0ZW1zXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGlucHV0RmlsdGVyKGhhbmRvZmZJbnB1dERhdGEpO1xuICAgICAgICAgICAgb3JpZ2luYWxJbnB1dCA9IGZpbHRlcmVkLmlucHV0SGlzdG9yeTtcbiAgICAgICAgICAgIHByZVN0ZXBJdGVtcyA9IGZpbHRlcmVkLnByZUhhbmRvZmZJdGVtcztcbiAgICAgICAgICAgIG5ld1N0ZXBJdGVtcyA9IGZpbHRlcmVkLm5ld0l0ZW1zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9oYW5kb2ZmJywgbmV3QWdlbnQgfSk7XG4gICAgfSwge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBmcm9tX2FnZW50OiBhZ2VudC5uYW1lLFxuICAgICAgICB9LFxuICAgIH0pO1xufVxuY29uc3QgTk9UX0ZJTkFMX09VVFBVVCA9IHtcbiAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIHRvb2xSZXN1bHRzLCBzdGF0ZSkge1xuICAgIGlmICh0b29sUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGludGVycnVwdGlvbnMgPSB0b29sUmVzdWx0c1xuICAgICAgICAuZmlsdGVyKChyKSA9PiByLnJ1bkl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKVxuICAgICAgICAubWFwKChyKSA9PiByLnJ1bkl0ZW0pO1xuICAgIGlmIChpbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdydW5fbGxtX2FnYWluJykge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RUb29sUmVzdWx0ID0gdG9vbFJlc3VsdHNbMF07XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3N0b3Bfb25fZmlyc3RfdG9vbCcpIHtcbiAgICAgICAgaWYgKGZpcnN0VG9vbFJlc3VsdD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoZmlyc3RUb29sUmVzdWx0Lm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCB0b29sVXNlQmVoYXZpb3IgPSBhZ2VudC50b29sVXNlQmVoYXZpb3I7XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHN0b3BwaW5nVG9vbCA9IHRvb2xSZXN1bHRzLmZpbmQoKHIpID0+IHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMuaW5jbHVkZXMoci50b29sLm5hbWUpKTtcbiAgICAgICAgaWYgKHN0b3BwaW5nVG9vbD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoc3RvcHBpbmdUb29sLm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbFVzZUJlaGF2aW9yKHN0YXRlLl9jb250ZXh0LCB0b29sUmVzdWx0cyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbFVzZUJlaGF2aW9yOiAke3Rvb2xVc2VCZWhhdmlvcn1gLCBzdGF0ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgc3RlcCkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBzdGVwLm5ld1N0ZXBJdGVtcykge1xuICAgICAgICBsZXQgaXRlbU5hbWU7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuTWVzc2FnZU91dHB1dEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ21lc3NhZ2Vfb3V0cHV0X2NyZWF0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmQ2FsbEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ2hhbmRvZmZfcmVxdWVzdGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZk91dHB1dEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ2hhbmRvZmZfb2NjdXJyZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3Rvb2xfY2FsbGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxPdXRwdXRJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICd0b29sX291dHB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blJlYXNvbmluZ0l0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3JlYXNvbmluZ19pdGVtX2NyZWF0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVW5rbm93biBpdGVtIHR5cGU6ICcsIGl0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5JdGVtU3RyZWFtRXZlbnQoaXRlbU5hbWUsIGl0ZW0pKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQWdlbnRUb29sVXNlVHJhY2tlciB7XG4gICAgI2FnZW50VG9Ub29scyA9IG5ldyBNYXAoKTtcbiAgICBhZGRUb29sVXNlKGFnZW50LCB0b29sTmFtZXMpIHtcbiAgICAgICAgdGhpcy4jYWdlbnRUb1Rvb2xzLnNldChhZ2VudCwgdG9vbE5hbWVzKTtcbiAgICB9XG4gICAgaGFzVXNlZFRvb2xzKGFnZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNhZ2VudFRvVG9vbHMuaGFzKGFnZW50KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKEFycmF5LmZyb20odGhpcy4jYWdlbnRUb1Rvb2xzLmVudHJpZXMoKSkubWFwKChbYWdlbnQsIHRvb2xOYW1lc10pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbYWdlbnQubmFtZSwgdG9vbE5hbWVzXTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkltcGxlbWVudGF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgQWdlbnRUb29sVXNlVHJhY2tlciwgbmV4dFN0ZXBTY2hlbWEsIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1FcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFRyYWNlIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgaGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgKiBhcyBwcm90b2NvbCBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG4vKipcbiAqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgc2VyaWFsaXplZCBydW4gc3RhdGUuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCB0aGUgc2VyaWFsaXplZFxuICogcnVuIHN0YXRlIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBTREsuXG4gKiBJZiBhbnl0aGluZyBpbiB0aGlzIHNjaGVtYSBjaGFuZ2VzLCB0aGUgdmVyc2lvbiB3aWxsIGhhdmUgdG8gYmUgaW5jcmVtZW50ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OID0gJzEuMCc7XG5jb25zdCAkc2NoZW1hVmVyc2lvbiA9IHoubGl0ZXJhbChDVVJSRU5UX1NDSEVNQV9WRVJTSU9OKTtcbmNvbnN0IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkU3BhbkJhc2UgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlLnNwYW4nKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB0cmFjZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJlbnRfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydGVkX2F0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgZW5kZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlcnJvcjogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzcGFuX2RhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxufSk7XG5jb25zdCBTZXJpYWxpemVkU3BhbiA9IHNlcmlhbGl6ZWRTcGFuQmFzZS5leHRlbmQoe1xuICAgIHByZXZpb3VzX3NwYW46IHoubGF6eSgoKSA9PiBTZXJpYWxpemVkU3Bhbikub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgdXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxufSk7XG5jb25zdCBtb2RlbFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICBvdXRwdXQ6IHouYXJyYXkocHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtKSxcbiAgICByZXNwb25zZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBpdGVtU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlRvb2xDYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmdfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5SZWFzb25pbmdJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIHNvdXJjZUFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIHRhcmdldEFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfYXBwcm92YWxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLm9yKHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG5dKTtcbmNvbnN0IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2UnKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB3b3JrZmxvd19uYW1lOiB6LnN0cmluZygpLFxuICAgIGdyb3VwX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgbmV3SXRlbXM6IHouYXJyYXkoaXRlbVNjaGVtYSksXG4gICAgdG9vbHNVc2VkOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIGhhbmRvZmZzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGhhbmRvZmY6IHouYW55KCksXG4gICAgfSkpLFxuICAgIGZ1bmN0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICB0b29sOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBjb21wdXRlckFjdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgY29tcHV0ZXI6IHouYW55KCksXG4gICAgfSkpLFxuICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHpcbiAgICAgICAgLmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgcmVxdWVzdEl0ZW06IHoub2JqZWN0KHtcbiAgICAgICAgICAgIC8vIHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbVxuICAgICAgICAgICAgcmF3SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2xfY2FsbCcpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBhbHdheXMgZXhpc3RzIGJ1dCBtYXJrZWQgYXMgb3B0aW9uYWwgZm9yIGVhcmx5IHZlcnNpb24gY29tcGF0aWJpbGl0eTsgd2hlbiByZWxlYXNpbmcgMS4wLCB3ZSBjYW4gcmVtb3ZlIHRoZSBudWxsYWJsZSBhbmQgb3B0aW9uYWxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gSG9zdGVkTUNQVG9vbFxuICAgICAgICBtY3BUb29sOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hvc3RlZF90b29sJyksXG4gICAgICAgICAgICBuYW1lOiB6LmxpdGVyYWwoJ2hvc3RlZF9tY3AnKSxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgICAgIH0pLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHJpcHdpcmVUcmlnZ2VyZWQ6IHouYm9vbGVhbigpLFxuICAgIG91dHB1dEluZm86IHouYW55KCksXG59KTtcbmNvbnN0IGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuY29uc3Qgb3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dCcpLFxuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIGFnZW50T3V0cHV0OiB6LmFueSgpLFxuICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IFNlcmlhbGl6ZWRSdW5TdGF0ZSA9IHoub2JqZWN0KHtcbiAgICAkc2NoZW1hVmVyc2lvbixcbiAgICBjdXJyZW50VHVybjogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvcmlnaW5hbElucHV0OiB6LnN0cmluZygpLm9yKHouYXJyYXkocHJvdG9jb2wuTW9kZWxJdGVtKSksXG4gICAgbW9kZWxSZXNwb25zZXM6IHouYXJyYXkobW9kZWxSZXNwb25zZVNjaGVtYSksXG4gICAgY29udGV4dDogei5vYmplY3Qoe1xuICAgICAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgICAgIGFwcHJvdmFsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5vYmplY3Qoe1xuICAgICAgICAgICAgYXBwcm92ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICB9KSksXG4gICAgICAgIGNvbnRleHQ6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuICAgIHRvb2xVc2VUcmFja2VyOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFycmF5KHouc3RyaW5nKCkpKSxcbiAgICBtYXhUdXJuczogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnRTcGFuOiBTZXJpYWxpemVkU3Bhbi5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgbm9BY3RpdmVBZ2VudFJ1bjogei5ib29sZWFuKCksXG4gICAgaW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KG91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSksXG4gICAgY3VycmVudFN0ZXA6IG5leHRTdGVwU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgbGFzdE1vZGVsUmVzcG9uc2U6IG1vZGVsUmVzcG9uc2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBnZW5lcmF0ZWRJdGVtczogei5hcnJheShpdGVtU2NoZW1hKSxcbiAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIHRyYWNlOiBzZXJpYWxpemVkVHJhY2VTY2hlbWEubnVsbGFibGUoKSxcbn0pO1xuLyoqXG4gKiBTZXJpYWxpemFibGUgc25hcHNob3Qgb2YgYW4gYWdlbnQncyBydW4sIGluY2x1ZGluZyBjb250ZXh0LCB1c2FnZSBhbmQgdHJhY2UuXG4gKiBXaGlsZSB0aGlzIGNsYXNzIGhhcyBwdWJsaWNseSB3cml0YWJsZSBwcm9wZXJ0aWVzIChwcmVmaXhlZCB3aXRoIGBfYCksIHRoZXkgYXJlIG5vdCBtZWFudCB0byBiZVxuICogdXNlZCBkaXJlY3RseS4gVG8gcmVhZCB0aGVzZSBwcm9wZXJ0aWVzLCB1c2UgdGhlIGBSdW5SZXN1bHRgIGluc3RlYWQuXG4gKlxuICogTWFuaXB1bGF0aW9uIG9mIHRoZSBzdGF0ZSBkaXJlY3RseSBjYW4gbGVhZCB0byB1bmV4cGVjdGVkIGJlaGF2aW9yIGFuZCBzaG91bGQgYmUgYXZvaWRlZC5cbiAqIEluc3RlYWQsIHVzZSB0aGUgYGFwcHJvdmVgIGFuZCBgcmVqZWN0YCBtZXRob2RzIHRvIGludGVyYWN0IHdpdGggdGhlIHN0YXRlLlxuICovXG5leHBvcnQgY2xhc3MgUnVuU3RhdGUge1xuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgdHVybiBudW1iZXIgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBfY3VycmVudFR1cm4gPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBhZ2VudCBjdXJyZW50bHkgaGFuZGxpbmcgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBfY3VycmVudEFnZW50O1xuICAgIC8qKlxuICAgICAqIE9yaWdpbmFsIHVzZXIgaW5wdXQgcHJpb3IgdG8gYW55IHByb2Nlc3NpbmcuXG4gICAgICovXG4gICAgX29yaWdpbmFsSW5wdXQ7XG4gICAgLyoqXG4gICAgICogUmVzcG9uc2VzIGZyb20gdGhlIG1vZGVsIHNvIGZhci5cbiAgICAgKi9cbiAgICBfbW9kZWxSZXNwb25zZXM7XG4gICAgLyoqXG4gICAgICogQWN0aXZlIHRyYWNpbmcgc3BhbiBmb3IgdGhlIGN1cnJlbnQgYWdlbnQgaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnRTcGFuO1xuICAgIC8qKlxuICAgICAqIFJ1biBjb250ZXh0IHRyYWNraW5nIGFwcHJvdmFscywgdXNhZ2UsIGFuZCBvdGhlciBtZXRhZGF0YS5cbiAgICAgKi9cbiAgICBfY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hhdCB0b29scyBlYWNoIGFnZW50IGhhcyB1c2VkLlxuICAgICAqL1xuICAgIF90b29sVXNlVHJhY2tlcjtcbiAgICAvKipcbiAgICAgKiBJdGVtcyBnZW5lcmF0ZWQgYnkgdGhlIGFnZW50IGR1cmluZyB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9nZW5lcmF0ZWRJdGVtcztcbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIGFsbG93ZWQgdHVybnMgYmVmb3JlIGZvcmNpbmcgdGVybWluYXRpb24uXG4gICAgICovXG4gICAgX21heFR1cm5zO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHJ1biBoYXMgYW4gYWN0aXZlIGFnZW50IHN0ZXAgaW4gcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIExhc3QgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBwcmV2aW91cyB0dXJuLlxuICAgICAqL1xuICAgIF9sYXN0VHVyblJlc3BvbnNlO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSBpbnB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfaW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSBvdXRwdXQgZ3VhcmRyYWlscyBhcHBsaWVkIHRvIHRoZSBydW4uXG4gICAgICovXG4gICAgX291dHB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogTmV4dCBzdGVwIGNvbXB1dGVkIGZvciB0aGUgYWdlbnQgdG8gdGFrZS5cbiAgICAgKi9cbiAgICBfY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogUGFyc2VkIG1vZGVsIHJlc3BvbnNlIGFmdGVyIGFwcGx5aW5nIGd1YXJkcmFpbHMgYW5kIHRvb2xzLlxuICAgICAqL1xuICAgIF9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogVHJhY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcnVuIGlmIHRyYWNpbmcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBfdHJhY2UgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIG9yaWdpbmFsSW5wdXQsIHN0YXJ0aW5nQWdlbnQsIG1heFR1cm5zKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9vcmlnaW5hbElucHV0ID0gc3RydWN0dXJlZENsb25lKG9yaWdpbmFsSW5wdXQpO1xuICAgICAgICB0aGlzLl9tb2RlbFJlc3BvbnNlcyA9IFtdO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnQgPSBzdGFydGluZ0FnZW50O1xuICAgICAgICB0aGlzLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIHRoaXMuX2dlbmVyYXRlZEl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuX21heFR1cm5zID0gbWF4VHVybnM7XG4gICAgICAgIHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX3RyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGludGVycnVwdGlvbnMgaWYgdGhlIGN1cnJlbnQgc3RlcCBpcyBhbiBpbnRlcnJ1cHRpb24gb3RoZXJ3aXNlIHJldHVybnMgYW4gZW1wdHkgYXJyYXkuXG4gICAgICovXG4gICAgZ2V0SW50ZXJydXB0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlcyBhIHRvb2wgY2FsbCByZXF1ZXN0ZWQgYnkgdGhlIGFnZW50IHRocm91Z2ggYW4gaW50ZXJydXB0aW9uIGFuZCBhcHByb3ZhbCBpdGVtIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBUbyBhcHByb3ZlIHRoZSByZXF1ZXN0IHVzZSB0aGlzIG1ldGhvZCBhbmQgdGhlbiBydW4gdGhlIGFnZW50IGFnYWluIHdpdGggdGhlIHNhbWUgc3RhdGUgb2JqZWN0XG4gICAgICogdG8gY29udGludWUgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBvbmx5IGFwcHJvdmUgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNBcHByb3ZlYCBvcHRpb24gdG8gYHRydWVgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGNhbGwgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGFwcHJvdmFsLlxuICAgICAqL1xuICAgIGFwcHJvdmUoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNBcHByb3ZlOiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0cyBhIHRvb2wgY2FsbCByZXF1ZXN0ZWQgYnkgdGhlIGFnZW50IHRocm91Z2ggYW4gaW50ZXJydXB0aW9uIGFuZCBhcHByb3ZhbCBpdGVtIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBUbyByZWplY3QgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgcmVqZWN0IHRoZSBjdXJyZW50IHRvb2wgY2FsbC4gVG8gYWxsb3cgdGhlIHRvb2wgdG8gYmUgdXNlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRocm91Z2hvdXQgdGhlIHJ1biwgc2V0IHRoZSBgYWx3YXlzUmVqZWN0YCBvcHRpb24gdG8gYHRydWVgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGNhbGwgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgcmVqZWN0aW9uLlxuICAgICAqL1xuICAgIHJlamVjdChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c1JlamVjdDogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LnJlamVjdFRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyB0aGUgcnVuIHN0YXRlIHRvIGEgSlNPTiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSB0aGUgcnVuIHN0YXRlIHRvIGEgSlNPTiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlc3VtZSB0aGUgcnVuIGxhdGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHNlcmlhbGl6ZWQgcnVuIHN0YXRlLlxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgJHNjaGVtYVZlcnNpb246IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICBjdXJyZW50VHVybjogdGhpcy5fY3VycmVudFR1cm4sXG4gICAgICAgICAgICBjdXJyZW50QWdlbnQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9jdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmlnaW5hbElucHV0OiB0aGlzLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHRoaXMuX21vZGVsUmVzcG9uc2VzLm1hcCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHM6IHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogcmVzcG9uc2UudXNhZ2UudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiByZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLl9jb250ZXh0LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbFVzZVRyYWNrZXI6IHRoaXMuX3Rvb2xVc2VUcmFja2VyLnRvSlNPTigpLFxuICAgICAgICAgICAgbWF4VHVybnM6IHRoaXMuX21heFR1cm5zLFxuICAgICAgICAgICAgY3VycmVudEFnZW50U3BhbjogdGhpcy5fY3VycmVudEFnZW50U3Bhbj8udG9KU09OKCksXG4gICAgICAgICAgICBub0FjdGl2ZUFnZW50UnVuOiB0aGlzLl9ub0FjdGl2ZUFnZW50UnVuLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMsXG4gICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgICAgIGFnZW50OiByLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgY3VycmVudFN0ZXA6IHRoaXMuX2N1cnJlbnRTdGVwLFxuICAgICAgICAgICAgbGFzdE1vZGVsUmVzcG9uc2U6IHRoaXMuX2xhc3RUdXJuUmVzcG9uc2UsXG4gICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogdGhpcy5fZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnRvSlNPTigpKSxcbiAgICAgICAgICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogdGhpcy5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLFxuICAgICAgICAgICAgdHJhY2U6IHRoaXMuX3RyYWNlID8gdGhpcy5fdHJhY2UudG9KU09OKCkgOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICAvLyBwYXJzaW5nIHRoZSBzY2hlbWEgdG8gZW5zdXJlIHRoZSBvdXRwdXQgaXMgdmFsaWQgZm9yIHJlcGFyc2luZ1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBTZXJpYWxpemVkUnVuU3RhdGUuc2FmZVBhcnNlKG91dHB1dCk7XG4gICAgICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTeXN0ZW1FcnJvcihgRmFpbGVkIHRvIHNlcmlhbGl6ZSBydW4gc3RhdGUuICR7cGFyc2VkLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZC5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgYSBydW4gc3RhdGUgZnJvbSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gZGVzZXJpYWxpemUgYSBydW4gc3RhdGUgZnJvbSBhIHN0cmluZyB0aGF0IHdhcyBzZXJpYWxpemVkIHVzaW5nIHRoZVxuICAgICAqIGB0b1N0cmluZ2AgbWV0aG9kLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tU3RyaW5nKGluaXRpYWxBZ2VudCwgc3RyKSB7XG4gICAgICAgIGNvbnN0IFtwYXJzaW5nRXJyb3IsIGpzb25SZXN1bHRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gSlNPTi5wYXJzZShzdHIpKTtcbiAgICAgICAgaWYgKHBhcnNpbmdFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgRmFpbGVkIHRvIHBhcnNlIHJ1biBzdGF0ZS4gJHtwYXJzaW5nRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHBhcnNpbmdFcnJvci5tZXNzYWdlIDogU3RyaW5nKHBhcnNpbmdFcnJvcil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFNjaGVtYVZlcnNpb24gPSBqc29uUmVzdWx0LiRzY2hlbWFWZXJzaW9uO1xuICAgICAgICBpZiAoIWN1cnJlbnRTY2hlbWFWZXJzaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdSdW4gc3RhdGUgaXMgbWlzc2luZyBzY2hlbWEgdmVyc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50U2NoZW1hVmVyc2lvbiAhPT0gQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgUnVuIHN0YXRlIHNjaGVtYSB2ZXJzaW9uICR7Y3VycmVudFNjaGVtYVZlcnNpb259IGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgdmVyc2lvbiAke0NVUlJFTlRfU0NIRU1BX1ZFUlNJT059YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGVKc29uID0gU2VyaWFsaXplZFJ1blN0YXRlLnBhcnNlKEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGNvbnN0IGFnZW50TWFwID0gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBSZWJ1aWxkIHRoZSBjb250ZXh0XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgUnVuQ29udGV4dChzdGF0ZUpzb24uY29udGV4dC5jb250ZXh0KTtcbiAgICAgICAgY29udGV4dC5fcmVidWlsZEFwcHJvdmFscyhzdGF0ZUpzb24uY29udGV4dC5hcHByb3ZhbHMpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBGaW5kIHRoZSBjdXJyZW50IGFnZW50IGZyb20gdGhlIGluaXRpYWwgYWdlbnRcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gYWdlbnRNYXAuZ2V0KHN0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZSk7XG4gICAgICAgIGlmICghY3VycmVudEFnZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBBZ2VudCAke3N0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBuZXcgUnVuU3RhdGUoY29udGV4dCwgJycsIGN1cnJlbnRBZ2VudCwgc3RhdGVKc29uLm1heFR1cm5zKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuID0gc3RhdGVKc29uLmN1cnJlbnRUdXJuO1xuICAgICAgICAvLyByZWJ1aWxkIHRvb2wgdXNlIHRyYWNrZXJcbiAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgZm9yIChjb25zdCBbYWdlbnROYW1lLCB0b29sTmFtZXNdIG9mIE9iamVjdC5lbnRyaWVzKHN0YXRlSnNvbi50b29sVXNlVHJhY2tlcikpIHtcbiAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGFnZW50TWFwLmdldChhZ2VudE5hbWUpLCB0b29sTmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlYnVpbGQgY3VycmVudCBhZ2VudCBzcGFuXG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgaWYgKCFzdGF0ZUpzb24udHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2UgaXMgbm90IHNldCwgc2tpcHBpbmcgdHJhY2luZyBzZXR1cCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJhY2UgPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgICAgIHRyYWNlSWQ6IHN0YXRlSnNvbi50cmFjZT8uaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogc3RhdGVKc29uLnRyYWNlPy53b3JrZmxvd19uYW1lLFxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHN0YXRlSnNvbi50cmFjZT8uZ3JvdXBfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBzdGF0ZUpzb24udHJhY2U/Lm1ldGFkYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgc3RhdGUuX3RyYWNlID0gdHJhY2U7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBzdGF0ZUpzb24ubm9BY3RpdmVBZ2VudFJ1bjtcbiAgICAgICAgc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9XG4gICAgICAgICAgICBzdGF0ZUpzb24uaW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgICAgICBzdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IHN0YXRlSnNvbi5vdXRwdXRHdWFyZHJhaWxSZXN1bHRzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICBhZ2VudDogYWdlbnRNYXAuZ2V0KHIuYWdlbnQubmFtZSksXG4gICAgICAgIH0pKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gc3RhdGVKc29uLmN1cnJlbnRTdGVwO1xuICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHN0YXRlSnNvbi5vcmlnaW5hbElucHV0O1xuICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMgPSBzdGF0ZUpzb24ubW9kZWxSZXNwb25zZXMubWFwKGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSk7XG4gICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlXG4gICAgICAgICAgICA/IGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzdGF0ZUpzb24ubGFzdE1vZGVsUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gc3RhdGVKc29uLmdlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gZGVzZXJpYWxpemVJdGVtKGl0ZW0sIGFnZW50TWFwKSk7XG4gICAgICAgIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlXG4gICAgICAgICAgICA/IGF3YWl0IGRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UoYWdlbnRNYXAsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaGFuZG9mZicsXG4gICAgICAgICAgICAgICAgbmV3QWdlbnQ6IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudFN0ZXAubmV3QWdlbnQubmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpIHtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgcXVldWUgPSBbaW5pdGlhbEFnZW50XTtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAobWFwLmhhcyhjdXJyZW50QWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG1hcC5zZXQoY3VycmVudEFnZW50Lm5hbWUsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBjdXJyZW50QWdlbnQuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgIGlmIChoYW5kb2ZmIGluc3RhbmNlb2YgQWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRvZmYuYWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5hZ2VudC5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYuYWdlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4pIHtcbiAgICBjb25zdCBzcGFuRGF0YSA9IHNlcmlhbGl6ZWRTcGFuLnNwYW5fZGF0YTtcbiAgICBjb25zdCBwcmV2aW91c1NwYW4gPSBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuXG4gICAgICAgID8gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzcGFuID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICBzcGFuSWQ6IHNlcmlhbGl6ZWRTcGFuLmlkLFxuICAgICAgICB0cmFjZUlkOiBzZXJpYWxpemVkU3Bhbi50cmFjZV9pZCxcbiAgICAgICAgcGFyZW50SWQ6IHNlcmlhbGl6ZWRTcGFuLnBhcmVudF9pZCA/PyB1bmRlZmluZWQsXG4gICAgICAgIHN0YXJ0ZWRBdDogc2VyaWFsaXplZFNwYW4uc3RhcnRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGVuZGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLmVuZGVkX2F0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YTogc3BhbkRhdGEsXG4gICAgfSwgdHJhY2UpO1xuICAgIHNwYW4ucHJldmlvdXNTcGFuID0gcHJldmlvdXNTcGFuO1xuICAgIHJldHVybiBzcGFuO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzZXJpYWxpemVkTW9kZWxSZXNwb25zZSkge1xuICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKCk7XG4gICAgdXNhZ2UucmVxdWVzdHMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5yZXF1ZXN0cztcbiAgICB1c2FnZS5pbnB1dFRva2VucyA9IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zO1xuICAgIHVzYWdlLm91dHB1dFRva2VucyA9IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucztcbiAgICB1c2FnZS50b3RhbFRva2VucyA9IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlLnRvdGFsVG9rZW5zO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVzYWdlLFxuICAgICAgICBvdXRwdXQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHByb3RvY29sLk91dHB1dE1vZGVsSXRlbS5wYXJzZShpdGVtKSksXG4gICAgICAgIHJlc3BvbnNlSWQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVJdGVtKHNlcmlhbGl6ZWRJdGVtLCBhZ2VudE1hcCkge1xuICAgIHN3aXRjaCAoc2VyaWFsaXplZEl0ZW0udHlwZSkge1xuICAgICAgICBjYXNlICdtZXNzYWdlX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0ub3V0cHV0KTtcbiAgICAgICAgY2FzZSAncmVhc29uaW5nX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZWFzb25pbmdJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uc291cmNlQWdlbnQubmFtZSksIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS50YXJnZXRBZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfYXBwcm92YWxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5hc3luYyBmdW5jdGlvbiBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBjdXJyZW50QWdlbnQsIHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCk7XG4gICAgY29uc3QgdG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBjb21wdXRlclRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdjb21wdXRlcicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBuZXcgTWFwKGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gW2VudHJ5Lm5hbWUsIGhhbmRvZmYoZW50cnkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2VudHJ5LnRvb2xOYW1lLCBlbnRyeV07XG4gICAgfSkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgbmV3SXRlbXM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpLFxuICAgICAgICB0b29sc1VzZWQ6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQsXG4gICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRvZmZzLmhhcyhoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSGFuZG9mZiAke2hhbmRvZmYuaGFuZG9mZi50b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBoYW5kb2ZmLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmZzLmdldChoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGZ1bmN0aW9uczogYXdhaXQgUHJvbWlzZS5hbGwoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5tYXAoYXN5bmMgKGZ1bmN0aW9uQ2FsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0b29scy5oYXMoZnVuY3Rpb25DYWxsLnRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBUb29sICR7ZnVuY3Rpb25DYWxsLnRvb2wubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBmdW5jdGlvbkNhbGwudG9vbENhbGwsXG4gICAgICAgICAgICAgICAgdG9vbDogdG9vbHMuZ2V0KGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMubWFwKChjb21wdXRlckFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBjb21wdXRlckFjdGlvbi5jb21wdXRlci5uYW1lO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBDb21wdXRlciB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogY29tcHV0ZXJBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBtY3BBcHByb3ZhbFJlcXVlc3RzOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMgPz8gW10pLm1hcCgoYXBwcm92YWxSZXF1ZXN0KSA9PiAoe1xuICAgICAgICAgICAgcmVxdWVzdEl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbVxuICAgICAgICAgICAgICAgIC5yYXdJdGVtLCBjdXJyZW50QWdlbnQpLFxuICAgICAgICAgICAgbWNwVG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgIH0pKSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgaGFzVG9vbHNPckFwcHJvdmFsc1RvUnVuKCkge1xuICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQuaGFuZG9mZnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5mdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuY29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5TdGF0ZS5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IGRlZmluZUlucHV0R3VhcmRyYWlsLCBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0SGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuUmVzdWx0LCBTdHJlYW1lZFJ1blJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdC5tanNcIjtcbmltcG9ydCB7IFJ1bkhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBzZXJpYWxpemVUb29sLCBzZXJpYWxpemVIYW5kb2ZmIH0gZnJvbSBcIi4vdXRpbHMvc2VyaWFsaXplLm1qc1wiO1xuaW1wb3J0IHsgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVXNlckVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGFkZFN0ZXBUb1J1blJlc3VsdCwgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cywgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMsIG1heWJlUmVzZXRUb29sQ2hvaWNlLCBwcm9jZXNzTW9kZWxSZXNwb25zZSwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IGdldE9yQ3JlYXRlVHJhY2UsIHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBZ2VudFNwYW4sIHdpdGhHdWFyZHJhaWxTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCwgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmNvbnN0IERFRkFVTFRfTUFYX1RVUk5TID0gMTA7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2luZyh0cmFjaW5nRGlzYWJsZWQsIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICBpZiAodHJhY2luZ0Rpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAnZW5hYmxlZF93aXRob3V0X2RhdGEnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFR1cm5JbnB1dChvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcykge1xuICAgIGNvbnN0IHJhd0l0ZW1zID0gZ2VuZXJhdGVkSXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlICE9PSAndG9vbF9hcHByb3ZhbF9pdGVtJykgLy8gZG9uJ3QgaW5jbHVkZSBhcHByb3ZhbCBpdGVtcyB0byBhdm9pZCBkb3VibGUgZnVuY3Rpb24gY2FsbHNcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtKTtcbiAgICBpZiAodHlwZW9mIG9yaWdpbmFsSW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG9yaWdpbmFsSW5wdXQgPSBbeyB0eXBlOiAnbWVzc2FnZScsIHJvbGU6ICd1c2VyJywgY29udGVudDogb3JpZ2luYWxJbnB1dCB9XTtcbiAgICB9XG4gICAgcmV0dXJuIFsuLi5vcmlnaW5hbElucHV0LCAuLi5yYXdJdGVtc107XG59XG4vKipcbiAqIEEgUnVubmVyIGlzIHJlc3BvbnNpYmxlIGZvciBydW5uaW5nIGFuIGFnZW50IHdvcmtmbG93LlxuICovXG5leHBvcnQgY2xhc3MgUnVubmVyIGV4dGVuZHMgUnVuSG9va3Mge1xuICAgIGNvbmZpZztcbiAgICBpbnB1dEd1YXJkcmFpbERlZnM7XG4gICAgb3V0cHV0R3VhcmRyYWlsRGVmcztcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgICAgIG1vZGVsUHJvdmlkZXI6IGNvbmZpZy5tb2RlbFByb3ZpZGVyID8/IGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCksXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICBoYW5kb2ZmSW5wdXRGaWx0ZXI6IGNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXIsXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbHM6IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxzOiBjb25maWcub3V0cHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIHRyYWNpbmdEaXNhYmxlZDogY29uZmlnLnRyYWNpbmdEaXNhYmxlZCA/PyBmYWxzZSxcbiAgICAgICAgICAgIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGE6IGNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhID8/IHRydWUsXG4gICAgICAgICAgICB3b3JrZmxvd05hbWU6IGNvbmZpZy53b3JrZmxvd05hbWUgPz8gJ0FnZW50IHdvcmtmbG93JyxcbiAgICAgICAgICAgIHRyYWNlSWQ6IGNvbmZpZy50cmFjZUlkLFxuICAgICAgICAgICAgZ3JvdXBJZDogY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICB0cmFjZU1ldGFkYXRhOiBjb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oc3RhcnRpbmdBZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgc2F2ZWQgc3RhdGUgd2UgdXNlIHRoYXQgb25lLCBvdGhlcndpc2Ugd2UgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgc3RhcnRpbmdBZ2VudCwgb3B0aW9ucy5tYXhUdXJucyA/PyBERUZBVUxUX01BWF9UVVJOUyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbCA9IHNlbGVjdE1vZGVsKHN0YXRlLl9jdXJyZW50QWdlbnQubW9kZWwsIHRoaXMuY29uZmlnLm1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gYXdhaXQgdGhpcy5jb25maWcubW9kZWxQcm92aWRlci5nZXRNb2RlbChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIGN1cnJlbnQgc3RlcCwgd2UgdHJlYXQgdGhpcyBhcyBhIG5ldyBydW5cbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gc3RhdGUuX2N1cnJlbnRTdGVwID8/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ29udGludWluZyBmcm9tIGludGVycnVwdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSB8fCAhc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ05vIG1vZGVsIHJlc3BvbnNlIGZvdW5kIGluIHByZXZpb3VzIHN0YXRlJywgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgc3RpbGwgaW4gYW4gaW50ZXJydXB0aW9uLCBzbyB3ZSBuZWVkIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZG9mZnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50LmhhbmRvZmZzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hpbGUgdGhpcyBhcnJheSB1c3VhbGx5IG11c3Qgbm90IGJlIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBhZGRlZCB0aGlzIGNoZWNrIHRvIHByZXZlbnQgdW5leHBlY3RlZCBydW50aW1lIGVycm9ycyBsaWtlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWFnZW50cy1qcy9pc3N1ZXMvMTM4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnMucHVzaCguLi5zdGF0ZS5fY3VycmVudEFnZW50LmhhbmRvZmZzLm1hcChnZXRIYW5kb2ZmKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZG9mZk5hbWVzID0gaGFuZG9mZnMubWFwKChoKSA9PiBoLmFnZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBjcmVhdGVBZ2VudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdGF0ZS5fY3VycmVudEFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogaGFuZG9mZk5hbWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X3R5cGU6IHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0U2NoZW1hTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiBzZXJpYWxpemVUb29sKHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zcGFuRGF0YS50b29scyA9IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA+IHN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXggdHVybnMgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogc3RhdGUuX21heFR1cm5zIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3N0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7c3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3N0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRUdXJuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IGdldFR1cm5JbnB1dChzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBhd2FpdCBtb2RlbC5nZXRSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb25zOiBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChzdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFByb21wdChzdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHR1cm5JbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2Uoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHRvb2xzLCBoYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQgPSBzdGF0ZS5fY3VycmVudFN0ZXAubmV3QWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJydXB0ZWQuIERvbid0IHJ1biBhbnkgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnIpIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBlbmQgdGhlIHNwYW4gaWYgdGhlIHJ1biB3YXMgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyAjcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5pbnB1dEd1YXJkcmFpbHMubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHN0YXRlLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJvbGwgYmFjayB0aGUgY3VycmVudCB0dXJuIHRvIGVuYWJsZSByZXJ1bnNcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIG91dHB1dCkge1xuICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dEd1YXJkcmFpbHMubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCkpO1xuICAgICAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBhZ2VudE91dHB1dCA9IHN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCk7XG4gICAgICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIGFnZW50T3V0cHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgbW9kZWxSZXNwb25zZTogc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnR3VhcmRyYWlsIHRyaXB3aXJlIHRyaWdnZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYE91dHB1dCBndWFyZHJhaWwgZmFpbGVkIHRvIGNvbXBsZXRlOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5TdHJlYW1Mb29wKHJlc3VsdCwgb3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVG9vbHMgPSB0b29scy5tYXAoKHQpID0+IHNlcmlhbGl6ZVRvb2wodCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPz8ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ05vIG1vZGVsIHJlc3BvbnNlIGZvdW5kIGluIHByZXZpb3VzIHN0YXRlJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cyhyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgc3RpbGwgaW4gYW4gaW50ZXJydXB0aW9uLCBzbyB3ZSBuZWVkIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmTmFtZXMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IGguYWdlbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IGhhbmRvZmZOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X3R5cGU6IGN1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4ocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID4gcmVzdWx0LnN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01heCB0dXJucyBleGNlZWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHJlc3VsdC5zdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3Jlc3VsdC5zdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7Y3VycmVudEFnZW50Lm5hbWV9ICh0dXJuICR7cmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbCA9IHNlbGVjdE1vZGVsKGN1cnJlbnRBZ2VudC5tb2RlbCwgdGhpcy5jb25maWcubW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBhd2FpdCB0aGlzLmNvbmZpZy5tb2RlbFByb3ZpZGVyLmdldE1vZGVsKG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGVsU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuSW5wdXQgPSBnZXRUdXJuSW5wdXQocmVzdWx0LmlucHV0LCByZXN1bHQubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbFJlc3BvbnNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIG1vZGVsLmdldFN0cmVhbWVkUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb25zOiBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHJlc3VsdC5zdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRQcm9tcHQocmVzdWx0LnN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB0dXJuSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiBzZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKGN1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZC5wYXJzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5yZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB1c2VyJ3MgY29kZSBleGl0cyBhIGxvb3AgdG8gY29uc3VtZSB0aGUgc3RyZWFtLCB3ZSBuZWVkIHRvIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBsb29wIHRvIHByZXZlbnQgaW50ZXJuYWwgZmFsc2UgZXJyb3JzIGFuZCB1bm5lY2Vzc2FyeSBwcm9jZXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50KGV2ZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmluYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgZGlkIG5vdCBwcm9kdWNlIGEgZmluYWwgcmVzcG9uc2UhJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBmaW5hbFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX21vZGVsUmVzcG9uc2VzLnB1c2gocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzTW9kZWxSZXNwb25zZShyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIGN1cnJlbnRBZ2VudCwgdG9vbHMsIGhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzKGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGN1cnJlbnRBZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBkb25lIGZvciBub3cuIERvbid0IHJ1biBhbnkgb3V0cHV0IGd1YXJkcmFpbHNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwXG4gICAgICAgICAgICAgICAgICAgICAgICA/Lm5ld0FnZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50KHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZG9mZiwgc28gd2UgbmVlZCB0byBydW4gdGhlIGxvb3AgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUnVubmluZyBuZXh0IGxvb3AnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGluIGFnZW50IHJ1bicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxTdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgb3IgcmV1c2UgZXhpc3Rpbmcgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIGFnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHN0cmVhbWVkIHJlc3VsdCB3aXRoIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyZWFtZWRSdW5SZXN1bHQoe1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHRzXG4gICAgICAgICAgICByZXN1bHQubWF4VHVybnMgPSBvcHRpb25zLm1heFR1cm5zID8/IHN0YXRlLl9tYXhUdXJucztcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBzdHJlYW0gbG9vcCB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICB0aGlzLiNydW5TdHJlYW1Mb29wKHJlc3VsdCwgb3B0aW9ucykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kb25lKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9yYWlzZUVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zID0ge1xuICAgICAgICBzdHJlYW06IGZhbHNlLFxuICAgICAgICBjb250ZXh0OiB1bmRlZmluZWQsXG4gICAgfSkge1xuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZSAmJiBpbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UoaW5wdXQuX3RyYWNlLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Ll9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKGlucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0T3JDcmVhdGVUcmFjZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxTdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMuY29uZmlnLnRyYWNlSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmNvbmZpZy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLmNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMuY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmxldCBfZGVmYXVsdFJ1bm5lciA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldERlZmF1bHRSdW5uZXIoKSB7XG4gICAgaWYgKF9kZWZhdWx0UnVubmVyKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdFJ1bm5lcjtcbiAgICB9XG4gICAgX2RlZmF1bHRSdW5uZXIgPSBuZXcgUnVubmVyKCk7XG4gICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE1vZGVsKGFnZW50TW9kZWwsIHJ1bkNvbmZpZ01vZGVsKSB7XG4gICAgLy8gV2hlbiBpbml0aWFsaXppbmcgYW4gYWdlbnQgd2l0aG91dCBtb2RlbCBuYW1lLCB0aGUgbW9kZWwgcHJvcGVydHkgaXMgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy4gU28sXG4gICAgLy8gKiBhZ2VudE1vZGVsID09PSAnJyAmIHJ1bkNvbmZpZ01vZGVsIGV4aXN0cywgcnVuQ29uZmlnTW9kZWwgd2lsbCBiZSB1c2VkXG4gICAgLy8gKiBhZ2VudE1vZGVsIGlzIHNldCwgdGhlIGFnZW50TW9kZWwgd2lsbCBiZSB1c2VkIG92ZXIgcnVuQ29uZmlnTW9kZWxcbiAgICBpZiAoKHR5cGVvZiBhZ2VudE1vZGVsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBhZ2VudE1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKSB8fFxuICAgICAgICBhZ2VudE1vZGVsIC8vIGFueSB0cnV0aHkgdmFsdWVcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIGFnZW50TW9kZWw7XG4gICAgfVxuICAgIHJldHVybiBydW5Db25maWdNb2RlbCA/PyBhZ2VudE1vZGVsID8/IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVI7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJ1bm5lciA9IGdldERlZmF1bHRSdW5uZXIoKTtcbiAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bi5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgdG9vbCwgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBERUZBVUxUX01PREVMX1BMQUNFSE9MREVSID0gJyc7XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgcHJvbXB0O1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBjb25maWcucHJvbXB0O1xuICAgICAgICB0aGlzLmhhbmRvZmZEZXNjcmlwdGlvbiA9IGNvbmZpZy5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZnMgPSBjb25maWcuaGFuZG9mZnMgPz8gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgPz8gJyc7XG4gICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IGNvbmZpZy5tb2RlbFNldHRpbmdzID8/IHt9O1xuICAgICAgICB0aGlzLnRvb2xzID0gY29uZmlnLnRvb2xzID8/IFtdO1xuICAgICAgICB0aGlzLm1jcFNlcnZlcnMgPSBjb25maWcubWNwU2VydmVycyA/PyBbXTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbHMgPSBjb25maWcuaW5wdXRHdWFyZHJhaWxzID8/IFtdO1xuICAgICAgICB0aGlzLm91dHB1dEd1YXJkcmFpbHMgPSBjb25maWcub3V0cHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgaWYgKGNvbmZpZy5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFR5cGUgPSBjb25maWcub3V0cHV0VHlwZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvb2xVc2VCZWhhdmlvciA9IGNvbmZpZy50b29sVXNlQmVoYXZpb3IgPz8gJ3J1bl9sbG1fYWdhaW4nO1xuICAgICAgICB0aGlzLnJlc2V0VG9vbENob2ljZSA9IGNvbmZpZy5yZXNldFRvb2xDaG9pY2UgPz8gdHJ1ZTtcbiAgICAgICAgLy8gLS0tIFJ1bnRpbWUgd2FybmluZyBmb3IgaGFuZG9mZiBvdXRwdXQgdHlwZSBjb21wYXRpYmlsaXR5IC0tLVxuICAgICAgICBpZiAoY29uZmlnLmhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY29uZmlnLmhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRvZmZzICYmIHRoaXMub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFR5cGVzID0gbmV3IFNldChbSlNPTi5zdHJpbmdpZnkodGhpcy5vdXRwdXRUeXBlKV0pO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaCBvZiB0aGlzLmhhbmRvZmZzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgnb3V0cHV0VHlwZScgaW4gaCAmJiBoLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGVzLmFkZChKU09OLnN0cmluZ2lmeShoLm91dHB1dFR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgnYWdlbnQnIGluIGggJiYgaC5hZ2VudC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5hZ2VudC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dFR5cGVzLnNpemUgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBbQWdlbnRdIFdhcm5pbmc6IEhhbmRvZmYgYWdlbnRzIGhhdmUgZGlmZmVyZW50IG91dHB1dCB0eXBlczogJHtBcnJheS5mcm9tKG91dHB1dFR5cGVzKS5qb2luKCcsICcpfS4gWW91IGNhbiBtYWtlIGl0IHR5cGUtc2FmZSBieSB1c2luZyBBZ2VudC5jcmVhdGUoeyAuLi4gfSkgbWV0aG9kIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE91dHB1dCBzY2hlbWEgbmFtZS5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0U2NoZW1hTmFtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnWm9kT3V0cHV0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgY29weSBvZiB0aGUgYWdlbnQsIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50cyBjaGFuZ2VkLiBGb3IgZXhhbXBsZSwgeW91IGNvdWxkIGRvOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogY29uc3QgbmV3QWdlbnQgPSBhZ2VudC5jbG9uZSh7IGluc3RydWN0aW9uczogJ05ldyBpbnN0cnVjdGlvbnMnIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gQSBwYXJ0aWFsIGNvbmZpZ3VyYXRpb24gdG8gY2hhbmdlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGFnZW50IHdpdGggdGhlIGdpdmVuIGNoYW5nZXMuXG4gICAgICovXG4gICAgY2xvbmUoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWdlbnQoe1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGlzIGFnZW50IGludG8gYSB0b29sLCBjYWxsYWJsZSBieSBvdGhlciBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIGhhbmRvZmZzIGluIHR3byB3YXlzOlxuICAgICAqIDEuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHJlY2VpdmVzIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50XG4gICAgICogICAgcmVjZWl2ZXMgZ2VuZXJhdGVkIGlucHV0LlxuICAgICAqIDIuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHRha2VzIG92ZXIgdGhlIGNvbnZlcnNhdGlvbi4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50IGlzXG4gICAgICogICAgY2FsbGVkIGFzIGEgdG9vbCwgYW5kIHRoZSBjb252ZXJzYXRpb24gaXMgY29udGludWVkIGJ5IHRoZSBvcmlnaW5hbCBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHRvb2wuXG4gICAgICogQHJldHVybnMgQSB0b29sIHRoYXQgcnVucyB0aGUgYWdlbnQgYW5kIHJldHVybnMgdGhlIG91dHB1dCB0ZXh0LlxuICAgICAqL1xuICAgIGFzVG9vbChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIHRvb2xEZXNjcmlwdGlvbiwgY3VzdG9tT3V0cHV0RXh0cmFjdG9yIH0gPSBvcHRpb25zO1xuICAgICAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogWydpbnB1dCddLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0Py5jb250ZXh0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21PdXRwdXRFeHRyYWN0b3IocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldE91dHB1dFRleHQocmVzdWx0LnJhd1Jlc3BvbnNlc1tyZXN1bHQucmF3UmVzcG9uc2VzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scygpIHtcbiAgICAgICAgaWYgKHRoaXMubWNwU2VydmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0QWxsTWNwVG9vbHModGhpcy5tY3BTZXJ2ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFMbCBhZ2VudCB0b29scywgaW5jbHVkaW5nIHRoZSBNQ1BsIGFuZCBmdW5jdGlvbiB0b29scy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFsbCBjb25maWd1cmVkIHRvb2xzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QWxsVG9vbHMoKSB7XG4gICAgICAgIHJldHVybiBbLi4uKGF3YWl0IHRoaXMuZ2V0TWNwVG9vbHMoKSksIC4uLnRoaXMudG9vbHNdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgdGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICogQHJldHVybnMgVGhlIHBhcnNlZCBvdXQuXG4gICAgICovXG4gICAgcHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm91dHB1dFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKG91dHB1dCk7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodGhpcy5vdXRwdXRUeXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dFR5cGUucGFyc2UocGFyc2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG91dHB1dCB0eXBlOiAke3RoaXMub3V0cHV0VHlwZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGFnZW50LCB3aGljaCBpcyBzZXJpYWxpemFibGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGFnZW50J3MgbmFtZS5cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdlbnQubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5leHBvcnQgeyBBZ2VudEhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuZXhwb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0QWxsTWNwVG9vbHMsIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlLCBNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAsIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuZXhwb3J0IHsgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5leHBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuZXhwb3J0IHsgcnVuLCBSdW5uZXIsIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuZXhwb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5leHBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuZXhwb3J0IHsgY29tcHV0ZXJUb29sLCBob3N0ZWRNY3BUb29sLCB0b29sLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuZXhwb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciwgVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5leHBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZSA/PyAnYXNoJztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVRvb2xDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtb2RhbGl0aWVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUucmVzcG9uc2UnKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbnNfZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG91dHB1dF90b2tlbnNfZGV0YWlsczogelxuICAgICAgICAgICAgLnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKVxuICAgICAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgICAgIC5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgndGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgXSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNvbnRlbnQ6IHouYXJyYXkoY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5pdGVtJykub3B0aW9uYWwoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5lbnVtKFsnbWVzc2FnZScsICdmdW5jdGlvbl9jYWxsJywgJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0J10pLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnZlcnNhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUuY29udmVyc2F0aW9uJykub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBlcnJvcjogei5vYmplY3Qoe1xuICAgICAgICBjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcGFyYW06IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGVycm9yRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdlcnJvcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXR0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fc3RhcnRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JhdGVfbGltaXRzLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByYXRlX2xpbWl0czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG5hbWU6IHouZW51bShbJ3JlcXVlc3RzJywgJ3Rva2VucyddKS5vcHRpb25hbCgpLFxuICAgICAgICByZW1haW5pbmc6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVzZXRfc2Vjb25kczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIH0pKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW8uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLnRleHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UudGV4dC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jYW5jZWwnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZTogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG4vKipcbiAqIFRoaXMgc2NoZW1hIGlzIHVzZWQgaWYgYW4gZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LiBUaGUgUmVhbHRpbWUgQVBJIG1pZ2h0IGludHJvZHVjZVxuICogbmV3IGV2ZW50cyBhdCBzb21lIHBvaW50IGFuZCB3ZSBzaG91bGQgaGFuZGxlIHRoZW0gZ3JhY2VmdWxseSBieSB0cmVhdGluZyB0aGVtIGFzIGdlbmVyaWMgZXZlbnRzXG4gKiBvbmx5IHJlcXVpcmluZyBhIHR5cGUgYW5kIGFuIG9wdGlvbmFsIGV2ZW50X2lkLlxuICovXG5leHBvcnQgY29uc3QgZ2VuZXJpY0V2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEsXG4gICAgZXJyb3JFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbl0pO1xuLyoqXG4gKiBQYXJzZXMgYSByZWFsdGltZSBldmVudCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQsIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIGdlbmVyaWMgZXZlbnQuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGV2ZW50IG9yIG51bGwgaWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVhbHRpbWVFdmVudChldmVudCkge1xuICAgIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YS50b1N0cmluZygpKTtcbiAgICBjb25zdCBwYXJzZWQgPSByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1BhcnNlZCA9IGdlbmVyaWNFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICAgICAgaWYgKGdlbmVyaWNQYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZ2VuZXJpY1BhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZGF0YTogcGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogZmFsc2UgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lRXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCBVc2FnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSwgcmVhbHRpbWVUb29sQ2FsbEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCwgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBhcnJheUJ1ZmZlclRvQmFzZTY0LCBkaWZmUmVhbHRpbWVIaXN0b3J5IH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBtb2RlbCB0aGF0IGlzIHVzZWQgZHVyaW5nIHRoZSBjb25uZWN0aW9uIGlmIG5vIG1vZGVsIGlzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwgPSAnZ3B0LTRvLXJlYWx0aW1lLXByZXZpZXcnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBzZXNzaW9uIGNvbmZpZyB0aGF0IGdldHMgc2VuZCBvdmVyIGR1cmluZyBzZXNzaW9uIGNvbm5lY3Rpb24gdW5sZXNzIG92ZXJyaWRkZW5cbiAqIGJ5IHRoZSB1c2VyLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcgPSB7XG4gICAgdm9pY2U6ICdhc2gnLFxuICAgIG1vZGFsaXRpZXM6IFsndGV4dCcsICdhdWRpbyddLFxuICAgIGlucHV0QXVkaW9Gb3JtYXQ6ICdwY20xNicsXG4gICAgb3V0cHV0QXVkaW9Gb3JtYXQ6ICdwY20xNicsXG4gICAgaW5wdXRBdWRpb1RyYW5zY3JpcHRpb246IHtcbiAgICAgICAgbW9kZWw6ICdncHQtNG8tbWluaS10cmFuc2NyaWJlJyxcbiAgICB9LFxuICAgIHR1cm5EZXRlY3Rpb246IHtcbiAgICAgICAgdHlwZTogJ3NlbWFudGljX3ZhZCcsXG4gICAgfSxcbiAgICBpbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb246IG51bGwsXG4gICAgc3BlZWQ6IDEsXG59O1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lQmFzZSBleHRlbmRzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICAjbW9kZWw7XG4gICAgI2FwaUtleTtcbiAgICAjdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgI3Jhd1Nlc3Npb25Db25maWcgPSBudWxsO1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI21vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IG1vZGVsIHRoYXQgaXMgYmVpbmcgdXNlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50TW9kZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtb2RlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICogKipOb3RlKio6IFRoZSBtb2RlbCBjYW5ub3QgYmUgY2hhbmdlZCBtaWQgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHNldCBjdXJyZW50TW9kZWwobW9kZWwpIHtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBtb2RlbDtcbiAgICB9XG4gICAgZ2V0IF9yYXdTZXNzaW9uQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA/PyBudWxsO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0QXBpS2V5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy4jYXBpS2V5O1xuICAgICAgICBpZiAodHlwZW9mIGFwaUtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUtleSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcGlLZXk7XG4gICAgfVxuICAgIF9vbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnKicsIHBhcnNlZCk7XG4gICAgICAgIGlmIChpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBwYXJzZWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQocGFyc2VkLnR5cGUsIHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9zdGFydGVkJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9zdGFydGVkJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLnVwZGF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNyYXdTZXNzaW9uQ29uZmlnID0gcGFyc2VkLnNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UgZG9uZSBldmVudCcsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBpbnB1dFRva2VucyArIG91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndXNhZ2VfdXBkYXRlJywgdXNhZ2UpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0dXJuX2RvbmUnLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlX2RvbmUnLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLmlkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2Uub3V0cHV0ID8/IFtdLFxuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2RvbmUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX2RlbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSB7XG4gICAgICAgICAgICAvLyByaWdodCBub3cgcmF0aGVyIHRoYW4ga2VlcGluZyB0cmFjayBvZiBwYXJ0aWFscyBhbmQgcmVidWlsZGluZyB0aGUgaXRlbSB3ZVxuICAgICAgICAgICAgLy8gd2lsbCByZXRyaWV2ZSBpdCBpbnN0ZWFkIHdoaWNoIHRyaWdnZXJzIHRoZSBgY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkYCBldmVudCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS50ZXh0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdF9kZWx0YScsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBwYXJzZWQuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyAmJiBpdGVtLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIHRvb2xDYWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Z1bmN0aW9uX2NhbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogaXRlbS5jYWxsX2lkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogbWVzc2FnZSxcbiAgICAgICAgICAgIC4uLm90aGVyRXZlbnREYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsID8/XG4gICAgICAgICAgICAgICAgdGhpcy4jbW9kZWwgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RlbCxcbiAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudm9pY2UsXG4gICAgICAgICAgICBzcGVlZDogY29uZmlnLnNwZWVkID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLnNwZWVkLFxuICAgICAgICAgICAgbW9kYWxpdGllczogY29uZmlnLm1vZGFsaXRpZXMgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcubW9kYWxpdGllcyxcbiAgICAgICAgICAgIGlucHV0X2F1ZGlvX2Zvcm1hdDogY29uZmlnLmlucHV0QXVkaW9Gb3JtYXQgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5pbnB1dEF1ZGlvRm9ybWF0LFxuICAgICAgICAgICAgb3V0cHV0X2F1ZGlvX2Zvcm1hdDogY29uZmlnLm91dHB1dEF1ZGlvRm9ybWF0ID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcub3V0cHV0QXVkaW9Gb3JtYXQsXG4gICAgICAgICAgICBpbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uOiBjb25maWcuaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24gPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgIGlucHV0X2F1ZGlvX25vaXNlX3JlZHVjdGlvbjogY29uZmlnLmlucHV0QXVkaW9Ob2lzZVJlZHVjdGlvbiA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9Ob2lzZVJlZHVjdGlvbixcbiAgICAgICAgICAgIHR1cm5fZGV0ZWN0aW9uOiBPcGVuQUlSZWFsdGltZUJhc2UuYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKGNvbmZpZy50dXJuRGV0ZWN0aW9uKSA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICB0b29sX2Nob2ljZTogY29uZmlnLnRvb2xDaG9pY2UgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudG9vbENob2ljZSxcbiAgICAgICAgICAgIHRvb2xzOiBjb25maWcudG9vbHM/Lm1hcCgodG9vbCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50b29sLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgc2V0IHRyYWNpbmcgaGVyZSB0byBtYWtlIHN1cmUgdGhhdCB3ZSBkb24ndCB0cnkgdG8gb3ZlcnJpZGUgaXQgb24gZXZlcnlcbiAgICAgICAgICAgIC8vIHNlc3Npb24udXBkYXRlIGFzIGl0IG1pZ2h0IGxlYWQgdG8gZXJyb3JzXG4gICAgICAgICAgICAuLi4oY29uZmlnLnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBzZXNzaW9uRGF0YTtcbiAgICB9XG4gICAgc3RhdGljIGJ1aWxkVHVybkRldGVjdGlvbkNvbmZpZyhjKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eXBlLCBjcmVhdGVSZXNwb25zZSwgY3JlYXRlX3Jlc3BvbnNlLCBlYWdlcm5lc3MsIGludGVycnVwdFJlc3BvbnNlLCBpbnRlcnJ1cHRfcmVzcG9uc2UsIHByZWZpeFBhZGRpbmdNcywgcHJlZml4X3BhZGRpbmdfbXMsIHNpbGVuY2VEdXJhdGlvbk1zLCBzaWxlbmNlX2R1cmF0aW9uX21zLCB0aHJlc2hvbGQsIC4uLnJlc3QgfSA9IGM7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBjcmVhdGVfcmVzcG9uc2U6IGNyZWF0ZVJlc3BvbnNlID8gY3JlYXRlUmVzcG9uc2UgOiBjcmVhdGVfcmVzcG9uc2UsXG4gICAgICAgICAgICBlYWdlcm5lc3MsXG4gICAgICAgICAgICBpbnRlcnJ1cHRfcmVzcG9uc2U6IGludGVycnVwdFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgPyBpbnRlcnJ1cHRSZXNwb25zZVxuICAgICAgICAgICAgICAgIDogaW50ZXJydXB0X3Jlc3BvbnNlLFxuICAgICAgICAgICAgcHJlZml4X3BhZGRpbmdfbXM6IHByZWZpeFBhZGRpbmdNcyA/IHByZWZpeFBhZGRpbmdNcyA6IHByZWZpeF9wYWRkaW5nX21zLFxuICAgICAgICAgICAgc2lsZW5jZV9kdXJhdGlvbl9tczogc2lsZW5jZUR1cmF0aW9uTXNcbiAgICAgICAgICAgICAgICA/IHNpbGVuY2VEdXJhdGlvbk1zXG4gICAgICAgICAgICAgICAgOiBzaWxlbmNlX2R1cmF0aW9uX21zLFxuICAgICAgICAgICAgdGhyZXNob2xkLFxuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVtb3ZlIHVuZGVmaW5lZCB2YWx1ZXMgZnJvbSB0aGUgY29uZmlnXG4gICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlnW2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBkZWxldGUgY29uZmlnW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoY29uZmlnKS5sZW5ndGggPiAwID8gY29uZmlnIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbnRlcm5hbCB0cmFjaW5nIGNvbmZpZy4gVGhpcyBpcyB1c2VkIHRvIHRyYWNrIHRoZSB0cmFjaW5nIGNvbmZpZyB0aGF0IGhhcyBiZWVuIHNldFxuICAgICAqIGR1cmluZyB0aGUgc2Vzc2lvbi5jcmVhdGUgZXZlbnQuXG4gICAgICovXG4gICAgc2V0IF90cmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IHRyYWNpbmdDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRyYWNpbmcgY29uZmlnIGZvciB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIHNlbmQgdGhlIHRyYWNpbmcgY29uZmlnIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhY2luZ0NvbmZpZyAtIFRoZSB0cmFjaW5nIGNvbmZpZyB0byBzZXQuIFdlIGRvbid0IHN1cHBvcnQgJ2F1dG8nIGhlcmUgYXMgdGhlIFNESyB3aWxsIGFsd2F5cyBjb25maWd1cmUgYSBXb3JrZmxvdyBOYW1lIHVubGVzcyBpdCBleGlzdHNcbiAgICAgKi9cbiAgICBfdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHRyZWF0aW5nIGl0IGFzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb24gdHJhY2luZyBpbiBhdXRvIG1vZGVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2YgdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgYWxyZWFkeSBzZXQsIHdlIGNhbid0IGNoYW5nZSBpdFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNpbmcgY29uZmlnIGlzIGFscmVhZHkgc2V0LCBza2lwcGluZyBzZXR0aW5nIGl0IGFnYWluLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNhYmxpbmcgdHJhY2luZyBmb3IgdGhpcyBzZXNzaW9uLiBJdCBjYW5ub3QgYmUgdHVybmVkIG9uIGZvciB0aGlzIHNlc3Npb24gZnJvbSB0aGlzIHBvaW50IG9uLicpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGN1cnJlbnRseSBub3Qgc2V0IHNvIHdlIGNhbiBzZXQgaXQgdG8gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lmdyb3VwX2lkIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdNaXNtYXRjaCBpbiB0cmFjaW5nIGNvbmZpZy4gSWdub3JpbmcgdGhlIG5ldyB0cmFjaW5nIGNvbmZpZy4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uIEN1cnJlbnQgdHJhY2luZyBjb25maWc6ICVzLCBuZXcgdHJhY2luZyBjb25maWc6ICVzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4jdHJhY2luZ0NvbmZpZyksIEpTT04uc3RyaW5naWZ5KHRyYWNpbmdDb25maWcpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc2Vzc2lvbiBjb25maWcuIFRoaXMgd2lsbCBtZXJnZSBpdCB3aXRoIHRoZSBjdXJyZW50IHNlc3Npb24gY29uZmlnIHdpdGggdGhlIGRlZmF1bHRcbiAgICAgKiB2YWx1ZXMgYW5kIHNlbmQgaXQgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIHVwZGF0ZVNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gdGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbkRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBvdXRwdXQgb2YgYSBmdW5jdGlvbiBjYWxsIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbENhbGwgLSBUaGUgdG9vbCBjYWxsIHRvIHNlbmQgdGhlIG91dHB1dCBmb3IuXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHN0YXJ0UmVzcG9uc2UgLSBXaGV0aGVyIHRvIHN0YXJ0IGEgbmV3IHJlc3BvbnNlIGFmdGVyIHNlbmRpbmcgdGhlIG91dHB1dC5cbiAgICAgKi9cbiAgICBzZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHN0YXJ0UmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkOiB0b29sQ2FsbC5wcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHRvb2xDYWxsLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHRvb2wgY2FsbCBpdGVtJywgZXJyb3IsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gSWYgYHsgY29tbWl0OiB0cnVlIH1gIGlzIHBhc3NlZCwgdGhlIGF1ZGlvIGJ1ZmZlclxuICAgICAqIHdpbGwgYmUgY29tbWl0dGVkIGFuZCB0aGUgbW9kZWwgd2lsbCBzdGFydCBwcm9jZXNzaW5nIGl0LiBUaGlzIGlzIG5lY2Vzc2FyeSBpZiB5b3UgaGF2ZVxuICAgICAqIGRpc2FibGVkIHR1cm4gZGV0ZWN0aW9uIC8gdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCB7IGNvbW1pdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcsXG4gICAgICAgICAgICBhdWRpbzogYXJyYXlCdWZmZXJUb0Jhc2U2NChhdWRpbyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWl0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi4gVGhpcyB3aWxsIGNyZWF0ZSBhIGRpZmYgYmV0d2VlbiB0aGUgb2xkIGFuZCBuZXcgaGlzdG9yeVxuICAgICAqIGFuZCBzZW5kIHRoZSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBSZWFsdGltZSBBUEkgdG8gdXBkYXRlIHRoZSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHJlc2V0SGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcmVtb3ZhbHMsIGFkZGl0aW9ucywgdXBkYXRlcyB9ID0gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KTtcbiAgICAgICAgY29uc3QgcmVtb3ZhbElkcyA9IG5ldyBTZXQocmVtb3ZhbHMubWFwKChpdGVtKSA9PiBpdGVtLml0ZW1JZCkpO1xuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGFuIHVwZGF0ZSBldmVudCBmb3IgaXRlbXMgc28gd2Ugd2lsbCByZW1vdmUgYW5kIHJlLWFkZCB3aGF0J3MgdGhlcmVcbiAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuICAgICAgICAgICAgcmVtb3ZhbElkcy5hZGQodXBkYXRlLml0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92YWxJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbUlkIG9mIHJlbW92YWxJZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkaXRpb25zQW5kVXBkYXRlcyA9IFsuLi5hZGRpdGlvbnMsIC4uLnVwZGF0ZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGFkZGl0aW9uIG9mIGFkZGl0aW9uc0FuZFVwZGF0ZXMpIHtcbiAgICAgICAgICAgIGlmIChhZGRpdGlvbi50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogYWRkaXRpb24ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYWRkaXRpb24uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGFkZGl0aW9uLml0ZW1JZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbi5yb2xlICE9PSAnc3lzdGVtJyAmJiBhZGRpdGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVudHJ5LnN0YXR1cyA9IGFkZGl0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbUVudHJ5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Z1bmN0aW9uIGNhbGxzIGNhbm5vdCBiZSBtYW51YWxseSBhZGRlZCBvciB1cGRhdGVkIGF0IHRoZSBtb21lbnQuIElnbm9yaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVCYXNlLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgSEVBREVSUyB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViUlRDLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXQgY2FuXG4gKiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqXG4gKiBVbmxlc3MgeW91IHNwZWNpZnkgYSBgbWVkaWFTdHJlYW1gIG9yIGBhdWRpb0VsZW1lbnRgIG9wdGlvbiwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGUgbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlJUQyBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgb3B0aW9ucztcbiAgICAjdXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI211dGVkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUlRDUGVlckNvbm5lY3Rpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy4jdXJsID0gb3B0aW9ucy5iYXNlVXJsID8/IGBodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lYDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluY2x1ZGluZyB0aGUgcGVlciBjb25uZWN0aW9uIGFuZCBkYXRhXG4gICAgICogY2hhbm5lbC5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIGVzdGFibGlzaCB0aGUgY29ubmVjdGlvbiB0byB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSVxuICAgICAqIHZpYSBXZWJSVEMuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gICAgICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGluZycpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZWFsdGltZSBjb25uZWN0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIFBsZWFzZSBhd2FpdCBvcmlnaW5hbCBwcm9taXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gb3B0aW9ucy51cmwgPz8gdGhpcy4jdXJsO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlzQ2xpZW50S2V5ID0gdHlwZW9mIGFwaUtleSA9PT0gJ3N0cmluZycgJiYgYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpO1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJiAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgJiYgIWlzQ2xpZW50S2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGluc2VjdXJlIEFQSSBrZXkuIFBsZWFzZSB1c2UgYSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbnN0ZWFkIG9yIHNldCB0aGUgdXNlSW5zZWN1cmVBcGlLZXkgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFzeW5jLXByb21pc2UtZXhlY3V0b3JcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvblVybCA9IG5ldyBVUkwoYmFzZVVybCk7XG4gICAgICAgICAgICAgICAgbGV0IHBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUNoYW5uZWwgPSBwZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgnb2FpLWV2ZW50cycpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZGluZyB0aGUgc2Vzc2lvbiBjb25maWcgYWdhaW4gaGVyZSBvbmNlIHRoZSBjaGFubmVsIGlzIGNvbm5lY3RlZCB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgc2Vzc2lvbiBjb25maWcgaXMgc2VudCB0byB0aGUgc2VydmVyIGJlZm9yZSB0aGUgZmlyc3QgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyBpdCBvbiBjb25uZWN0aW9uIHNob3VsZCB3b3JrIGJ1dCB0aGUgY29uZmlnIGlzIG5vdCBiZWluZyB2YWxpZGF0ZWQgb24gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcnZlci4gVGhpcyB0cmlnZ2VycyBhIHZhbGlkYXRpb24gZXJyb3IgaWYgdGhlIGNvbmZpZyBpcyBub3QgdmFsaWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgYXVkaW8gcGxheWJhY2tcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXVkaW9FbGVtZW50ID8/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBldmVudC5zdHJlYW1zWzBdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gZ2V0IG1pY3JvcGhvbmUgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5vcHRpb25zLm1lZGlhU3RyZWFtID8/XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgcGVlckNvbm5lY3Rpb24gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgICAgIGlmICghb2ZmZXIuc2RwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBvZmZlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLl9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnKSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdzZHAnLCBvZmZlci5zZHApO1xuICAgICAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdzZXNzaW9uJywgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkNvbmZpZykpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNkcFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY29ubmVjdGlvblVybCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBIRUFERVJTWydYLU9wZW5BSS1BZ2VudHMtU0RLJ10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW5zd2VyJyxcbiAgICAgICAgICAgICAgICAgICAgc2RwOiBhd2FpdCBzZHBSZXNwb25zZS50ZXh0KCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCB8fFxuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBkYXRhIGNoYW5uZWwgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgb3IgdW5tdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI211dGVkID0gbXV0ZWQ7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VuZGVyLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRlci50cmFjay5lbmFibGVkID0gIW11dGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkgYW5kIGRpc2Nvbm5lY3RzIHRoZSB1bmRlcmx5aW5nIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHNlbmRlci50cmFjaz8uc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgIT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIGN1cnJlbnQgcmVzcG9uc2UgaWYgb25lIGlzIG9uZ29pbmcgYW5kIGNsZWFyIHRoZSBhdWRpbyBidWZmZXIgc28gdGhhdCB0aGUgYWdlbnRcbiAgICAgKiBzdG9wcyB0YWxraW5nLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2ViUnRjLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuZXhwb3J0IGNvbnN0IFdlYlNvY2tldCA9IGdsb2JhbFRoaXMuV2ViU29ja2V0O1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGNvbnN0IHVzZVdlYlNvY2tldFByb3RvY29scyA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgdXNlV2ViU29ja2V0UHJvdG9jb2xzLCBXZWJTb2NrZXQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvX3NoaW1zJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyLCBIRUFERVJTLCBXRUJTT0NLRVRfTUVUQSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlNvY2tldHMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdFxuICogY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgICNhcGlLZXk7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNjdXJyZW50SXRlbUlkO1xuICAgICNjdXJyZW50QXVkaW9Db250ZW50SW5kZXg7XG4gICAgLyoqXG4gICAgICogVGltZXN0YW1wIG1haW50YWluZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllciB0byBhaWQgd2l0aCB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIGVsYXBzZWQgdGltZVxuICAgICAqIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkIHRvIGNvbXB1dGUgdGhlIHJpZ2h0IGludGVycnVwdGlvbiB0aW1lLlxuICAgICAqXG4gICAgICogTW9zdGx5IGludGVybmFsIGJ1dCBtaWdodCBiZSB1c2VkIGJ5IGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllcnMgZm9yIHRoZWlyIGludGVycnVwdGlvblxuICAgICAqIGNhbGN1bGF0aW9uLlxuICAgICAqL1xuICAgIF9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgIF9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWx3YXlzIHJldHVybnMgYG51bGxgIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IGhhbmRsZSBtdXRpbmcuIEluc3RlYWQsXG4gICAgICogdGhpcyBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgY2xpZW50IGJ5IG5vdCB0cmlnZ2VyaW5nIHRoZSBgc2VuZEF1ZGlvYCBtZXRob2QuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgaXRlbSBJRCBvZiB0aGUgb25nb2luZyByZXNwb25zZS5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEl0ZW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRJdGVtSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIHRoZSBgYXVkaW9gIGV2ZW50IHRoYXQgYSBjbGllbnQgbWlnaHQgbGlzdGVuIHRvIHRvIHJlY2VpdmUgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKiBQcm90ZWN0ZWQgZm9yIHlvdSB0byBiZSBhYmxlIHRvIG92ZXJyaWRlIGFuZCBkaXNhYmxlIGVtaXR0aW5nIHRoaXMgZXZlbnQgaW4gY2FzZSB5b3VyIGV4dGVuZGVkXG4gICAgICogdHJhbnNwb3J0IGxheWVyIGhhbmRsZXMgYXVkaW8gaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpb0V2ZW50IC0gVGhlIGF1ZGlvIGV2ZW50IHRvIGVtaXQuXG4gICAgICovXG4gICAgX29uQXVkaW8oYXVkaW9FdmVudCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgYXVkaW9FdmVudCk7XG4gICAgfVxuICAgICNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy4jYXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBUEkga2V5IGlzIG5vdCBzZXQuIFBsZWFzZSBjYWxsIGBjb25uZWN0KClgIHdpdGggYW4gQVBJIGtleSBmaXJzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJlxuICAgICAgICAgICAgIXRoaXMuI2FwaUtleS5zdGFydHNXaXRoKCdla18nKSAmJlxuICAgICAgICAgICAgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGVwaGVtZXJhbCBjbGllbnQga2V5LiBJZiB5b3UgaGF2ZSB0byB1c2UgYSByZWd1bGFyIEFQSSBrZXksIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBicm93c2VycyBhbmQgd29ya2VyZCBzaG91bGQgdXNlIHRoZSBwcm90b2NvbHMgYXJndW1lbnQsIG5vZGUgc2hvdWxkIHVzZSB0aGUgaGVhZGVycyBhcmd1bWVudFxuICAgICAgICBjb25zdCB3ZWJzb2NrZXRBcmd1bWVudHMgPSB1c2VXZWJTb2NrZXRQcm90b2NvbHNcbiAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgLy8gQXV0aFxuICAgICAgICAgICAgICAgICdvcGVuYWktaW5zZWN1cmUtYXBpLWtleS4nICsgdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgICAgIC8vIEJldGEgcHJvdG9jb2wsIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgJ29wZW5haS1iZXRhLnJlYWx0aW1lLXYxJyxcbiAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIGhlYWRlclxuICAgICAgICAgICAgICAgIFdFQlNPQ0tFVF9NRVRBLFxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4jYXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICdPcGVuQUktQmV0YSc6ICdyZWFsdGltZT12MScsXG4gICAgICAgICAgICAgICAgICAgIC4uLkhFQURFUlMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCh0aGlzLiN1cmwsIHdlYnNvY2tldEFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvLmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHBhcnNlZC5jb250ZW50X2luZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSBwYXJzZWQuaXRlbV9pZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBzdGFydCB0aW1lc3RhbXAgaXMgbm90IHNldCwgd2Ugc2V0IGl0IHRvIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGVsYXBzZWQgdGltZSBmb3IgaW50ZXJydXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmYgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHBhcnNlZC5kZWx0YSk7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhdWRpbyBsZW5ndGggaW4gbWlsbGlzZWNvbmRzIGFzc3VtaW5nIDI0a0h6IHBjbTE2bGVcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0Zvcm1hdCA9IHRoaXMuX3Jhd1Nlc3Npb25Db25maWc/Lm91dHB1dF9hdWRpb19mb3JtYXQgPz8gJ3BjbTE2JztcbiAgICAgICAgICAgICAgICBpZiAoYXVkaW9Gb3JtYXQuc3RhcnRzV2l0aCgnZzcxMV8nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyA4a0h6ICogMSBieXRlIHBlciBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyA4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gMjRrSHogKiAyIGJ5dGVzIHBlciBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGJ1ZmYsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuX29uQXVkaW8oYXVkaW9FdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQgPSB0aGlzLl9yYXdTZXNzaW9uQ29uZmlnPy50dXJuX2RldGVjdGlvbj8uaW50ZXJydXB0X3Jlc3BvbnNlID8/IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCFhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAvLyBUcnlpbmcgdG8gdHVybiBvbiB0cmFjaW5nIGFmdGVyIHRoZSBzZXNzaW9uIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHNlc3Npb25Db25maWcudHJhY2luZyA/PyAnYXV0bycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB1cmwgPSBvcHRpb25zLnVybCA/P1xuICAgICAgICAgICAgdGhpcy4jdXJsID8/XG4gICAgICAgICAgICBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/bW9kZWw9JHt0aGlzLmN1cnJlbnRNb2RlbH1gO1xuICAgICAgICB0aGlzLiN1cmwgPSB1cmw7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcoc2Vzc2lvbkNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgYWxzbyByZXNldCBhbnkgaW50ZXJuYWwgY29ubmVjdGlvbiB0cmFja2luZyB1c2VkIGZvciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldD8uY2xvc2UoKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2lsbCB0aHJvdyBhbiBlcnJvciBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBtdXRlKF9tdXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011dGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQuIFlvdSBoYXZlIHRvIG11dGUgdGhlIGF1ZGlvIGlucHV0IHlvdXJzZWxmLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgZm9yIHlvdXIgY2xpZW50IHRvIHNlbmQgYXVkaW8gdG8gdGhlXG4gICAgICogbW9kZWwgdG8gcmVzcG9uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICBzdXBlci5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBjYW5jZWwgcmVzcG9uc2UgZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIHRvIGNhbmNlbCBhbiBvbmdvaW5nXG4gICAgICogIHJlc3BvbnNlIHRoYXQgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBnZW5lcmF0aW5nLlxuICAgICAqL1xuICAgIF9jYW5jZWxSZXNwb25zZSgpIHtcbiAgICAgICAgLy8gY2FuY2VsIHRoZSBvbmdvaW5nIHJlc3BvbnNlXG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRG8gTk9UIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIENhbGwgYGludGVycnVwdCgpYCBpbnN0ZWFkIGZvciBwcm9wZXIgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZW5kIHRoZSByaWdodCBldmVudHMgdG8gdGhlIEFQSSB0byBpbmZvcm0gdGhlIG1vZGVsIHRoYXQgdGhlIHVzZXIgaGFzXG4gICAgICogaW50ZXJydXB0ZWQgdGhlIHJlc3BvbnNlLiBJdCBtaWdodCBiZSBvdmVycmlkZGVuL2V4dGVuZGVkIGJ5IGFuIGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllci4gU2VlXG4gICAgICogdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYCBmb3IgYW4gZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGFwc2VkVGltZSAtIFRoZSBlbGFwc2VkIHRpbWUgc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQuXG4gICAgICovXG4gICAgX2ludGVycnVwdChlbGFwc2VkVGltZSwgY2FuY2VsT25nb2luZ1Jlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPCAwIHx8IGVsYXBzZWRUaW1lID4gdGhpcy5fYXVkaW9MZW5ndGhNcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IGVtaXQgdGhpcyBldmVudCBzbyB0aGUgY2xpZW50IGNhbiBzdG9wIHBsYXlpbmcgYXVkaW9cbiAgICAgICAgaWYgKGNhbmNlbE9uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsUmVzcG9uc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScsXG4gICAgICAgICAgICBpdGVtX2lkOiB0aGlzLiNjdXJyZW50SXRlbUlkLFxuICAgICAgICAgICAgY29udGVudF9pbmRleDogdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4LFxuICAgICAgICAgICAgYXVkaW9fZW5kX21zOiBlbGFwc2VkVGltZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgb25nb2luZyByZXNwb25zZS4gVGhpcyBtZXRob2QgaXMgdHJpZ2dlcmVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGNsaWVudCB3aGVuXG4gICAgICogdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpIGlzIGVuYWJsZWQgKGRlZmF1bHQpIGFzIHdlbGwgYXMgd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIGdvdFxuICAgICAqIHRyaWdnZXJlZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYWxzbyBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IGlmIHlvdSB3YW50IHRvIGludGVycnVwdCB0aGUgY29udmVyc2F0aW9uIGZvciBleGFtcGxlXG4gICAgICogYmFzZWQgb24gYW4gZXZlbnQgaW4gdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoY2FuY2VsT25nb2luZ1Jlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuI2N1cnJlbnRJdGVtSWQgfHwgdHlwZW9mIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVycnVwdChlbGFwc2VkVGltZSwgY2FuY2VsT25nb2luZ1Jlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRIYW5kb2ZmLCBnZXRUcmFuc2Zlck1lc3NhZ2UsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFJ1bkNvbnRleHQsIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgaXNab2RPYmplY3QsIHRvU21hcnRTdHJpbmcgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbmltcG9ydCB7IGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsLCBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncywgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlJUQyB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmltcG9ydCB7IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSwgaGFzV2ViUlRDU3VwcG9ydCwgdXBkYXRlUmVhbHRpbWVIaXN0b3J5LCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vKipcbiAqIEEgYFJlYWx0aW1lU2Vzc2lvbmAgaXMgdGhlIGNvcm5lciBwaWVjZSBvZiBidWlsZGluZyBWb2ljZSBBZ2VudHMuIEl0J3MgdGhlIGVxdWl2YWxlbnQgb2YgYVxuICogUnVubmVyIGluIHRleHQtYmFzZWQgYWdlbnRzIGV4Y2VwdCB0aGF0IGl0IGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBtdWx0aXBsZSB0dXJucyBieSBtYWludGFpbmluZyBhXG4gKiBjb25uZWN0aW9uIHdpdGggdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIFRoZSBzZXNzaW9uIGhhbmRsZXMgbWFuYWdpbmcgdGhlIGxvY2FsIGhpc3RvcnkgY29weSwgZXhlY3V0ZXMgdG9vbHMsIHJ1bnMgb3V0cHV0IGd1YXJkcmFpbHMsIGFuZFxuICogZmFjaWxpdGllcyBoYW5kb2Zmcy5cbiAqXG4gKiBUaGUgYWN0dWFsIGF1ZGlvIGhhbmRsaW5nIGFuZCBnZW5lcmF0aW9uIG9mIG1vZGVsIHJlc3BvbnNlcyBpcyBoYW5kbGVkIGJ5IHRoZSB1bmRlcmx5aW5nXG4gKiB0cmFuc3BvcnQgbGF5ZXIuIEJ5IGRlZmF1bHQgaWYgeW91IGFyZSB1c2luZyBhIGJyb3dzZXIgd2l0aCBXZWJSVEMgc3VwcG9ydCwgdGhlIHNlc3Npb24gd2lsbFxuICogYXV0b21hdGljYWxseSB1c2UgdGhlIFdlYlJUQyB2ZXJzaW9uIG9mIHRoZSBPcGVuQUkgUmVhbHRpbWUgQVBJLiBPbiB0aGUgc2VydmVyIG9yIGlmIHlvdSBwYXNzXG4gKiBgd2Vic29ja2V0YCBhcyB0aGUgdHJhbnNwb3J0IGxheWVyLCB0aGUgc2Vzc2lvbiB3aWxsIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gdXNpbmcgV2ViU29ja2V0cy5cbiAqXG4gKiBJbiB0aGUgY2FzZSBvZiBXZWJSVEMsIGluIHRoZSBicm93c2VyLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGwgYWxzbyBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGVcbiAqIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICpcbiAqIFlvdSBjYW4gYWxzbyBjcmVhdGUgYSB0cmFuc3BvcnQgbGF5ZXIgaW5zdGFuY2UgeW91cnNlbGYgYW5kIHBhc3MgaXQgaW4gdG8gaGF2ZSBtb3JlIGNvbnRyb2wgb3ZlclxuICogdGhlIGNvbmZpZ3VyYXRpb24gb3IgZXZlbiBleHRlbmQgdGhlIGV4aXN0aW5nIG9uZXMuIENoZWNrIG91dCB0aGUgYFR3aWxpb1JlYWx0aW1lVHJhbnNwb3J0TGF5ZXJgXG4gKiBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdG8gY3JlYXRlIGEgY3VzdG9tIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IGFnZW50ID0gbmV3IFJlYWx0aW1lQWdlbnQoe1xuICogICBuYW1lOiAnbXktYWdlbnQnLFxuICogICBpbnN0cnVjdGlvbnM6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBjYW4gYW5zd2VyIHF1ZXN0aW9ucyBhbmQgaGVscCB3aXRoIHRhc2tzLicsXG4gKiB9KVxuICpcbiAqIGNvbnN0IHNlc3Npb24gPSBuZXcgUmVhbHRpbWVTZXNzaW9uKGFnZW50KTtcbiAqIHNlc3Npb24uY29ubmVjdCh7XG4gKiAgIGFwaUtleTogJ3lvdXItYXBpLWtleScsXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUmVhbHRpbWVTZXNzaW9uIGV4dGVuZHMgUnVudGltZUV2ZW50RW1pdHRlciB7XG4gICAgaW5pdGlhbEFnZW50O1xuICAgIG9wdGlvbnM7XG4gICAgI3RyYW5zcG9ydDtcbiAgICAjY3VycmVudEFnZW50O1xuICAgICNjdXJyZW50VG9vbHMgPSBbXTtcbiAgICAjY29udGV4dDtcbiAgICAjb3V0cHV0R3VhcmRyYWlscyA9IFtdO1xuICAgICNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncztcbiAgICAjdHJhbnNjcmliZWRUZXh0RGVsdGFzID0ge307XG4gICAgI2hpc3RvcnkgPSBbXTtcbiAgICAjc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YTtcbiAgICAjaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsQWdlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCh0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnICYmIGhhc1dlYlJUQ1N1cHBvcnQoKSkgfHxcbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2VicnRjJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViUlRDKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJzb2NrZXQnIHx8XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy4jY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmNvbnRleHQgPz8ge30pLFxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy4jaGlzdG9yeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbHMgPSAob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA9IGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Mob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA/PyB7fSk7XG4gICAgICAgIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEgPSBvcHRpb25zLmhpc3RvcnlTdG9yZUF1ZGlvID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNwb3J0IGxheWVyIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHRyYW5zcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgaW4gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdXNhZ2Ugb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHVzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dC51c2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuIE1pZ2h0IGJlIGBudWxsYCBpZiB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3RcbiAgICAgKiBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQubXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jaGlzdG9yeTtcbiAgICB9XG4gICAgYXN5bmMgI3NldEN1cnJlbnRBZ2VudChhZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBhZ2VudDtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLiNjdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKGdldEhhbmRvZmYpO1xuICAgICAgICBjb25zdCBoYW5kb2ZmVG9vbHMgPSBoYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IGhhbmRvZmYuZ2V0SGFuZG9mZkFzRnVuY3Rpb25Ub29sKCkpO1xuICAgICAgICB0aGlzLiNjdXJyZW50VG9vbHMgPSBbXG4gICAgICAgICAgICAuLi4oYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCkpLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSxcbiAgICAgICAgICAgIC4uLmhhbmRvZmZUb29scyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQodGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgIC50cmFjaW5nRGlzYWJsZWRcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogJ2F1dG8nO1xuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJiB0cmFjaW5nQ29uZmlnICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcuZ3JvdXBfaWQgPSB0aGlzLm9wdGlvbnMuZ3JvdXBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcubWV0YWRhdGEgPSB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCB8fCB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0luIG9yZGVyIHRvIHNldCB0cmFjZU1ldGFkYXRhIG9yIGEgZ3JvdXBJZCB5b3UgbmVlZCB0byBzcGVjaWZ5IGEgd29ya2Zsb3dOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB2b2ljZTogdGhpcy4jY3VycmVudEFnZW50LnZvaWNlLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLiNjdXJyZW50VG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgLi4uYWRkaXRpb25hbENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlQWdlbnQobmV3QWdlbnQpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICByZXR1cm4gbmV3QWdlbnQ7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBoYW5kb2ZmKSB7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gKGF3YWl0IGhhbmRvZmYub25JbnZva2VIYW5kb2ZmKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cykpO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIC8vIHVwZGF0ZSBzZXNzaW9uIHdpdGggbmV3IGFnZW50XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHRydWUpO1xuICAgICAgICByZXR1cm4gbmV3QWdlbnQ7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCB0b29sKSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiNoaXN0b3J5KSk7IC8vIGRlZXAgY29weSBvZiB0aGUgaGlzdG9yeVxuICAgICAgICBsZXQgcGFyc2VkQXJncyA9IHRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2wucGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRvb2wucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gdG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IGF3YWl0IHRvb2wubmVlZHNBcHByb3ZhbCh0aGlzLiNjb250ZXh0LCBwYXJzZWRBcmdzLCB0b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAobmVlZHNBcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSB0aGlzLmNvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIHJlc3VsdCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwgcmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXBwcm92YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbEl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCB0aGlzLiNjdXJyZW50QWdlbnQpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiNoaXN0b3J5KSk7IC8vIGRlZXAgY29weSBvZiB0aGUgaGlzdG9yeVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b29sLmludm9rZSh0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIHRydWUpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uQ2FsbCh0b29sQ2FsbCkge1xuICAgICAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcCh0aGlzLiNjdXJyZW50QWdlbnQuaGFuZG9mZnNcbiAgICAgICAgICAgIC5tYXAoZ2V0SGFuZG9mZilcbiAgICAgICAgICAgIC5tYXAoKGhhbmRvZmYpID0+IFtoYW5kb2ZmLnRvb2xOYW1lLCBoYW5kb2ZmXSkpO1xuICAgICAgICBjb25zdCBmdW5jdGlvblRvb2xNYXAgPSBuZXcgTWFwKChhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKSkubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgICAgICBjb25zdCBwb3NzaWJsZUhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgaWYgKHBvc3NpYmxlSGFuZG9mZikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgcG9zc2libGVIYW5kb2ZmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uVG9vbE1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgICAgICBpZiAoZnVuY3Rpb25Ub29sICYmIGZ1bmN0aW9uVG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgZnVuY3Rpb25Ub29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sQ2FsbC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhvdXRwdXQsIHJlc3BvbnNlSWQsIGl0ZW1JZCkge1xuICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuI2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgIGFnZW50T3V0cHV0OiBvdXRwdXQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLiNjb250ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5tYXAoKGd1YXJkcmFpbCkgPT4gZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKSkpO1xuICAgICAgICBjb25zdCBmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkID0gcmVzdWx0cy5maW5kKChyZXN1bHQpID0+IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICBpZiAoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgaWYgb25lIGd1YXJkcmFpbCBhbHJlYWR5IHRyaXBzIGFuZCB3ZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhbm90aGVyXG4gICAgICAgICAgICAvLyBndWFyZHJhaWwgcnVuLCB3ZSBkb24ndCB0cmlwIGFnYWluXG4gICAgICAgICAgICBpZiAodGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWxbcmVzcG9uc2VJZF0gPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYE91dHB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQub3V0cHV0Lm91dHB1dEluZm8pfWAsIGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdndWFyZHJhaWxfdHJpcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgZXJyb3IsIHtcbiAgICAgICAgICAgICAgICBpdGVtSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCk7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja1RleHQgPSBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoZmVlZGJhY2tUZXh0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignKicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfZXZlbnQnLCBldmVudCk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgY29tcGxldGVkIHVzZXIgdHJhbnNjcmlwdGlvbiBldmVudHNcbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkRXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBjb21wbGV0ZWRFdmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW8nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX2RvbmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBldmVudC5yZXNwb25zZS5vdXRwdXRbZXZlbnQucmVzcG9uc2Uub3V0cHV0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGV4dE91dHB1dCA9IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSA/PyAnJztcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0/LmlkID8/ICcnO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyh0ZXh0T3V0cHV0LCBldmVudC5yZXNwb25zZS5pZCwgaXRlbUlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fZG9uZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fc3RvcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgbGV0IGxhc3RJdGVtSWQ7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50Lml0ZW1JZDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUlkID0gZXZlbnQucmVzcG9uc2VJZDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW1JZCAhPT0gaXRlbUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtSWQgPSBpdGVtSWQ7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IGN1cnJlbnRUZXh0ICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPSBuZXdUZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UnVuSW5kZXggPSBNYXRoLmZsb29yKG5ld1RleHQubGVuZ3RoIC8gdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UnVuSW5kZXggPiBsYXN0UnVuSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gbmV3UnVuSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGNhbmNlbCBleGlzdGluZyBydW5zIGJlY2F1c2Ugd2Ugd2FudCB0aGUgZmlyc3Qgb25lIHRvIGZhaWwgdG8gZmFpbFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNwb3J0IGxheWVyIHNob3VsZCB1cG9uIGZhaWx1cmUgaGFuZGxlIHRoZSBpbnRlcnJ1cHRpb24gYW5kIHN0b3AgdGhlIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZ2VuZXJhdGluZyBmdXJ0aGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMobmV3VGV4dCwgcmVzcG9uc2VJZCwgaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV91cGRhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSAhdGhpcy4jaGlzdG9yeS5zb21lKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSXRlbSA9IHRoaXMuI2hpc3RvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV9hZGRlZCcsIGFkZGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX2RlbGV0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHRoaXMuI2hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLml0ZW1JZCAhPT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdmdW5jdGlvbl9jYWxsJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uQ2FsbChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGZ1bmN0aW9uIGNhbGwnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3VzYWdlX3VwZGF0ZScsICh1c2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29udGV4dC51c2FnZS5hZGQodXNhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19pbnRlcnJ1cHRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICBpbml0aWFsU2Vzc2lvbkNvbmZpZzogYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZyh0aGlzLm9wdGlvbnMuY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2hpc3RvcnkgPSBbXTtcbiAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IHRvIHNldC5cbiAgICAgKi9cbiAgICB1cGRhdGVIaXN0b3J5KG5ld0hpc3RvcnkpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRIaXN0b3J5O1xuICAgICAgICBpZiAodHlwZW9mIG5ld0hpc3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeSh0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN0cmFuc3BvcnQucmVzZXRIaXN0b3J5KHRoaXMuI2hpc3RvcnksIHVwZGF0ZWRIaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvdGhlckV2ZW50RGF0YSAtIEFkZGl0aW9uYWwgZXZlbnQgZGF0YSB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQubXV0ZShtdXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhdWRpbyB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb21taXQgLSBXaGV0aGVyIHRvIGZpbmlzaCB0aGUgdHVybiB3aXRoIHRoaXMgYXVkaW8uXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgc2Vzc2lvbiBhcnRpZmljaWFsbHkgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gYnVpbGQgYSBcInN0b3AgdGFsa2luZ1wiXG4gICAgICogYnV0dG9uLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmludGVycnVwdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c0FwcHJvdmUgLSBXaGV0aGVyIHRvIGFsd2F5cyBhcHByb3ZlIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7YXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzUmVqZWN0IC0gV2hldGhlciB0byBhbHdheXMgcmVqZWN0IHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNpbXVsYXRlIGEgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudCB0byBsZXQgdGhlIGFnZW50IGtub3dcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke2FwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVTZXNzaW9uLm1qcy5tYXAiLCJpbXBvcnQgKiBhcyB1dGlsSW1wb3J0IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVBZ2VudCB9IGZyb20gXCIuL3JlYWx0aW1lQWdlbnQubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBiYXNlNjRUb0FycmF5QnVmZmVyOiB1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIsXG4gICAgYXJyYXlCdWZmZXJUb0Jhc2U2NDogdXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0LFxuICAgIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZTogdXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsXG59O1xuZXhwb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgdG9vbCwgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6WyJNRVRBREFUQSIsImJhc2U2NFRvQXJyYXlCdWZmZXIiLCJiYXNlNjQiLCJiaW5hcnlTdHJpbmciLCJsZW4iLCJieXRlcyIsImkiLCJhcnJheUJ1ZmZlclRvQmFzZTY0IiwiYXJyYXlCdWZmZXIiLCJnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiLCJpdGVtIiwibGFzdENvbnRlbnRJdGVtIiwiZGlmZlJlYWx0aW1lSGlzdG9yeSIsIm9sZEhpc3RvcnkiLCJuZXdIaXN0b3J5IiwicmVtb3ZhbHMiLCJuZXdJdGVtIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsImVudHJ5IiwidXBkYXRlUmVhbHRpbWVIaXN0b3J5IiwiaGlzdG9yeSIsImV2ZW50Iiwic2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsInVwZGF0ZWRDb250ZW50IiwibmV3RXZlbnQiLCJleGlzdGluZ0luZGV4IiwiaWR4IiwicHJldkluZGV4IiwiSEVBREVSUyIsIldFQlNPQ0tFVF9NRVRBIiwic2FmZUV4ZWN1dGUiLCJmbiIsImVycm9yIiwibWFrZVBhcnNlYWJsZVRleHRGb3JtYXQiLCJyZXNwb25zZV9mb3JtYXQiLCJwYXJzZXIiLCJvYmoiLCJpZ25vcmVPdmVycmlkZSIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJvcHRpb25zIiwiem9kRGVmIiwiem9kU2NoZW1hIiwiaXNFbXB0eU9iaiIsIl9rIiwiZ2V0UmVmcyIsIl9vcHRpb25zIiwiY3VycmVudFBhdGgiLCJuYW1lIiwiZGVmIiwiYWRkRXJyb3JNZXNzYWdlIiwicmVzIiwia2V5IiwiZXJyb3JNZXNzYWdlIiwicmVmcyIsInNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMiLCJ2YWx1ZSIsInV0aWwiLCJfIiwiYXNzZXJ0SXMiLCJfYXJnIiwiYXNzZXJ0TmV2ZXIiLCJfeCIsIml0ZW1zIiwidmFsaWRLZXlzIiwiayIsImZpbHRlcmVkIiwiZSIsIm9iamVjdCIsImtleXMiLCJhcnIiLCJjaGVja2VyIiwidmFsIiwiam9pblZhbHVlcyIsImFycmF5Iiwic2VwYXJhdG9yIiwib2JqZWN0VXRpbCIsImZpcnN0Iiwic2Vjb25kIiwidXRpbCQxIiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJzdWIiLCJzdWJzIiwiYWN0dWFsUHJvdG8iLCJfbWFwcGVyIiwibWFwcGVyIiwiaXNzdWUiLCJmaWVsZEVycm9ycyIsInByb2Nlc3NFcnJvciIsImN1cnIiLCJlbCIsImZvcm1FcnJvcnMiLCJlcnJvclV0aWwiLCJtZXNzYWdlIiwiWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIiwicGFyc2VBbnlEZWYiLCJwYXJzZUFycmF5RGVmIiwiX2IiLCJfYSIsInBhcnNlRGVmIiwicGFyc2VCaWdpbnREZWYiLCJjaGVjayIsInBhcnNlQm9vbGVhbkRlZiIsInBhcnNlQnJhbmRlZERlZiIsIl9kZWYiLCJwYXJzZUNhdGNoRGVmIiwicGFyc2VEYXRlRGVmIiwib3ZlcnJpZGVEYXRlU3RyYXRlZ3kiLCJzdHJhdGVneSIsImludGVnZXJEYXRlUGFyc2VyIiwicGFyc2VEZWZhdWx0RGVmIiwicGFyc2VFZmZlY3RzRGVmIiwiZm9yY2VSZXNvbHV0aW9uIiwicGFyc2VFbnVtRGVmIiwiaXNKc29uU2NoZW1hN0FsbE9mVHlwZSIsInR5cGUiLCJwYXJzZUludGVyc2VjdGlvbkRlZiIsImFsbE9mIiwieCIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1lcmdlZEFsbE9mIiwic2NoZW1hIiwibmVzdGVkU2NoZW1hIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJyZXN0IiwicGFyc2VMaXRlcmFsRGVmIiwicGFyc2VkVHlwZSIsImVtb2ppUmVnZXgiLCJ6b2RQYXR0ZXJucyIsInBhcnNlU3RyaW5nRGVmIiwicHJvY2Vzc1BhdHRlcm4iLCJlc2NhcGVOb25BbHBoYU51bWVyaWMiLCJhZGRGb3JtYXQiLCJhZGRQYXR0ZXJuIiwiYyIsInJlZ2V4IiwicHJvY2Vzc1JlZ0V4cCIsInJlZ2V4T3JGdW5jdGlvbiIsImZsYWdzIiwic291cmNlIiwicGF0dGVybiIsImlzRXNjYXBlZCIsImluQ2hhckdyb3VwIiwiaW5DaGFyUmFuZ2UiLCJyZWdleFRlc3QiLCJwYXJzZVJlY29yZERlZiIsImFjYyIsIl9jIiwia2V5VHlwZSIsIl9kIiwicGFyc2VNYXBEZWYiLCJ2YWx1ZXMiLCJwYXJzZU5hdGl2ZUVudW1EZWYiLCJhY3R1YWxWYWx1ZXMiLCJwYXJzZWRUeXBlcyIsInBhcnNlTmV2ZXJEZWYiLCJwYXJzZU51bGxEZWYiLCJwcmltaXRpdmVNYXBwaW5ncyIsInBhcnNlVW5pb25EZWYiLCJhc0FueU9mIiwidHlwZXMiLCJ1bmlxdWVUeXBlcyIsImEiLCJhbnlPZiIsInBhcnNlTnVsbGFibGVEZWYiLCJiYXNlIiwicGFyc2VOdW1iZXJEZWYiLCJkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlT2JqZWN0RGVmIiwicmVzdWx0IiwicHJvcE5hbWUiLCJwcm9wRGVmIiwicHJvcGVydHlQYXRoIiwicGFyc2VkRGVmIiwicGFyc2VPcHRpb25hbERlZiIsImlubmVyU2NoZW1hIiwicGFyc2VQaXBlbGluZURlZiIsImIiLCJwYXJzZVByb21pc2VEZWYiLCJwYXJzZVNldERlZiIsInBhcnNlVHVwbGVEZWYiLCJwYXJzZVVuZGVmaW5lZERlZiIsInBhcnNlVW5rbm93bkRlZiIsInBhcnNlUmVhZG9ubHlEZWYiLCJzZWVuSXRlbSIsIm92ZXJyaWRlUmVzdWx0Iiwic2VlblNjaGVtYSIsImdldCRyZWYiLCJqc29uU2NoZW1hIiwic2VsZWN0UGFyc2VyIiwiYWRkTWV0YSIsImdldFJlbGF0aXZlUGF0aCIsImluZGV4IiwicGF0aEEiLCJwYXRoQiIsInR5cGVOYW1lIiwiem9kVG9Kc29uU2NoZW1hIiwibWFpbiIsInRpdGxlIiwiZGVmaW5pdGlvbnMiLCJwcm9jZXNzZWREZWZpbml0aW9ucyIsIm5ld0RlZmluaXRpb25zIiwiY29tYmluZWQiLCJtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sIiwidG9vbCIsImNhbGxiYWNrIiwiX3pvZFRvSnNvblNjaGVtYSIsInpvZFRleHRGb3JtYXQiLCJ6b2RPYmplY3QiLCJwcm9wcyIsImNvbnRlbnQiLCJ6b2RSZXNwb25zZXNGdW5jdGlvbiIsImFyZ3MiLCJBZ2VudHNFcnJvciIsInN0YXRlIiwiX19wdWJsaWNGaWVsZCIsIlN5c3RlbUVycm9yIiwiTWF4VHVybnNFeGNlZWRlZEVycm9yIiwiTW9kZWxCZWhhdmlvckVycm9yIiwiVXNlckVycm9yIiwiR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IiLCJUb29sQ2FsbEVycm9yIiwiSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsIk91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwiaXNab2RPYmplY3QiLCJpbnB1dCIsImlzQWdlbnRUb29sSW5wdXQiLCJ0b0Z1bmN0aW9uVG9vbE5hbWUiLCJnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIiwiaW5wdXRUeXBlIiwiZm9ybWF0dGVkRnVuY3Rpb24iLCJjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUiLCJvdXRwdXRUeXBlIiwib3V0cHV0IiwicyIsIm0iLCJoIiwiZCIsInciLCJ5IiwibXMiLCJwYXJzZSIsImZtdExvbmciLCJmbXRTaG9ydCIsInN0ciIsIm1hdGNoIiwibiIsIm1zQWJzIiwicGx1cmFsIiwiaXNQbHVyYWwiLCJzZXR1cCIsImVudiIsImNyZWF0ZURlYnVnIiwiY29lcmNlIiwiZGlzYWJsZSIsImVuYWJsZSIsImVuYWJsZWQiLCJyZXF1aXJlJCQwIiwiZGVzdHJveSIsInNlbGVjdENvbG9yIiwibmFtZXNwYWNlIiwiaGFzaCIsInByZXZUaW1lIiwiZW5hYmxlT3ZlcnJpZGUiLCJuYW1lc3BhY2VzQ2FjaGUiLCJlbmFibGVkQ2FjaGUiLCJkZWJ1ZyIsInNlbGYiLCJmb3JtYXQiLCJmb3JtYXR0ZXIiLCJleHRlbmQiLCJ2IiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJuYW1lc3BhY2VzIiwic3BsaXQiLCJucyIsIm1hdGNoZXNUZW1wbGF0ZSIsInNlYXJjaCIsInRlbXBsYXRlIiwic2VhcmNoSW5kZXgiLCJ0ZW1wbGF0ZUluZGV4Iiwic3RhckluZGV4IiwibWF0Y2hJbmRleCIsInNraXAiLCJjb21tb24iLCJleHBvcnRzIiwiZm9ybWF0QXJncyIsInNhdmUiLCJsb2FkIiwidXNlQ29sb3JzIiwibG9jYWxzdG9yYWdlIiwid2FybmVkIiwibW9kdWxlIiwibGFzdEMiLCJyIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwidG9TbWFydFN0cmluZyIsImRlZmF1bHRUb29sRXJyb3JGdW5jdGlvbiIsImNvbnRleHQiLCJ0b29sRXJyb3JGdW5jdGlvbiIsInN0cmljdE1vZGUiLCJwYXJhbWV0ZXJzIiwiX2ludm9rZSIsInJ1bkNvbnRleHQiLCJwYXJzZWQiLCJzdHJpbmdSZXN1bHQiLCJpbnZva2UiLCJjdXJyZW50U3BhbiIsImdldEN1cnJlbnRTcGFuIiwibmVlZHNBcHByb3ZhbCIsIlpvZFBhcnNlZFR5cGUiLCJnZXRQYXJzZWRUeXBlIiwiZGF0YSIsIlpvZElzc3VlQ29kZSIsImVycm9yTWFwIiwiX2N0eCIsIm92ZXJyaWRlRXJyb3JNYXAiLCJkZWZhdWx0RXJyb3JNYXAiLCJnZXRFcnJvck1hcCIsIm1ha2VJc3N1ZSIsInBhcmFtcyIsInBhdGgiLCJlcnJvck1hcHMiLCJpc3N1ZURhdGEiLCJmdWxsUGF0aCIsImZ1bGxJc3N1ZSIsIm1hcHMiLCJtYXAiLCJhZGRJc3N1ZVRvQ29udGV4dCIsImN0eCIsIm92ZXJyaWRlTWFwIiwiUGFyc2VTdGF0dXMiLCJzdGF0dXMiLCJyZXN1bHRzIiwiYXJyYXlWYWx1ZSIsIklOVkFMSUQiLCJwYWlycyIsInN5bmNQYWlycyIsInBhaXIiLCJmaW5hbE9iamVjdCIsIkRJUlRZIiwiT0siLCJpc0Fib3J0ZWQiLCJpc0RpcnR5IiwiaXNWYWxpZCIsImlzQXN5bmMiLCJQYXJzZUlucHV0TGF6eVBhdGgiLCJwYXJlbnQiLCJoYW5kbGVSZXN1bHQiLCJwcm9jZXNzQ3JlYXRlUGFyYW1zIiwiaW52YWxpZF90eXBlX2Vycm9yIiwicmVxdWlyZWRfZXJyb3IiLCJkZXNjcmlwdGlvbiIsImlzcyIsIlpvZFR5cGUiLCJlcnIiLCJtYXliZUFzeW5jUmVzdWx0IiwiZ2V0SXNzdWVQcm9wZXJ0aWVzIiwic2V0RXJyb3IiLCJyZWZpbmVtZW50RGF0YSIsInJlZmluZW1lbnQiLCJab2RFZmZlY3RzIiwiWm9kT3B0aW9uYWwiLCJab2ROdWxsYWJsZSIsIlpvZEFycmF5IiwiWm9kUHJvbWlzZSIsIm9wdGlvbiIsIlpvZFVuaW9uIiwiaW5jb21pbmciLCJab2RJbnRlcnNlY3Rpb24iLCJ0cmFuc2Zvcm0iLCJkZWZhdWx0VmFsdWVGdW5jIiwiWm9kRGVmYXVsdCIsIlpvZEJyYW5kZWQiLCJjYXRjaFZhbHVlRnVuYyIsIlpvZENhdGNoIiwiVGhpcyIsInRhcmdldCIsIlpvZFBpcGVsaW5lIiwiWm9kUmVhZG9ubHkiLCJjdWlkUmVnZXgiLCJjdWlkMlJlZ2V4IiwidWxpZFJlZ2V4IiwidXVpZFJlZ2V4IiwibmFub2lkUmVnZXgiLCJqd3RSZWdleCIsImR1cmF0aW9uUmVnZXgiLCJlbWFpbFJlZ2V4IiwiX2Vtb2ppUmVnZXgiLCJpcHY0UmVnZXgiLCJpcHY0Q2lkclJlZ2V4IiwiaXB2NlJlZ2V4IiwiaXB2NkNpZHJSZWdleCIsImJhc2U2NFJlZ2V4IiwiYmFzZTY0dXJsUmVnZXgiLCJkYXRlUmVnZXhTb3VyY2UiLCJkYXRlUmVnZXgiLCJ0aW1lUmVnZXhTb3VyY2UiLCJzZWNvbmRzUmVnZXhTb3VyY2UiLCJzZWNvbmRzUXVhbnRpZmllciIsInRpbWVSZWdleCIsImRhdGV0aW1lUmVnZXgiLCJvcHRzIiwiaXNWYWxpZElQIiwiaXAiLCJ2ZXJzaW9uIiwiaXNWYWxpZEpXVCIsImp3dCIsImFsZyIsImhlYWRlciIsImRlY29kZWQiLCJpc1ZhbGlkQ2lkciIsIlpvZFN0cmluZyIsInRvb0JpZyIsInRvb1NtYWxsIiwidmFsaWRhdGlvbiIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImNoIiwibWluIiwibWF4IiwiZmxvYXRTYWZlUmVtYWluZGVyIiwic3RlcCIsInZhbERlY0NvdW50Iiwic3RlcERlY0NvdW50IiwiZGVjQ291bnQiLCJ2YWxJbnQiLCJzdGVwSW50IiwiWm9kTnVtYmVyIiwia2luZCIsImluY2x1c2l2ZSIsIlpvZEJpZ0ludCIsIlpvZEJvb2xlYW4iLCJab2REYXRlIiwibWluRGF0ZSIsIm1heERhdGUiLCJab2RTeW1ib2wiLCJab2RVbmRlZmluZWQiLCJab2ROdWxsIiwiWm9kQW55IiwiWm9kVW5rbm93biIsIlpvZE5ldmVyIiwiWm9kVm9pZCIsImRlZXBQYXJ0aWFsaWZ5IiwiWm9kT2JqZWN0IiwibmV3U2hhcGUiLCJmaWVsZFNjaGVtYSIsIlpvZFR1cGxlIiwic2hhcGUiLCJzaGFwZUtleXMiLCJleHRyYUtleXMiLCJrZXlWYWxpZGF0b3IiLCJ1bmtub3duS2V5cyIsImNhdGNoYWxsIiwiZGVmYXVsdEVycm9yIiwiYXVnbWVudGF0aW9uIiwibWVyZ2luZyIsIm1hc2siLCJuZXdGaWVsZCIsImNyZWF0ZVpvZEVudW0iLCJoYW5kbGVSZXN1bHRzIiwidW5pb25FcnJvcnMiLCJjaGlsZEN0eCIsImRpcnR5IiwiZ2V0RGlzY3JpbWluYXRvciIsIlpvZExhenkiLCJab2RMaXRlcmFsIiwiWm9kRW51bSIsIlpvZE5hdGl2ZUVudW0iLCJab2REaXNjcmltaW5hdGVkVW5pb24iLCJkaXNjcmltaW5hdG9yIiwiZGlzY3JpbWluYXRvclZhbHVlIiwib3B0aW9uc01hcCIsImRpc2NyaW1pbmF0b3JWYWx1ZXMiLCJtZXJnZVZhbHVlcyIsImFUeXBlIiwiYlR5cGUiLCJiS2V5cyIsInNoYXJlZEtleXMiLCJuZXdPYmoiLCJzaGFyZWRWYWx1ZSIsIm5ld0FycmF5IiwiaXRlbUEiLCJpdGVtQiIsImhhbmRsZVBhcnNlZCIsInBhcnNlZExlZnQiLCJwYXJzZWRSaWdodCIsIm1lcmdlZCIsImxlZnQiLCJyaWdodCIsIml0ZW1JbmRleCIsInNjaGVtYXMiLCJab2RSZWNvcmQiLCJ2YWx1ZVR5cGUiLCJ0aGlyZCIsIlpvZE1hcCIsImZpbmFsTWFwIiwiWm9kU2V0IiwiZmluYWxpemVTZXQiLCJlbGVtZW50cyIsInBhcnNlZFNldCIsImVsZW1lbnQiLCJtaW5TaXplIiwibWF4U2l6ZSIsInNpemUiLCJnZXR0ZXIiLCJleHBlY3RlZFZhbHVlcyIsImVudW1WYWx1ZXMiLCJuZXdEZWYiLCJvcHQiLCJuYXRpdmVFbnVtVmFsdWVzIiwicHJvbWlzaWZpZWQiLCJlZmZlY3QiLCJjaGVja0N0eCIsImFyZyIsInByb2Nlc3NlZCIsImV4ZWN1dGVSZWZpbmVtZW50IiwiaW5uZXIiLCJwcmVwcm9jZXNzIiwibmV3Q3R4IiwiWm9kTmFOIiwiaW5SZXN1bHQiLCJmcmVlemUiLCJzdHJpbmdUeXBlIiwibnVtYmVyVHlwZSIsImJvb2xlYW5UeXBlIiwiYW55VHlwZSIsImFycmF5VHlwZSIsIm9iamVjdFR5cGUiLCJ1bmlvblR5cGUiLCJkaXNjcmltaW5hdGVkVW5pb25UeXBlIiwicmVjb3JkVHlwZSIsImxhenlUeXBlIiwibGl0ZXJhbFR5cGUiLCJlbnVtVHlwZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsImdldEFsbE1jcEZ1bmN0aW9uVG9vbHMiLCJtY3BTZXJ2ZXJzIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsImFsbFRvb2xzIiwidG9vbE5hbWVzIiwic2VydmVyIiwic2VydmVyVG9vbHMiLCJnZXRGdW5jdGlvblRvb2xzRnJvbVNlcnZlciIsImludGVyc2VjdGlvbiIsInQiLCJfY2FjaGVkVG9vbHMiLCJtY3BUb0Z1bmN0aW9uVG9vbCIsIndpdGhNQ1BMaXN0VG9vbHNTcGFuIiwic3BhbiIsIm1jcFRvb2xzIiwidG9vbHMiLCJnZXRBbGxNY3BUb29scyIsIm1jcFRvb2wiLCJfY29udGV4dCIsInN0cmljdFNjaGVtYSIsImVuc3VyZVN0cmljdEpzb25TY2hlbWEiLCJnbG9iYWxMb2dnZXIiLCJub25TdHJpY3RTY2hlbWEiLCJvdXQiLCJCcm93c2VyRXZlbnRFbWl0dGVyIiwiX19wcml2YXRlQWRkIiwiX3RhcmdldCIsImxpc3RlbmVyIiwiX19wcml2YXRlR2V0IiwiaGFuZGxlciIsInJhbmRvbVVVSUQiLCJSZWFkYWJsZSIsIl9kZXN0aW5hdGlvbiIsIl90cmFuc2Zvcm0iLCJSZWFkYWJsZVN0cmVhbSIsIlRyYW5zZm9ybVN0cmVhbSIsIkFzeW5jTG9jYWxTdG9yYWdlIiwiQnJvd3NlclRpbWVyIiwidGltZW91dCIsInRpbWVvdXRJZCIsInRpbWVyIiwiX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldEN1cnJlbnRUcmFjZSIsImN1cnJlbnRUcmFjZSIsIl93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUiLCJ0cmFjZSIsIndpdGhUcmFjZSIsIm5ld1RyYWNlIiwiZ2V0R2xvYmFsVHJhY2VQcm92aWRlciIsImdldE9yQ3JlYXRlVHJhY2UiLCJzZXRDdXJyZW50U3BhbiIsInJlc2V0Q3VycmVudFNwYW4iLCJhZGRFcnJvclRvQ3VycmVudFNwYW4iLCJzcGFuRXJyb3IiLCJjbG9uZUN1cnJlbnRDb250ZXh0Iiwid2l0aE5ld1NwYW5Db250ZXh0IiwiY3VycmVudENvbnRleHQiLCJjb3B5T2ZDb250ZXh0IiwiQ29uc29sZVNwYW5FeHBvcnRlciIsIkJhdGNoVHJhY2VQcm9jZXNzb3IiLCJleHBvcnRlciIsIm1heFF1ZXVlU2l6ZSIsIm1heEJhdGNoU2l6ZSIsInNjaGVkdWxlRGVsYXkiLCJleHBvcnRUcmlnZ2VyUmF0aW8iLCJfQmF0Y2hUcmFjZVByb2Nlc3Nvcl9pbnN0YW5jZXMiLCJfbWF4UXVldWVTaXplIiwiX21heEJhdGNoU2l6ZSIsIl9zY2hlZHVsZURlbGF5IiwiX2V4cG9ydFRyaWdnZXJTaXplIiwiX2V4cG9ydGVyIiwiX2J1ZmZlciIsIl90aW1lciIsIl90aW1lb3V0IiwiX2V4cG9ydEluUHJvZ3Jlc3MiLCJfdGltZW91dEFib3J0Q29udHJvbGxlciIsIl9fcHJpdmF0ZVNldCIsIl9fcHJpdmF0ZU1ldGhvZCIsInJ1bkV4cG9ydExvb3BfZm4iLCJzYWZlQWRkSXRlbV9mbiIsIl90cmFjZSIsIl9zcGFuIiwiZXhwb3J0QmF0Y2hlc19mbiIsInJlc29sdmUiLCJmb3JjZSIsInRvRXhwb3J0IiwiYmF0Y2giLCJNdWx0aVRyYWNpbmdQcm9jZXNzb3IiLCJfcHJvY2Vzc29ycyIsInByb2Nlc3NvciIsInByb2Nlc3NvcnMiLCJfZGVmYXVsdEV4cG9ydGVyIiwiX2RlZmF1bHRQcm9jZXNzb3IiLCJkZWZhdWx0RXhwb3J0ZXIiLCJkZWZhdWx0UHJvY2Vzc29yIiwidGltZUlzbyIsImdlbmVyYXRlVHJhY2VJZCIsImdlbmVyYXRlU3BhbklkIiwicmVtb3ZlUHJpdmF0ZUZpZWxkcyIsIl9TcGFuIiwiX2RhdGEiLCJfdHJhY2VJZCIsIl9zcGFuSWQiLCJfcGFyZW50SWQiLCJfcHJvY2Vzc29yIiwiX3N0YXJ0ZWRBdCIsIl9lbmRlZEF0IiwiX2Vycm9yIiwiX3ByZXZpb3VzU3BhbiIsIlNwYW4iLCJOb29wU3BhbiIsIl9UcmFjZSIsIl9zdGFydGVkIiwiVHJhY2UiLCJOb29wVHJhY2UiLCJUcmFjZVByb3ZpZGVyIiwiX1RyYWNlUHJvdmlkZXJfaW5zdGFuY2VzIiwiX211bHRpUHJvY2Vzc29yIiwiX2Rpc2FibGVkIiwiYWRkQ2xlYW51cExpc3RlbmVyc19mbiIsImRpc2FibGVkIiwidHJhY2VPcHRpb25zIiwidHJhY2VJZCIsInNwYW5PcHRpb25zIiwicGFyZW50SWQiLCJjbGVhbnVwIiwiaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzIiwicmVhc29uIiwicHJvbWlzZSIsImhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzIiwiR0xPQkFMX1RSQUNFX1BST1ZJREVSIiwiX3dpdGhTcGFuRmFjdG9yeSIsImNyZWF0ZVNwYW4iLCJjcmVhdGVBZ2VudFNwYW4iLCJjcmVhdGVGdW5jdGlvblNwYW4iLCJ3aXRoRnVuY3Rpb25TcGFuIiwiY3JlYXRlSGFuZG9mZlNwYW4iLCJ3aXRoSGFuZG9mZlNwYW4iLCJjcmVhdGVHdWFyZHJhaWxTcGFuIiwid2l0aEd1YXJkcmFpbFNwYW4iLCJjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuIiwiYWRkVHJhY2VQcm9jZXNzb3IiLCJFdmVudEVtaXR0ZXJEZWxlZ2F0ZSIsIkFnZW50SG9va3MiLCJSdW50aW1lRXZlbnRFbWl0dGVyIiwiUnVuSG9va3MiLCJkZWZpbmVJbnB1dEd1YXJkcmFpbCIsImV4ZWN1dGUiLCJkZWZpbmVPdXRwdXRHdWFyZHJhaWwiLCJnZXRUcmFuc2Zlck1lc3NhZ2UiLCJhZ2VudCIsImRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUiLCJkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbiIsIkhhbmRvZmYiLCJvbkludm9rZUhhbmRvZmYiLCJoYW5kb2ZmIiwiY29uZmlnIiwiaGFzT25IYW5kb2ZmIiwiaGFzSW5wdXRUeXBlIiwiaW5wdXRKc29uU3RyaW5nIiwiZ2V0SGFuZG9mZiIsImdldERlZmF1bHRNb2RlbFByb3ZpZGVyIiwiU2hhcmVkQmFzZSIsIkl0ZW1CYXNlIiwiUmVmdXNhbCIsIk91dHB1dFRleHQiLCJJbnB1dFRleHQiLCJJbnB1dEltYWdlIiwielxuICAgICAgICAuc3RyaW5nIiwiSW5wdXRGaWxlIiwiQXVkaW9Db250ZW50IiwiSW1hZ2VDb250ZW50IiwiVG9vbE91dHB1dFRleHQiLCJUb29sT3V0cHV0SW1hZ2UiLCJDb21wdXRlclRvb2xPdXRwdXQiLCJjb21wdXRlckFjdGlvbnMiLCJ6LmRpc2NyaW1pbmF0ZWRVbmlvbiIsInoubnVtYmVyIiwiei5lbnVtIiwiQXNzaXN0YW50Q29udGVudCIsIk1lc3NhZ2VCYXNlIiwiQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJVc2VyQ29udGVudCIsIlVzZXJNZXNzYWdlSXRlbSIsIlN5c3RlbU1lc3NhZ2VJdGVtIiwiSG9zdGVkVG9vbENhbGxJdGVtIiwiRnVuY3Rpb25DYWxsSXRlbSIsIkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJDb21wdXRlclVzZUNhbGxJdGVtIiwiQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSIsIlRvb2xDYWxsSXRlbSIsIlJlYXNvbmluZ0l0ZW0iLCJVbmtub3duSXRlbSIsIk91dHB1dE1vZGVsSXRlbSIsIk1vZGVsSXRlbSIsInoudW5pb24iLCJVc2FnZURhdGEiLCJTdHJlYW1FdmVudFRleHRTdHJlYW0iLCJTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCIsIlN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQiLCJTdHJlYW1FdmVudEdlbmVyaWNJdGVtIiwiVXNhZ2UiLCJuZXdVc2FnZSIsIlJ1bkNvbnRleHQiLCJfYXBwcm92YWxzIiwiYXBwcm92YWxzIiwidG9vbE5hbWUiLCJjYWxsSWQiLCJhcHByb3ZhbEVudHJ5IiwiaW5kaXZpZHVhbENhbGxBcHByb3ZhbCIsImluZGl2aWR1YWxDYWxsUmVqZWN0aW9uIiwiYXBwcm92YWxJdGVtIiwiYWx3YXlzQXBwcm92ZSIsImFsd2F5c1JlamVjdCIsIlJ1blJlc3VsdEJhc2UiLCJnZXRUdXJuSW5wdXQiLCJyZXNwb25zZXMiLCJSdW5SZXN1bHQiLCJTdHJlYW1lZFJ1blJlc3VsdCIsIl9zaWduYWwiLCJfcmVhZGFibGVDb250cm9sbGVyIiwiX3JlYWRhYmxlU3RyZWFtIiwiX2NvbXBsZXRlZFByb21pc2UiLCJfY29tcGxldGVkUHJvbWlzZVJlc29sdmUiLCJfY29tcGxldGVkUHJvbWlzZVJlamVjdCIsIl9jYW5jZWxsZWQiLCJfUmVhZGFibGVTdHJlYW0iLCJjb250cm9sbGVyIiwicmVqZWN0Iiwic3RyZWFtIiwic2VyaWFsaXplVG9vbCIsInNlcmlhbGl6ZUhhbmRvZmYiLCJSdW5JdGVtQmFzZSIsIlJ1bk1lc3NhZ2VPdXRwdXRJdGVtIiwicmF3SXRlbSIsInBhcnQiLCJSdW5Ub29sQ2FsbEl0ZW0iLCJSdW5Ub29sQ2FsbE91dHB1dEl0ZW0iLCJSdW5SZWFzb25pbmdJdGVtIiwiUnVuSGFuZG9mZkNhbGxJdGVtIiwiUnVuSGFuZG9mZk91dHB1dEl0ZW0iLCJzb3VyY2VBZ2VudCIsInRhcmdldEFnZW50IiwiUnVuVG9vbEFwcHJvdmFsSXRlbSIsImdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UiLCJvdXRwdXRNZXNzYWdlIiwibGFzdEl0ZW0iLCJnZXRPdXRwdXRUZXh0IiwiUnVuUmF3TW9kZWxTdHJlYW1FdmVudCIsIlJ1bkl0ZW1TdHJlYW1FdmVudCIsIlJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50IiwicHJvY2Vzc01vZGVsUmVzcG9uc2UiLCJtb2RlbFJlc3BvbnNlIiwiaGFuZG9mZnMiLCJydW5IYW5kb2ZmcyIsInJ1bkZ1bmN0aW9ucyIsInJ1bkNvbXB1dGVyQWN0aW9ucyIsInJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMiLCJ0b29sc1VzZWQiLCJoYW5kb2ZmTWFwIiwiZnVuY3Rpb25NYXAiLCJjb21wdXRlclRvb2wiLCJtY3BUb29sTWFwIiwicHJvdmlkZXJEYXRhIiwibWNwU2VydmVyTGFiZWwiLCJtY3BTZXJ2ZXJUb29sIiwiZnVuY3Rpb25Ub29sIiwibmV4dFN0ZXBTY2hlbWEiLCJTaW5nbGVTdGVwUmVzdWx0Iiwib3JpZ2luYWxJbnB1dCIsInByZVN0ZXBJdGVtcyIsIm5ld1N0ZXBJdGVtcyIsIm5leHRTdGVwIiwibWF5YmVSZXNldFRvb2xDaG9pY2UiLCJ0b29sVXNlVHJhY2tlciIsIm1vZGVsU2V0dGluZ3MiLCJleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzIiwib3JpZ2luYWxQcmVTdGVwSXRlbXMiLCJuZXdSZXNwb25zZSIsInByb2Nlc3NlZFJlc3BvbnNlIiwicnVubmVyIiwiZnVuY3Rpb25DYWxsSWRzIiwiZnVuY3Rpb25Ub29sUnVucyIsInJ1biIsImZ1bmN0aW9uUmVzdWx0cyIsImV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyIsIm5ld0l0ZW1zIiwibWNwQXBwcm92YWxSdW5zIiwiYXBwcm92YWxSZXF1ZXN0SWQiLCJhcHByb3ZlZCIsImNoZWNrVG9vbE91dHB1dCIsImNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMiLCJleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyIsImNvbXB1dGVyUmVzdWx0cyIsImV4ZWN1dGVDb21wdXRlckFjdGlvbnMiLCJhcHByb3ZhbFJlcXVlc3QiLCJ0b29sRGF0YSIsInJlcXVlc3REYXRhIiwiYXBwcm92YWxSZXN1bHQiLCJhcHByb3ZhbFJlc3BvbnNlRGF0YSIsImV4ZWN1dGVIYW5kb2ZmQ2FsbHMiLCJtZXNzYWdlSXRlbXMiLCJwb3RlbnRpYWxGaW5hbE91dHB1dCIsImdldFRvb2xDYWxsT3V0cHV0SXRlbSIsInRvb2xDYWxsIiwidG9vbFJ1bnMiLCJydW5TaW5nbGVUb29sIiwidG9vbFJ1biIsInBhcnNlZEFyZ3MiLCJhcHByb3ZhbCIsInJlc3BvbnNlIiwiX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdCIsImNvbXB1dGVyIiwiYWN0aW9uIiwic2NyZWVuc2hvdCIsInAiLCJhY3Rpb25zIiwiY3VzdG9tTG9nZ2VyIiwiX2xvZ2dlciIsImltYWdlVXJsIiwiYWN0dWFsSGFuZG9mZiIsImhhbmRvZmZTcGFuIiwibmV3QWdlbnQiLCJyZXF1ZXN0ZWRBZ2VudHMiLCJpbnB1dEZpbHRlciIsImhhbmRvZmZJbnB1dERhdGEiLCJOT1RfRklOQUxfT1VUUFVUIiwidG9vbFJlc3VsdHMiLCJpbnRlcnJ1cHRpb25zIiwiZmlyc3RUb29sUmVzdWx0IiwidG9vbFVzZUJlaGF2aW9yIiwic3RvcHBpbmdUb29sIiwiYWRkU3RlcFRvUnVuUmVzdWx0IiwiaXRlbU5hbWUiLCJBZ2VudFRvb2xVc2VUcmFja2VyIiwiX2FnZW50VG9Ub29scyIsIkNVUlJFTlRfU0NIRU1BX1ZFUlNJT04iLCIkc2NoZW1hVmVyc2lvbiIsInNlcmlhbGl6ZWRBZ2VudFNjaGVtYSIsIlNlcmlhbGl6ZWRTcGFuIiwielxuICAgICAgICAub2JqZWN0Iiwiei5sYXp5IiwidXNhZ2VTY2hlbWEiLCJtb2RlbFJlc3BvbnNlU2NoZW1hIiwicHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtIiwiaXRlbVNjaGVtYSIsInByb3RvY29sLkFzc2lzdGFudE1lc3NhZ2VJdGVtIiwicHJvdG9jb2wuVG9vbENhbGxJdGVtIiwicHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSIsInByb3RvY29sLlJlYXNvbmluZ0l0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtIiwic2VyaWFsaXplZFRyYWNlU2NoZW1hIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hIiwielxuICAgICAgICAuYXJyYXkiLCJndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSIsImlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwib3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwiU2VyaWFsaXplZFJ1blN0YXRlIiwicHJvdG9jb2wuTW9kZWxJdGVtIiwiUnVuU3RhdGUiLCJzdGFydGluZ0FnZW50IiwibWF4VHVybnMiLCJpbml0aWFsQWdlbnQiLCJwYXJzaW5nRXJyb3IiLCJqc29uUmVzdWx0IiwiY3VycmVudFNjaGVtYVZlcnNpb24iLCJzdGF0ZUpzb24iLCJhZ2VudE1hcCIsImJ1aWxkQWdlbnRNYXAiLCJjdXJyZW50QWdlbnQiLCJhZ2VudE5hbWUiLCJkZXNlcmlhbGl6ZVNwYW4iLCJkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2UiLCJkZXNlcmlhbGl6ZUl0ZW0iLCJkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlIiwiX2UiLCJxdWV1ZSIsIkFnZW50Iiwic2VyaWFsaXplZFNwYW4iLCJzcGFuRGF0YSIsInByZXZpb3VzU3BhbiIsInNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlIiwidXNhZ2UiLCJzZXJpYWxpemVkSXRlbSIsInNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZSIsImNvbXB1dGVyVG9vbHMiLCJmdW5jdGlvbkNhbGwiLCJjb21wdXRlckFjdGlvbiIsIkRFRkFVTFRfTUFYX1RVUk5TIiwiZ2V0VHJhY2luZyIsInRyYWNpbmdEaXNhYmxlZCIsInRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEiLCJnZW5lcmF0ZWRJdGVtcyIsInJhd0l0ZW1zIiwiUnVubmVyIiwiX1J1bm5lcl9pbnN0YW5jZXMiLCJydW5JbmRpdmlkdWFsU3RyZWFtX2ZuIiwicnVuSW5kaXZpZHVhbE5vblN0cmVhbV9mbiIsIm1vZGVsIiwic2VsZWN0TW9kZWwiLCJ0dXJuUmVzdWx0IiwiaGFuZG9mZk5hbWVzIiwic2VyaWFsaXplZFRvb2xzIiwic2VyaWFsaXplZEhhbmRvZmZzIiwicnVuSW5wdXRHdWFyZHJhaWxzX2ZuIiwidHVybklucHV0IiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsImd1YXJkcmFpbHMiLCJndWFyZHJhaWxBcmdzIiwiZ3VhcmRyYWlsIiwiYWdlbnRPdXRwdXQiLCJydW5TdHJlYW1Mb29wX2ZuIiwiZmluYWxSZXNwb25zZSIsImFnZW50TW9kZWwiLCJydW5Db25maWdNb2RlbCIsIl9BZ2VudCIsIm91dHB1dFR5cGVzIiwidG9vbERlc2NyaXB0aW9uIiwiY3VzdG9tT3V0cHV0RXh0cmFjdG9yIiwiUmVhbHRpbWVBZ2VudCIsImdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MiLCJzZXR0aW5ncyIsImRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsIiwicG9saWN5SGludElucHV0IiwiYmFzZUd1YXJkcmFpbCIsInBvbGljeUhpbnQiLCJnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSIsInJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEiLCJyZWFsdGltZVRvb2xDYWxsSXRlbSIsInJlYWx0aW1lUmVzcG9uc2UiLCJ6XG4gICAgICAgIC5lbnVtIiwielxuICAgICAgICAgICAgLnJlY29yZCIsImNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVNjaGVtYSIsImNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hIiwiZXJyb3JFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEiLCJ6XG4gICAgLm9iamVjdCIsIm91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJyYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSIsInNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJ0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hIiwidHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJnZW5lcmljRXZlbnRTY2hlbWEiLCJyZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hIiwicGFyc2VSZWFsdGltZUV2ZW50IiwicmF3IiwiZ2VuZXJpY1BhcnNlZCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUciLCJfT3BlbkFJUmVhbHRpbWVCYXNlIiwiX21vZGVsIiwiX2FwaUtleSIsIl90cmFjaW5nQ29uZmlnIiwiX3Jhd1Nlc3Npb25Db25maWciLCJhcGlLZXkiLCJpc0dlbmVyaWMiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInRvdGFsVG9rZW5zIiwiX2YiLCJwcmV2aW91c0l0ZW1JZCIsInJlYWx0aW1lSXRlbSIsIm90aGVyRXZlbnREYXRhIiwiY3JlYXRlUmVzcG9uc2UiLCJjcmVhdGVfcmVzcG9uc2UiLCJlYWdlcm5lc3MiLCJpbnRlcnJ1cHRSZXNwb25zZSIsImludGVycnVwdF9yZXNwb25zZSIsInByZWZpeFBhZGRpbmdNcyIsInByZWZpeF9wYWRkaW5nX21zIiwic2lsZW5jZUR1cmF0aW9uTXMiLCJzaWxlbmNlX2R1cmF0aW9uX21zIiwidGhyZXNob2xkIiwidHJhY2luZ0NvbmZpZyIsInNlc3Npb25EYXRhIiwic3RhcnRSZXNwb25zZSIsImF1ZGlvIiwiY29tbWl0IiwicmVtb3ZhbElkcyIsInVwZGF0ZSIsIml0ZW1JZCIsImFkZGl0aW9uc0FuZFVwZGF0ZXMiLCJhZGRpdGlvbiIsIml0ZW1FbnRyeSIsIk9wZW5BSVJlYWx0aW1lQmFzZSIsIk9wZW5BSVJlYWx0aW1lV2ViUlRDIiwiX3VybCIsIl9zdGF0ZSIsIl91c2VJbnNlY3VyZUFwaUtleSIsIl9vbmdvaW5nUmVzcG9uc2UiLCJfbXV0ZWQiLCJiYXNlVXJsIiwiaXNDbGllbnRLZXkiLCJ1c2VyU2Vzc2lvbkNvbmZpZyIsImNvbm5lY3Rpb25VcmwiLCJwZWVyQ29ubmVjdGlvbiIsImRhdGFDaGFubmVsIiwiYXVkaW9FbGVtZW50Iiwib2ZmZXIiLCJzZXNzaW9uQ29uZmlnIiwiYW5zd2VyIiwibXV0ZWQiLCJzZW5kZXIiLCJXZWJTb2NrZXQiLCJPcGVuQUlSZWFsdGltZVdlYlNvY2tldCIsIl9PcGVuQUlSZWFsdGltZVdlYlNvY2tldF9pbnN0YW5jZXMiLCJfY3VycmVudEl0ZW1JZCIsIl9jdXJyZW50QXVkaW9Db250ZW50SW5kZXgiLCJhdWRpb0V2ZW50IiwidXJsIiwic2V0dXBXZWJTb2NrZXRfZm4iLCJlbGFwc2VkVGltZSIsImNhbmNlbE9uZ29pbmdSZXNwb25zZSIsIndlYnNvY2tldEFyZ3VtZW50cyIsIndzIiwiYnVmZiIsImF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCIsIlJlYWx0aW1lU2Vzc2lvbiIsIl9SZWFsdGltZVNlc3Npb25faW5zdGFuY2VzIiwiX3RyYW5zcG9ydCIsIl9jdXJyZW50QWdlbnQiLCJfY3VycmVudFRvb2xzIiwiX291dHB1dEd1YXJkcmFpbHMiLCJfb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MiLCJfdHJhbnNjcmliZWRUZXh0RGVsdGFzIiwiX2hpc3RvcnkiLCJfc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsIl9pbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsIiwiX2F1ZGlvU3RhcnRlZCIsInNldEN1cnJlbnRBZ2VudF9mbiIsImdldFNlc3Npb25Db25maWdfZm4iLCJzZXRFdmVudExpc3RlbmVyc19mbiIsInVwZGF0ZWRIaXN0b3J5IiwiaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbF9mbiIsImhhbmRvZmZUb29scyIsImFkZGl0aW9uYWxDb25maWciLCJpbnN0cnVjdGlvbnMiLCJoYW5kbGVIYW5kb2ZmX2ZuIiwiaGFuZGxlRnVuY3Rpb25DYWxsX2ZuIiwiZnVuY3Rpb25Ub29sTWFwIiwicG9zc2libGVIYW5kb2ZmIiwicmVzcG9uc2VJZCIsImZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQiLCJmZWVkYmFja1RleHQiLCJjb21wbGV0ZWRFdmVudCIsInRleHRPdXRwdXQiLCJsYXN0UnVuSW5kZXgiLCJsYXN0SXRlbUlkIiwiZGVsdGEiLCJuZXdUZXh0IiwibmV3UnVuSW5kZXgiLCJpc05ldyIsImFkZGVkSXRlbSIsInV0aWxzIiwidXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyIiwidXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0IiwidXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI2Z0NBQ08sTUFBTUEsRUFBVyxDQUVwQixRQUFXLFFBTWYsRUNITyxTQUFTQyxFQUFvQkMsRUFBUSxDQUN4QyxNQUFNQyxFQUFlLEtBQUtELENBQU0sRUFDMUJFLEVBQU1ELEVBQWEsT0FDbkJFLEVBQVEsSUFBSSxXQUFXRCxDQUFHLEVBQ2hDLFFBQVNFLEVBQUksRUFBR0EsRUFBSUYsRUFBS0UsSUFDckJELEVBQU1DLENBQUMsRUFBSUgsRUFBYSxXQUFXRyxDQUFDLEVBRXhDLE9BQU9ELEVBQU0sTUFDakIsQ0FNTyxTQUFTRSxHQUFvQkMsRUFBYSxDQUM3QyxNQUFNTCxFQUFlLE9BQU8sYUFBYSxHQUFHLElBQUksV0FBV0ssQ0FBVyxDQUFDLEVBQ3ZFLE9BQU8sS0FBS0wsQ0FBWSxDQUM1QixDQU1PLFNBQVNNLEdBQWtDQyxFQUFNLENBWXBELEdBWEksT0FBT0EsRUFBUyxLQUNoQkEsSUFBUyxNQUNULE9BQU9BLEdBQVMsVUFDaEIsRUFBRSxTQUFVQSxJQUNaLE9BQU9BLEVBQUssTUFBUyxVQUNyQixDQUFDQSxFQUFLLE1BR05BLEVBQUssT0FBUyxXQUdkLEVBQUUsWUFBYUEsSUFDZixDQUFDLE1BQU0sUUFBUUEsRUFBSyxPQUFPLEdBQzNCQSxFQUFLLFFBQVEsT0FBUyxFQUN0QixPQUVKLE1BQU1DLEVBQWtCRCxFQUFLLFFBQVFBLEVBQUssUUFBUSxPQUFTLENBQUMsRUFDNUQsR0FBSSxJQUFFLFNBQVVDLElBQ1osT0FBT0EsRUFBZ0IsTUFBUyxVQUdwQyxJQUFJQSxFQUFnQixPQUFTLE9BQ3pCLE9BQU8sT0FBT0EsRUFBZ0IsTUFBUyxTQUNqQ0EsRUFBZ0IsS0FDaEIsT0FFVixHQUFJQSxFQUFnQixPQUFTLFFBQ3pCLE9BQU8sT0FBT0EsRUFBZ0IsWUFBZSxTQUN2Q0EsRUFBZ0IsV0FDaEIsT0FHZCxDQU9PLFNBQVNDLEdBQW9CQyxFQUFZQyxFQUFZLENBQ3hELE1BQU1DLEVBQVdGLEVBQVcsT0FBUUgsR0FBUyxDQUFDSSxFQUFXLEtBQU1FLEdBQVlBLEVBQVEsU0FBV04sRUFBSyxNQUFNLENBQUMsRUFDcEdPLEVBQVlILEVBQVcsT0FBUUosR0FBUyxDQUFDRyxFQUFXLEtBQU1LLEdBQVlBLEVBQVEsU0FBV1IsRUFBSyxNQUFNLENBQUMsRUFDckdTLEVBQVVMLEVBQVcsT0FBUUosR0FBU0csRUFBVyxLQUFNSyxHQUFZQSxFQUFRLFNBQVdSLEVBQUssUUFDN0YsS0FBSyxVQUFVUSxDQUFPLElBQU0sS0FBSyxVQUFVUixDQUFJLENBQUMsQ0FBQyxFQUNyRCxNQUFPLENBQ0gsU0FBQUssRUFDQSxVQUFBRSxFQUNBLFFBQUFFLENBQ0gsQ0FDTCxDQUtPLFNBQVNDLElBQW1CLENBQy9CLE9BQUksT0FBTyxPQUFXLElBQ1gsR0FFSixPQUFPLE9BQU8sa0JBQXlCLEdBQ2xELENBTU8sU0FBU0MsR0FBdUJYLEVBQU0sQ0FDekMsT0FBSUEsRUFBSyxPQUFTLFNBQ1BBLEVBRVBBLEVBQUssT0FBUyxZQUNQLENBQ0gsR0FBR0EsRUFDSCxRQUFTQSxFQUFLLFFBQVEsSUFBS1ksR0FDbkJBLEVBQU0sT0FBUyxRQUNSLENBQ0gsR0FBR0EsRUFDSCxNQUFPLElBQ1YsRUFFRUEsQ0FDVixDQUNKLEVBRURaLEVBQUssT0FBUyxPQUNQLENBQ0gsR0FBR0EsRUFDSCxRQUFTQSxFQUFLLFFBQVEsSUFBS1ksR0FDbkJBLEVBQU0sT0FBUyxjQUNSLENBQ0gsR0FBR0EsRUFDSCxNQUFPLElBQ1YsRUFFRUEsQ0FDVixDQUNKLEVBRUVaLENBQ1gsQ0FRTyxTQUFTYSxHQUFzQkMsRUFBU0MsRUFBT0MsRUFBd0IsQ0FFMUUsR0FBSUQsRUFBTSxPQUFTLHdEQUNmLE9BQU9ELEVBQVEsSUFBS2QsR0FBUyxDQUN6QixHQUFJQSxFQUFLLFNBQVdlLEVBQU0sU0FDdEJmLEVBQUssT0FBUyxXQUNkLFNBQVVBLEdBQ1ZBLEVBQUssT0FBUyxPQUFRLENBQ3RCLE1BQU1pQixFQUFpQmpCLEVBQUssUUFBUSxJQUFLWSxHQUNqQ0EsRUFBTSxPQUFTLGNBQ1IsQ0FDSCxHQUFHQSxFQUNILFdBQVlHLEVBQU0sVUFDckIsRUFFRUgsQ0FDVixFQUNELE1BQU8sQ0FDSCxHQUFHWixFQUNILFFBQVNpQixFQUNULE9BQVEsV0FDWCxDQUNqQixDQUNZLE9BQU9qQixDQUNuQixDQUFTLEVBRUwsTUFBTWtCLEVBQVcsQ0FBQ0YsR0FBMEJELEVBQU0sT0FBUyxVQUNyREosR0FBdUJJLENBQUssRUFDNUJBLEVBQ0FJLEVBQWdCTCxFQUFRLFVBQVdkLEdBQVNBLEVBQUssU0FBV2UsRUFBTSxNQUFNLEVBQzlFLEdBQUlJLElBQWtCLEdBRWxCLE9BQU9MLEVBQVEsSUFBSSxDQUFDZCxFQUFNb0IsSUFDbEJBLElBQVFELEVBQ0RELEVBRVAsQ0FBQ0YsR0FBMEJoQixFQUFLLE9BQVMsVUFDbENXLEdBQXVCWCxDQUFJLEVBRS9CQSxDQUNWLEVBRUEsR0FBSWUsRUFBTSxlQUFnQixDQUUzQixNQUFNTSxFQUFZUCxFQUFRLFVBQVdkLEdBQVNBLEVBQUssU0FBV2UsRUFBTSxjQUFjLEVBQ2xGLE9BQUlNLElBQWMsR0FDUCxDQUNILEdBQUdQLEVBQVEsTUFBTSxFQUFHTyxFQUFZLENBQUMsRUFDakNILEVBQ0EsR0FBR0osRUFBUSxNQUFNTyxFQUFZLENBQUMsQ0FDakMsRUFHTSxDQUFDLEdBQUdQLEVBQVNJLENBQVEsQ0FFeEMsS0FFUSxPQUFPLENBQUMsR0FBR0osRUFBU0ksQ0FBUSxDQUVwQyxDQUlPLE1BQU1JLEdBQVUsQ0FDbkIsYUFBYyxxQkFBcUJoQyxFQUFTLE9BQU8sR0FDbkQsc0JBQXVCLHFCQUFxQkEsRUFBUyxPQUFPLEVBQ2hFLEVBSWFpQyxHQUFpQixxQkFBcUJqQyxFQUFTLE9BQU8sR0M5TTVELGVBQWVrQyxHQUFZQyxFQUFJLENBQ2xDLEdBQUksQ0FDQSxNQUFPLENBQUMsS0FBTSxNQUFNQSxHQUFJLENBQ2hDLE9BQ1dDLEVBQU8sQ0FDVixNQUFPLENBQUNBLEVBQU8sSUFBSSxDQUMzQixDQUNBLENDUU8sU0FBU0MsR0FBd0JDLEVBQWlCQyxFQUFRLENBQzdELE1BQU1DLEVBQU0sQ0FBRSxHQUFHRixDQUFpQixFQUNsQyxjQUFPLGlCQUFpQkUsRUFBSyxDQUN6QixPQUFRLENBQ0osTUFBTyxpQ0FDUCxXQUFZLEVBQ2YsRUFDRCxVQUFXLENBQ1AsTUFBT0QsRUFDUCxXQUFZLEVBQ2YsQ0FDVCxDQUFLLEVBQ01DLENBQ1gsQ0M1Qk8sTUFBTUMsR0FBaUIsT0FBTyxtREFBbUQsRUFDbEZDLEdBQWlCLENBQ25CLEtBQU0sT0FDTixhQUFjLE9BQ2QsZUFBZ0IsUUFDaEIsYUFBYyxNQUNkLGFBQWMsbUJBQ2QsWUFBYSxVQUNiLGlCQUFrQixjQUNsQix5QkFBMEIsY0FDMUIsZUFBZ0IsY0FDaEIsT0FBUSxjQUNSLGFBQWMsR0FDZCxjQUFlLEdBQ2Ysb0JBQXFCLEdBQ3JCLGdCQUFpQixTQUNqQixnQkFBaUIsR0FDakIsY0FBZSxlQUNmLGVBQWdCLHlCQUNoQixhQUFjLEtBQ2xCLEVBQ2FDLEdBQXFCQyxHQUV0QixPQUFPQSxHQUFZLFNBQ3ZCLENBQ0ksR0FBR0YsR0FDSCxTQUFVLENBQUMsR0FBRyxFQUNkLFlBQWEsQ0FBRSxFQUNmLEtBQU1FLENBQ2xCLEVBQ1UsQ0FDRSxHQUFHRixHQUNILFNBQVUsQ0FBQyxHQUFHLEVBQ2QsWUFBYSxDQUFFLEVBQ2YsR0FBR0UsQ0FDTixFQ25DSUMsR0FBVUMsR0FDWixTQUFVQSxFQUFZQSxFQUFVLEtBQU9BLEVBRTNDLFNBQVNDLEdBQVdQLEVBQUssQ0FDNUIsR0FBSSxDQUFDQSxFQUNELE1BQU8sR0FDWCxVQUFXUSxLQUFNUixFQUNiLE1BQU8sR0FDWCxNQUFPLEVBQ1gsQ0NQTyxNQUFNUyxHQUFXTCxHQUFZLENBQ2hDLE1BQU1NLEVBQVdQLEdBQWtCQyxDQUFPLEVBQ3BDTyxFQUFjRCxFQUFTLE9BQVMsT0FDbEMsQ0FBQyxHQUFHQSxFQUFTLFNBQVVBLEVBQVMsZUFBZ0JBLEVBQVMsSUFBSSxFQUMzREEsRUFBUyxTQUNmLE1BQU8sQ0FDSCxHQUFHQSxFQUNILFlBQWFDLEVBQ2IsYUFBYyxPQUNkLFNBQVUsSUFBSSxJQUNkLEtBQU0sSUFBSSxJQUFJLE9BQU8sUUFBUUQsRUFBUyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUNFLEVBQU1DLENBQUcsSUFBTSxDQUNwRVIsR0FBT1EsQ0FBRyxFQUNWLENBQ0ksSUFBS1IsR0FBT1EsQ0FBRyxFQUNmLEtBQU0sQ0FBQyxHQUFHSCxFQUFTLFNBQVVBLEVBQVMsZUFBZ0JFLENBQUksRUFFMUQsV0FBWSxNQUNmLENBQ2IsQ0FBUyxDQUFDLENBQ0wsQ0FDTCxFQ3RCTyxTQUFTRSxHQUFnQkMsRUFBS0MsRUFBS0MsRUFBY0MsRUFBTSxDQUNyREEsR0FBQSxNQUFBQSxFQUFNLGVBRVBELElBQ0FGLEVBQUksYUFBZSxDQUNmLEdBQUdBLEVBQUksYUFDUCxDQUFDQyxDQUFHLEVBQUdDLENBQ1YsRUFFVCxDQUNPLFNBQVNFLEVBQTBCSixFQUFLQyxFQUFLSSxFQUFPSCxFQUFjQyxFQUFNLENBQzNFSCxFQUFJQyxDQUFHLEVBQUlJLEVBQ1hOLEdBQWdCQyxFQUFLQyxFQUFLQyxFQUFjQyxDQUFJLENBQ2hELENDYk8sSUFBSUcsSUFDVixTQUFVQSxFQUFNLENBQ2JBLEVBQUssWUFBZUMsR0FBTSxDQUFHLEVBQzdCLFNBQVNDLEVBQVNDLEVBQU0sQ0FBQSxDQUN4QkgsRUFBSyxTQUFXRSxFQUNoQixTQUFTRSxFQUFZQyxFQUFJLENBQ3JCLE1BQU0sSUFBSSxLQUNsQixDQUNJTCxFQUFLLFlBQWNJLEVBQ25CSixFQUFLLFlBQWVNLEdBQVUsQ0FDMUIsTUFBTTNCLEVBQU0sQ0FBRSxFQUNkLFVBQVc5QixLQUFReUQsRUFDZjNCLEVBQUk5QixDQUFJLEVBQUlBLEVBRWhCLE9BQU84QixDQUNWLEVBQ0RxQixFQUFLLG1CQUFzQnJCLEdBQVEsQ0FDL0IsTUFBTTRCLEVBQVlQLEVBQUssV0FBV3JCLENBQUcsRUFBRSxPQUFRNkIsR0FBTSxPQUFPN0IsRUFBSUEsRUFBSTZCLENBQUMsQ0FBQyxHQUFNLFFBQVEsRUFDOUVDLEVBQVcsQ0FBRSxFQUNuQixVQUFXRCxLQUFLRCxFQUNaRSxFQUFTRCxDQUFDLEVBQUk3QixFQUFJNkIsQ0FBQyxFQUV2QixPQUFPUixFQUFLLGFBQWFTLENBQVEsQ0FDcEMsRUFDRFQsRUFBSyxhQUFnQnJCLEdBQ1ZxQixFQUFLLFdBQVdyQixDQUFHLEVBQUUsSUFBSSxTQUFVK0IsRUFBRyxDQUN6QyxPQUFPL0IsRUFBSStCLENBQUMsQ0FDeEIsQ0FBUyxFQUVMVixFQUFLLFdBQWEsT0FBTyxPQUFPLE1BQVMsV0FDbENyQixHQUFRLE9BQU8sS0FBS0EsQ0FBRyxFQUN2QmdDLEdBQVcsQ0FDVixNQUFNQyxFQUFPLENBQUUsRUFDZixVQUFXakIsS0FBT2dCLEVBQ1YsT0FBTyxVQUFVLGVBQWUsS0FBS0EsRUFBUWhCLENBQUcsR0FDaERpQixFQUFLLEtBQUtqQixDQUFHLEVBR3JCLE9BQU9pQixDQUNWLEVBQ0xaLEVBQUssS0FBTyxDQUFDYSxFQUFLQyxJQUFZLENBQzFCLFVBQVdqRSxLQUFRZ0UsRUFDZixHQUFJQyxFQUFRakUsQ0FBSSxFQUNaLE9BQU9BLENBR2xCLEVBQ0RtRCxFQUFLLFVBQVksT0FBTyxPQUFPLFdBQWMsV0FDdENlLEdBQVEsT0FBTyxVQUFVQSxDQUFHLEVBQzVCQSxHQUFRLE9BQU9BLEdBQVEsVUFBWSxPQUFPLFNBQVNBLENBQUcsR0FBSyxLQUFLLE1BQU1BLENBQUcsSUFBTUEsRUFDdEYsU0FBU0MsRUFBV0MsRUFBT0MsRUFBWSxNQUFPLENBQzFDLE9BQU9ELEVBQU0sSUFBS0YsR0FBUyxPQUFPQSxHQUFRLFNBQVcsSUFBSUEsQ0FBRyxJQUFNQSxDQUFJLEVBQUUsS0FBS0csQ0FBUyxDQUM5RixDQUNJbEIsRUFBSyxXQUFhZ0IsRUFDbEJoQixFQUFLLHNCQUF3QixDQUFDQyxFQUFHRixJQUN6QixPQUFPQSxHQUFVLFNBQ1ZBLEVBQU0sU0FBVSxFQUVwQkEsQ0FFZixHQUFHQyxLQUFTQSxHQUFPLENBQUEsRUFBRyxFQUNmLElBQUltQixJQUNWLFNBQVVBLEVBQVksQ0FDbkJBLEVBQVcsWUFBYyxDQUFDQyxFQUFPQyxLQUN0QixDQUNILEdBQUdELEVBQ0gsR0FBR0MsQ0FDTixFQUVULEdBQUdGLEtBQWVBLEdBQWEsQ0FBQSxFQUFHLEVBQ0RHLEdBQUMsWUFBWSxDQUMxQyxTQUNBLE1BQ0EsU0FDQSxVQUNBLFFBQ0EsVUFDQSxPQUNBLFNBQ0EsU0FDQSxXQUNBLFlBQ0EsT0FDQSxRQUNBLFNBQ0EsVUFDQSxVQUNBLE9BQ0EsUUFDQSxNQUNBLEtBQ0osQ0FBQyxFQzFGK0JBLEdBQUMsWUFBWSxDQUN6QyxlQUNBLGtCQUNBLFNBQ0EsZ0JBQ0EsOEJBQ0EscUJBQ0Esb0JBQ0Esb0JBQ0Esc0JBQ0EsZUFDQSxpQkFDQSxZQUNBLFVBQ0EsNkJBQ0Esa0JBQ0EsWUFDSixDQUFDLFNBS00sTUFBTUMsV0FBaUIsS0FBTSxDQUNoQyxJQUFJLFFBQVMsQ0FDVCxPQUFPLEtBQUssTUFDcEIsQ0FDSSxZQUFZQyxFQUFRLENBQ2hCLE1BQU8sRUFDUCxLQUFLLE9BQVMsQ0FBRSxFQUNoQixLQUFLLFNBQVlDLEdBQVEsQ0FDckIsS0FBSyxPQUFTLENBQUMsR0FBRyxLQUFLLE9BQVFBLENBQUcsQ0FDckMsRUFDRCxLQUFLLFVBQVksQ0FBQ0MsRUFBTyxLQUFPLENBQzVCLEtBQUssT0FBUyxDQUFDLEdBQUcsS0FBSyxPQUFRLEdBQUdBLENBQUksQ0FDekMsRUFDRCxNQUFNQyxFQUFjLFdBQVcsVUFDM0IsT0FBTyxlQUVQLE9BQU8sZUFBZSxLQUFNQSxDQUFXLEVBR3ZDLEtBQUssVUFBWUEsRUFFckIsS0FBSyxLQUFPLFdBQ1osS0FBSyxPQUFTSCxDQUN0QixDQUNJLE9BQU9JLEVBQVMsQ0FDWixNQUFNQyxFQUFTRCxHQUNYLFNBQVVFLEVBQU8sQ0FDYixPQUFPQSxFQUFNLE9BQ2hCLEVBQ0NDLEVBQWMsQ0FBRSxRQUFTLEVBQUksRUFDN0JDLEVBQWdCekQsR0FBVSxDQUM1QixVQUFXdUQsS0FBU3ZELEVBQU0sT0FDdEIsR0FBSXVELEVBQU0sT0FBUyxnQkFDZkEsRUFBTSxZQUFZLElBQUlFLENBQVksVUFFN0JGLEVBQU0sT0FBUyxzQkFDcEJFLEVBQWFGLEVBQU0sZUFBZSxVQUU3QkEsRUFBTSxPQUFTLG9CQUNwQkUsRUFBYUYsRUFBTSxjQUFjLFVBRTVCQSxFQUFNLEtBQUssU0FBVyxFQUMzQkMsRUFBWSxRQUFRLEtBQUtGLEVBQU9DLENBQUssQ0FBQyxNQUVyQyxDQUNELElBQUlHLEVBQU9GLEVBQ1B0RixFQUFJLEVBQ1IsS0FBT0EsRUFBSXFGLEVBQU0sS0FBSyxRQUFRLENBQzFCLE1BQU1JLEVBQUtKLEVBQU0sS0FBS3JGLENBQUMsRUFDTkEsSUFBTXFGLEVBQU0sS0FBSyxPQUFTLEdBWXZDRyxFQUFLQyxDQUFFLEVBQUlELEVBQUtDLENBQUUsR0FBSyxDQUFFLFFBQVMsRUFBSSxFQUN0Q0QsRUFBS0MsQ0FBRSxFQUFFLFFBQVEsS0FBS0wsRUFBT0MsQ0FBSyxDQUFDLEdBWG5DRyxFQUFLQyxDQUFFLEVBQUlELEVBQUtDLENBQUUsR0FBSyxDQUFFLFFBQVMsRUFBSSxFQWExQ0QsRUFBT0EsRUFBS0MsQ0FBRSxFQUNkekYsR0FDeEIsQ0FDQSxDQUVTLEVBQ0QsT0FBQXVGLEVBQWEsSUFBSSxFQUNWRCxDQUNmLENBQ0ksT0FBTyxPQUFPaEMsRUFBTyxDQUNqQixHQUFJLEVBQUVBLGFBQWlCd0IsSUFDbkIsTUFBTSxJQUFJLE1BQU0sbUJBQW1CeEIsQ0FBSyxFQUFFLENBRXRELENBQ0ksVUFBVyxDQUNQLE9BQU8sS0FBSyxPQUNwQixDQUNJLElBQUksU0FBVSxDQUNWLE9BQU8sS0FBSyxVQUFVLEtBQUssT0FBUUMsR0FBSyxzQkFBdUIsQ0FBQyxDQUN4RSxDQUNJLElBQUksU0FBVSxDQUNWLE9BQU8sS0FBSyxPQUFPLFNBQVcsQ0FDdEMsQ0FDSSxRQUFRNkIsRUFBVUMsR0FBVUEsRUFBTSxRQUFTLENBQ3ZDLE1BQU1DLEVBQWMsQ0FBRSxFQUNoQkksRUFBYSxDQUFFLEVBQ3JCLFVBQVdWLEtBQU8sS0FBSyxPQUNmQSxFQUFJLEtBQUssT0FBUyxHQUNsQk0sRUFBWU4sRUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFJTSxFQUFZTixFQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUssQ0FBRSxFQUN6RE0sRUFBWU4sRUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUtJLEVBQU9KLENBQUcsQ0FBQyxHQUd6Q1UsRUFBVyxLQUFLTixFQUFPSixDQUFHLENBQUMsRUFHbkMsTUFBTyxDQUFFLFdBQUFVLEVBQVksWUFBQUosQ0FBYSxDQUMxQyxDQUNJLElBQUksWUFBYSxDQUNiLE9BQU8sS0FBSyxRQUFTLENBQzdCLENBQ0EsRUFDQVIsR0FBUyxPQUFVQyxHQUNELElBQUlELEdBQVNDLENBQU0sRUNqSTlCLElBQUlZLElBQ1YsU0FBVUEsRUFBVyxDQUNsQkEsRUFBVSxTQUFZQyxHQUFZLE9BQU9BLEdBQVksU0FBVyxDQUFFLFFBQUFBLEdBQVlBLEdBQVcsQ0FBRSxFQUUzRkQsRUFBVSxTQUFZQyxHQUFZLE9BQU9BLEdBQVksU0FBV0EsRUFBVUEsR0FBQSxZQUFBQSxFQUFTLE9BQ3ZGLEdBQUdELEtBQWNBLEdBQVksQ0FBQSxFQUFHLEVDcWdIekIsSUFBSUUsR0FDVixTQUFVQSxFQUF1QixDQUM5QkEsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsT0FBWSxTQUNsQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsV0FBZ0IsYUFDdENBLEVBQXNCLFFBQWEsVUFDbkNBLEVBQXNCLFVBQWUsWUFDckNBLEVBQXNCLGFBQWtCLGVBQ3hDQSxFQUFzQixRQUFhLFVBQ25DQSxFQUFzQixPQUFZLFNBQ2xDQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0IsUUFBYSxVQUNuQ0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0Isc0JBQTJCLHdCQUNqREEsRUFBc0IsZ0JBQXFCLGtCQUMzQ0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0IsVUFBZSxZQUNyQ0EsRUFBc0IsT0FBWSxTQUNsQ0EsRUFBc0IsT0FBWSxTQUNsQ0EsRUFBc0IsWUFBaUIsY0FDdkNBLEVBQXNCLFFBQWEsVUFDbkNBLEVBQXNCLFdBQWdCLGFBQ3RDQSxFQUFzQixRQUFhLFVBQ25DQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsY0FBbUIsZ0JBQ3pDQSxFQUFzQixZQUFpQixjQUN2Q0EsRUFBc0IsWUFBaUIsY0FDdkNBLEVBQXNCLFdBQWdCLGFBQ3RDQSxFQUFzQixTQUFjLFdBQ3BDQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsV0FBZ0IsYUFDdENBLEVBQXNCLFlBQWlCLGNBQ3ZDQSxFQUFzQixZQUFpQixhQUMzQyxHQUFHQSxJQUEwQkEsRUFBd0IsQ0FBQSxFQUFHLEVDaGpIakQsU0FBU0MsSUFBYyxDQUMxQixNQUFPLENBQUUsQ0FDYixDQ0NPLFNBQVNDLEdBQWNoRCxFQUFLSyxFQUFNLFNBQ3JDLE1BQU1ILEVBQU0sQ0FDUixLQUFNLE9BQ1QsRUFDRCxRQUFJK0MsR0FBQUMsRUFBQWxELEVBQUksT0FBSixZQUFBa0QsRUFBVSxPQUFWLFlBQUFELEVBQWdCLFlBQWFILEVBQXNCLFNBQ25ENUMsRUFBSSxNQUFRaUQsRUFBU25ELEVBQUksS0FBSyxLQUFNLENBQ2hDLEdBQUdLLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxPQUFPLENBQ3RELENBQVMsR0FFREwsRUFBSSxXQUNKTSxFQUEwQkosRUFBSyxXQUFZRixFQUFJLFVBQVUsTUFBT0EsRUFBSSxVQUFVLFFBQVNLLENBQUksRUFFM0ZMLEVBQUksV0FDSk0sRUFBMEJKLEVBQUssV0FBWUYsRUFBSSxVQUFVLE1BQU9BLEVBQUksVUFBVSxRQUFTSyxDQUFJLEVBRTNGTCxFQUFJLGNBQ0pNLEVBQTBCSixFQUFLLFdBQVlGLEVBQUksWUFBWSxNQUFPQSxFQUFJLFlBQVksUUFBU0ssQ0FBSSxFQUMvRkMsRUFBMEJKLEVBQUssV0FBWUYsRUFBSSxZQUFZLE1BQU9BLEVBQUksWUFBWSxRQUFTSyxDQUFJLEdBRTVGSCxDQUNYLENDdkJPLFNBQVNrRCxHQUFlcEQsRUFBS0ssRUFBTSxDQUN0QyxNQUFNSCxFQUFNLENBQ1IsS0FBTSxVQUNOLE9BQVEsT0FDWCxFQUNELEdBQUksQ0FBQ0YsRUFBSSxPQUNMLE9BQU9FLEVBQ1gsVUFBV21ELEtBQVNyRCxFQUFJLE9BQ3BCLE9BQVFxRCxFQUFNLEtBQUksQ0FDZCxJQUFLLE1BQ0doRCxFQUFLLFNBQVcsY0FDWmdELEVBQU0sVUFDTi9DLEVBQTBCSixFQUFLLFVBQVdtRCxFQUFNLE1BQU9BLEVBQU0sUUFBU2hELENBQUksRUFHMUVDLEVBQTBCSixFQUFLLG1CQUFvQm1ELEVBQU0sTUFBT0EsRUFBTSxRQUFTaEQsQ0FBSSxHQUlsRmdELEVBQU0sWUFDUG5ELEVBQUksaUJBQW1CLElBRTNCSSxFQUEwQkosRUFBSyxVQUFXbUQsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEdBRTlFLE1BQ0osSUFBSyxNQUNHQSxFQUFLLFNBQVcsY0FDWmdELEVBQU0sVUFDTi9DLEVBQTBCSixFQUFLLFVBQVdtRCxFQUFNLE1BQU9BLEVBQU0sUUFBU2hELENBQUksRUFHMUVDLEVBQTBCSixFQUFLLG1CQUFvQm1ELEVBQU0sTUFBT0EsRUFBTSxRQUFTaEQsQ0FBSSxHQUlsRmdELEVBQU0sWUFDUG5ELEVBQUksaUJBQW1CLElBRTNCSSxFQUEwQkosRUFBSyxVQUFXbUQsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEdBRTlFLE1BQ0osSUFBSyxhQUNEQyxFQUEwQkosRUFBSyxhQUFjbUQsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEVBQzdFLEtBQ2hCLENBRUksT0FBT0gsQ0FDWCxDQ2hETyxTQUFTb0QsSUFBa0IsQ0FDOUIsTUFBTyxDQUNILEtBQU0sU0FDVCxDQUNMLENDSE8sU0FBU0MsR0FBZ0JDLEVBQU1uRCxFQUFNLENBQ3hDLE9BQU84QyxFQUFTSyxFQUFLLEtBQUssS0FBTW5ELENBQUksQ0FDeEMsQ0NGTyxNQUFNb0QsR0FBZ0IsQ0FBQ3pELEVBQUtLLElBQ3hCOEMsRUFBU25ELEVBQUksVUFBVSxLQUFNSyxDQUFJLEVDRHJDLFNBQVNxRCxHQUFhMUQsRUFBS0ssRUFBTXNELEVBQXNCLENBQzFELE1BQU1DLEVBQVdELEdBQXdCdEQsRUFBSyxhQUM5QyxHQUFJLE1BQU0sUUFBUXVELENBQVEsRUFDdEIsTUFBTyxDQUNILE1BQU9BLEVBQVMsSUFBSSxDQUFDdkcsRUFBTUosSUFBTXlHLEdBQWExRCxFQUFLSyxFQUFNaEQsQ0FBSSxDQUFDLENBQ2pFLEVBRUwsT0FBUXVHLEVBQVEsQ0FDWixJQUFLLFNBQ0wsSUFBSyxtQkFDRCxNQUFPLENBQ0gsS0FBTSxTQUNOLE9BQVEsV0FDWCxFQUNMLElBQUssY0FDRCxNQUFPLENBQ0gsS0FBTSxTQUNOLE9BQVEsTUFDWCxFQUNMLElBQUssVUFDRCxPQUFPQyxHQUFrQjdELEVBQUtLLENBQUksQ0FDOUMsQ0FDQSxDQUNBLE1BQU13RCxHQUFvQixDQUFDN0QsRUFBS0ssSUFBUyxDQUNyQyxNQUFNSCxFQUFNLENBQ1IsS0FBTSxVQUNOLE9BQVEsV0FDWCxFQUNELEdBQUlHLEVBQUssU0FBVyxXQUNoQixPQUFPSCxFQUVYLFVBQVdtRCxLQUFTckQsRUFBSSxPQUNwQixPQUFRcUQsRUFBTSxLQUFJLENBQ2QsSUFBSyxNQUNEL0MsRUFBMEJKLEVBQUssVUFBV21ELEVBQU0sTUFDaERBLEVBQU0sUUFBU2hELENBQUksRUFDbkIsTUFDSixJQUFLLE1BQ0RDLEVBQTBCSixFQUFLLFVBQVdtRCxFQUFNLE1BQ2hEQSxFQUFNLFFBQVNoRCxDQUFJLEVBQ25CLEtBQ2hCLENBRUksT0FBT0gsQ0FDWCxFQzVDTyxTQUFTNEQsR0FBZ0JOLEVBQU1uRCxFQUFNLENBQ3hDLE1BQU8sQ0FDSCxHQUFHOEMsRUFBU0ssRUFBSyxVQUFVLEtBQU1uRCxDQUFJLEVBQ3JDLFFBQVNtRCxFQUFLLGFBQWMsQ0FDL0IsQ0FDTCxDQ0xPLFNBQVNPLEdBQWdCUCxFQUFNbkQsRUFBTTJELEVBQWlCLENBQ3pELE9BQU8zRCxFQUFLLGlCQUFtQixRQUFVOEMsRUFBU0ssRUFBSyxPQUFPLEtBQU1uRCxFQUFNMkQsQ0FBZSxFQUFJLENBQUUsQ0FDbkcsQ0NITyxTQUFTQyxHQUFhakUsRUFBSyxDQUM5QixNQUFPLENBQ0gsS0FBTSxTQUNOLEtBQU0sQ0FBQyxHQUFHQSxFQUFJLE1BQU0sQ0FDdkIsQ0FDTCxDQ0pBLE1BQU1rRSxHQUEwQkMsR0FDeEIsU0FBVUEsR0FBUUEsRUFBSyxPQUFTLFNBQ3pCLEdBQ0osVUFBV0EsRUFFZixTQUFTQyxHQUFxQnBFLEVBQUtLLEVBQU0sQ0FDNUMsTUFBTWdFLEVBQVEsQ0FDVmxCLEVBQVNuRCxFQUFJLEtBQUssS0FBTSxDQUNwQixHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxHQUFHLENBQzNELENBQVMsRUFDRDhDLEVBQVNuRCxFQUFJLE1BQU0sS0FBTSxDQUNyQixHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxHQUFHLENBQzNELENBQVMsQ0FDSixFQUFDLE9BQVFpRSxHQUFNLENBQUMsQ0FBQ0EsQ0FBQyxFQUNuQixJQUFJQyxFQUF3QmxFLEVBQUssU0FBVyxvQkFBc0IsQ0FBRSxzQkFBdUIsRUFBSyxFQUFLLE9BQ3JHLE1BQU1tRSxFQUFjLENBQUUsRUFFdEIsT0FBQUgsRUFBTSxRQUFTSSxHQUFXLENBQ3RCLEdBQUlQLEdBQXVCTyxDQUFNLEVBQzdCRCxFQUFZLEtBQUssR0FBR0MsRUFBTyxLQUFLLEVBQzVCQSxFQUFPLHdCQUEwQixTQUdqQ0YsRUFBd0IsWUFHM0IsQ0FDRCxJQUFJRyxFQUFlRCxFQUNuQixHQUFJLHlCQUEwQkEsR0FBVUEsRUFBTyx1QkFBeUIsR0FBTyxDQUMzRSxLQUFNLENBQUUscUJBQUFFLEVBQXNCLEdBQUdDLENBQUksRUFBS0gsRUFDMUNDLEVBQWVFLENBQy9CLE1BR2dCTCxFQUF3QixPQUU1QkMsRUFBWSxLQUFLRSxDQUFZLENBQ3pDLENBQ0EsQ0FBSyxFQUNNRixFQUFZLE9BQ2YsQ0FDSSxNQUFPQSxFQUNQLEdBQUdELENBQ2YsRUFDVSxNQUNWLENDaERPLFNBQVNNLEdBQWdCN0UsRUFBS0ssRUFBTSxDQUN2QyxNQUFNeUUsRUFBYSxPQUFPOUUsRUFBSSxNQUM5QixPQUFJOEUsSUFBZSxVQUNmQSxJQUFlLFVBQ2ZBLElBQWUsV0FDZkEsSUFBZSxTQUNSLENBQ0gsS0FBTSxNQUFNLFFBQVE5RSxFQUFJLEtBQUssRUFBSSxRQUFVLFFBQzlDLEVBRURLLEVBQUssU0FBVyxXQUNULENBQ0gsS0FBTXlFLElBQWUsU0FBVyxVQUFZQSxFQUM1QyxLQUFNLENBQUM5RSxFQUFJLEtBQUssQ0FDbkIsRUFFRSxDQUNILEtBQU04RSxJQUFlLFNBQVcsVUFBWUEsRUFDNUMsTUFBTzlFLEVBQUksS0FDZCxDQUNMLENDbkJBLElBQUkrRSxHQU9HLE1BQU1DLEdBQWMsQ0FJdkIsS0FBTSxtQkFDTixNQUFPLGNBQ1AsS0FBTSwyQkFJTixNQUFPLG1HQVlQLE1BQU8sS0FDQ0QsS0FBZSxTQUNmQSxHQUFhLE9BQU8sdURBQXdELEdBQUcsR0FFNUVBLElBY1gsT0FBUSxtRUFDUixPQUFRLHFCQUNaLEVBQ08sU0FBU0UsR0FBZWpGLEVBQUtLLEVBQU0sQ0FDdEMsTUFBTUgsRUFBTSxDQUNSLEtBQU0sUUFDVCxFQUNELFNBQVNnRixFQUFlM0UsRUFBTyxDQUMzQixPQUFPRixFQUFLLGtCQUFvQixTQUFXOEUsR0FBc0I1RSxDQUFLLEVBQUlBLENBQ2xGLENBQ0ksR0FBSVAsRUFBSSxPQUNKLFVBQVdxRCxLQUFTckQsRUFBSSxPQUNwQixPQUFRcUQsRUFBTSxLQUFJLENBQ2QsSUFBSyxNQUNEL0MsRUFBMEJKLEVBQUssWUFBYSxPQUFPQSxFQUFJLFdBQWMsU0FBVyxLQUFLLElBQUlBLEVBQUksVUFBV21ELEVBQU0sS0FBSyxFQUFJQSxFQUFNLE1BQU9BLEVBQU0sUUFBU2hELENBQUksRUFDdkosTUFDSixJQUFLLE1BQ0RDLEVBQTBCSixFQUFLLFlBQWEsT0FBT0EsRUFBSSxXQUFjLFNBQVcsS0FBSyxJQUFJQSxFQUFJLFVBQVdtRCxFQUFNLEtBQUssRUFBSUEsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEVBQ3ZKLE1BQ0osSUFBSyxRQUNELE9BQVFBLEVBQUssY0FBYSxDQUN0QixJQUFLLGVBQ0QrRSxHQUFVbEYsRUFBSyxRQUFTbUQsRUFBTSxRQUFTaEQsQ0FBSSxFQUMzQyxNQUNKLElBQUssbUJBQ0QrRSxHQUFVbEYsRUFBSyxZQUFhbUQsRUFBTSxRQUFTaEQsQ0FBSSxFQUMvQyxNQUNKLElBQUssY0FDRGdGLEdBQVduRixFQUFLOEUsR0FBWSxNQUFPM0IsRUFBTSxRQUFTaEQsQ0FBSSxFQUN0RCxLQUM1QixDQUNvQixNQUNKLElBQUssTUFDRCtFLEdBQVVsRixFQUFLLE1BQU9tRCxFQUFNLFFBQVNoRCxDQUFJLEVBQ3pDLE1BQ0osSUFBSyxPQUNEK0UsR0FBVWxGLEVBQUssT0FBUW1ELEVBQU0sUUFBU2hELENBQUksRUFDMUMsTUFDSixJQUFLLFFBQ0RnRixHQUFXbkYsRUFBS21ELEVBQU0sTUFBT0EsRUFBTSxRQUFTaEQsQ0FBSSxFQUNoRCxNQUNKLElBQUssT0FDRGdGLEdBQVduRixFQUFLOEUsR0FBWSxLQUFNM0IsRUFBTSxRQUFTaEQsQ0FBSSxFQUNyRCxNQUNKLElBQUssUUFDRGdGLEdBQVduRixFQUFLOEUsR0FBWSxNQUFPM0IsRUFBTSxRQUFTaEQsQ0FBSSxFQUN0RCxNQUNKLElBQUssYUFDRGdGLEdBQVduRixFQUFLLE9BQU8sSUFBSWdGLEVBQWU3QixFQUFNLEtBQUssQ0FBQyxFQUFFLEVBQUdBLEVBQU0sUUFBU2hELENBQUksRUFDOUUsTUFDSixJQUFLLFdBQ0RnRixHQUFXbkYsRUFBSyxPQUFPLEdBQUdnRixFQUFlN0IsRUFBTSxLQUFLLENBQUMsR0FBRyxFQUFHQSxFQUFNLFFBQVNoRCxDQUFJLEVBQzlFLE1BQ0osSUFBSyxXQUNEK0UsR0FBVWxGLEVBQUssWUFBYW1ELEVBQU0sUUFBU2hELENBQUksRUFDL0MsTUFDSixJQUFLLE9BQ0QrRSxHQUFVbEYsRUFBSyxPQUFRbUQsRUFBTSxRQUFTaEQsQ0FBSSxFQUMxQyxNQUNKLElBQUssT0FDRCtFLEdBQVVsRixFQUFLLE9BQVFtRCxFQUFNLFFBQVNoRCxDQUFJLEVBQzFDLE1BQ0osSUFBSyxXQUNEK0UsR0FBVWxGLEVBQUssV0FBWW1ELEVBQU0sUUFBU2hELENBQUksRUFDOUMsTUFDSixJQUFLLFNBQ0RDLEVBQTBCSixFQUFLLFlBQWEsT0FBT0EsRUFBSSxXQUFjLFNBQVcsS0FBSyxJQUFJQSxFQUFJLFVBQVdtRCxFQUFNLEtBQUssRUFBSUEsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEVBQ3ZKQyxFQUEwQkosRUFBSyxZQUFhLE9BQU9BLEVBQUksV0FBYyxTQUFXLEtBQUssSUFBSUEsRUFBSSxVQUFXbUQsRUFBTSxLQUFLLEVBQUlBLEVBQU0sTUFBT0EsRUFBTSxRQUFTaEQsQ0FBSSxFQUN2SixNQUNKLElBQUssV0FBWSxDQUNiZ0YsR0FBV25GLEVBQUssT0FBT2dGLEVBQWU3QixFQUFNLEtBQUssQ0FBQyxFQUFHQSxFQUFNLFFBQVNoRCxDQUFJLEVBQ3hFLEtBQ3BCLENBQ2dCLElBQUssS0FBTSxDQUNIZ0QsRUFBTSxVQUFZLE1BQ2xCK0IsR0FBVWxGLEVBQUssT0FBUW1ELEVBQU0sUUFBU2hELENBQUksRUFFMUNnRCxFQUFNLFVBQVksTUFDbEIrQixHQUFVbEYsRUFBSyxPQUFRbUQsRUFBTSxRQUFTaEQsQ0FBSSxFQUU5QyxLQUNwQixDQUNnQixJQUFLLFFBQ0RnRixHQUFXbkYsRUFBSzhFLEdBQVksTUFBTzNCLEVBQU0sUUFBU2hELENBQUksRUFDdEQsTUFDSixJQUFLLE9BQVEsQ0FDVGdGLEdBQVduRixFQUFLOEUsR0FBWSxLQUFNM0IsRUFBTSxRQUFTaEQsQ0FBSSxFQUNyRCxLQUNwQixDQUNnQixJQUFLLFNBQVUsQ0FDWCxPQUFRQSxFQUFLLGVBQWMsQ0FDdkIsSUFBSyxnQkFBaUIsQ0FDbEIrRSxHQUFVbEYsRUFBSyxTQUFVbUQsRUFBTSxRQUFTaEQsQ0FBSSxFQUM1QyxLQUM1QixDQUN3QixJQUFLLHlCQUEwQixDQUMzQkMsRUFBMEJKLEVBQUssa0JBQW1CLFNBQVVtRCxFQUFNLFFBQVNoRCxDQUFJLEVBQy9FLEtBQzVCLENBQ3dCLElBQUssY0FBZSxDQUNoQmdGLEdBQVduRixFQUFLOEUsR0FBWSxPQUFRM0IsRUFBTSxRQUFTaEQsQ0FBSSxFQUN2RCxLQUM1QixDQUNBLENBQ29CLEtBQ3BCLENBQ2dCLElBQUssU0FDRGdGLEdBQVduRixFQUFLOEUsR0FBWSxPQUFRM0IsRUFBTSxRQUFTaEQsQ0FBSSxDQVEzRSxDQUdJLE9BQU9ILENBQ1gsQ0FDQSxNQUFNaUYsR0FBeUI1RSxHQUFVLE1BQU0sS0FBS0EsQ0FBSyxFQUNwRCxJQUFLK0UsR0FBTyxjQUFjLEtBQUtBLENBQUMsRUFBSUEsRUFBSSxLQUFLQSxDQUFDLEVBQUcsRUFDakQsS0FBSyxFQUFFLEVBQ05GLEdBQVksQ0FBQ1gsRUFBUWxFLEVBQU9zQyxFQUFTeEMsSUFBUyxPQUM1Q29FLEVBQU8sU0FBVXZCLEVBQUF1QixFQUFPLFFBQVAsTUFBQXZCLEVBQWMsS0FBTW9CLEdBQU1BLEVBQUUsU0FDeENHLEVBQU8sUUFDUkEsRUFBTyxNQUFRLENBQUUsR0FFakJBLEVBQU8sU0FDUEEsRUFBTyxNQUFNLEtBQUssQ0FDZCxPQUFRQSxFQUFPLE9BQ2YsR0FBSUEsRUFBTyxjQUNQcEUsRUFBSyxlQUFpQixDQUN0QixhQUFjLENBQUUsT0FBUW9FLEVBQU8sYUFBYSxNQUFRLENBQ3hFLENBQ0EsQ0FBYSxFQUNELE9BQU9BLEVBQU8sT0FDVkEsRUFBTyxlQUNQLE9BQU9BLEVBQU8sYUFBYSxPQUN2QixPQUFPLEtBQUtBLEVBQU8sWUFBWSxFQUFFLFNBQVcsR0FDNUMsT0FBT0EsRUFBTyxlQUkxQkEsRUFBTyxNQUFNLEtBQUssQ0FDZCxPQUFRbEUsRUFDUixHQUFJc0MsR0FBV3hDLEVBQUssZUFBaUIsQ0FBRSxhQUFjLENBQUUsT0FBUXdDLENBQU8sRUFDbEYsQ0FBUyxHQUdEdkMsRUFBMEJtRSxFQUFRLFNBQVVsRSxFQUFPc0MsRUFBU3hDLENBQUksQ0FFeEUsRUFDTWdGLEdBQWEsQ0FBQ1osRUFBUWMsRUFBTzFDLEVBQVN4QyxJQUFTLE9BQzdDb0UsRUFBTyxVQUFXdkIsRUFBQXVCLEVBQU8sUUFBUCxNQUFBdkIsRUFBYyxLQUFNb0IsR0FBTUEsRUFBRSxVQUN6Q0csRUFBTyxRQUNSQSxFQUFPLE1BQVEsQ0FBRSxHQUVqQkEsRUFBTyxVQUNQQSxFQUFPLE1BQU0sS0FBSyxDQUNkLFFBQVNBLEVBQU8sUUFDaEIsR0FBSUEsRUFBTyxjQUNQcEUsRUFBSyxlQUFpQixDQUN0QixhQUFjLENBQUUsUUFBU29FLEVBQU8sYUFBYSxPQUFTLENBQzFFLENBQ0EsQ0FBYSxFQUNELE9BQU9BLEVBQU8sUUFDVkEsRUFBTyxlQUNQLE9BQU9BLEVBQU8sYUFBYSxRQUN2QixPQUFPLEtBQUtBLEVBQU8sWUFBWSxFQUFFLFNBQVcsR0FDNUMsT0FBT0EsRUFBTyxlQUkxQkEsRUFBTyxNQUFNLEtBQUssQ0FDZCxRQUFTZSxHQUFjRCxFQUFPbEYsQ0FBSSxFQUNsQyxHQUFJd0MsR0FBV3hDLEVBQUssZUFBaUIsQ0FBRSxhQUFjLENBQUUsUUFBU3dDLENBQU8sRUFDbkYsQ0FBUyxHQUdEdkMsRUFBMEJtRSxFQUFRLFVBQVdlLEdBQWNELEVBQU9sRixDQUFJLEVBQUd3QyxFQUFTeEMsQ0FBSSxDQUU5RixFQUVNbUYsR0FBZ0IsQ0FBQ0MsRUFBaUJwRixJQUFTLE9BQzdDLE1BQU1rRixFQUFRLE9BQU9FLEdBQW9CLFdBQWFBLEVBQWlCLEVBQUdBLEVBQzFFLEdBQUksQ0FBQ3BGLEVBQUssaUJBQW1CLENBQUNrRixFQUFNLE1BQ2hDLE9BQU9BLEVBQU0sT0FFakIsTUFBTUcsRUFBUSxDQUNWLEVBQUdILEVBQU0sTUFBTSxTQUFTLEdBQUcsRUFDM0IsRUFBR0EsRUFBTSxNQUFNLFNBQVMsR0FBRyxFQUMzQixFQUFHQSxFQUFNLE1BQU0sU0FBUyxHQUFHLENBQzlCLEVBRUtJLEVBQVNELEVBQU0sRUFBSUgsRUFBTSxPQUFPLFlBQVcsRUFBS0EsRUFBTSxPQUM1RCxJQUFJSyxFQUFVLEdBQ1ZDLEVBQVksR0FDWkMsRUFBYyxHQUNkQyxFQUFjLEdBQ2xCLFFBQVM5SSxFQUFJLEVBQUdBLEVBQUkwSSxFQUFPLE9BQVExSSxJQUFLLENBQ3BDLEdBQUk0SSxFQUFXLENBQ1hELEdBQVdELEVBQU8xSSxDQUFDLEVBQ25CNEksRUFBWSxHQUNaLFFBQ1osQ0FDUSxHQUFJSCxFQUFNLEdBQ04sR0FBSUksR0FDQSxHQUFJSCxFQUFPMUksQ0FBQyxFQUFFLE1BQU0sT0FBTyxFQUFHLENBQ3RCOEksR0FDQUgsR0FBV0QsRUFBTzFJLENBQUMsRUFDbkIySSxHQUFXLEdBQUdELEVBQU8xSSxFQUFJLENBQUMsQ0FBQyxJQUFJMEksRUFBTzFJLENBQUMsQ0FBQyxHQUFHLFlBQWEsRUFDeEQ4SSxFQUFjLElBRVRKLEVBQU8xSSxFQUFJLENBQUMsSUFBTSxPQUFPaUcsRUFBQXlDLEVBQU8xSSxFQUFJLENBQUMsSUFBWixNQUFBaUcsRUFBZSxNQUFNLFdBQ25EMEMsR0FBV0QsRUFBTzFJLENBQUMsRUFDbkI4SSxFQUFjLElBR2RILEdBQVcsR0FBR0QsRUFBTzFJLENBQUMsQ0FBQyxHQUFHMEksRUFBTzFJLENBQUMsRUFBRSxZQUFXLENBQUUsR0FFckQsUUFDcEIsVUFFcUIwSSxFQUFPMUksQ0FBQyxFQUFFLE1BQU0sT0FBTyxFQUFHLENBQy9CMkksR0FBVyxJQUFJRCxFQUFPMUksQ0FBQyxDQUFDLEdBQUcwSSxFQUFPMUksQ0FBQyxFQUFFLFlBQWEsQ0FBQSxJQUNsRCxRQUNoQixFQUVRLEdBQUl5SSxFQUFNLEdBQ04sR0FBSUMsRUFBTzFJLENBQUMsSUFBTSxJQUFLLENBQ25CMkksR0FBVztBQUFBLEtBQ1gsUUFDaEIsU0FDcUJELEVBQU8xSSxDQUFDLElBQU0sSUFBSyxDQUN4QjJJLEdBQVc7QUFBQSxLQUNYLFFBQ2hCLEVBRVEsR0FBSUYsRUFBTSxHQUFLQyxFQUFPMUksQ0FBQyxJQUFNLElBQUssQ0FDOUIySSxHQUFXRSxFQUFjLEdBQUdILEVBQU8xSSxDQUFDLENBQUM7QUFBQSxFQUFTLElBQUkwSSxFQUFPMUksQ0FBQyxDQUFDO0FBQUEsR0FDM0QsUUFDWixDQUNRMkksR0FBV0QsRUFBTzFJLENBQUMsRUFDZjBJLEVBQU8xSSxDQUFDLElBQU0sS0FDZDRJLEVBQVksR0FFUEMsR0FBZUgsRUFBTzFJLENBQUMsSUFBTSxJQUNsQzZJLEVBQWMsR0FFVCxDQUFDQSxHQUFlSCxFQUFPMUksQ0FBQyxJQUFNLE1BQ25DNkksRUFBYyxHQUUxQixDQUNJLEdBQUksQ0FDQSxNQUFNRSxFQUFZLElBQUksT0FBT0osQ0FBTyxDQUM1QyxNQUNVLENBQ0YsZUFBUSxLQUFLLHNDQUFzQ3ZGLEVBQUssWUFBWSxLQUFLLEdBQUcsQ0FBQyx1RUFBdUUsRUFDN0lrRixFQUFNLE1BQ3JCLENBQ0ksT0FBT0ssQ0FDWCxFQ25UTyxTQUFTSyxHQUFlakcsRUFBS0ssRUFBTSxhQUN0QyxHQUFJQSxFQUFLLFNBQVcsY0FBYzZDLEVBQUFsRCxFQUFJLFVBQUosWUFBQWtELEVBQWEsS0FBSyxZQUFhSixFQUFzQixRQUNuRixNQUFPLENBQ0gsS0FBTSxTQUNOLFNBQVU5QyxFQUFJLFFBQVEsS0FBSyxPQUMzQixXQUFZQSxFQUFJLFFBQVEsS0FBSyxPQUFPLE9BQU8sQ0FBQ2tHLEVBQUsvRixLQUFTLENBQ3RELEdBQUcrRixFQUNILENBQUMvRixDQUFHLEVBQUdnRCxFQUFTbkQsRUFBSSxVQUFVLEtBQU0sQ0FDaEMsR0FBR0ssRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLGFBQWNGLENBQUcsQ0FDdkQsQ0FBQSxHQUFLLENBQUUsQ0FDWCxHQUFHLENBQUEsQ0FBRSxFQUNOLHFCQUFzQixFQUN6QixFQUVMLE1BQU1zRSxFQUFTLENBQ1gsS0FBTSxTQUNOLHFCQUFzQnRCLEVBQVNuRCxFQUFJLFVBQVUsS0FBTSxDQUMvQyxHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsc0JBQXNCLENBQzVELENBQUEsR0FBSyxDQUFFLENBQ1gsRUFDRCxHQUFJQSxFQUFLLFNBQVcsV0FDaEIsT0FBT29FLEVBRVgsS0FBSXhCLEVBQUFqRCxFQUFJLFVBQUosWUFBQWlELEVBQWEsS0FBSyxZQUFhSCxFQUFzQixhQUFhcUQsRUFBQW5HLEVBQUksUUFBUSxLQUFLLFNBQWpCLE1BQUFtRyxFQUF5QixRQUFRLENBQ25HLE1BQU1DLEVBQVUsT0FBTyxRQUFRbkIsR0FBZWpGLEVBQUksUUFBUSxLQUFNSyxDQUFJLENBQUMsRUFBRSxPQUFPLENBQUM2RixFQUFLLENBQUMvRixFQUFLSSxDQUFLLElBQU9KLElBQVEsT0FBUytGLEVBQU0sQ0FBRSxHQUFHQSxFQUFLLENBQUMvRixDQUFHLEVBQUdJLENBQU8sRUFBRyxDQUFBLENBQUUsRUFDMUosTUFBTyxDQUNILEdBQUdrRSxFQUNILGNBQWUyQixDQUNsQixDQUNULFdBQ2FDLEVBQUFyRyxFQUFJLFVBQUosWUFBQXFHLEVBQWEsS0FBSyxZQUFhdkQsRUFBc0IsUUFDMUQsTUFBTyxDQUNILEdBQUcyQixFQUNILGNBQWUsQ0FDWCxLQUFNekUsRUFBSSxRQUFRLEtBQUssTUFDMUIsQ0FDSixFQUVMLE9BQU95RSxDQUNYLENDMUNPLFNBQVM2QixHQUFZdEcsRUFBS0ssRUFBTSxDQUNuQyxHQUFJQSxFQUFLLGNBQWdCLFNBQ3JCLE9BQU80RixHQUFlakcsRUFBS0ssQ0FBSSxFQUVuQyxNQUFNZSxFQUFPK0IsRUFBU25ELEVBQUksUUFBUSxLQUFNLENBQ3BDLEdBQUdLLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxRQUFTLFFBQVMsR0FBRyxDQUMzRCxDQUFBLEdBQUssQ0FBRSxFQUNGa0csRUFBU3BELEVBQVNuRCxFQUFJLFVBQVUsS0FBTSxDQUN4QyxHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxRQUFTLEdBQUcsQ0FDM0QsQ0FBQSxHQUFLLENBQUUsRUFDUixNQUFPLENBQ0gsS0FBTSxRQUNOLFNBQVUsSUFDVixNQUFPLENBQ0gsS0FBTSxRQUNOLE1BQU8sQ0FBQ2UsRUFBTW1GLENBQU0sRUFDcEIsU0FBVSxFQUNWLFNBQVUsQ0FDYixDQUNKLENBQ0wsQ0N4Qk8sU0FBU0MsR0FBbUJ4RyxFQUFLLENBQ3BDLE1BQU1tQixFQUFTbkIsRUFBSSxPQUlieUcsRUFIYSxPQUFPLEtBQUt6RyxFQUFJLE1BQU0sRUFBRSxPQUFRRyxHQUN4QyxPQUFPZ0IsRUFBT0EsRUFBT2hCLENBQUcsQ0FBQyxHQUFNLFFBQ3pDLEVBQytCLElBQUtBLEdBQVFnQixFQUFPaEIsQ0FBRyxDQUFDLEVBQ2xEdUcsRUFBYyxNQUFNLEtBQUssSUFBSSxJQUFJRCxFQUFhLElBQUtGLEdBQVcsT0FBT0EsQ0FBTSxDQUFDLENBQUMsRUFDbkYsTUFBTyxDQUNILEtBQU1HLEVBQVksU0FBVyxFQUN6QkEsRUFBWSxDQUFDLElBQU0sU0FDZixTQUNFLFNBQ0osQ0FBQyxTQUFVLFFBQVEsRUFDekIsS0FBTUQsQ0FDVCxDQUNMLENDZk8sU0FBU0UsSUFBZ0IsQ0FDNUIsTUFBTyxDQUNILElBQUssQ0FBRSxDQUNWLENBQ0wsQ0NKTyxTQUFTQyxHQUFhdkcsRUFBTSxDQUMvQixPQUFPQSxFQUFLLFNBQVcsV0FDbkIsQ0FDSSxLQUFNLENBQUMsTUFBTSxFQUNiLFNBQVUsRUFDdEIsRUFDVSxDQUNFLEtBQU0sTUFDVCxDQUNULENDUk8sTUFBTXdHLEdBQW9CLENBQzdCLFVBQVcsU0FDWCxVQUFXLFNBQ1gsVUFBVyxVQUNYLFdBQVksVUFDWixRQUFTLE1BQ2IsRUFDTyxTQUFTQyxHQUFjOUcsRUFBS0ssRUFBTSxDQUNyQyxHQUFJQSxFQUFLLFNBQVcsV0FDaEIsT0FBTzBHLEdBQVEvRyxFQUFLSyxDQUFJLEVBQzVCLE1BQU1kLEVBQVVTLEVBQUksbUJBQW1CLElBQU0sTUFBTSxLQUFLQSxFQUFJLFFBQVEsUUFBUSxFQUFJQSxFQUFJLFFBRXBGLEdBQUlULEVBQVEsTUFBTytFLEdBQU1BLEVBQUUsS0FBSyxZQUFZdUMsS0FBc0IsQ0FBQ3ZDLEVBQUUsS0FBSyxRQUFVLENBQUNBLEVBQUUsS0FBSyxPQUFPLE9BQU8sRUFBRyxDQUV6RyxNQUFNMEMsRUFBUXpILEVBQVEsT0FBTyxDQUFDeUgsRUFBTzFDLElBQU0sQ0FDdkMsTUFBTUgsRUFBTzBDLEdBQWtCdkMsRUFBRSxLQUFLLFFBQVEsRUFDOUMsT0FBT0gsR0FBUSxDQUFDNkMsRUFBTSxTQUFTN0MsQ0FBSSxFQUFJLENBQUMsR0FBRzZDLEVBQU83QyxDQUFJLEVBQUk2QyxDQUM3RCxFQUFFLEVBQUUsRUFDTCxNQUFPLENBQ0gsS0FBTUEsRUFBTSxPQUFTLEVBQUlBLEVBQVFBLEVBQU0sQ0FBQyxDQUMzQyxDQUNULFNBQ2F6SCxFQUFRLE1BQU8rRSxHQUFNQSxFQUFFLEtBQUssV0FBYSxjQUFnQixDQUFDQSxFQUFFLFdBQVcsRUFBRyxDQUUvRSxNQUFNMEMsRUFBUXpILEVBQVEsT0FBTyxDQUFDMkcsRUFBSzVCLElBQU0sQ0FDckMsTUFBTUgsRUFBTyxPQUFPRyxFQUFFLEtBQUssTUFDM0IsT0FBUUgsRUFBSSxDQUNSLElBQUssU0FDTCxJQUFLLFNBQ0wsSUFBSyxVQUNELE1BQU8sQ0FBQyxHQUFHK0IsRUFBSy9CLENBQUksRUFDeEIsSUFBSyxTQUNELE1BQU8sQ0FBQyxHQUFHK0IsRUFBSyxTQUFTLEVBQzdCLElBQUssU0FDRCxHQUFJNUIsRUFBRSxLQUFLLFFBQVUsS0FDakIsTUFBTyxDQUFDLEdBQUc0QixFQUFLLE1BQU0sRUFDOUIsSUFBSyxTQUNMLElBQUssWUFDTCxJQUFLLFdBQ0wsUUFDSSxPQUFPQSxDQUMzQixDQUNTLEVBQUUsRUFBRSxFQUNMLEdBQUljLEVBQU0sU0FBV3pILEVBQVEsT0FBUSxDQUVqQyxNQUFNMEgsRUFBY0QsRUFBTSxPQUFPLENBQUMxQyxFQUFHLEVBQUc0QyxJQUFNQSxFQUFFLFFBQVE1QyxDQUFDLElBQU0sQ0FBQyxFQUNoRSxNQUFPLENBQ0gsS0FBTTJDLEVBQVksT0FBUyxFQUFJQSxFQUFjQSxFQUFZLENBQUMsRUFDMUQsS0FBTTFILEVBQVEsT0FBTyxDQUFDMkcsRUFBSzVCLElBQ2hCNEIsRUFBSSxTQUFTNUIsRUFBRSxLQUFLLEtBQUssRUFBSTRCLEVBQU0sQ0FBQyxHQUFHQSxFQUFLNUIsRUFBRSxLQUFLLEtBQUssRUFDaEUsRUFBRSxDQUNSLENBQ2IsQ0FDQSxTQUNhL0UsRUFBUSxNQUFPK0UsR0FBTUEsRUFBRSxLQUFLLFdBQWEsU0FBUyxFQUN2RCxNQUFPLENBQ0gsS0FBTSxTQUNOLEtBQU0vRSxFQUFRLE9BQU8sQ0FBQzJHLEVBQUs1QixJQUFNLENBQUMsR0FBRzRCLEVBQUssR0FBRzVCLEVBQUUsS0FBSyxPQUFPLE9BQVFBLEdBQU0sQ0FBQzRCLEVBQUksU0FBUzVCLENBQUMsQ0FBQyxDQUFDLEVBQUcsRUFBRSxDQUNsRyxFQUVMLE9BQU95QyxHQUFRL0csRUFBS0ssQ0FBSSxDQUM1QixDQUNBLE1BQU0wRyxHQUFVLENBQUMvRyxFQUFLSyxJQUFTLENBQzNCLE1BQU04RyxHQUFTbkgsRUFBSSxtQkFBbUIsSUFBTSxNQUFNLEtBQUtBLEVBQUksUUFBUSxRQUFRLEVBQUlBLEVBQUksU0FDOUUsSUFBSSxDQUFDc0UsRUFBR3JILElBQU1rRyxFQUFTbUIsRUFBRSxLQUFNLENBQ2hDLEdBQUdqRSxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxHQUFHcEQsQ0FBQyxFQUFFLENBQzFELENBQUssQ0FBQyxFQUNHLE9BQVFxSCxHQUFNLENBQUMsQ0FBQ0EsSUFBTSxDQUFDakUsRUFBSyxjQUFpQixPQUFPaUUsR0FBTSxVQUFZLE9BQU8sS0FBS0EsQ0FBQyxFQUFFLE9BQVMsRUFBRyxFQUN0RyxPQUFPNkMsRUFBTSxPQUFTLENBQUUsTUFBQUEsQ0FBTyxFQUFHLE1BQ3RDLEVDckVPLFNBQVNDLEdBQWlCcEgsRUFBS0ssRUFBTSxDQUN4QyxHQUFJLENBQUMsWUFBYSxZQUFhLFlBQWEsYUFBYyxTQUFTLEVBQUUsU0FBU0wsRUFBSSxVQUFVLEtBQUssUUFBUSxJQUNwRyxDQUFDQSxFQUFJLFVBQVUsS0FBSyxRQUFVLENBQUNBLEVBQUksVUFBVSxLQUFLLE9BQU8sUUFDMUQsT0FBSUssRUFBSyxTQUFXLFlBQWNBLEVBQUssbUJBQXFCLFdBQ2pELENBQ0gsS0FBTXdHLEdBQWtCN0csRUFBSSxVQUFVLEtBQUssUUFBUSxFQUNuRCxTQUFVLEVBQ2IsRUFFRSxDQUNILEtBQU0sQ0FBQzZHLEdBQWtCN0csRUFBSSxVQUFVLEtBQUssUUFBUSxFQUFHLE1BQU0sQ0FDaEUsRUFFTCxHQUFJSyxFQUFLLFNBQVcsV0FBWSxDQUM1QixNQUFNZ0gsRUFBT2xFLEVBQVNuRCxFQUFJLFVBQVUsS0FBTSxDQUN0QyxHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFdBQVcsQ0FDN0MsQ0FBUyxFQUNELE9BQUlnSCxHQUFRLFNBQVVBLEVBQ1gsQ0FBRSxNQUFPLENBQUNBLENBQUksRUFBRyxTQUFVLEVBQU0sRUFDckNBLEdBQVEsQ0FBRSxHQUFHQSxFQUFNLFNBQVUsRUFBTSxDQUNsRCxDQUNJLE1BQU1BLEVBQU9sRSxFQUFTbkQsRUFBSSxVQUFVLEtBQU0sQ0FDdEMsR0FBR0ssRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLFFBQVMsR0FBRyxDQUN2RCxDQUFLLEVBQ0QsT0FBT2dILEdBQVEsQ0FBRSxNQUFPLENBQUNBLEVBQU0sQ0FBRSxLQUFNLE1BQU0sQ0FBRSxDQUFHLENBQ3RELENDNUJPLFNBQVNDLEdBQWV0SCxFQUFLSyxFQUFNLENBQ3RDLE1BQU1ILEVBQU0sQ0FDUixLQUFNLFFBQ1QsRUFDRCxHQUFJLENBQUNGLEVBQUksT0FDTCxPQUFPRSxFQUNYLFVBQVdtRCxLQUFTckQsRUFBSSxPQUNwQixPQUFRcUQsRUFBTSxLQUFJLENBQ2QsSUFBSyxNQUNEbkQsRUFBSSxLQUFPLFVBQ1hELEdBQWdCQyxFQUFLLE9BQVFtRCxFQUFNLFFBQVNoRCxDQUFJLEVBQ2hELE1BQ0osSUFBSyxNQUNHQSxFQUFLLFNBQVcsY0FDWmdELEVBQU0sVUFDTi9DLEVBQTBCSixFQUFLLFVBQVdtRCxFQUFNLE1BQU9BLEVBQU0sUUFBU2hELENBQUksRUFHMUVDLEVBQTBCSixFQUFLLG1CQUFvQm1ELEVBQU0sTUFBT0EsRUFBTSxRQUFTaEQsQ0FBSSxHQUlsRmdELEVBQU0sWUFDUG5ELEVBQUksaUJBQW1CLElBRTNCSSxFQUEwQkosRUFBSyxVQUFXbUQsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEdBRTlFLE1BQ0osSUFBSyxNQUNHQSxFQUFLLFNBQVcsY0FDWmdELEVBQU0sVUFDTi9DLEVBQTBCSixFQUFLLFVBQVdtRCxFQUFNLE1BQU9BLEVBQU0sUUFBU2hELENBQUksRUFHMUVDLEVBQTBCSixFQUFLLG1CQUFvQm1ELEVBQU0sTUFBT0EsRUFBTSxRQUFTaEQsQ0FBSSxHQUlsRmdELEVBQU0sWUFDUG5ELEVBQUksaUJBQW1CLElBRTNCSSxFQUEwQkosRUFBSyxVQUFXbUQsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEdBRTlFLE1BQ0osSUFBSyxhQUNEQyxFQUEwQkosRUFBSyxhQUFjbUQsRUFBTSxNQUFPQSxFQUFNLFFBQVNoRCxDQUFJLEVBQzdFLEtBQ2hCLENBRUksT0FBT0gsQ0FDWCxDQ2xEQSxTQUFTcUgsR0FBMkJ2SCxFQUFLSyxFQUFNLENBQzNDLE9BQUlBLEVBQUssMkJBQTZCLFNBQzNCTCxFQUFJLFNBQVMsS0FBSyxXQUFhLFdBQ2xDQSxFQUFJLGNBQWdCLFNBQ2xCbUQsRUFBU25ELEVBQUksU0FBUyxLQUFNLENBQzFCLEdBQUdLLEVBQ0gsWUFBYSxDQUFDLEdBQUdBLEVBQUssWUFBYSxzQkFBc0IsQ0FDNUQsQ0FBQSxHQUFLLEdBR0hMLEVBQUksU0FBUyxLQUFLLFdBQWEsV0FDbENBLEVBQUksY0FBZ0IsY0FDbEJtRCxFQUFTbkQsRUFBSSxTQUFTLEtBQU0sQ0FDMUIsR0FBR0ssRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLHNCQUFzQixDQUM1RCxDQUFBLEdBQUssRUFFbEIsQ0FDTyxTQUFTbUgsR0FBZXhILEVBQUtLLEVBQU0sQ0FDdEMsTUFBTW9ILEVBQVMsQ0FDWCxLQUFNLFNBQ04sR0FBRyxPQUFPLFFBQVF6SCxFQUFJLE1BQU8sQ0FBQSxFQUFFLE9BQU8sQ0FBQ2tHLEVBQUssQ0FBQ3dCLEVBQVVDLENBQU8sSUFBTSxPQUNoRSxHQUFJQSxJQUFZLFFBQWFBLEVBQVEsT0FBUyxPQUMxQyxPQUFPekIsRUFDWCxNQUFNMEIsRUFBZSxDQUFDLEdBQUd2SCxFQUFLLFlBQWEsYUFBY3FILENBQVEsRUFDM0RHLEVBQVkxRSxFQUFTd0UsRUFBUSxLQUFNLENBQ3JDLEdBQUd0SCxFQUNILFlBQWF1SCxFQUNiLGFBQUFBLENBQ2hCLENBQWEsRUFDRCxHQUFJQyxJQUFjLE9BQ2QsT0FBTzNCLEVBQ1gsR0FBSTdGLEVBQUssa0JBQ0xzSCxFQUFRLFdBQVksR0FDcEIsQ0FBQ0EsRUFBUSxXQUFZLEdBQ3JCLFFBQU96RSxFQUFBeUUsRUFBUSxPQUFSLFlBQUF6RSxFQUFjLGNBQWlCLElBQ3RDLE1BQU0sSUFBSSxNQUFNLGtCQUFrQjBFLEVBQWEsS0FBSyxHQUFHLENBQUMsbU1BQW1NLEVBRS9QLE1BQU8sQ0FDSCxXQUFZLENBQ1IsR0FBRzFCLEVBQUksV0FDUCxDQUFDd0IsQ0FBUSxFQUFHRyxDQUNmLEVBQ0QsU0FBVUYsRUFBUSxXQUFZLEdBQUksQ0FBQ3RILEVBQUssaUJBQW1CNkYsRUFBSSxTQUFXLENBQUMsR0FBR0EsRUFBSSxTQUFVd0IsQ0FBUSxDQUN2RyxDQUNKLEVBQUUsQ0FBRSxXQUFZLENBQUEsRUFBSSxTQUFVLENBQUUsQ0FBQSxDQUFFLEVBQ25DLHFCQUFzQkgsR0FBMkJ2SCxFQUFLSyxDQUFJLENBQzdELEVBQ0QsT0FBS29ILEVBQU8sU0FBUyxRQUNqQixPQUFPQSxFQUFPLFNBQ1hBLENBQ1gsQ0NuRE8sTUFBTUssR0FBbUIsQ0FBQzlILEVBQUtLLElBQVMsT0FDM0MsR0FBSUEsRUFBSyxZQUFZLFNBQVEsTUFBTzZDLEVBQUE3QyxFQUFLLGVBQUwsWUFBQTZDLEVBQW1CLFlBQ25ELE9BQU9DLEVBQVNuRCxFQUFJLFVBQVUsS0FBTUssQ0FBSSxFQUU1QyxNQUFNMEgsRUFBYzVFLEVBQVNuRCxFQUFJLFVBQVUsS0FBTSxDQUM3QyxHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxHQUFHLENBQ3ZELENBQUssRUFDRCxPQUFPMEgsRUFDSCxDQUNJLE1BQU8sQ0FDSCxDQUNJLElBQUssQ0FBRSxDQUNWLEVBQ0RBLENBQ0gsQ0FDYixFQUNVLENBQUUsQ0FDWixFQ2xCYUMsR0FBbUIsQ0FBQ2hJLEVBQUtLLElBQVMsQ0FDM0MsR0FBSUEsRUFBSyxlQUFpQixRQUN0QixPQUFPOEMsRUFBU25ELEVBQUksR0FBRyxLQUFNSyxDQUFJLEVBRWhDLEdBQUlBLEVBQUssZUFBaUIsU0FDM0IsT0FBTzhDLEVBQVNuRCxFQUFJLElBQUksS0FBTUssQ0FBSSxFQUV0QyxNQUFNNkcsRUFBSS9ELEVBQVNuRCxFQUFJLEdBQUcsS0FBTSxDQUM1QixHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsUUFBUyxHQUFHLENBQ3ZELENBQUssRUFDSzRILEVBQUk5RSxFQUFTbkQsRUFBSSxJQUFJLEtBQU0sQ0FDN0IsR0FBR0ssRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLFFBQVM2RyxFQUFJLElBQU0sR0FBRyxDQUNqRSxDQUFLLEVBQ0QsTUFBTyxDQUNILE1BQU8sQ0FBQ0EsRUFBR2UsQ0FBQyxFQUFFLE9BQVEzRCxHQUFNQSxJQUFNLE1BQVMsQ0FDOUMsQ0FDTCxFQ2xCTyxTQUFTNEQsR0FBZ0JsSSxFQUFLSyxFQUFNLENBQ3ZDLE9BQU84QyxFQUFTbkQsRUFBSSxLQUFLLEtBQU1LLENBQUksQ0FDdkMsQ0NETyxTQUFTOEgsR0FBWW5JLEVBQUtLLEVBQU0sQ0FLbkMsTUFBTW9FLEVBQVMsQ0FDWCxLQUFNLFFBQ04sWUFBYSxHQUNiLE1BUFV0QixFQUFTbkQsRUFBSSxVQUFVLEtBQU0sQ0FDdkMsR0FBR0ssRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLE9BQU8sQ0FDbEQsQ0FBSyxDQUtBLEVBQ0QsT0FBSUwsRUFBSSxTQUNKTSxFQUEwQm1FLEVBQVEsV0FBWXpFLEVBQUksUUFBUSxNQUFPQSxFQUFJLFFBQVEsUUFBU0ssQ0FBSSxFQUUxRkwsRUFBSSxTQUNKTSxFQUEwQm1FLEVBQVEsV0FBWXpFLEVBQUksUUFBUSxNQUFPQSxFQUFJLFFBQVEsUUFBU0ssQ0FBSSxFQUV2Rm9FLENBQ1gsQ0NsQk8sU0FBUzJELEdBQWNwSSxFQUFLSyxFQUFNLENBQ3JDLE9BQUlMLEVBQUksS0FDRyxDQUNILEtBQU0sUUFDTixTQUFVQSxFQUFJLE1BQU0sT0FDcEIsTUFBT0EsRUFBSSxNQUNOLElBQUksQ0FBQ3NFLEVBQUdySCxJQUFNa0csRUFBU21CLEVBQUUsS0FBTSxDQUNoQyxHQUFHakUsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLFFBQVMsR0FBR3BELENBQUMsRUFBRSxDQUNsRSxDQUFhLENBQUMsRUFDRyxPQUFPLENBQUNpSixFQUFLNUIsSUFBT0EsSUFBTSxPQUFZNEIsRUFBTSxDQUFDLEdBQUdBLEVBQUs1QixDQUFDLEVBQUksQ0FBQSxDQUFFLEVBQ2pFLGdCQUFpQm5CLEVBQVNuRCxFQUFJLEtBQUssS0FBTSxDQUNyQyxHQUFHSyxFQUNILFlBQWEsQ0FBQyxHQUFHQSxFQUFLLFlBQWEsaUJBQWlCLENBQ3BFLENBQWEsQ0FDSixFQUdNLENBQ0gsS0FBTSxRQUNOLFNBQVVMLEVBQUksTUFBTSxPQUNwQixTQUFVQSxFQUFJLE1BQU0sT0FDcEIsTUFBT0EsRUFBSSxNQUNOLElBQUksQ0FBQ3NFLEVBQUdySCxJQUFNa0csRUFBU21CLEVBQUUsS0FBTSxDQUNoQyxHQUFHakUsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxZQUFhLFFBQVMsR0FBR3BELENBQUMsRUFBRSxDQUNsRSxDQUFhLENBQUMsRUFDRyxPQUFPLENBQUNpSixFQUFLNUIsSUFBT0EsSUFBTSxPQUFZNEIsRUFBTSxDQUFDLEdBQUdBLEVBQUs1QixDQUFDLEVBQUksQ0FBQSxDQUFFLENBQ3BFLENBRVQsQ0MvQk8sU0FBUytELElBQW9CLENBQ2hDLE1BQU8sQ0FDSCxJQUFLLENBQUUsQ0FDVixDQUNMLENDSk8sU0FBU0MsSUFBa0IsQ0FDOUIsTUFBTyxDQUFFLENBQ2IsQ0NETyxNQUFNQyxHQUFtQixDQUFDdkksRUFBS0ssSUFDM0I4QyxFQUFTbkQsRUFBSSxVQUFVLEtBQU1LLENBQUksRUM4QnJDLFNBQVM4QyxFQUFTbkQsRUFBS0ssRUFBTTJELEVBQWtCLEdBQU8sT0FDekQsTUFBTXdFLEVBQVduSSxFQUFLLEtBQUssSUFBSUwsQ0FBRyxFQUNsQyxHQUFJSyxFQUFLLFNBQVUsQ0FDZixNQUFNb0ksR0FBaUJ2RixFQUFBN0MsRUFBSyxXQUFMLFlBQUE2QyxFQUFBLEtBQUE3QyxFQUFnQkwsRUFBS0ssRUFBTW1JLEVBQVV4RSxHQUM1RCxHQUFJeUUsSUFBbUJySixHQUNuQixPQUFPcUosQ0FFbkIsQ0FDSSxHQUFJRCxHQUFZLENBQUN4RSxFQUFpQixDQUM5QixNQUFNMEUsRUFBYUMsR0FBUUgsRUFBVW5JLENBQUksRUFDekMsR0FBSXFJLElBQWUsT0FDZixNQUFJLFNBQVVBLEdBQ1ZySSxFQUFLLFNBQVMsSUFBSXFJLEVBQVcsSUFBSSxFQUU5QkEsQ0FFbkIsQ0FDSSxNQUFNL0ssRUFBVSxDQUFFLElBQUFxQyxFQUFLLEtBQU1LLEVBQUssWUFBYSxXQUFZLE1BQVcsRUFDdEVBLEVBQUssS0FBSyxJQUFJTCxFQUFLckMsQ0FBTyxFQUMxQixNQUFNaUwsRUFBYUMsR0FBYTdJLEVBQUtBLEVBQUksU0FBVUssRUFBTTJELENBQWUsRUFDeEUsT0FBSTRFLEdBQ0FFLEdBQVE5SSxFQUFLSyxFQUFNdUksQ0FBVSxFQUVqQ2pMLEVBQVEsV0FBYWlMLEVBQ2RBLENBQ1gsQ0FDQSxNQUFNRCxHQUFVLENBQUN0TCxFQUFNZ0QsSUFBUyxDQUM1QixPQUFRQSxFQUFLLGFBQVksQ0FDckIsSUFBSyxPQUNELE1BQU8sQ0FBRSxLQUFNaEQsRUFBSyxLQUFLLEtBQUssR0FBRyxDQUFHLEVBU3hDLElBQUssa0JBQ0QsTUFBTTBDLEVBQU8xQyxFQUFLLEtBQUssTUFBTWdELEVBQUssU0FBUyxPQUFTLENBQUMsRUFBRSxLQUFLLEdBQUcsRUFHL0QsT0FBSU4sSUFBU00sRUFBSyxNQUFRQSxFQUFLLGVBQWlCLGtCQUM1Q0EsRUFBSyxZQUFZTixDQUFJLEVBQUkxQyxFQUFLLEtBRTNCLENBQUUsS0FBTSxDQUFDLEdBQUdnRCxFQUFLLFNBQVVBLEVBQUssZUFBZ0JOLENBQUksRUFBRSxLQUFLLEdBQUcsQ0FBRyxFQUM1RSxJQUFLLFdBQ0QsTUFBTyxDQUFFLEtBQU1nSixHQUFnQjFJLEVBQUssWUFBYWhELEVBQUssSUFBSSxDQUFHLEVBQ2pFLElBQUssT0FDTCxJQUFLLE9BQ0QsT0FBSUEsRUFBSyxLQUFLLE9BQVNnRCxFQUFLLFlBQVksUUFDcENoRCxFQUFLLEtBQUssTUFBTSxDQUFDa0QsRUFBT3lJLElBQVUzSSxFQUFLLFlBQVkySSxDQUFLLElBQU16SSxDQUFLLEdBQ25FLFFBQVEsS0FBSyxtQ0FBbUNGLEVBQUssWUFBWSxLQUFLLEdBQUcsQ0FBQyxxQkFBcUIsRUFDeEYsQ0FBRSxHQUVOQSxFQUFLLGVBQWlCLE9BQVMsQ0FBRSxFQUFHLE1BRXZELENBQ0EsRUFDTTBJLEdBQWtCLENBQUNFLEVBQU9DLElBQVUsQ0FDdEMsSUFBSWpNLEVBQUksRUFDUixLQUFPQSxFQUFJZ00sRUFBTSxRQUFVaE0sRUFBSWlNLEVBQU0sUUFDN0JELEVBQU1oTSxDQUFDLElBQU1pTSxFQUFNak0sQ0FBQyxFQURpQkEsSUFDekMsQ0FHSixNQUFPLEVBQUVnTSxFQUFNLE9BQVNoTSxHQUFHLFNBQVUsRUFBRSxHQUFHaU0sRUFBTSxNQUFNak0sQ0FBQyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQ3RFLEVBQ000TCxHQUFlLENBQUM3SSxFQUFLbUosRUFBVTlJLEVBQU0yRCxJQUFvQixDQUMzRCxPQUFRbUYsRUFBUSxDQUNaLEtBQUtyRyxFQUFzQixVQUN2QixPQUFPbUMsR0FBZWpGLEVBQUtLLENBQUksRUFDbkMsS0FBS3lDLEVBQXNCLFVBQ3ZCLE9BQU93RSxHQUFldEgsRUFBS0ssQ0FBSSxFQUNuQyxLQUFLeUMsRUFBc0IsVUFDdkIsT0FBTzBFLEdBQWV4SCxFQUFLSyxDQUFJLEVBQ25DLEtBQUt5QyxFQUFzQixVQUN2QixPQUFPTSxHQUFlcEQsRUFBS0ssQ0FBSSxFQUNuQyxLQUFLeUMsRUFBc0IsV0FDdkIsT0FBT1EsR0FBaUIsRUFDNUIsS0FBS1IsRUFBc0IsUUFDdkIsT0FBT1ksR0FBYTFELEVBQUtLLENBQUksRUFDakMsS0FBS3lDLEVBQXNCLGFBQ3ZCLE9BQU91RixHQUFtQixFQUM5QixLQUFLdkYsRUFBc0IsUUFDdkIsT0FBTzhELEdBQWF2RyxDQUFJLEVBQzVCLEtBQUt5QyxFQUFzQixTQUN2QixPQUFPRSxHQUFjaEQsRUFBS0ssQ0FBSSxFQUNsQyxLQUFLeUMsRUFBc0IsU0FDM0IsS0FBS0EsRUFBc0Isc0JBQ3ZCLE9BQU9nRSxHQUFjOUcsRUFBS0ssQ0FBSSxFQUNsQyxLQUFLeUMsRUFBc0IsZ0JBQ3ZCLE9BQU9zQixHQUFxQnBFLEVBQUtLLENBQUksRUFDekMsS0FBS3lDLEVBQXNCLFNBQ3ZCLE9BQU9zRixHQUFjcEksRUFBS0ssQ0FBSSxFQUNsQyxLQUFLeUMsRUFBc0IsVUFDdkIsT0FBT21ELEdBQWVqRyxFQUFLSyxDQUFJLEVBQ25DLEtBQUt5QyxFQUFzQixXQUN2QixPQUFPK0IsR0FBZ0I3RSxFQUFLSyxDQUFJLEVBQ3BDLEtBQUt5QyxFQUFzQixRQUN2QixPQUFPbUIsR0FBYWpFLENBQUcsRUFDM0IsS0FBSzhDLEVBQXNCLGNBQ3ZCLE9BQU8wRCxHQUFtQnhHLENBQUcsRUFDakMsS0FBSzhDLEVBQXNCLFlBQ3ZCLE9BQU9zRSxHQUFpQnBILEVBQUtLLENBQUksRUFDckMsS0FBS3lDLEVBQXNCLFlBQ3ZCLE9BQU9nRixHQUFpQjlILEVBQUtLLENBQUksRUFDckMsS0FBS3lDLEVBQXNCLE9BQ3ZCLE9BQU93RCxHQUFZdEcsRUFBS0ssQ0FBSSxFQUNoQyxLQUFLeUMsRUFBc0IsT0FDdkIsT0FBT3FGLEdBQVluSSxFQUFLSyxDQUFJLEVBQ2hDLEtBQUt5QyxFQUFzQixRQUN2QixPQUFPSyxFQUFTbkQsRUFBSSxPQUFNLEVBQUcsS0FBTUssQ0FBSSxFQUMzQyxLQUFLeUMsRUFBc0IsV0FDdkIsT0FBT29GLEdBQWdCbEksRUFBS0ssQ0FBSSxFQUNwQyxLQUFLeUMsRUFBc0IsT0FDM0IsS0FBS0EsRUFBc0IsU0FDdkIsT0FBTzZELEdBQWUsRUFDMUIsS0FBSzdELEVBQXNCLFdBQ3ZCLE9BQU9pQixHQUFnQi9ELEVBQUtLLEVBQU0yRCxDQUFlLEVBQ3JELEtBQUtsQixFQUFzQixPQUN2QixPQUFPQyxHQUFhLEVBQ3hCLEtBQUtELEVBQXNCLFdBQ3ZCLE9BQU93RixHQUFpQixFQUM1QixLQUFLeEYsRUFBc0IsV0FDdkIsT0FBT2dCLEdBQWdCOUQsRUFBS0ssQ0FBSSxFQUNwQyxLQUFLeUMsRUFBc0IsV0FDdkIsT0FBT1MsR0FBZ0J2RCxFQUFLSyxDQUFJLEVBQ3BDLEtBQUt5QyxFQUFzQixZQUN2QixPQUFPeUYsR0FBaUJ2SSxFQUFLSyxDQUFJLEVBQ3JDLEtBQUt5QyxFQUFzQixTQUN2QixPQUFPVyxHQUFjekQsRUFBS0ssQ0FBSSxFQUNsQyxLQUFLeUMsRUFBc0IsWUFDdkIsT0FBT2tGLEdBQWlCaEksRUFBS0ssQ0FBSSxFQUNyQyxLQUFLeUMsRUFBc0IsWUFDM0IsS0FBS0EsRUFBc0IsUUFDM0IsS0FBS0EsRUFBc0IsVUFDdkIsT0FDSixRQUNJLE9BQVNyQyxHQUFNLElBQW1CLENBQzlDLENBQ0EsRUFDTXFJLEdBQVUsQ0FBQzlJLEVBQUtLLEVBQU11SSxLQUNwQjVJLEVBQUksY0FDSjRJLEVBQVcsWUFBYzVJLEVBQUksWUFDekJLLEVBQUssc0JBQ0x1SSxFQUFXLG9CQUFzQjVJLEVBQUksY0FHdEM0SSxHQ2pMTFEsR0FBa0IsQ0FBQzNFLEVBQVFsRixJQUFZLENBQ3pDLE1BQU1jLEVBQU9ULEdBQVFMLENBQU8sRUFDdEJRLEVBQU8sT0FBT1IsR0FBWSxTQUFXQSxHQUNyQ0EsR0FBQSxZQUFBQSxFQUFTLGdCQUFpQixTQUN0QkEsR0FBQSxLQURnQyxPQUNoQ0EsRUFBUyxLQUNiOEosRUFBT2xHLEVBQVNzQixFQUFPLEtBQU0xRSxJQUFTLE9BQVlNLEVBQVEsQ0FDNUQsR0FBR0EsRUFDSCxZQUFhLENBQUMsR0FBR0EsRUFBSyxTQUFVQSxFQUFLLGVBQWdCTixDQUFJLENBQ2pFLEVBQVEsRUFBSyxHQUFLLENBQUUsRUFDVnVKLEVBQVEsT0FBTy9KLEdBQVksVUFBWUEsRUFBUSxPQUFTLFFBQWFBLEVBQVEsZUFBaUIsUUFDaEdBLEVBQVEsS0FDTixPQUNGK0osSUFBVSxTQUNWRCxFQUFLLE1BQVFDLEdBRWpCLE1BQU1DLEdBQWUsSUFBTSxDQUN2QixHQUFJN0osR0FBV1csRUFBSyxXQUFXLEVBQzNCLE9BRUosTUFBTWtKLEVBQWMsQ0FBRSxFQUNoQkMsRUFBdUIsSUFBSSxJQU1qQyxRQUFTdk0sRUFBSSxFQUFHQSxFQUFJLElBQUtBLElBQUssQ0FDMUIsTUFBTXdNLEVBQWlCLE9BQU8sUUFBUXBKLEVBQUssV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDRixDQUFHLElBQU0sQ0FBQ3FKLEVBQXFCLElBQUlySixDQUFHLENBQUMsRUFDeEcsR0FBSXNKLEVBQWUsU0FBVyxFQUMxQixNQUNKLFNBQVcsQ0FBQ3RKLEVBQUtzRSxDQUFNLElBQUtnRixFQUN4QkYsRUFBWXBKLENBQUcsRUFDWGdELEVBQVMzRCxHQUFPaUYsQ0FBTSxFQUFHLENBQUUsR0FBR3BFLEVBQU0sWUFBYSxDQUFDLEdBQUdBLEVBQUssU0FBVUEsRUFBSyxlQUFnQkYsQ0FBRyxDQUFHLEVBQUUsRUFBSSxHQUFLLENBQUUsRUFDaEhxSixFQUFxQixJQUFJckosQ0FBRyxDQUU1QyxDQUNRLE9BQU9vSixDQUNmLEdBQVEsRUFDRUcsRUFBVzNKLElBQVMsT0FDdEJ3SixFQUNJLENBQ0ksR0FBR0YsRUFDSCxDQUFDaEosRUFBSyxjQUFjLEVBQUdrSixDQUN2QyxFQUNjRixFQUNKaEosRUFBSyxlQUFpQixnQkFDcEIsQ0FDSSxHQUFHZ0osRUFDSCxHQUFJRSxHQUFlbEosRUFBSyxTQUFTLEtBQzdCLENBQ0ksQ0FBQ0EsRUFBSyxjQUFjLEVBQUcsQ0FDbkIsR0FBR2tKLEVBR0gsR0FBSWxKLEVBQUssU0FBUyxLQUFPLENBQUUsQ0FBQ04sQ0FBSSxFQUFHc0osQ0FBTSxFQUFHLE1BQy9DLENBQ3pCLEVBQ3NCLE1BQ3RCLEVBQ2MsQ0FDRSxLQUFNLENBQUMsR0FBSWhKLEVBQUssZUFBaUIsV0FBYSxDQUFBLEVBQUtBLEVBQUssU0FBV0EsRUFBSyxlQUFnQk4sQ0FBSSxFQUFFLEtBQUssR0FBRyxFQUN0RyxDQUFDTSxFQUFLLGNBQWMsRUFBRyxDQUNuQixHQUFHa0osRUFDSCxDQUFDeEosQ0FBSSxFQUFHc0osQ0FDWCxDQUNKLEVBQ1QsT0FBSWhKLEVBQUssU0FBVyxjQUNoQnFKLEVBQVMsUUFBVSwwQ0FFZHJKLEVBQUssU0FBVyxzQkFDckJxSixFQUFTLFFBQVUsaURBRWhCQSxDQUNYLEVDa0JPLFNBQVNDLEdBQTBCQyxFQUFNLENBQUUsT0FBQTFLLEVBQVEsU0FBQTJLLENBQVEsRUFBSyxDQUNuRSxNQUFNMUssRUFBTSxDQUFFLEdBQUd5SyxDQUFNLEVBQ3ZCLGNBQU8saUJBQWlCekssRUFBSyxDQUN6QixPQUFRLENBQ0osTUFBTyxzQkFDUCxXQUFZLEVBQ2YsRUFDRCxVQUFXLENBQ1AsTUFBT0QsRUFDUCxXQUFZLEVBQ2YsRUFDRCxVQUFXLENBQ1AsTUFBTzJLLEVBQ1AsV0FBWSxFQUNmLENBQ1QsQ0FBSyxFQUNNMUssQ0FDWCxDQzVHQSxTQUFTaUssR0FBZ0IzRSxFQUFRbEYsRUFBUyxDQUN0QyxPQUFPdUssR0FBaUJyRixFQUFRLENBQzVCLGlCQUFrQixHQUNsQixLQUFNbEYsRUFBUSxLQUNkLGFBQWMsZ0JBQ2QsYUFBYyxrQkFDZCxpQkFBa0IsVUFDMUIsQ0FBSyxDQUNMLENBaURPLFNBQVN3SyxHQUFjQyxFQUFXakssRUFBTWtLLEVBQU8sQ0FDbEQsT0FBT2pMLEdBQXdCLENBQzNCLEtBQU0sY0FDTixHQUFHaUwsRUFDSCxLQUFBbEssRUFDQSxPQUFRLEdBQ1IsT0FBUXFKLEdBQWdCWSxFQUFXLENBQUUsS0FBQWpLLENBQUksQ0FBRSxDQUNuRCxFQUFRbUssR0FBWUYsRUFBVSxNQUFNLEtBQUssTUFBTUUsQ0FBTyxDQUFDLENBQUMsQ0FDeEQsQ0FxQk8sU0FBU0MsR0FBcUI1SyxFQUFTLENBQzFDLE9BQU9vSyxHQUEwQixDQUM3QixLQUFNLFdBQ04sS0FBTXBLLEVBQVEsS0FDZCxXQUFZNkosR0FBZ0I3SixFQUFRLFdBQVksQ0FBRSxLQUFNQSxFQUFRLEtBQU0sRUFDdEUsT0FBUSxFQUVoQixFQUFPLENBQ0MsU0FBVUEsRUFBUSxTQUNsQixPQUFTNkssR0FBUzdLLEVBQVEsV0FBVyxNQUFNLEtBQUssTUFBTTZLLENBQUksQ0FBQyxDQUNuRSxDQUFLLENBQ0wsQ0NqR08sTUFBTUMsV0FBb0IsS0FBTSxDQUVuQyxZQUFZeEgsRUFBU3lILEVBQU8sQ0FDeEIsTUFBTXpILENBQU8sRUFGakIwSCxFQUFBLGNBR0ksS0FBSyxNQUFRRCxDQUNyQixDQUNBLENBS08sTUFBTUUsV0FBb0JILEVBQVksQ0FDN0MsQ0FJTyxNQUFNSSxXQUE4QkosRUFBWSxDQUN2RCxDQUlPLE1BQU1LLFdBQTJCTCxFQUFZLENBQ3BELENBSU8sTUFBTU0sVUFBa0JOLEVBQVksQ0FDM0MsQ0FJTyxNQUFNTyxXQUFnQ1AsRUFBWSxDQUVyRCxZQUFZeEgsRUFBUzlELEVBQU91TCxFQUFPLENBQy9CLE1BQU16SCxFQUFTeUgsQ0FBSyxFQUZ4QkMsRUFBQSxjQUdJLEtBQUssTUFBUXhMLENBQ3JCLENBQ0EsQ0FJTyxNQUFNOEwsV0FBc0JSLEVBQVksQ0FFM0MsWUFBWXhILEVBQVM5RCxFQUFPdUwsRUFBTyxDQUMvQixNQUFNekgsRUFBU3lILENBQUssRUFGeEJDLEVBQUEsY0FHSSxLQUFLLE1BQVF4TCxDQUNyQixDQUNBLENBSU8sTUFBTStMLFdBQXdDVCxFQUFZLENBRTdELFlBQVl4SCxFQUFTNEUsRUFBUTZDLEVBQU8sQ0FDaEMsTUFBTXpILEVBQVN5SCxDQUFLLEVBRnhCQyxFQUFBLGVBR0ksS0FBSyxPQUFTOUMsQ0FDdEIsQ0FDQSxDQUlPLE1BQU1zRCxXQUF5Q1YsRUFBWSxDQUU5RCxZQUFZeEgsRUFBUzRFLEVBQVE2QyxFQUFPLENBQ2hDLE1BQU16SCxFQUFTeUgsQ0FBSyxFQUZ4QkMsRUFBQSxlQUdJLEtBQUssT0FBUzlDLENBQ3RCLENBQ0EsQ0NoRU8sU0FBU3VELEdBQVlDLEVBQU8sQ0FDL0IsT0FBUSxPQUFPQSxHQUFVLFVBQ3JCQSxJQUFVLE1BQ1YsU0FBVUEsR0FDVixPQUFPQSxFQUFNLE1BQVMsVUFDdEJBLEVBQU0sT0FBUyxNQUNmLGFBQWNBLEVBQU0sTUFDcEJBLEVBQU0sS0FBSyxXQUFhLFdBQ2hDLENBTU8sU0FBU0MsR0FBaUJELEVBQU8sQ0FDcEMsT0FBUSxPQUFPQSxHQUFVLFVBQ3JCQSxJQUFVLE1BQ1YsVUFBV0EsR0FDWCxPQUFPQSxFQUFNLE9BQVUsUUFDL0IsQ0NoQk8sU0FBU0UsR0FBbUJwTCxFQUFNLENBTXJDLEdBSkFBLEVBQU9BLEVBQUssUUFBUSxNQUFPLEdBQUcsRUFFOUJBLEVBQU9BLEVBQUssUUFBUSxnQkFBaUIsR0FBRyxFQUVwQ0EsRUFBSyxTQUFXLEVBQ2hCLE1BQU0sSUFBSSxNQUFNLDJCQUEyQixFQUUvQyxPQUFPQSxDQUNYLENBU08sU0FBU3FMLEdBQWdDQyxFQUFXdEwsRUFBTSxDQUM3RCxNQUFNYixFQUFVK0wsR0FBVSxLQUFLLE1BQU1BLENBQUssRUFDMUMsR0FBSUQsR0FBWUssQ0FBUyxFQUFHLENBQ3hCLE1BQU1DLEVBQW9CbkIsR0FBcUIsQ0FDM0MsS0FBQXBLLEVBQ0EsV0FBWXNMLEVBQ1osU0FBVSxJQUFNLENBQUEsQ0FFcEIsQ0FBQyxFQUNELE1BQU8sQ0FDSCxPQUFRQyxFQUFrQixXQUMxQixPQUFRQSxFQUFrQixTQUM3QixDQUNULFNBQ2EsT0FBT0QsR0FBYyxVQUFZQSxJQUFjLEtBQ3BELE1BQU8sQ0FDSCxPQUFRQSxFQUNSLE9BQUFuTSxDQUNILEVBRUwsTUFBTSxJQUFJeUwsRUFBVSxzREFBc0QsQ0FDOUUsQ0FJTyxTQUFTWSxHQUFxQ0MsRUFBWSxDQUM3RCxHQUFJQSxJQUFlLE9BQ2YsTUFBTyxPQUVYLEdBQUlSLEdBQVlRLENBQVUsRUFBRyxDQUN6QixNQUFNQyxFQUFTMUIsR0FBY3lCLEVBQVksUUFBUSxFQUNqRCxNQUFPLENBQ0gsS0FBTUMsRUFBTyxLQUNiLEtBQU1BLEVBQU8sS0FDYixPQUFRQSxFQUFPLFFBQVUsR0FDekIsT0FBUUEsRUFBTyxNQUNsQixDQUNULENBQ0ksT0FBT0QsQ0FDWCxtS0MvREEsSUFBSUUsRUFBSSxJQUNKQyxFQUFJRCxFQUFJLEdBQ1JFLEVBQUlELEVBQUksR0FDUkUsRUFBSUQsRUFBSSxHQUNSRSxFQUFJRCxFQUFJLEVBQ1JFLEVBQUlGLEVBQUksT0FnQlpHLEdBQWlCLFNBQVV6SyxFQUFLaEMsRUFBUyxDQUN2Q0EsRUFBVUEsR0FBVyxDQUFFLEVBQ3ZCLElBQUk0RSxFQUFPLE9BQU81QyxFQUNsQixHQUFJNEMsSUFBUyxVQUFZNUMsRUFBSSxPQUFTLEVBQ3BDLE9BQU8wSyxFQUFNMUssQ0FBRyxFQUNYLEdBQUk0QyxJQUFTLFVBQVksU0FBUzVDLENBQUcsRUFDMUMsT0FBT2hDLEVBQVEsS0FBTzJNLEVBQVEzSyxDQUFHLEVBQUk0SyxFQUFTNUssQ0FBRyxFQUVuRCxNQUFNLElBQUksTUFDUix3REFDRSxLQUFLLFVBQVVBLENBQUcsQ0FDckIsQ0FDRixFQVVELFNBQVMwSyxFQUFNRyxFQUFLLENBRWxCLEdBREFBLEVBQU0sT0FBT0EsQ0FBRyxFQUNaLEVBQUFBLEVBQUksT0FBUyxLQUdqQixLQUFJQyxFQUFRLG1JQUFtSSxLQUM3SUQsQ0FDRCxFQUNELEdBQUtDLEVBR0wsS0FBSUMsRUFBSSxXQUFXRCxFQUFNLENBQUMsQ0FBQyxFQUN2QmxJLEdBQVFrSSxFQUFNLENBQUMsR0FBSyxNQUFNLFlBQWEsRUFDM0MsT0FBUWxJLEVBQUksQ0FDVixJQUFLLFFBQ0wsSUFBSyxPQUNMLElBQUssTUFDTCxJQUFLLEtBQ0wsSUFBSyxJQUNILE9BQU9tSSxFQUFJUCxFQUNiLElBQUssUUFDTCxJQUFLLE9BQ0wsSUFBSyxJQUNILE9BQU9PLEVBQUlSLEVBQ2IsSUFBSyxPQUNMLElBQUssTUFDTCxJQUFLLElBQ0gsT0FBT1EsRUFBSVQsRUFDYixJQUFLLFFBQ0wsSUFBSyxPQUNMLElBQUssTUFDTCxJQUFLLEtBQ0wsSUFBSyxJQUNILE9BQU9TLEVBQUlWLEVBQ2IsSUFBSyxVQUNMLElBQUssU0FDTCxJQUFLLE9BQ0wsSUFBSyxNQUNMLElBQUssSUFDSCxPQUFPVSxFQUFJWCxFQUNiLElBQUssVUFDTCxJQUFLLFNBQ0wsSUFBSyxPQUNMLElBQUssTUFDTCxJQUFLLElBQ0gsT0FBT1csRUFBSVosRUFDYixJQUFLLGVBQ0wsSUFBSyxjQUNMLElBQUssUUFDTCxJQUFLLE9BQ0wsSUFBSyxLQUNILE9BQU9ZLEVBQ1QsUUFDRSxNQUNOLEdBQ0EsQ0FVQSxTQUFTSCxFQUFTSCxFQUFJLENBQ3BCLElBQUlPLEVBQVEsS0FBSyxJQUFJUCxDQUFFLEVBQ3ZCLE9BQUlPLEdBQVNWLEVBQ0osS0FBSyxNQUFNRyxFQUFLSCxDQUFDLEVBQUksSUFFMUJVLEdBQVNYLEVBQ0osS0FBSyxNQUFNSSxFQUFLSixDQUFDLEVBQUksSUFFMUJXLEdBQVNaLEVBQ0osS0FBSyxNQUFNSyxFQUFLTCxDQUFDLEVBQUksSUFFMUJZLEdBQVNiLEVBQ0osS0FBSyxNQUFNTSxFQUFLTixDQUFDLEVBQUksSUFFdkJNLEVBQUssSUFDZCxDQVVBLFNBQVNFLEVBQVFGLEVBQUksQ0FDbkIsSUFBSU8sRUFBUSxLQUFLLElBQUlQLENBQUUsRUFDdkIsT0FBSU8sR0FBU1YsRUFDSlcsRUFBT1IsRUFBSU8sRUFBT1YsRUFBRyxLQUFLLEVBRS9CVSxHQUFTWCxFQUNKWSxFQUFPUixFQUFJTyxFQUFPWCxFQUFHLE1BQU0sRUFFaENXLEdBQVNaLEVBQ0phLEVBQU9SLEVBQUlPLEVBQU9aLEVBQUcsUUFBUSxFQUVsQ1ksR0FBU2IsRUFDSmMsRUFBT1IsRUFBSU8sRUFBT2IsRUFBRyxRQUFRLEVBRS9CTSxFQUFLLEtBQ2QsQ0FNQSxTQUFTUSxFQUFPUixFQUFJTyxFQUFPRCxFQUFHdk0sRUFBTSxDQUNsQyxJQUFJME0sRUFBV0YsR0FBU0QsRUFBSSxJQUM1QixPQUFPLEtBQUssTUFBTU4sRUFBS00sQ0FBQyxFQUFJLElBQU12TSxHQUFRME0sRUFBVyxJQUFNLEdBQzdELHdEQzNKQSxTQUFTQyxFQUFNQyxFQUFLLENBQ25CQyxFQUFZLE1BQVFBLEVBQ3BCQSxFQUFZLFFBQVVBLEVBQ3RCQSxFQUFZLE9BQVNDLEVBQ3JCRCxFQUFZLFFBQVVFLEVBQ3RCRixFQUFZLE9BQVNHLEVBQ3JCSCxFQUFZLFFBQVVJLEVBQ3RCSixFQUFZLFNBQVdLLEdBQWEsRUFDcENMLEVBQVksUUFBVU0sRUFFdEIsT0FBTyxLQUFLUCxDQUFHLEVBQUUsUUFBUXhNLEdBQU8sQ0FDL0J5TSxFQUFZek0sQ0FBRyxFQUFJd00sRUFBSXhNLENBQUcsQ0FDNUIsQ0FBRSxFQU1EeU0sRUFBWSxNQUFRLENBQUUsRUFDdEJBLEVBQVksTUFBUSxDQUFFLEVBT3RCQSxFQUFZLFdBQWEsQ0FBRSxFQVEzQixTQUFTTyxFQUFZQyxFQUFXLENBQy9CLElBQUlDLEVBQU8sRUFFWCxRQUFTcFEsRUFBSSxFQUFHQSxFQUFJbVEsRUFBVSxPQUFRblEsSUFDckNvUSxHQUFTQSxHQUFRLEdBQUtBLEVBQVFELEVBQVUsV0FBV25RLENBQUMsRUFDcERvUSxHQUFRLEVBR1QsT0FBT1QsRUFBWSxPQUFPLEtBQUssSUFBSVMsQ0FBSSxFQUFJVCxFQUFZLE9BQU8sTUFBTSxDQUN0RSxDQUNDQSxFQUFZLFlBQWNPLEVBUzFCLFNBQVNQLEVBQVlRLEVBQVcsQ0FDL0IsSUFBSUUsRUFDQUMsRUFBaUIsS0FDakJDLEVBQ0FDLEVBRUosU0FBU0MsS0FBU3RELEVBQU0sQ0FFdkIsR0FBSSxDQUFDc0QsRUFBTSxRQUNWLE9BR0QsTUFBTUMsRUFBT0QsRUFHUGpMLEdBQU8sT0FBTyxJQUFJLElBQU0sRUFDeEJ1SixHQUFLdkosSUFBUTZLLEdBQVk3SyxJQUMvQmtMLEVBQUssS0FBTzNCLEdBQ1oyQixFQUFLLEtBQU9MLEVBQ1pLLEVBQUssS0FBT2xMLEdBQ1o2SyxFQUFXN0ssR0FFWDJILEVBQUssQ0FBQyxFQUFJd0MsRUFBWSxPQUFPeEMsRUFBSyxDQUFDLENBQUMsRUFFaEMsT0FBT0EsRUFBSyxDQUFDLEdBQU0sVUFFdEJBLEVBQUssUUFBUSxJQUFJLEVBSWxCLElBQUlwQixHQUFRLEVBQ1pvQixFQUFLLENBQUMsRUFBSUEsRUFBSyxDQUFDLEVBQUUsUUFBUSxnQkFBaUIsQ0FBQ2lDLEdBQU91QixLQUFXLENBRTdELEdBQUl2QixLQUFVLEtBQ2IsTUFBTyxJQUVSckQsS0FDQSxNQUFNNkUsR0FBWWpCLEVBQVksV0FBV2dCLEVBQU0sRUFDL0MsR0FBSSxPQUFPQyxJQUFjLFdBQVksQ0FDcEMsTUFBTXRNLEdBQU02SSxFQUFLcEIsRUFBSyxFQUN0QnFELEdBQVF3QixHQUFVLEtBQUtGLEVBQU1wTSxFQUFHLEVBR2hDNkksRUFBSyxPQUFPcEIsR0FBTyxDQUFDLEVBQ3BCQSxJQUNMLENBQ0ksT0FBT3FELEVBQ1gsQ0FBSSxFQUdETyxFQUFZLFdBQVcsS0FBS2UsRUFBTXZELENBQUksR0FFeEJ1RCxFQUFLLEtBQU9mLEVBQVksS0FDaEMsTUFBTWUsRUFBTXZELENBQUksQ0FDekIsQ0FFRSxPQUFBc0QsRUFBTSxVQUFZTixFQUNsQk0sRUFBTSxVQUFZZCxFQUFZLFVBQVcsRUFDekNjLEVBQU0sTUFBUWQsRUFBWSxZQUFZUSxDQUFTLEVBQy9DTSxFQUFNLE9BQVNJLEVBQ2ZKLEVBQU0sUUFBVWQsRUFBWSxRQUU1QixPQUFPLGVBQWVjLEVBQU8sVUFBVyxDQUN2QyxXQUFZLEdBQ1osYUFBYyxHQUNkLElBQUssSUFDQUgsSUFBbUIsS0FDZkEsR0FFSkMsSUFBb0JaLEVBQVksYUFDbkNZLEVBQWtCWixFQUFZLFdBQzlCYSxFQUFlYixFQUFZLFFBQVFRLENBQVMsR0FHdENLLEdBRVIsSUFBS00sR0FBSyxDQUNUUixFQUFpQlEsQ0FDckIsQ0FDQSxDQUFHLEVBR0csT0FBT25CLEVBQVksTUFBUyxZQUMvQkEsRUFBWSxLQUFLYyxDQUFLLEVBR2hCQSxDQUNULENBRUMsU0FBU0ksRUFBT1YsRUFBV1ksRUFBVyxDQUNyQyxNQUFNQyxFQUFXckIsRUFBWSxLQUFLLFdBQWEsT0FBT29CLEVBQWMsSUFBYyxJQUFNQSxHQUFhWixDQUFTLEVBQzlHLE9BQUFhLEVBQVMsSUFBTSxLQUFLLElBQ2JBLENBQ1QsQ0FTQyxTQUFTbEIsRUFBT21CLEVBQVksQ0FDM0J0QixFQUFZLEtBQUtzQixDQUFVLEVBQzNCdEIsRUFBWSxXQUFhc0IsRUFFekJ0QixFQUFZLE1BQVEsQ0FBRSxFQUN0QkEsRUFBWSxNQUFRLENBQUUsRUFFdEIsTUFBTXVCLEdBQVMsT0FBT0QsR0FBZSxTQUFXQSxFQUFhLElBQzNELEtBQUksRUFDSixRQUFRLE9BQVEsR0FBRyxFQUNuQixNQUFNLEdBQUcsRUFDVCxPQUFPLE9BQU8sRUFFaEIsVUFBV0UsS0FBTUQsRUFDWkMsRUFBRyxDQUFDLElBQU0sSUFDYnhCLEVBQVksTUFBTSxLQUFLd0IsRUFBRyxNQUFNLENBQUMsQ0FBQyxFQUVsQ3hCLEVBQVksTUFBTSxLQUFLd0IsQ0FBRSxDQUc3QixDQVVDLFNBQVNDLEVBQWdCQyxFQUFRQyxFQUFVLENBQzFDLElBQUlDLEVBQWMsRUFDZEMsRUFBZ0IsRUFDaEJDLEVBQVksR0FDWkMsRUFBYSxFQUVqQixLQUFPSCxFQUFjRixFQUFPLFFBQzNCLEdBQUlHLEVBQWdCRixFQUFTLFNBQVdBLEVBQVNFLENBQWEsSUFBTUgsRUFBT0UsQ0FBVyxHQUFLRCxFQUFTRSxDQUFhLElBQU0sS0FFbEhGLEVBQVNFLENBQWEsSUFBTSxLQUMvQkMsRUFBWUQsRUFDWkUsRUFBYUgsRUFDYkMsTUFFQUQsSUFDQUMsYUFFU0MsSUFBYyxHQUV4QkQsRUFBZ0JDLEVBQVksRUFDNUJDLElBQ0FILEVBQWNHLE1BRWQsT0FBTyxHQUtULEtBQU9GLEVBQWdCRixFQUFTLFFBQVVBLEVBQVNFLENBQWEsSUFBTSxLQUNyRUEsSUFHRCxPQUFPQSxJQUFrQkYsRUFBUyxNQUNwQyxDQVFDLFNBQVN6QixHQUFVLENBQ2xCLE1BQU1vQixFQUFhLENBQ2xCLEdBQUd0QixFQUFZLE1BQ2YsR0FBR0EsRUFBWSxNQUFNLElBQUlRLEdBQWEsSUFBTUEsQ0FBUyxDQUN4RCxFQUFJLEtBQUssR0FBRyxFQUNWLE9BQUFSLEVBQVksT0FBTyxFQUFFLEVBQ2RzQixDQUNULENBU0MsU0FBU2xCLEVBQVFqTixFQUFNLENBQ3RCLFVBQVc2TyxLQUFRaEMsRUFBWSxNQUM5QixHQUFJeUIsRUFBZ0J0TyxFQUFNNk8sQ0FBSSxFQUM3QixNQUFPLEdBSVQsVUFBV1IsS0FBTXhCLEVBQVksTUFDNUIsR0FBSXlCLEVBQWdCdE8sRUFBTXFPLENBQUUsRUFDM0IsTUFBTyxHQUlULE1BQU8sRUFDVCxDQVNDLFNBQVN2QixFQUFPdEwsRUFBSyxDQUNwQixPQUFJQSxhQUFlLE1BQ1hBLEVBQUksT0FBU0EsRUFBSSxRQUVsQkEsQ0FDVCxDQU1DLFNBQVMyTCxHQUFVLENBQ2xCLFFBQVEsS0FBSyx1SUFBdUksQ0FDdEosQ0FFQyxPQUFBTixFQUFZLE9BQU9BLEVBQVksTUFBTSxFQUU5QkEsQ0FDUixDQUVBLE9BQUFpQyxHQUFpQm5DLHlEQzdSakJvQyxFQUFBLFdBQXFCQyxFQUNyQkQsRUFBQSxLQUFlRSxFQUNmRixFQUFBLEtBQWVHLEVBQ2ZILEVBQUEsVUFBb0JJLEVBQ3BCSixFQUFBLFFBQWtCSyxFQUFjLEVBQ2hDTCxFQUFBLFNBQW1CLElBQU0sQ0FDeEIsSUFBSU0sRUFBUyxHQUViLE1BQU8sSUFBTSxDQUNQQSxJQUNKQSxFQUFTLEdBQ1QsUUFBUSxLQUFLLHVJQUF1SSxFQUVySixDQUNGLEdBQUksRUFNSk4sRUFBaUIsT0FBQSxDQUNoQixVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxTQUNBLEVBV0QsU0FBU0ksR0FBWSxDQUlwQixHQUFJLE9BQU8sT0FBVyxLQUFlLE9BQU8sVUFBWSxPQUFPLFFBQVEsT0FBUyxZQUFjLE9BQU8sUUFBUSxRQUM1RyxNQUFPLEdBSVIsR0FBSSxPQUFPLFVBQWMsS0FBZSxVQUFVLFdBQWEsVUFBVSxVQUFVLFlBQVcsRUFBRyxNQUFNLHVCQUF1QixFQUM3SCxNQUFPLEdBR1IsSUFBSXZELEVBS0osT0FBUSxPQUFPLFNBQWEsS0FBZSxTQUFTLGlCQUFtQixTQUFTLGdCQUFnQixPQUFTLFNBQVMsZ0JBQWdCLE1BQU0sa0JBRXRJLE9BQU8sT0FBVyxLQUFlLE9BQU8sVUFBWSxPQUFPLFFBQVEsU0FBWSxPQUFPLFFBQVEsV0FBYSxPQUFPLFFBQVEsUUFHMUgsT0FBTyxVQUFjLEtBQWUsVUFBVSxZQUFjQSxFQUFJLFVBQVUsVUFBVSxZQUFXLEVBQUcsTUFBTSxnQkFBZ0IsSUFBTSxTQUFTQSxFQUFFLENBQUMsRUFBRyxFQUFFLEdBQUssSUFFcEosT0FBTyxVQUFjLEtBQWUsVUFBVSxXQUFhLFVBQVUsVUFBVSxZQUFhLEVBQUMsTUFBTSxvQkFBb0IsQ0FDMUgsQ0FRQSxTQUFTb0QsRUFBVzNFLEVBQU0sQ0FRekIsR0FQQUEsRUFBSyxDQUFDLEdBQUssS0FBSyxVQUFZLEtBQU8sSUFDbEMsS0FBSyxXQUNKLEtBQUssVUFBWSxNQUFRLEtBQzFCQSxFQUFLLENBQUMsR0FDTCxLQUFLLFVBQVksTUFBUSxLQUMxQixJQUFNaUYsRUFBTyxRQUFRLFNBQVMsS0FBSyxJQUFJLEVBRXBDLENBQUMsS0FBSyxVQUNULE9BR0QsTUFBTS9KLEVBQUksVUFBWSxLQUFLLE1BQzNCOEUsRUFBSyxPQUFPLEVBQUcsRUFBRzlFLEVBQUcsZ0JBQWdCLEVBS3JDLElBQUkwRCxFQUFRLEVBQ1JzRyxFQUFRLEVBQ1psRixFQUFLLENBQUMsRUFBRSxRQUFRLGNBQWVpQyxHQUFTLENBQ25DQSxJQUFVLE9BR2RyRCxJQUNJcUQsSUFBVSxPQUdiaUQsRUFBUXRHLEdBRVgsQ0FBRSxFQUVEb0IsRUFBSyxPQUFPa0YsRUFBTyxFQUFHaEssQ0FBQyxDQUN4QixDQVVBd0osRUFBYyxJQUFBLFFBQVEsT0FBUyxRQUFRLE1BQVEsSUFBTSxJQVFyRCxTQUFTRSxFQUFLZCxFQUFZLENBQ3pCLEdBQUksQ0FDQ0EsRUFDSFksRUFBUSxRQUFRLFFBQVEsUUFBU1osQ0FBVSxFQUUzQ1ksRUFBUSxRQUFRLFdBQVcsT0FBTyxDQUVuQyxNQUFlLENBR2pCLENBQ0EsQ0FRQSxTQUFTRyxHQUFPLENBQ2YsSUFBSU0sRUFDSixHQUFJLENBQ0hBLEVBQUlULEVBQVEsUUFBUSxRQUFRLE9BQU8sR0FBS0EsRUFBUSxRQUFRLFFBQVEsT0FBTyxDQUN2RSxNQUFlLENBR2pCLENBR0MsTUFBSSxDQUFDUyxHQUFLLE9BQU8sUUFBWSxLQUFlLFFBQVMsVUFDcERBLEVBQUksUUFBUSxJQUFJLE9BR1ZBLENBQ1IsQ0FhQSxTQUFTSixHQUFlLENBQ3ZCLEdBQUksQ0FHSCxPQUFPLFlBQ1AsTUFBZSxDQUdqQixDQUNBLENBRUFFLEVBQWlCLFFBQUFwQyxHQUFtQixFQUFDNkIsQ0FBTyxFQUU1QyxLQUFNLENBQUMsV0FBQVUsQ0FBVSxFQUFJSCxFQUFPLFFBTTVCRyxFQUFXLEVBQUksU0FBVXpCLEVBQUcsQ0FDM0IsR0FBSSxDQUNILE9BQU8sS0FBSyxVQUFVQSxDQUFDLENBQ3ZCLE9BQVFoUCxFQUFPLENBQ2YsTUFBTywrQkFBaUNBLEVBQU0sT0FDaEQsMkRDeFFPLFNBQVMwUSxJQUFVLENBQ3RCLE9BQU9DLEdBQVUsQ0FDckIsQ0FPQSxTQUFTQyxHQUFVQyxFQUFVLENBQ3pCLE1BQU1qRCxFQUFNOEMsR0FBUyxFQUNyQixPQUFRLE9BQU85QyxFQUFRLE1BQ2xCQSxFQUFJaUQsQ0FBUSxJQUFNLFFBQVVqRCxFQUFJaUQsQ0FBUSxJQUFNLElBQ3ZELENBSU8sTUFBTUMsR0FBVSxDQUNuQixJQUFJLFVBQVcsQ0FFUCxNQUFPLEVBT2QsQ0FDTCxFQUlhQyxHQUFVLENBQ25CLElBQUksa0JBQW1CLENBQ25CLE9BQU9ILEdBQVUsbUNBQW1DLENBQ3ZELEVBQ0QsSUFBSSxpQkFBa0IsQ0FDbEIsT0FBT0EsR0FBVSxrQ0FBa0MsQ0FDdEQsQ0FDTCxFQ3ZDTUksR0FBbUJELEdBQVEsaUJBSzNCRSxHQUFrQkYsR0FBUSxnQkFPekIsU0FBU0csR0FBVTdDLEVBQVksZ0JBQWlCLENBQ25ELE1BQU8sQ0FDSCxVQUFBQSxFQUNBLE1BQU9NLEdBQU1OLENBQVMsRUFDdEIsTUFBTyxRQUFRLE1BQ2YsS0FBTSxRQUFRLEtBQ2QsaUJBQUEyQyxHQUNBLGdCQUFBQyxFQUNILENBQ0wsQ0FDTyxNQUFNRSxFQUFTRCxHQUFVLG9CQUFvQixFQzVCN0MsU0FBU0UsR0FBYzVQLEVBQU8sQ0FDakMsR0FBSUEsR0FBVSxLQUNWLE9BQU8sT0FBT0EsQ0FBSyxFQUVsQixHQUFJLE9BQU9BLEdBQVUsU0FDdEIsT0FBT0EsRUFFTixHQUFJLE9BQU9BLEdBQVUsU0FDdEIsR0FBSSxDQUNBLE9BQU8sS0FBSyxVQUFVQSxDQUFLLENBQ3ZDLE1BQ21CLENBQ1AsTUFBTyxtQ0FDbkIsQ0FFSSxPQUFPLE9BQU9BLENBQUssQ0FDdkIsQ0NnREEsU0FBUzZQLEdBQXlCQyxFQUFTdFIsRUFBTyxDQUU5QyxNQUFPLHNFQURTQSxhQUFpQixNQUFRQSxFQUFNLFNBQVUsRUFBRyxPQUFPQSxDQUFLLENBQ1ksRUFDeEYsQ0FPTyxTQUFTNkssR0FBS3JLLEVBQVMsQ0FDMUIsTUFBTVEsRUFBT1IsRUFBUSxLQUNmNEwsR0FBbUI1TCxFQUFRLElBQUksRUFDL0I0TCxHQUFtQjVMLEVBQVEsUUFBUSxJQUFJLEVBQ3ZDK1EsRUFBb0IsT0FBTy9RLEVBQVEsY0FBa0IsSUFDckQ2USxHQUNBN1EsRUFBUSxjQUNkLEdBQUksQ0FBQ1EsRUFDRCxNQUFNLElBQUksTUFBTSx3RkFBd0YsRUFFNUcsTUFBTXdRLEVBQWFoUixFQUFRLFFBQVUsR0FDckMsR0FBSSxDQUFDZ1IsR0FBY3ZGLEdBQVl6TCxFQUFRLFVBQVUsRUFDN0MsTUFBTSxJQUFJb0wsRUFBVSw0Q0FBNEMsRUFFcEUsS0FBTSxDQUFFLE9BQUF6TCxFQUFRLE9BQVFzUixDQUFVLEVBQUtwRixHQUFnQzdMLEVBQVEsV0FBWVEsQ0FBSSxFQUMvRixlQUFlMFEsRUFBUUMsRUFBWXpGLEVBQU8sQ0FDdEMsS0FBTSxDQUFDbE0sRUFBTzRSLENBQU0sRUFBSSxNQUFNOVIsR0FBWSxJQUFNSyxFQUFPK0wsQ0FBSyxDQUFDLEVBQzdELEdBQUlsTSxJQUFVLEtBQ1YsTUFBSW1SLEVBQU8sZ0JBQ1BBLEVBQU8sTUFBTSwrQkFBK0JuUSxDQUFJLEVBQUUsRUFHbERtUSxFQUFPLE1BQU0sK0JBQStCblEsQ0FBSSxLQUFLa0wsQ0FBSyxFQUFFLEVBRTFELElBQUlQLEdBQW1CLDZCQUE2QixFQUUxRHdGLEVBQU8sZ0JBQ1BBLEVBQU8sTUFBTSxpQkFBaUJuUSxDQUFJLEVBQUUsRUFHcENtUSxFQUFPLE1BQU0saUJBQWlCblEsQ0FBSSxlQUFla0wsQ0FBSyxFQUFFLEVBRTVELE1BQU14RCxFQUFTLE1BQU1sSSxFQUFRLFFBQVFvUixFQUFRRCxDQUFVLEVBQ2pERSxFQUFlVCxHQUFjMUksQ0FBTSxFQUN6QyxPQUFJeUksRUFBTyxnQkFDUEEsRUFBTyxNQUFNLFFBQVFuUSxDQUFJLFlBQVksRUFHckNtUSxFQUFPLE1BQU0sUUFBUW5RLENBQUksY0FBYzZRLENBQVksRUFBRSxFQUVsRG5KLENBQ2YsQ0FDSSxlQUFlb0osRUFBT0gsRUFBWXpGLEVBQU8sQ0FDckMsT0FBT3dGLEVBQVFDLEVBQVl6RixDQUFLLEVBQUUsTUFBT2xNLEdBQVUsQ0FDL0MsR0FBSXVSLEVBQW1CLENBQ25CLE1BQU1RLEVBQWNDLEdBQWdCLEVBQ3BDLE9BQUFELEdBQUEsTUFBQUEsRUFBYSxTQUFTLENBQ2xCLFFBQVMsaUNBQ1QsS0FBTSxDQUNGLFVBQVcvUSxFQUNYLE1BQU9oQixFQUFNLFNBQVUsQ0FDMUIsQ0FDckIsR0FDdUJ1UixFQUFrQkksRUFBWTNSLENBQUssQ0FDMUQsQ0FDWSxNQUFNQSxDQUNsQixDQUFTLENBQ1QsQ0FDSSxNQUFNaVMsRUFBZ0IsT0FBT3pSLEVBQVEsZUFBa0IsV0FDakRBLEVBQVEsY0FDUixTQUFZLE9BQU9BLEVBQVEsZUFBa0IsVUFDekNBLEVBQVEsY0FDUixHQUNWLE1BQU8sQ0FDSCxLQUFNLFdBQ04sS0FBQVEsRUFDQSxZQUFhUixFQUFRLFlBQ3JCLFdBQUFpUixFQUNBLE9BQVFELEVBQ1IsT0FBQU0sRUFDQSxjQUFBRyxDQUNILENBQ0wsQ0NsSk8sSUFBSXhRLEdBQ1YsU0FBVUEsRUFBTSxDQUNiQSxFQUFLLFlBQWVDLEdBQU0sQ0FBRyxFQUM3QixTQUFTQyxFQUFTQyxFQUFNLENBQUEsQ0FDeEJILEVBQUssU0FBV0UsRUFDaEIsU0FBU0UsRUFBWUMsRUFBSSxDQUNyQixNQUFNLElBQUksS0FDbEIsQ0FDSUwsRUFBSyxZQUFjSSxFQUNuQkosRUFBSyxZQUFlTSxHQUFVLENBQzFCLE1BQU0zQixFQUFNLENBQUUsRUFDZCxVQUFXOUIsS0FBUXlELEVBQ2YzQixFQUFJOUIsQ0FBSSxFQUFJQSxFQUVoQixPQUFPOEIsQ0FDVixFQUNEcUIsRUFBSyxtQkFBc0JyQixHQUFRLENBQy9CLE1BQU00QixFQUFZUCxFQUFLLFdBQVdyQixDQUFHLEVBQUUsT0FBUTZCLEdBQU0sT0FBTzdCLEVBQUlBLEVBQUk2QixDQUFDLENBQUMsR0FBTSxRQUFRLEVBQzlFQyxFQUFXLENBQUUsRUFDbkIsVUFBV0QsS0FBS0QsRUFDWkUsRUFBU0QsQ0FBQyxFQUFJN0IsRUFBSTZCLENBQUMsRUFFdkIsT0FBT1IsRUFBSyxhQUFhUyxDQUFRLENBQ3BDLEVBQ0RULEVBQUssYUFBZ0JyQixHQUNWcUIsRUFBSyxXQUFXckIsQ0FBRyxFQUFFLElBQUksU0FBVStCLEVBQUcsQ0FDekMsT0FBTy9CLEVBQUkrQixDQUFDLENBQ3hCLENBQVMsRUFFTFYsRUFBSyxXQUFhLE9BQU8sT0FBTyxNQUFTLFdBQ2xDckIsR0FBUSxPQUFPLEtBQUtBLENBQUcsRUFDdkJnQyxHQUFXLENBQ1YsTUFBTUMsRUFBTyxDQUFFLEVBQ2YsVUFBV2pCLEtBQU9nQixFQUNWLE9BQU8sVUFBVSxlQUFlLEtBQUtBLEVBQVFoQixDQUFHLEdBQ2hEaUIsRUFBSyxLQUFLakIsQ0FBRyxFQUdyQixPQUFPaUIsQ0FDVixFQUNMWixFQUFLLEtBQU8sQ0FBQ2EsRUFBS0MsSUFBWSxDQUMxQixVQUFXakUsS0FBUWdFLEVBQ2YsR0FBSUMsRUFBUWpFLENBQUksRUFDWixPQUFPQSxDQUdsQixFQUNEbUQsRUFBSyxVQUFZLE9BQU8sT0FBTyxXQUFjLFdBQ3RDZSxHQUFRLE9BQU8sVUFBVUEsQ0FBRyxFQUM1QkEsR0FBUSxPQUFPQSxHQUFRLFVBQVksT0FBTyxTQUFTQSxDQUFHLEdBQUssS0FBSyxNQUFNQSxDQUFHLElBQU1BLEVBQ3RGLFNBQVNDLEVBQVdDLEVBQU9DLEVBQVksTUFBTyxDQUMxQyxPQUFPRCxFQUFNLElBQUtGLEdBQVMsT0FBT0EsR0FBUSxTQUFXLElBQUlBLENBQUcsSUFBTUEsQ0FBSSxFQUFFLEtBQUtHLENBQVMsQ0FDOUYsQ0FDSWxCLEVBQUssV0FBYWdCLEVBQ2xCaEIsRUFBSyxzQkFBd0IsQ0FBQ0MsRUFBR0YsSUFDekIsT0FBT0EsR0FBVSxTQUNWQSxFQUFNLFNBQVUsRUFFcEJBLENBRWYsR0FBR0MsSUFBU0EsRUFBTyxDQUFBLEVBQUcsRUFDZixJQUFJbUIsSUFDVixTQUFVQSxFQUFZLENBQ25CQSxFQUFXLFlBQWMsQ0FBQ0MsRUFBT0MsS0FDdEIsQ0FDSCxHQUFHRCxFQUNILEdBQUdDLENBQ04sRUFFVCxHQUFHRixLQUFlQSxHQUFhLENBQUEsRUFBRyxFQUMzQixNQUFNc1AsRUFBZ0J6USxFQUFLLFlBQVksQ0FDMUMsU0FDQSxNQUNBLFNBQ0EsVUFDQSxRQUNBLFVBQ0EsT0FDQSxTQUNBLFNBQ0EsV0FDQSxZQUNBLE9BQ0EsUUFDQSxTQUNBLFVBQ0EsVUFDQSxPQUNBLFFBQ0EsTUFDQSxLQUNKLENBQUMsRUFDWTBRLEdBQWlCQyxHQUFTLENBRW5DLE9BRFUsT0FBT0EsRUFDUixDQUNMLElBQUssWUFDRCxPQUFPRixFQUFjLFVBQ3pCLElBQUssU0FDRCxPQUFPQSxFQUFjLE9BQ3pCLElBQUssU0FDRCxPQUFPLE9BQU8sTUFBTUUsQ0FBSSxFQUFJRixFQUFjLElBQU1BLEVBQWMsT0FDbEUsSUFBSyxVQUNELE9BQU9BLEVBQWMsUUFDekIsSUFBSyxXQUNELE9BQU9BLEVBQWMsU0FDekIsSUFBSyxTQUNELE9BQU9BLEVBQWMsT0FDekIsSUFBSyxTQUNELE9BQU9BLEVBQWMsT0FDekIsSUFBSyxTQUNELE9BQUksTUFBTSxRQUFRRSxDQUFJLEVBQ1hGLEVBQWMsTUFFckJFLElBQVMsS0FDRkYsRUFBYyxLQUVyQkUsRUFBSyxNQUFRLE9BQU9BLEVBQUssTUFBUyxZQUFjQSxFQUFLLE9BQVMsT0FBT0EsRUFBSyxPQUFVLFdBQzdFRixFQUFjLFFBRXJCLE9BQU8sSUFBUSxLQUFlRSxhQUFnQixJQUN2Q0YsRUFBYyxJQUVyQixPQUFPLElBQVEsS0FBZUUsYUFBZ0IsSUFDdkNGLEVBQWMsSUFFckIsT0FBTyxLQUFTLEtBQWVFLGFBQWdCLEtBQ3hDRixFQUFjLEtBRWxCQSxFQUFjLE9BQ3pCLFFBQ0ksT0FBT0EsRUFBYyxPQUNqQyxDQUNBLEVDbklhRyxFQUFlNVEsRUFBSyxZQUFZLENBQ3pDLGVBQ0Esa0JBQ0EsU0FDQSxnQkFDQSw4QkFDQSxxQkFDQSxvQkFDQSxvQkFDQSxzQkFDQSxlQUNBLGlCQUNBLFlBQ0EsVUFDQSw2QkFDQSxrQkFDQSxZQUNKLENBQUMsRUFLTSxNQUFNdUIsV0FBaUIsS0FBTSxDQUNoQyxJQUFJLFFBQVMsQ0FDVCxPQUFPLEtBQUssTUFDcEIsQ0FDSSxZQUFZQyxFQUFRLENBQ2hCLE1BQU8sRUFDUCxLQUFLLE9BQVMsQ0FBRSxFQUNoQixLQUFLLFNBQVlDLEdBQVEsQ0FDckIsS0FBSyxPQUFTLENBQUMsR0FBRyxLQUFLLE9BQVFBLENBQUcsQ0FDckMsRUFDRCxLQUFLLFVBQVksQ0FBQ0MsRUFBTyxLQUFPLENBQzVCLEtBQUssT0FBUyxDQUFDLEdBQUcsS0FBSyxPQUFRLEdBQUdBLENBQUksQ0FDekMsRUFDRCxNQUFNQyxFQUFjLFdBQVcsVUFDM0IsT0FBTyxlQUVQLE9BQU8sZUFBZSxLQUFNQSxDQUFXLEVBR3ZDLEtBQUssVUFBWUEsRUFFckIsS0FBSyxLQUFPLFdBQ1osS0FBSyxPQUFTSCxDQUN0QixDQUNJLE9BQU9JLEVBQVMsQ0FDWixNQUFNQyxFQUFTRCxHQUNYLFNBQVVFLEVBQU8sQ0FDYixPQUFPQSxFQUFNLE9BQ2hCLEVBQ0NDLEVBQWMsQ0FBRSxRQUFTLEVBQUksRUFDN0JDLEVBQWdCekQsR0FBVSxDQUM1QixVQUFXdUQsS0FBU3ZELEVBQU0sT0FDdEIsR0FBSXVELEVBQU0sT0FBUyxnQkFDZkEsRUFBTSxZQUFZLElBQUlFLENBQVksVUFFN0JGLEVBQU0sT0FBUyxzQkFDcEJFLEVBQWFGLEVBQU0sZUFBZSxVQUU3QkEsRUFBTSxPQUFTLG9CQUNwQkUsRUFBYUYsRUFBTSxjQUFjLFVBRTVCQSxFQUFNLEtBQUssU0FBVyxFQUMzQkMsRUFBWSxRQUFRLEtBQUtGLEVBQU9DLENBQUssQ0FBQyxNQUVyQyxDQUNELElBQUlHLEVBQU9GLEVBQ1B0RixFQUFJLEVBQ1IsS0FBT0EsRUFBSXFGLEVBQU0sS0FBSyxRQUFRLENBQzFCLE1BQU1JLEVBQUtKLEVBQU0sS0FBS3JGLENBQUMsRUFDTkEsSUFBTXFGLEVBQU0sS0FBSyxPQUFTLEdBWXZDRyxFQUFLQyxDQUFFLEVBQUlELEVBQUtDLENBQUUsR0FBSyxDQUFFLFFBQVMsRUFBSSxFQUN0Q0QsRUFBS0MsQ0FBRSxFQUFFLFFBQVEsS0FBS0wsRUFBT0MsQ0FBSyxDQUFDLEdBWG5DRyxFQUFLQyxDQUFFLEVBQUlELEVBQUtDLENBQUUsR0FBSyxDQUFFLFFBQVMsRUFBSSxFQWExQ0QsRUFBT0EsRUFBS0MsQ0FBRSxFQUNkekYsR0FDeEIsQ0FDQSxDQUVTLEVBQ0QsT0FBQXVGLEVBQWEsSUFBSSxFQUNWRCxDQUNmLENBQ0ksT0FBTyxPQUFPaEMsRUFBTyxDQUNqQixHQUFJLEVBQUVBLGFBQWlCd0IsSUFDbkIsTUFBTSxJQUFJLE1BQU0sbUJBQW1CeEIsQ0FBSyxFQUFFLENBRXRELENBQ0ksVUFBVyxDQUNQLE9BQU8sS0FBSyxPQUNwQixDQUNJLElBQUksU0FBVSxDQUNWLE9BQU8sS0FBSyxVQUFVLEtBQUssT0FBUUMsRUFBSyxzQkFBdUIsQ0FBQyxDQUN4RSxDQUNJLElBQUksU0FBVSxDQUNWLE9BQU8sS0FBSyxPQUFPLFNBQVcsQ0FDdEMsQ0FDSSxRQUFRNkIsRUFBVUMsR0FBVUEsRUFBTSxRQUFTLENBQ3ZDLE1BQU1DLEVBQWMsQ0FBRSxFQUNoQkksRUFBYSxDQUFFLEVBQ3JCLFVBQVdWLEtBQU8sS0FBSyxPQUNmQSxFQUFJLEtBQUssT0FBUyxHQUNsQk0sRUFBWU4sRUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFJTSxFQUFZTixFQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUssQ0FBRSxFQUN6RE0sRUFBWU4sRUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUtJLEVBQU9KLENBQUcsQ0FBQyxHQUd6Q1UsRUFBVyxLQUFLTixFQUFPSixDQUFHLENBQUMsRUFHbkMsTUFBTyxDQUFFLFdBQUFVLEVBQVksWUFBQUosQ0FBYSxDQUMxQyxDQUNJLElBQUksWUFBYSxDQUNiLE9BQU8sS0FBSyxRQUFTLENBQzdCLENBQ0EsQ0FDQVIsR0FBUyxPQUFVQyxHQUNELElBQUlELEdBQVNDLENBQU0sRUMvSHJDLE1BQU1xUCxHQUFXLENBQUMvTyxFQUFPZ1AsSUFBUyxDQUM5QixJQUFJek8sRUFDSixPQUFRUCxFQUFNLEtBQUksQ0FDZCxLQUFLOE8sRUFBYSxhQUNWOU8sRUFBTSxXQUFhMk8sRUFBYyxVQUNqQ3BPLEVBQVUsV0FHVkEsRUFBVSxZQUFZUCxFQUFNLFFBQVEsY0FBY0EsRUFBTSxRQUFRLEdBRXBFLE1BQ0osS0FBSzhPLEVBQWEsZ0JBQ2R2TyxFQUFVLG1DQUFtQyxLQUFLLFVBQVVQLEVBQU0sU0FBVTlCLEVBQUsscUJBQXFCLENBQUMsR0FDdkcsTUFDSixLQUFLNFEsRUFBYSxrQkFDZHZPLEVBQVUsa0NBQWtDckMsRUFBSyxXQUFXOEIsRUFBTSxLQUFNLElBQUksQ0FBQyxHQUM3RSxNQUNKLEtBQUs4TyxFQUFhLGNBQ2R2TyxFQUFVLGdCQUNWLE1BQ0osS0FBS3VPLEVBQWEsNEJBQ2R2TyxFQUFVLHlDQUF5Q3JDLEVBQUssV0FBVzhCLEVBQU0sT0FBTyxDQUFDLEdBQ2pGLE1BQ0osS0FBSzhPLEVBQWEsbUJBQ2R2TyxFQUFVLGdDQUFnQ3JDLEVBQUssV0FBVzhCLEVBQU0sT0FBTyxDQUFDLGVBQWVBLEVBQU0sUUFBUSxJQUNyRyxNQUNKLEtBQUs4TyxFQUFhLGtCQUNkdk8sRUFBVSw2QkFDVixNQUNKLEtBQUt1TyxFQUFhLG9CQUNkdk8sRUFBVSwrQkFDVixNQUNKLEtBQUt1TyxFQUFhLGFBQ2R2TyxFQUFVLGVBQ1YsTUFDSixLQUFLdU8sRUFBYSxlQUNWLE9BQU85TyxFQUFNLFlBQWUsU0FDeEIsYUFBY0EsRUFBTSxZQUNwQk8sRUFBVSxnQ0FBZ0NQLEVBQU0sV0FBVyxRQUFRLElBQy9ELE9BQU9BLEVBQU0sV0FBVyxVQUFhLFdBQ3JDTyxFQUFVLEdBQUdBLENBQU8sc0RBQXNEUCxFQUFNLFdBQVcsUUFBUSxLQUdsRyxlQUFnQkEsRUFBTSxXQUMzQk8sRUFBVSxtQ0FBbUNQLEVBQU0sV0FBVyxVQUFVLElBRW5FLGFBQWNBLEVBQU0sV0FDekJPLEVBQVUsaUNBQWlDUCxFQUFNLFdBQVcsUUFBUSxJQUdwRTlCLEVBQUssWUFBWThCLEVBQU0sVUFBVSxFQUdoQ0EsRUFBTSxhQUFlLFFBQzFCTyxFQUFVLFdBQVdQLEVBQU0sVUFBVSxHQUdyQ08sRUFBVSxVQUVkLE1BQ0osS0FBS3VPLEVBQWEsVUFDVjlPLEVBQU0sT0FBUyxRQUNmTyxFQUFVLHNCQUFzQlAsRUFBTSxNQUFRLFVBQVlBLEVBQU0sVUFBWSxXQUFhLFdBQVcsSUFBSUEsRUFBTSxPQUFPLGNBQ2hIQSxFQUFNLE9BQVMsU0FDcEJPLEVBQVUsdUJBQXVCUCxFQUFNLE1BQVEsVUFBWUEsRUFBTSxVQUFZLFdBQWEsTUFBTSxJQUFJQSxFQUFNLE9BQU8sZ0JBQzVHQSxFQUFNLE9BQVMsU0FDcEJPLEVBQVUsa0JBQWtCUCxFQUFNLE1BQVEsb0JBQXNCQSxFQUFNLFVBQVksNEJBQThCLGVBQWUsR0FBR0EsRUFBTSxPQUFPLEdBQzFJQSxFQUFNLE9BQVMsT0FDcEJPLEVBQVUsZ0JBQWdCUCxFQUFNLE1BQVEsb0JBQXNCQSxFQUFNLFVBQVksNEJBQThCLGVBQWUsR0FBRyxJQUFJLEtBQUssT0FBT0EsRUFBTSxPQUFPLENBQUMsQ0FBQyxHQUUvSk8sRUFBVSxnQkFDZCxNQUNKLEtBQUt1TyxFQUFhLFFBQ1Y5TyxFQUFNLE9BQVMsUUFDZk8sRUFBVSxzQkFBc0JQLEVBQU0sTUFBUSxVQUFZQSxFQUFNLFVBQVksVUFBWSxXQUFXLElBQUlBLEVBQU0sT0FBTyxjQUMvR0EsRUFBTSxPQUFTLFNBQ3BCTyxFQUFVLHVCQUF1QlAsRUFBTSxNQUFRLFVBQVlBLEVBQU0sVUFBWSxVQUFZLE9BQU8sSUFBSUEsRUFBTSxPQUFPLGdCQUM1R0EsRUFBTSxPQUFTLFNBQ3BCTyxFQUFVLGtCQUFrQlAsRUFBTSxNQUFRLFVBQVlBLEVBQU0sVUFBWSx3QkFBMEIsV0FBVyxJQUFJQSxFQUFNLE9BQU8sR0FDekhBLEVBQU0sT0FBUyxTQUNwQk8sRUFBVSxrQkFBa0JQLEVBQU0sTUFBUSxVQUFZQSxFQUFNLFVBQVksd0JBQTBCLFdBQVcsSUFBSUEsRUFBTSxPQUFPLEdBQ3pIQSxFQUFNLE9BQVMsT0FDcEJPLEVBQVUsZ0JBQWdCUCxFQUFNLE1BQVEsVUFBWUEsRUFBTSxVQUFZLDJCQUE2QixjQUFjLElBQUksSUFBSSxLQUFLLE9BQU9BLEVBQU0sT0FBTyxDQUFDLENBQUMsR0FFcEpPLEVBQVUsZ0JBQ2QsTUFDSixLQUFLdU8sRUFBYSxPQUNkdk8sRUFBVSxnQkFDVixNQUNKLEtBQUt1TyxFQUFhLDJCQUNkdk8sRUFBVSwyQ0FDVixNQUNKLEtBQUt1TyxFQUFhLGdCQUNkdk8sRUFBVSxnQ0FBZ0NQLEVBQU0sVUFBVSxHQUMxRCxNQUNKLEtBQUs4TyxFQUFhLFdBQ2R2TyxFQUFVLHdCQUNWLE1BQ0osUUFDSUEsRUFBVXlPLEVBQUssYUFDZjlRLEVBQUssWUFBWThCLENBQUssQ0FDbEMsQ0FDSSxNQUFPLENBQUUsUUFBQU8sQ0FBUyxDQUN0QixFQ3hHQSxJQUFJME8sR0FBbUJDLEdBS2hCLFNBQVNDLElBQWMsQ0FDMUIsT0FBT0YsRUFDWCxDQ05PLE1BQU1HLEdBQWFDLEdBQVcsQ0FDakMsS0FBTSxDQUFFLEtBQUFSLEVBQU0sS0FBQVMsRUFBTSxVQUFBQyxFQUFXLFVBQUFDLENBQVcsRUFBR0gsRUFDdkNJLEVBQVcsQ0FBQyxHQUFHSCxFQUFNLEdBQUlFLEVBQVUsTUFBUSxDQUFBLENBQUcsRUFDOUNFLEVBQVksQ0FDZCxHQUFHRixFQUNILEtBQU1DLENBQ1QsRUFDRCxHQUFJRCxFQUFVLFVBQVksT0FDdEIsTUFBTyxDQUNILEdBQUdBLEVBQ0gsS0FBTUMsRUFDTixRQUFTRCxFQUFVLE9BQ3RCLEVBRUwsSUFBSTFSLEVBQWUsR0FDbkIsTUFBTTZSLEVBQU9KLEVBQ1IsT0FBUWxHLEdBQU0sQ0FBQyxDQUFDQSxDQUFDLEVBQ2pCLE1BQUssRUFDTCxRQUFTLEVBQ2QsVUFBV3VHLEtBQU9ELEVBQ2Q3UixFQUFlOFIsRUFBSUYsRUFBVyxDQUFFLEtBQUFiLEVBQU0sYUFBYy9RLENBQWMsQ0FBQSxFQUFFLFFBRXhFLE1BQU8sQ0FDSCxHQUFHMFIsRUFDSCxLQUFNQyxFQUNOLFFBQVMzUixDQUNaLENBQ0wsRUFFTyxTQUFTK1IsRUFBa0JDLEVBQUtOLEVBQVcsQ0FDOUMsTUFBTU8sRUFBY1osR0FBYSxFQUMzQm5QLEVBQVFvUCxHQUFVLENBQ3BCLFVBQVdJLEVBQ1gsS0FBTU0sRUFBSSxLQUNWLEtBQU1BLEVBQUksS0FDVixVQUFXLENBQ1BBLEVBQUksT0FBTyxtQkFDWEEsRUFBSSxlQUNKQyxFQUNBQSxJQUFnQmIsR0FBa0IsT0FBWUEsRUFDakQsRUFBQyxPQUFRbE4sR0FBTSxDQUFDLENBQUNBLENBQUMsQ0FDM0IsQ0FBSyxFQUNEOE4sRUFBSSxPQUFPLE9BQU8sS0FBSzlQLENBQUssQ0FDaEMsQ0FDTyxNQUFNZ1EsRUFBWSxDQUNyQixhQUFjLENBQ1YsS0FBSyxNQUFRLE9BQ3JCLENBQ0ksT0FBUSxDQUNBLEtBQUssUUFBVSxVQUNmLEtBQUssTUFBUSxRQUN6QixDQUNJLE9BQVEsQ0FDQSxLQUFLLFFBQVUsWUFDZixLQUFLLE1BQVEsVUFDekIsQ0FDSSxPQUFPLFdBQVdDLEVBQVFDLEVBQVMsQ0FDL0IsTUFBTUMsRUFBYSxDQUFFLEVBQ3JCLFVBQVcsS0FBS0QsRUFBUyxDQUNyQixHQUFJLEVBQUUsU0FBVyxVQUNiLE9BQU9FLEVBQ1AsRUFBRSxTQUFXLFNBQ2JILEVBQU8sTUFBTyxFQUNsQkUsRUFBVyxLQUFLLEVBQUUsS0FBSyxDQUNuQyxDQUNRLE1BQU8sQ0FBRSxPQUFRRixFQUFPLE1BQU8sTUFBT0UsQ0FBWSxDQUMxRCxDQUNJLGFBQWEsaUJBQWlCRixFQUFRSSxFQUFPLENBQ3pDLE1BQU1DLEVBQVksQ0FBRSxFQUNwQixVQUFXQyxLQUFRRixFQUFPLENBQ3RCLE1BQU14UyxFQUFNLE1BQU0wUyxFQUFLLElBQ2pCdFMsRUFBUSxNQUFNc1MsRUFBSyxNQUN6QkQsRUFBVSxLQUFLLENBQ1gsSUFBQXpTLEVBQ0EsTUFBQUksQ0FDaEIsQ0FBYSxDQUNiLENBQ1EsT0FBTytSLEdBQVksZ0JBQWdCQyxFQUFRSyxDQUFTLENBQzVELENBQ0ksT0FBTyxnQkFBZ0JMLEVBQVFJLEVBQU8sQ0FDbEMsTUFBTUcsRUFBYyxDQUFFLEVBQ3RCLFVBQVdELEtBQVFGLEVBQU8sQ0FDdEIsS0FBTSxDQUFFLElBQUF4UyxFQUFLLE1BQUFJLENBQUssRUFBS3NTLEVBR3ZCLEdBRkkxUyxFQUFJLFNBQVcsV0FFZkksRUFBTSxTQUFXLFVBQ2pCLE9BQU9tUyxFQUNQdlMsRUFBSSxTQUFXLFNBQ2ZvUyxFQUFPLE1BQU8sRUFDZGhTLEVBQU0sU0FBVyxTQUNqQmdTLEVBQU8sTUFBTyxFQUNkcFMsRUFBSSxRQUFVLGNBQWdCLE9BQU9JLEVBQU0sTUFBVSxLQUFlc1MsRUFBSyxhQUN6RUMsRUFBWTNTLEVBQUksS0FBSyxFQUFJSSxFQUFNLE1BRS9DLENBQ1EsTUFBTyxDQUFFLE9BQVFnUyxFQUFPLE1BQU8sTUFBT08sQ0FBYSxDQUMzRCxDQUNBLENBQ08sTUFBTUosRUFBVSxPQUFPLE9BQU8sQ0FDakMsT0FBUSxTQUNaLENBQUMsRUFDWUssR0FBU3hTLElBQVcsQ0FBRSxPQUFRLFFBQVMsTUFBQUEsQ0FBSyxHQUM1Q3lTLEdBQU16UyxJQUFXLENBQUUsT0FBUSxRQUFTLE1BQUFBLENBQUssR0FDekMwUyxHQUFhM08sR0FBTUEsRUFBRSxTQUFXLFVBQ2hDNE8sR0FBVzVPLEdBQU1BLEVBQUUsU0FBVyxRQUM5QjZPLEdBQVc3TyxHQUFNQSxFQUFFLFNBQVcsUUFDOUI4TyxHQUFXOU8sR0FBTSxPQUFPLFFBQVksS0FBZUEsYUFBYSxRQzVHdEUsSUFBSTFCLEdBQ1YsU0FBVUEsRUFBVyxDQUNsQkEsRUFBVSxTQUFZQyxHQUFZLE9BQU9BLEdBQVksU0FBVyxDQUFFLFFBQUFBLEdBQVlBLEdBQVcsQ0FBRSxFQUUzRkQsRUFBVSxTQUFZQyxHQUFZLE9BQU9BLEdBQVksU0FBV0EsRUFBVUEsR0FBQSxZQUFBQSxFQUFTLE9BQ3ZGLEdBQUdELElBQWNBLEVBQVksQ0FBQSxFQUFHLEVDQWhDLE1BQU15USxFQUFtQixDQUNyQixZQUFZQyxFQUFRL1MsRUFBT3FSLEVBQU16UixFQUFLLENBQ2xDLEtBQUssWUFBYyxDQUFFLEVBQ3JCLEtBQUssT0FBU21ULEVBQ2QsS0FBSyxLQUFPL1MsRUFDWixLQUFLLE1BQVFxUixFQUNiLEtBQUssS0FBT3pSLENBQ3BCLENBQ0ksSUFBSSxNQUFPLENBQ1AsT0FBSyxLQUFLLFlBQVksU0FDZCxNQUFNLFFBQVEsS0FBSyxJQUFJLEVBQ3ZCLEtBQUssWUFBWSxLQUFLLEdBQUcsS0FBSyxNQUFPLEdBQUcsS0FBSyxJQUFJLEVBR2pELEtBQUssWUFBWSxLQUFLLEdBQUcsS0FBSyxNQUFPLEtBQUssSUFBSSxHQUcvQyxLQUFLLFdBQ3BCLENBQ0EsQ0FDQSxNQUFNb1QsR0FBZSxDQUFDbkIsRUFBSzNLLElBQVcsQ0FDbEMsR0FBSTBMLEdBQVExTCxDQUFNLEVBQ2QsTUFBTyxDQUFFLFFBQVMsR0FBTSxLQUFNQSxFQUFPLEtBQU8sRUFHNUMsR0FBSSxDQUFDMkssRUFBSSxPQUFPLE9BQU8sT0FDbkIsTUFBTSxJQUFJLE1BQU0sMkNBQTJDLEVBRS9ELE1BQU8sQ0FDSCxRQUFTLEdBQ1QsSUFBSSxPQUFRLENBQ1IsR0FBSSxLQUFLLE9BQ0wsT0FBTyxLQUFLLE9BQ2hCLE1BQU1yVCxFQUFRLElBQUlnRCxHQUFTcVEsRUFBSSxPQUFPLE1BQU0sRUFDNUMsWUFBSyxPQUFTclQsRUFDUCxLQUFLLE1BQ2YsQ0FDSixDQUVULEVBQ0EsU0FBU3lVLEVBQW9CN0IsRUFBUSxDQUNqQyxHQUFJLENBQUNBLEVBQ0QsTUFBTyxDQUFFLEVBQ2IsS0FBTSxDQUFFLFNBQUFOLEVBQVUsbUJBQUFvQyxFQUFvQixlQUFBQyxFQUFnQixZQUFBQyxDQUFhLEVBQUdoQyxFQUN0RSxHQUFJTixJQUFhb0MsR0FBc0JDLEdBQ25DLE1BQU0sSUFBSSxNQUFNLDBGQUEwRixFQUU5RyxPQUFJckMsRUFDTyxDQUFFLFNBQVVBLEVBQVUsWUFBQXNDLENBQWEsRUFhdkMsQ0FBRSxTQVpTLENBQUNDLEVBQUt4QixJQUFRLENBQzVCLEtBQU0sQ0FBRSxRQUFBdlAsQ0FBTyxFQUFLOE8sRUFDcEIsT0FBSWlDLEVBQUksT0FBUyxxQkFDTixDQUFFLFFBQVMvUSxHQUFXdVAsRUFBSSxZQUFjLEVBRS9DLE9BQU9BLEVBQUksS0FBUyxJQUNiLENBQUUsUUFBU3ZQLEdBQVc2USxHQUFrQnRCLEVBQUksWUFBYyxFQUVqRXdCLEVBQUksT0FBUyxlQUNOLENBQUUsUUFBU3hCLEVBQUksWUFBYyxFQUNqQyxDQUFFLFFBQVN2UCxHQUFXNFEsR0FBc0JyQixFQUFJLFlBQWMsQ0FDeEUsRUFDNkIsWUFBQXVCLENBQWEsQ0FDL0MsQ0FDTyxNQUFNRSxDQUFRLENBQ2pCLElBQUksYUFBYyxDQUNkLE9BQU8sS0FBSyxLQUFLLFdBQ3pCLENBQ0ksU0FBUzVJLEVBQU8sQ0FDWixPQUFPaUcsR0FBY2pHLEVBQU0sSUFBSSxDQUN2QyxDQUNJLGdCQUFnQkEsRUFBT21ILEVBQUssQ0FDeEIsT0FBUUEsR0FBTyxDQUNYLE9BQVFuSCxFQUFNLE9BQU8sT0FDckIsS0FBTUEsRUFBTSxLQUNaLFdBQVlpRyxHQUFjakcsRUFBTSxJQUFJLEVBQ3BDLGVBQWdCLEtBQUssS0FBSyxTQUMxQixLQUFNQSxFQUFNLEtBQ1osT0FBUUEsRUFBTSxNQUNqQixDQUNULENBQ0ksb0JBQW9CQSxFQUFPLENBQ3ZCLE1BQU8sQ0FDSCxPQUFRLElBQUlxSCxHQUNaLElBQUssQ0FDRCxPQUFRckgsRUFBTSxPQUFPLE9BQ3JCLEtBQU1BLEVBQU0sS0FDWixXQUFZaUcsR0FBY2pHLEVBQU0sSUFBSSxFQUNwQyxlQUFnQixLQUFLLEtBQUssU0FDMUIsS0FBTUEsRUFBTSxLQUNaLE9BQVFBLEVBQU0sTUFDakIsQ0FDSixDQUNULENBQ0ksV0FBV0EsRUFBTyxDQUNkLE1BQU14RCxFQUFTLEtBQUssT0FBT3dELENBQUssRUFDaEMsR0FBSW1JLEdBQVEzTCxDQUFNLEVBQ2QsTUFBTSxJQUFJLE1BQU0sd0NBQXdDLEVBRTVELE9BQU9BLENBQ2YsQ0FDSSxZQUFZd0QsRUFBTyxDQUNmLE1BQU14RCxFQUFTLEtBQUssT0FBT3dELENBQUssRUFDaEMsT0FBTyxRQUFRLFFBQVF4RCxDQUFNLENBQ3JDLENBQ0ksTUFBTTBKLEVBQU1RLEVBQVEsQ0FDaEIsTUFBTWxLLEVBQVMsS0FBSyxVQUFVMEosRUFBTVEsQ0FBTSxFQUMxQyxHQUFJbEssRUFBTyxRQUNQLE9BQU9BLEVBQU8sS0FDbEIsTUFBTUEsRUFBTyxLQUNyQixDQUNJLFVBQVUwSixFQUFNUSxFQUFRLENBQ3BCLE1BQU1TLEVBQU0sQ0FDUixPQUFRLENBQ0osT0FBUSxDQUFFLEVBQ1YsT0FBT1QsR0FBQSxZQUFBQSxFQUFRLFFBQVMsR0FDeEIsbUJBQW9CQSxHQUFBLFlBQUFBLEVBQVEsUUFDL0IsRUFDRCxNQUFNQSxHQUFBLFlBQUFBLEVBQVEsT0FBUSxDQUFFLEVBQ3hCLGVBQWdCLEtBQUssS0FBSyxTQUMxQixPQUFRLEtBQ1IsS0FBQVIsRUFDQSxXQUFZRCxHQUFjQyxDQUFJLENBQ2pDLEVBQ0sxSixFQUFTLEtBQUssV0FBVyxDQUFFLEtBQUEwSixFQUFNLEtBQU1pQixFQUFJLEtBQU0sT0FBUUEsRUFBSyxFQUNwRSxPQUFPbUIsR0FBYW5CLEVBQUszSyxDQUFNLENBQ3ZDLENBQ0ksWUFBWTBKLEVBQU0sU0FDZCxNQUFNaUIsRUFBTSxDQUNSLE9BQVEsQ0FDSixPQUFRLENBQUUsRUFDVixNQUFPLENBQUMsQ0FBQyxLQUFLLFdBQVcsRUFBRSxLQUM5QixFQUNELEtBQU0sQ0FBRSxFQUNSLGVBQWdCLEtBQUssS0FBSyxTQUMxQixPQUFRLEtBQ1IsS0FBQWpCLEVBQ0EsV0FBWUQsR0FBY0MsQ0FBSSxDQUNqQyxFQUNELEdBQUksQ0FBQyxLQUFLLFdBQVcsRUFBRSxNQUNuQixHQUFJLENBQ0EsTUFBTTFKLEVBQVMsS0FBSyxXQUFXLENBQUUsS0FBQTBKLEVBQU0sS0FBTSxDQUFFLEVBQUUsT0FBUWlCLEVBQUssRUFDOUQsT0FBT2UsR0FBUTFMLENBQU0sRUFDZixDQUNFLE1BQU9BLEVBQU8sS0FDdEMsRUFDc0IsQ0FDRSxPQUFRMkssRUFBSSxPQUFPLE1BQ3RCLENBQ3JCLE9BQ21CMEIsRUFBSyxFQUNKN1EsR0FBQUMsRUFBQTRRLEdBQUEsWUFBQUEsRUFBSyxVQUFMLFlBQUE1USxFQUFjLGdCQUFkLE1BQUFELEVBQTZCLFNBQVMsaUJBQ3RDLEtBQUssV0FBVyxFQUFFLE1BQVEsSUFFOUJtUCxFQUFJLE9BQVMsQ0FDVCxPQUFRLENBQUUsRUFDVixNQUFPLEVBQ1YsQ0FDakIsQ0FFUSxPQUFPLEtBQUssWUFBWSxDQUFFLEtBQUFqQixFQUFNLEtBQU0sQ0FBRSxFQUFFLE9BQVFpQixDQUFLLENBQUEsRUFBRSxLQUFNM0ssR0FBVzBMLEdBQVExTCxDQUFNLEVBQ2xGLENBQ0UsTUFBT0EsRUFBTyxLQUM5QixFQUNjLENBQ0UsT0FBUTJLLEVBQUksT0FBTyxNQUNuQyxDQUFhLENBQ2IsQ0FDSSxNQUFNLFdBQVdqQixFQUFNUSxFQUFRLENBQzNCLE1BQU1sSyxFQUFTLE1BQU0sS0FBSyxlQUFlMEosRUFBTVEsQ0FBTSxFQUNyRCxHQUFJbEssRUFBTyxRQUNQLE9BQU9BLEVBQU8sS0FDbEIsTUFBTUEsRUFBTyxLQUNyQixDQUNJLE1BQU0sZUFBZTBKLEVBQU1RLEVBQVEsQ0FDL0IsTUFBTVMsRUFBTSxDQUNSLE9BQVEsQ0FDSixPQUFRLENBQUUsRUFDVixtQkFBb0JULEdBQUEsWUFBQUEsRUFBUSxTQUM1QixNQUFPLEVBQ1YsRUFDRCxNQUFNQSxHQUFBLFlBQUFBLEVBQVEsT0FBUSxDQUFFLEVBQ3hCLGVBQWdCLEtBQUssS0FBSyxTQUMxQixPQUFRLEtBQ1IsS0FBQVIsRUFDQSxXQUFZRCxHQUFjQyxDQUFJLENBQ2pDLEVBQ0s0QyxFQUFtQixLQUFLLE9BQU8sQ0FBRSxLQUFBNUMsRUFBTSxLQUFNaUIsRUFBSSxLQUFNLE9BQVFBLEVBQUssRUFDcEUzSyxFQUFTLE1BQU8yTCxHQUFRVyxDQUFnQixFQUFJQSxFQUFtQixRQUFRLFFBQVFBLENBQWdCLEdBQ3JHLE9BQU9SLEdBQWFuQixFQUFLM0ssQ0FBTSxDQUN2QyxDQUNJLE9BQU9wRSxFQUFPUixFQUFTLENBQ25CLE1BQU1tUixFQUFzQnpTLEdBQ3BCLE9BQU9zQixHQUFZLFVBQVksT0FBT0EsRUFBWSxJQUMzQyxDQUFFLFFBQUFBLENBQVMsRUFFYixPQUFPQSxHQUFZLFdBQ2pCQSxFQUFRdEIsQ0FBRyxFQUdYc0IsRUFHZixPQUFPLEtBQUssWUFBWSxDQUFDdEIsRUFBSzZRLElBQVEsQ0FDbEMsTUFBTTNLLEVBQVNwRSxFQUFNOUIsQ0FBRyxFQUNsQjBTLEVBQVcsSUFBTTdCLEVBQUksU0FBUyxDQUNoQyxLQUFNaEIsRUFBYSxPQUNuQixHQUFHNEMsRUFBbUJ6UyxDQUFHLENBQ3pDLENBQWEsRUFDRCxPQUFJLE9BQU8sUUFBWSxLQUFla0csYUFBa0IsUUFDN0NBLEVBQU8sS0FBTTBKLEdBQ1hBLEVBS00sSUFKUDhDLEVBQVUsRUFDSCxHQUtkLEVBRUF4TSxFQUtNLElBSlB3TSxFQUFVLEVBQ0gsR0FLdkIsQ0FBUyxDQUNULENBQ0ksV0FBVzVRLEVBQU82USxFQUFnQixDQUM5QixPQUFPLEtBQUssWUFBWSxDQUFDM1MsRUFBSzZRLElBQ3JCL08sRUFBTTlCLENBQUcsRUFLSCxJQUpQNlEsRUFBSSxTQUFTLE9BQU84QixHQUFtQixXQUFhQSxFQUFlM1MsRUFBSzZRLENBQUcsRUFBSThCLENBQWMsRUFDdEYsR0FLZCxDQUNULENBQ0ksWUFBWUMsRUFBWSxDQUNwQixPQUFPLElBQUlDLEdBQVcsQ0FDbEIsT0FBUSxLQUNSLFNBQVV0UixFQUFzQixXQUNoQyxPQUFRLENBQUUsS0FBTSxhQUFjLFdBQUFxUixDQUFZLENBQ3RELENBQVMsQ0FDVCxDQUNJLFlBQVlBLEVBQVksQ0FDcEIsT0FBTyxLQUFLLFlBQVlBLENBQVUsQ0FDMUMsQ0FDSSxZQUFZblUsRUFBSyxDQUViLEtBQUssSUFBTSxLQUFLLGVBQ2hCLEtBQUssS0FBT0EsRUFDWixLQUFLLE1BQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxFQUNqQyxLQUFLLFVBQVksS0FBSyxVQUFVLEtBQUssSUFBSSxFQUN6QyxLQUFLLFdBQWEsS0FBSyxXQUFXLEtBQUssSUFBSSxFQUMzQyxLQUFLLGVBQWlCLEtBQUssZUFBZSxLQUFLLElBQUksRUFDbkQsS0FBSyxJQUFNLEtBQUssSUFBSSxLQUFLLElBQUksRUFDN0IsS0FBSyxPQUFTLEtBQUssT0FBTyxLQUFLLElBQUksRUFDbkMsS0FBSyxXQUFhLEtBQUssV0FBVyxLQUFLLElBQUksRUFDM0MsS0FBSyxZQUFjLEtBQUssWUFBWSxLQUFLLElBQUksRUFDN0MsS0FBSyxTQUFXLEtBQUssU0FBUyxLQUFLLElBQUksRUFDdkMsS0FBSyxTQUFXLEtBQUssU0FBUyxLQUFLLElBQUksRUFDdkMsS0FBSyxRQUFVLEtBQUssUUFBUSxLQUFLLElBQUksRUFDckMsS0FBSyxNQUFRLEtBQUssTUFBTSxLQUFLLElBQUksRUFDakMsS0FBSyxRQUFVLEtBQUssUUFBUSxLQUFLLElBQUksRUFDckMsS0FBSyxHQUFLLEtBQUssR0FBRyxLQUFLLElBQUksRUFDM0IsS0FBSyxJQUFNLEtBQUssSUFBSSxLQUFLLElBQUksRUFDN0IsS0FBSyxVQUFZLEtBQUssVUFBVSxLQUFLLElBQUksRUFDekMsS0FBSyxNQUFRLEtBQUssTUFBTSxLQUFLLElBQUksRUFDakMsS0FBSyxRQUFVLEtBQUssUUFBUSxLQUFLLElBQUksRUFDckMsS0FBSyxNQUFRLEtBQUssTUFBTSxLQUFLLElBQUksRUFDakMsS0FBSyxTQUFXLEtBQUssU0FBUyxLQUFLLElBQUksRUFDdkMsS0FBSyxLQUFPLEtBQUssS0FBSyxLQUFLLElBQUksRUFDL0IsS0FBSyxTQUFXLEtBQUssU0FBUyxLQUFLLElBQUksRUFDdkMsS0FBSyxXQUFhLEtBQUssV0FBVyxLQUFLLElBQUksRUFDM0MsS0FBSyxXQUFhLEtBQUssV0FBVyxLQUFLLElBQUksRUFDM0MsS0FBSyxXQUFXLEVBQUksQ0FDaEIsUUFBUyxFQUNULE9BQVEsTUFDUixTQUFXbVIsR0FBUyxLQUFLLFdBQVcsRUFBRUEsQ0FBSSxDQUM3QyxDQUNULENBQ0ksVUFBVyxDQUNQLE9BQU9rRCxHQUFZLE9BQU8sS0FBTSxLQUFLLElBQUksQ0FDakQsQ0FDSSxVQUFXLENBQ1AsT0FBT0MsR0FBWSxPQUFPLEtBQU0sS0FBSyxJQUFJLENBQ2pELENBQ0ksU0FBVSxDQUNOLE9BQU8sS0FBSyxTQUFVLEVBQUMsU0FBVSxDQUN6QyxDQUNJLE9BQVEsQ0FDSixPQUFPQyxHQUFTLE9BQU8sSUFBSSxDQUNuQyxDQUNJLFNBQVUsQ0FDTixPQUFPQyxHQUFXLE9BQU8sS0FBTSxLQUFLLElBQUksQ0FDaEQsQ0FDSSxHQUFHQyxFQUFRLENBQ1AsT0FBT0MsR0FBUyxPQUFPLENBQUMsS0FBTUQsQ0FBTSxFQUFHLEtBQUssSUFBSSxDQUN4RCxDQUNJLElBQUlFLEVBQVUsQ0FDVixPQUFPQyxHQUFnQixPQUFPLEtBQU1ELEVBQVUsS0FBSyxJQUFJLENBQy9ELENBQ0ksVUFBVUUsRUFBVyxDQUNqQixPQUFPLElBQUlULEdBQVcsQ0FDbEIsR0FBR1osRUFBb0IsS0FBSyxJQUFJLEVBQ2hDLE9BQVEsS0FDUixTQUFVMVEsRUFBc0IsV0FDaEMsT0FBUSxDQUFFLEtBQU0sWUFBYSxVQUFBK1IsQ0FBVyxDQUNwRCxDQUFTLENBQ1QsQ0FDSSxRQUFRN1UsRUFBSyxDQUNULE1BQU04VSxFQUFtQixPQUFPOVUsR0FBUSxXQUFhQSxFQUFNLElBQU1BLEVBQ2pFLE9BQU8sSUFBSStVLEdBQVcsQ0FDbEIsR0FBR3ZCLEVBQW9CLEtBQUssSUFBSSxFQUNoQyxVQUFXLEtBQ1gsYUFBY3NCLEVBQ2QsU0FBVWhTLEVBQXNCLFVBQzVDLENBQVMsQ0FDVCxDQUNJLE9BQVEsQ0FDSixPQUFPLElBQUlrUyxHQUFXLENBQ2xCLFNBQVVsUyxFQUFzQixXQUNoQyxLQUFNLEtBQ04sR0FBRzBRLEVBQW9CLEtBQUssSUFBSSxDQUM1QyxDQUFTLENBQ1QsQ0FDSSxNQUFNeFQsRUFBSyxDQUNQLE1BQU1pVixFQUFpQixPQUFPalYsR0FBUSxXQUFhQSxFQUFNLElBQU1BLEVBQy9ELE9BQU8sSUFBSWtWLEdBQVMsQ0FDaEIsR0FBRzFCLEVBQW9CLEtBQUssSUFBSSxFQUNoQyxVQUFXLEtBQ1gsV0FBWXlCLEVBQ1osU0FBVW5TLEVBQXNCLFFBQzVDLENBQVMsQ0FDVCxDQUNJLFNBQVM2USxFQUFhLENBQ2xCLE1BQU13QixFQUFPLEtBQUssWUFDbEIsT0FBTyxJQUFJQSxFQUFLLENBQ1osR0FBRyxLQUFLLEtBQ1IsWUFBQXhCLENBQ1osQ0FBUyxDQUNULENBQ0ksS0FBS3lCLEVBQVEsQ0FDVCxPQUFPQyxHQUFZLE9BQU8sS0FBTUQsQ0FBTSxDQUM5QyxDQUNJLFVBQVcsQ0FDUCxPQUFPRSxHQUFZLE9BQU8sSUFBSSxDQUN0QyxDQUNJLFlBQWEsQ0FDVCxPQUFPLEtBQUssVUFBVSxNQUFTLEVBQUUsT0FDekMsQ0FDSSxZQUFhLENBQ1QsT0FBTyxLQUFLLFVBQVUsSUFBSSxFQUFFLE9BQ3BDLENBQ0EsQ0FDQSxNQUFNQyxHQUFZLGlCQUNaQyxHQUFhLGNBQ2JDLEdBQVksNEJBR1pDLEdBQVkseUZBQ1pDLEdBQWMsb0JBQ2RDLEdBQVcsbURBQ1hDLEdBQWdCLDJTQWFoQkMsR0FBYSxxRkFJYkMsR0FBYyx1REFDcEIsSUFBSWhSLEdBRUosTUFBTWlSLEdBQVksc0hBQ1pDLEdBQWdCLDJJQUdoQkMsR0FBWSx3cEJBQ1pDLEdBQWdCLDByQkFFaEJDLEdBQWMsbUVBRWRDLEdBQWlCLHlFQU1qQkMsR0FBa0Isb01BQ2xCQyxHQUFZLElBQUksT0FBTyxJQUFJRCxFQUFlLEdBQUcsRUFDbkQsU0FBU0UsR0FBZ0JwTSxFQUFNLENBQzNCLElBQUlxTSxFQUFxQixXQUNyQnJNLEVBQUssVUFDTHFNLEVBQXFCLEdBQUdBLENBQWtCLFVBQVVyTSxFQUFLLFNBQVMsSUFFN0RBLEVBQUssV0FBYSxPQUN2QnFNLEVBQXFCLEdBQUdBLENBQWtCLGNBRTlDLE1BQU1DLEVBQW9CdE0sRUFBSyxVQUFZLElBQU0sSUFDakQsTUFBTyw4QkFBOEJxTSxDQUFrQixJQUFJQyxDQUFpQixFQUNoRixDQUNBLFNBQVNDLEdBQVV2TSxFQUFNLENBQ3JCLE9BQU8sSUFBSSxPQUFPLElBQUlvTSxHQUFnQnBNLENBQUksQ0FBQyxHQUFHLENBQ2xELENBRU8sU0FBU3dNLEdBQWN4TSxFQUFNLENBQ2hDLElBQUk3RSxFQUFRLEdBQUcrUSxFQUFlLElBQUlFLEdBQWdCcE0sQ0FBSSxDQUFDLEdBQ3ZELE1BQU15TSxFQUFPLENBQUUsRUFDZixPQUFBQSxFQUFLLEtBQUt6TSxFQUFLLE1BQVEsS0FBTyxHQUFHLEVBQzdCQSxFQUFLLFFBQ0x5TSxFQUFLLEtBQUssc0JBQXNCLEVBQ3BDdFIsRUFBUSxHQUFHQSxDQUFLLElBQUlzUixFQUFLLEtBQUssR0FBRyxDQUFDLElBQzNCLElBQUksT0FBTyxJQUFJdFIsQ0FBSyxHQUFHLENBQ2xDLENBQ0EsU0FBU3VSLEdBQVVDLEVBQUlDLEVBQVMsQ0FJNUIsTUFISyxJQUFBQSxJQUFZLE1BQVEsQ0FBQ0EsSUFBWWhCLEdBQVUsS0FBS2UsQ0FBRSxJQUdsREMsSUFBWSxNQUFRLENBQUNBLElBQVlkLEdBQVUsS0FBS2EsQ0FBRSxFQUkzRCxDQUNBLFNBQVNFLEdBQVdDLEVBQUtDLEVBQUssQ0FDMUIsR0FBSSxDQUFDdkIsR0FBUyxLQUFLc0IsQ0FBRyxFQUNsQixNQUFPLEdBQ1gsR0FBSSxDQUNBLEtBQU0sQ0FBQ0UsQ0FBTSxFQUFJRixFQUFJLE1BQU0sR0FBRyxFQUV4QnJhLEVBQVN1YSxFQUNWLFFBQVEsS0FBTSxHQUFHLEVBQ2pCLFFBQVEsS0FBTSxHQUFHLEVBQ2pCLE9BQU9BLEVBQU8sUUFBVyxFQUFLQSxFQUFPLE9BQVMsR0FBTSxFQUFJLEdBQUcsRUFDMURDLEVBQVUsS0FBSyxNQUFNLEtBQUt4YSxDQUFNLENBQUMsRUFPdkMsTUFOSSxTQUFPd2EsR0FBWSxVQUFZQSxJQUFZLE1BRTNDLFFBQVNBLElBQVdBLEdBQUEsWUFBQUEsRUFBUyxPQUFRLE9BRXJDLENBQUNBLEVBQVEsS0FFVEYsR0FBT0UsRUFBUSxNQUFRRixFQUduQyxNQUNVLENBQ0YsTUFBTyxFQUNmLENBQ0EsQ0FDQSxTQUFTRyxHQUFZUCxFQUFJQyxFQUFTLENBSTlCLE1BSEssSUFBQUEsSUFBWSxNQUFRLENBQUNBLElBQVlmLEdBQWMsS0FBS2MsQ0FBRSxJQUd0REMsSUFBWSxNQUFRLENBQUNBLElBQVliLEdBQWMsS0FBS1ksQ0FBRSxFQUkvRCxDQUNPLE1BQU1RLFdBQWtCMUQsQ0FBUSxDQUNuQyxPQUFPNUksRUFBTyxDQUtWLEdBSkksS0FBSyxLQUFLLFNBQ1ZBLEVBQU0sS0FBTyxPQUFPQSxFQUFNLElBQUksR0FFZixLQUFLLFNBQVNBLENBQUssSUFDbkJnRyxFQUFjLE9BQVEsQ0FDckMsTUFBTW1CLEVBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLLEVBQ3RDLE9BQUFrSCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxhQUNuQixTQUFVSCxFQUFjLE9BQ3hCLFNBQVVtQixFQUFJLFVBQzlCLENBQWEsRUFDTU0sQ0FDbkIsQ0FDUSxNQUFNSCxFQUFTLElBQUlELEdBQ25CLElBQUlGLEVBQ0osVUFBVy9PLEtBQVMsS0FBSyxLQUFLLE9BQzFCLEdBQUlBLEVBQU0sT0FBUyxNQUNYNEgsRUFBTSxLQUFLLE9BQVM1SCxFQUFNLFFBQzFCK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxVQUNuQixRQUFTL04sRUFBTSxNQUNmLEtBQU0sU0FDTixVQUFXLEdBQ1gsTUFBTyxHQUNQLFFBQVNBLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxXQUdibFAsRUFBTSxPQUFTLE1BQ2hCNEgsRUFBTSxLQUFLLE9BQVM1SCxFQUFNLFFBQzFCK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxRQUNuQixRQUFTL04sRUFBTSxNQUNmLEtBQU0sU0FDTixVQUFXLEdBQ1gsTUFBTyxHQUNQLFFBQVNBLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxXQUdibFAsRUFBTSxPQUFTLFNBQVUsQ0FDOUIsTUFBTW1VLEVBQVN2TSxFQUFNLEtBQUssT0FBUzVILEVBQU0sTUFDbkNvVSxFQUFXeE0sRUFBTSxLQUFLLE9BQVM1SCxFQUFNLE9BQ3ZDbVUsR0FBVUMsS0FDVnJGLEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNqQ29GLEVBQ0FyRixFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxRQUNuQixRQUFTL04sRUFBTSxNQUNmLEtBQU0sU0FDTixVQUFXLEdBQ1gsTUFBTyxHQUNQLFFBQVNBLEVBQU0sT0FDM0MsQ0FBeUIsRUFFSW9VLEdBQ0x0RixFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxVQUNuQixRQUFTL04sRUFBTSxNQUNmLEtBQU0sU0FDTixVQUFXLEdBQ1gsTUFBTyxHQUNQLFFBQVNBLEVBQU0sT0FDM0MsQ0FBeUIsRUFFTGtQLEVBQU8sTUFBTyxFQUVsQyxTQUNxQmxQLEVBQU0sT0FBUyxRQUNmeVMsR0FBVyxLQUFLN0ssRUFBTSxJQUFJLElBQzNCbUgsRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLFFBQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxXQUdibFAsRUFBTSxPQUFTLFFBQ2YwQixLQUNEQSxHQUFhLElBQUksT0FBT2dSLEdBQWEsR0FBRyxHQUV2Q2hSLEdBQVcsS0FBS2tHLEVBQU0sSUFBSSxJQUMzQm1ILEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsV0FBWSxRQUNaLEtBQU1oQixFQUFhLGVBQ25CLFFBQVMvTixFQUFNLE9BQ3ZDLENBQXFCLEVBQ0RrUCxFQUFPLE1BQU8sV0FHYmxQLEVBQU0sT0FBUyxPQUNmcVMsR0FBVSxLQUFLekssRUFBTSxJQUFJLElBQzFCbUgsRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLE9BQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxXQUdibFAsRUFBTSxPQUFTLFNBQ2ZzUyxHQUFZLEtBQUsxSyxFQUFNLElBQUksSUFDNUJtSCxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLFdBQVksU0FDWixLQUFNaEIsRUFBYSxlQUNuQixRQUFTL04sRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLFdBR2JsUCxFQUFNLE9BQVMsT0FDZmtTLEdBQVUsS0FBS3RLLEVBQU0sSUFBSSxJQUMxQm1ILEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsV0FBWSxPQUNaLEtBQU1oQixFQUFhLGVBQ25CLFFBQVMvTixFQUFNLE9BQ3ZDLENBQXFCLEVBQ0RrUCxFQUFPLE1BQU8sV0FHYmxQLEVBQU0sT0FBUyxRQUNmbVMsR0FBVyxLQUFLdkssRUFBTSxJQUFJLElBQzNCbUgsRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLFFBQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxXQUdibFAsRUFBTSxPQUFTLE9BQ2ZvUyxHQUFVLEtBQUt4SyxFQUFNLElBQUksSUFDMUJtSCxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLFdBQVksT0FDWixLQUFNaEIsRUFBYSxlQUNuQixRQUFTL04sRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLFdBR2JsUCxFQUFNLE9BQVMsTUFDcEIsR0FBSSxDQUNBLElBQUksSUFBSTRILEVBQU0sSUFBSSxDQUN0QyxNQUNzQixDQUNGbUgsRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLE1BQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxDQUNsQyxNQUVxQmxQLEVBQU0sT0FBUyxTQUNwQkEsRUFBTSxNQUFNLFVBQVksRUFDTEEsRUFBTSxNQUFNLEtBQUs0SCxFQUFNLElBQUksSUFFMUNtSCxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLFdBQVksUUFDWixLQUFNaEIsRUFBYSxlQUNuQixRQUFTL04sRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLElBR2JsUCxFQUFNLE9BQVMsT0FDcEI0SCxFQUFNLEtBQU9BLEVBQU0sS0FBSyxLQUFNLEVBRXpCNUgsRUFBTSxPQUFTLFdBQ2Y0SCxFQUFNLEtBQUssU0FBUzVILEVBQU0sTUFBT0EsRUFBTSxRQUFRLElBQ2hEK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxlQUNuQixXQUFZLENBQUUsU0FBVS9OLEVBQU0sTUFBTyxTQUFVQSxFQUFNLFFBQVUsRUFDL0QsUUFBU0EsRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsY0FDcEI0SCxFQUFNLEtBQU9BLEVBQU0sS0FBSyxZQUFhLEVBRWhDNUgsRUFBTSxPQUFTLGNBQ3BCNEgsRUFBTSxLQUFPQSxFQUFNLEtBQUssWUFBYSxFQUVoQzVILEVBQU0sT0FBUyxhQUNmNEgsRUFBTSxLQUFLLFdBQVc1SCxFQUFNLEtBQUssSUFDbEMrTyxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLGVBQ25CLFdBQVksQ0FBRSxXQUFZL04sRUFBTSxLQUFPLEVBQ3ZDLFFBQVNBLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxHQUdibFAsRUFBTSxPQUFTLFdBQ2Y0SCxFQUFNLEtBQUssU0FBUzVILEVBQU0sS0FBSyxJQUNoQytPLEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsZUFDbkIsV0FBWSxDQUFFLFNBQVUvTixFQUFNLEtBQU8sRUFDckMsUUFBU0EsRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsV0FDTnVULEdBQWN2VCxDQUFLLEVBQ3RCLEtBQUs0SCxFQUFNLElBQUksSUFDdEJtSCxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLGVBQ25CLFdBQVksV0FDWixRQUFTL04sRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsT0FDTmtULEdBQ0gsS0FBS3RMLEVBQU0sSUFBSSxJQUN0Qm1ILEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsZUFDbkIsV0FBWSxPQUNaLFFBQVMvTixFQUFNLE9BQ3ZDLENBQXFCLEVBQ0RrUCxFQUFPLE1BQU8sR0FHYmxQLEVBQU0sT0FBUyxPQUNOc1QsR0FBVXRULENBQUssRUFDbEIsS0FBSzRILEVBQU0sSUFBSSxJQUN0Qm1ILEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsZUFDbkIsV0FBWSxPQUNaLFFBQVMvTixFQUFNLE9BQ3ZDLENBQXFCLEVBQ0RrUCxFQUFPLE1BQU8sR0FHYmxQLEVBQU0sT0FBUyxXQUNmd1MsR0FBYyxLQUFLNUssRUFBTSxJQUFJLElBQzlCbUgsRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLFdBQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxHQUdibFAsRUFBTSxPQUFTLEtBQ2Z5VCxHQUFVN0wsRUFBTSxLQUFNNUgsRUFBTSxPQUFPLElBQ3BDK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLEtBQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxHQUdibFAsRUFBTSxPQUFTLE1BQ2Y0VCxHQUFXaE0sRUFBTSxLQUFNNUgsRUFBTSxHQUFHLElBQ2pDK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLE1BQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxHQUdibFAsRUFBTSxPQUFTLE9BQ2ZpVSxHQUFZck0sRUFBTSxLQUFNNUgsRUFBTSxPQUFPLElBQ3RDK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixXQUFZLE9BQ1osS0FBTWhCLEVBQWEsZUFDbkIsUUFBUy9OLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxHQUdibFAsRUFBTSxPQUFTLFNBQ2YrUyxHQUFZLEtBQUtuTCxFQUFNLElBQUksSUFDNUJtSCxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLFdBQVksU0FDWixLQUFNaEIsRUFBYSxlQUNuQixRQUFTL04sRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsWUFDZmdULEdBQWUsS0FBS3BMLEVBQU0sSUFBSSxJQUMvQm1ILEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsV0FBWSxZQUNaLEtBQU1oQixFQUFhLGVBQ25CLFFBQVMvTixFQUFNLE9BQ3ZDLENBQXFCLEVBQ0RrUCxFQUFPLE1BQU8sR0FJbEIvUixFQUFLLFlBQVk2QyxDQUFLLEVBRzlCLE1BQU8sQ0FBRSxPQUFRa1AsRUFBTyxNQUFPLE1BQU90SCxFQUFNLElBQU0sQ0FDMUQsQ0FDSSxPQUFPMUYsRUFBT21TLEVBQVk3VSxFQUFTLENBQy9CLE9BQU8sS0FBSyxXQUFZc08sR0FBUzVMLEVBQU0sS0FBSzRMLENBQUksRUFBRyxDQUMvQyxXQUFBdUcsRUFDQSxLQUFNdEcsRUFBYSxlQUNuQixHQUFHeE8sRUFBVSxTQUFTQyxDQUFPLENBQ3pDLENBQVMsQ0FDVCxDQUNJLFVBQVVRLEVBQU8sQ0FDYixPQUFPLElBQUlrVSxHQUFVLENBQ2pCLEdBQUcsS0FBSyxLQUNSLE9BQVEsQ0FBQyxHQUFHLEtBQUssS0FBSyxPQUFRbFUsQ0FBSyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxNQUFNUixFQUFTLENBQ1gsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLFFBQVMsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDL0UsQ0FDSSxJQUFJQSxFQUFTLENBQ1QsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLE1BQU8sR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDN0UsQ0FDSSxNQUFNQSxFQUFTLENBQ1gsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLFFBQVMsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDL0UsQ0FDSSxLQUFLQSxFQUFTLENBQ1YsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLE9BQVEsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDOUUsQ0FDSSxPQUFPQSxFQUFTLENBQ1osT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLFNBQVUsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDaEYsQ0FDSSxLQUFLQSxFQUFTLENBQ1YsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLE9BQVEsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDOUUsQ0FDSSxNQUFNQSxFQUFTLENBQ1gsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLFFBQVMsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDL0UsQ0FDSSxLQUFLQSxFQUFTLENBQ1YsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLE9BQVEsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDOUUsQ0FDSSxPQUFPQSxFQUFTLENBQ1osT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLFNBQVUsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDaEYsQ0FDSSxVQUFVQSxFQUFTLENBRWYsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxZQUNOLEdBQUdELEVBQVUsU0FBU0MsQ0FBTyxDQUN6QyxDQUFTLENBQ1QsQ0FDSSxJQUFJdEQsRUFBUyxDQUNULE9BQU8sS0FBSyxVQUFVLENBQUUsS0FBTSxNQUFPLEdBQUdxRCxFQUFVLFNBQVNyRCxDQUFPLEVBQUcsQ0FDN0UsQ0FDSSxHQUFHQSxFQUFTLENBQ1IsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLEtBQU0sR0FBR3FELEVBQVUsU0FBU3JELENBQU8sRUFBRyxDQUM1RSxDQUNJLEtBQUtBLEVBQVMsQ0FDVixPQUFPLEtBQUssVUFBVSxDQUFFLEtBQU0sT0FBUSxHQUFHcUQsRUFBVSxTQUFTckQsQ0FBTyxFQUFHLENBQzlFLENBQ0ksU0FBU0EsRUFBUyxDQUNkLE9BQUksT0FBT0EsR0FBWSxTQUNaLEtBQUssVUFBVSxDQUNsQixLQUFNLFdBQ04sVUFBVyxLQUNYLE9BQVEsR0FDUixNQUFPLEdBQ1AsUUFBU0EsQ0FDekIsQ0FBYSxFQUVFLEtBQUssVUFBVSxDQUNsQixLQUFNLFdBQ04sVUFBVyxPQUFPQSxHQUFBLFlBQUFBLEVBQVMsV0FBYyxJQUFjLEtBQU9BLEdBQUEsWUFBQUEsRUFBUyxVQUN2RSxRQUFRQSxHQUFBLFlBQUFBLEVBQVMsU0FBVSxHQUMzQixPQUFPQSxHQUFBLFlBQUFBLEVBQVMsUUFBUyxHQUN6QixHQUFHcUQsRUFBVSxTQUFTckQsR0FBQSxZQUFBQSxFQUFTLE9BQU8sQ0FDbEQsQ0FBUyxDQUNULENBQ0ksS0FBS3NELEVBQVMsQ0FDVixPQUFPLEtBQUssVUFBVSxDQUFFLEtBQU0sT0FBUSxRQUFBQSxDQUFPLENBQUUsQ0FDdkQsQ0FDSSxLQUFLdEQsRUFBUyxDQUNWLE9BQUksT0FBT0EsR0FBWSxTQUNaLEtBQUssVUFBVSxDQUNsQixLQUFNLE9BQ04sVUFBVyxLQUNYLFFBQVNBLENBQ3pCLENBQWEsRUFFRSxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxPQUNOLFVBQVcsT0FBT0EsR0FBQSxZQUFBQSxFQUFTLFdBQWMsSUFBYyxLQUFPQSxHQUFBLFlBQUFBLEVBQVMsVUFDdkUsR0FBR3FELEVBQVUsU0FBU3JELEdBQUEsWUFBQUEsRUFBUyxPQUFPLENBQ2xELENBQVMsQ0FDVCxDQUNJLFNBQVNzRCxFQUFTLENBQ2QsT0FBTyxLQUFLLFVBQVUsQ0FBRSxLQUFNLFdBQVksR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEVBQUcsQ0FDbEYsQ0FDSSxNQUFNMEMsRUFBTzFDLEVBQVMsQ0FDbEIsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxRQUNOLE1BQU8wQyxFQUNQLEdBQUczQyxFQUFVLFNBQVNDLENBQU8sQ0FDekMsQ0FBUyxDQUNULENBQ0ksU0FBU3RDLEVBQU9oQixFQUFTLENBQ3JCLE9BQU8sS0FBSyxVQUFVLENBQ2xCLEtBQU0sV0FDTixNQUFPZ0IsRUFDUCxTQUFVaEIsR0FBQSxZQUFBQSxFQUFTLFNBQ25CLEdBQUdxRCxFQUFVLFNBQVNyRCxHQUFBLFlBQUFBLEVBQVMsT0FBTyxDQUNsRCxDQUFTLENBQ1QsQ0FDSSxXQUFXZ0IsRUFBT3NDLEVBQVMsQ0FDdkIsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxhQUNOLE1BQU90QyxFQUNQLEdBQUdxQyxFQUFVLFNBQVNDLENBQU8sQ0FDekMsQ0FBUyxDQUNULENBQ0ksU0FBU3RDLEVBQU9zQyxFQUFTLENBQ3JCLE9BQU8sS0FBSyxVQUFVLENBQ2xCLEtBQU0sV0FDTixNQUFPdEMsRUFDUCxHQUFHcUMsRUFBVSxTQUFTQyxDQUFPLENBQ3pDLENBQVMsQ0FDVCxDQUNJLElBQUk4VSxFQUFXOVUsRUFBUyxDQUNwQixPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLE1BQ04sTUFBTzhVLEVBQ1AsR0FBRy9VLEVBQVUsU0FBU0MsQ0FBTyxDQUN6QyxDQUFTLENBQ1QsQ0FDSSxJQUFJK1UsRUFBVy9VLEVBQVMsQ0FDcEIsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxNQUNOLE1BQU8rVSxFQUNQLEdBQUdoVixFQUFVLFNBQVNDLENBQU8sQ0FDekMsQ0FBUyxDQUNULENBQ0ksT0FBTzlGLEVBQUs4RixFQUFTLENBQ2pCLE9BQU8sS0FBSyxVQUFVLENBQ2xCLEtBQU0sU0FDTixNQUFPOUYsRUFDUCxHQUFHNkYsRUFBVSxTQUFTQyxDQUFPLENBQ3pDLENBQVMsQ0FDVCxDQUlJLFNBQVNBLEVBQVMsQ0FDZCxPQUFPLEtBQUssSUFBSSxFQUFHRCxFQUFVLFNBQVNDLENBQU8sQ0FBQyxDQUN0RCxDQUNJLE1BQU8sQ0FDSCxPQUFPLElBQUkwVSxHQUFVLENBQ2pCLEdBQUcsS0FBSyxLQUNSLE9BQVEsQ0FBQyxHQUFHLEtBQUssS0FBSyxPQUFRLENBQUUsS0FBTSxPQUFRLENBQzFELENBQVMsQ0FDVCxDQUNJLGFBQWMsQ0FDVixPQUFPLElBQUlBLEdBQVUsQ0FDakIsR0FBRyxLQUFLLEtBQ1IsT0FBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLE9BQVEsQ0FBRSxLQUFNLGNBQWUsQ0FDakUsQ0FBUyxDQUNULENBQ0ksYUFBYyxDQUNWLE9BQU8sSUFBSUEsR0FBVSxDQUNqQixHQUFHLEtBQUssS0FDUixPQUFRLENBQUMsR0FBRyxLQUFLLEtBQUssT0FBUSxDQUFFLEtBQU0sY0FBZSxDQUNqRSxDQUFTLENBQ1QsQ0FDSSxJQUFJLFlBQWEsQ0FDYixNQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFNTSxHQUFPQSxFQUFHLE9BQVMsVUFBVSxDQUNyRSxDQUNJLElBQUksUUFBUyxDQUNULE1BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQU1BLEdBQU9BLEVBQUcsT0FBUyxNQUFNLENBQ2pFLENBQ0ksSUFBSSxRQUFTLENBQ1QsTUFBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBTUEsR0FBT0EsRUFBRyxPQUFTLE1BQU0sQ0FDakUsQ0FDSSxJQUFJLFlBQWEsQ0FDYixNQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFNQSxHQUFPQSxFQUFHLE9BQVMsVUFBVSxDQUNyRSxDQUNJLElBQUksU0FBVSxDQUNWLE1BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQU1BLEdBQU9BLEVBQUcsT0FBUyxPQUFPLENBQ2xFLENBQ0ksSUFBSSxPQUFRLENBQ1IsTUFBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBTUEsR0FBT0EsRUFBRyxPQUFTLEtBQUssQ0FDaEUsQ0FDSSxJQUFJLFNBQVUsQ0FDVixNQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFNQSxHQUFPQSxFQUFHLE9BQVMsT0FBTyxDQUNsRSxDQUNJLElBQUksUUFBUyxDQUNULE1BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQU1BLEdBQU9BLEVBQUcsT0FBUyxNQUFNLENBQ2pFLENBQ0ksSUFBSSxVQUFXLENBQ1gsTUFBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBTUEsR0FBT0EsRUFBRyxPQUFTLFFBQVEsQ0FDbkUsQ0FDSSxJQUFJLFFBQVMsQ0FDVCxNQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFNQSxHQUFPQSxFQUFHLE9BQVMsTUFBTSxDQUNqRSxDQUNJLElBQUksU0FBVSxDQUNWLE1BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQU1BLEdBQU9BLEVBQUcsT0FBUyxPQUFPLENBQ2xFLENBQ0ksSUFBSSxRQUFTLENBQ1QsTUFBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBTUEsR0FBT0EsRUFBRyxPQUFTLE1BQU0sQ0FDakUsQ0FDSSxJQUFJLE1BQU8sQ0FDUCxNQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFNQSxHQUFPQSxFQUFHLE9BQVMsSUFBSSxDQUMvRCxDQUNJLElBQUksUUFBUyxDQUNULE1BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQU1BLEdBQU9BLEVBQUcsT0FBUyxNQUFNLENBQ2pFLENBQ0ksSUFBSSxVQUFXLENBQ1gsTUFBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBTUEsR0FBT0EsRUFBRyxPQUFTLFFBQVEsQ0FDbkUsQ0FDSSxJQUFJLGFBQWMsQ0FFZCxNQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFNQSxHQUFPQSxFQUFHLE9BQVMsV0FBVyxDQUN0RSxDQUNJLElBQUksV0FBWSxDQUNaLElBQUlDLEVBQU0sS0FDVixVQUFXRCxLQUFNLEtBQUssS0FBSyxPQUNuQkEsRUFBRyxPQUFTLFFBQ1JDLElBQVEsTUFBUUQsRUFBRyxNQUFRQyxLQUMzQkEsRUFBTUQsRUFBRyxPQUdyQixPQUFPQyxDQUNmLENBQ0ksSUFBSSxXQUFZLENBQ1osSUFBSUMsRUFBTSxLQUNWLFVBQVdGLEtBQU0sS0FBSyxLQUFLLE9BQ25CQSxFQUFHLE9BQVMsUUFDUkUsSUFBUSxNQUFRRixFQUFHLE1BQVFFLEtBQzNCQSxFQUFNRixFQUFHLE9BR3JCLE9BQU9FLENBQ2YsQ0FDQSxDQUNBUixHQUFVLE9BQVU1RixHQUNULElBQUk0RixHQUFVLENBQ2pCLE9BQVEsQ0FBRSxFQUNWLFNBQVV6VSxFQUFzQixVQUNoQyxRQUFRNk8sR0FBQSxZQUFBQSxFQUFRLFNBQVUsR0FDMUIsR0FBRzZCLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBR0wsU0FBU3FHLEdBQW1CelcsRUFBSzBXLEVBQU0sQ0FDbkMsTUFBTUMsR0FBZTNXLEVBQUksU0FBVSxFQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBSyxJQUFJLE9BQ25ENFcsR0FBZ0JGLEVBQUssU0FBVSxFQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBSyxJQUFJLE9BQ3JERyxFQUFXRixFQUFjQyxFQUFlRCxFQUFjQyxFQUN0REUsRUFBUyxPQUFPLFNBQVM5VyxFQUFJLFFBQVE2VyxDQUFRLEVBQUUsUUFBUSxJQUFLLEVBQUUsQ0FBQyxFQUMvREUsRUFBVSxPQUFPLFNBQVNMLEVBQUssUUFBUUcsQ0FBUSxFQUFFLFFBQVEsSUFBSyxFQUFFLENBQUMsRUFDdkUsT0FBUUMsRUFBU0MsRUFBVyxJQUFNRixDQUN0QyxDQUNPLE1BQU1HLFdBQWtCMUUsQ0FBUSxDQUNuQyxhQUFjLENBQ1YsTUFBTSxHQUFHLFNBQVMsRUFDbEIsS0FBSyxJQUFNLEtBQUssSUFDaEIsS0FBSyxJQUFNLEtBQUssSUFDaEIsS0FBSyxLQUFPLEtBQUssVUFDekIsQ0FDSSxPQUFPNUksRUFBTyxDQUtWLEdBSkksS0FBSyxLQUFLLFNBQ1ZBLEVBQU0sS0FBTyxPQUFPQSxFQUFNLElBQUksR0FFZixLQUFLLFNBQVNBLENBQUssSUFDbkJnRyxFQUFjLE9BQVEsQ0FDckMsTUFBTW1CLEVBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLLEVBQ3RDLE9BQUFrSCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxhQUNuQixTQUFVSCxFQUFjLE9BQ3hCLFNBQVVtQixFQUFJLFVBQzlCLENBQWEsRUFDTU0sQ0FDbkIsQ0FDUSxJQUFJTixFQUNKLE1BQU1HLEVBQVMsSUFBSUQsR0FDbkIsVUFBV2pQLEtBQVMsS0FBSyxLQUFLLE9BQ3RCQSxFQUFNLE9BQVMsTUFDVjdDLEVBQUssVUFBVXlLLEVBQU0sSUFBSSxJQUMxQm1ILEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVSxVQUNWLFNBQVUsUUFDVixRQUFTL04sRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsT0FDSEEsRUFBTSxVQUFZNEgsRUFBTSxLQUFPNUgsRUFBTSxNQUFRNEgsRUFBTSxNQUFRNUgsRUFBTSxTQUU5RStPLEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsVUFDbkIsUUFBUy9OLEVBQU0sTUFDZixLQUFNLFNBQ04sVUFBV0EsRUFBTSxVQUNqQixNQUFPLEdBQ1AsUUFBU0EsRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsT0FDTEEsRUFBTSxVQUFZNEgsRUFBTSxLQUFPNUgsRUFBTSxNQUFRNEgsRUFBTSxNQUFRNUgsRUFBTSxTQUU1RStPLEVBQU0sS0FBSyxnQkFBZ0JuSCxFQUFPbUgsQ0FBRyxFQUNyQ0QsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsUUFDbkIsUUFBUy9OLEVBQU0sTUFDZixLQUFNLFNBQ04sVUFBV0EsRUFBTSxVQUNqQixNQUFPLEdBQ1AsUUFBU0EsRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsYUFDaEIyVSxHQUFtQi9NLEVBQU0sS0FBTTVILEVBQU0sS0FBSyxJQUFNLElBQ2hEK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxnQkFDbkIsV0FBWS9OLEVBQU0sTUFDbEIsUUFBU0EsRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsU0FDZixPQUFPLFNBQVM0SCxFQUFNLElBQUksSUFDM0JtSCxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLFdBQ25CLFFBQVMvTixFQUFNLE9BQ3ZDLENBQXFCLEVBQ0RrUCxFQUFPLE1BQU8sR0FJbEIvUixFQUFLLFlBQVk2QyxDQUFLLEVBRzlCLE1BQU8sQ0FBRSxPQUFRa1AsRUFBTyxNQUFPLE1BQU90SCxFQUFNLElBQU0sQ0FDMUQsQ0FDSSxJQUFJMUssRUFBT3NDLEVBQVMsQ0FDaEIsT0FBTyxLQUFLLFNBQVMsTUFBT3RDLEVBQU8sR0FBTXFDLEVBQVUsU0FBU0MsQ0FBTyxDQUFDLENBQzVFLENBQ0ksR0FBR3RDLEVBQU9zQyxFQUFTLENBQ2YsT0FBTyxLQUFLLFNBQVMsTUFBT3RDLEVBQU8sR0FBT3FDLEVBQVUsU0FBU0MsQ0FBTyxDQUFDLENBQzdFLENBQ0ksSUFBSXRDLEVBQU9zQyxFQUFTLENBQ2hCLE9BQU8sS0FBSyxTQUFTLE1BQU90QyxFQUFPLEdBQU1xQyxFQUFVLFNBQVNDLENBQU8sQ0FBQyxDQUM1RSxDQUNJLEdBQUd0QyxFQUFPc0MsRUFBUyxDQUNmLE9BQU8sS0FBSyxTQUFTLE1BQU90QyxFQUFPLEdBQU9xQyxFQUFVLFNBQVNDLENBQU8sQ0FBQyxDQUM3RSxDQUNJLFNBQVMyVixFQUFNalksRUFBT2tZLEVBQVc1VixFQUFTLENBQ3RDLE9BQU8sSUFBSTBWLEdBQVUsQ0FDakIsR0FBRyxLQUFLLEtBQ1IsT0FBUSxDQUNKLEdBQUcsS0FBSyxLQUFLLE9BQ2IsQ0FDSSxLQUFBQyxFQUNBLE1BQUFqWSxFQUNBLFVBQUFrWSxFQUNBLFFBQVM3VixFQUFVLFNBQVNDLENBQU8sQ0FDdEMsQ0FDSixDQUNiLENBQVMsQ0FDVCxDQUNJLFVBQVVRLEVBQU8sQ0FDYixPQUFPLElBQUlrVixHQUFVLENBQ2pCLEdBQUcsS0FBSyxLQUNSLE9BQVEsQ0FBQyxHQUFHLEtBQUssS0FBSyxPQUFRbFYsQ0FBSyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxJQUFJUixFQUFTLENBQ1QsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxNQUNOLFFBQVNELEVBQVUsU0FBU0MsQ0FBTyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxTQUFTQSxFQUFTLENBQ2QsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxNQUNOLE1BQU8sRUFDUCxVQUFXLEdBQ1gsUUFBU0QsRUFBVSxTQUFTQyxDQUFPLENBQy9DLENBQVMsQ0FDVCxDQUNJLFNBQVNBLEVBQVMsQ0FDZCxPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLE1BQ04sTUFBTyxFQUNQLFVBQVcsR0FDWCxRQUFTRCxFQUFVLFNBQVNDLENBQU8sQ0FDL0MsQ0FBUyxDQUNULENBQ0ksWUFBWUEsRUFBUyxDQUNqQixPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLE1BQ04sTUFBTyxFQUNQLFVBQVcsR0FDWCxRQUFTRCxFQUFVLFNBQVNDLENBQU8sQ0FDL0MsQ0FBUyxDQUNULENBQ0ksWUFBWUEsRUFBUyxDQUNqQixPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLE1BQ04sTUFBTyxFQUNQLFVBQVcsR0FDWCxRQUFTRCxFQUFVLFNBQVNDLENBQU8sQ0FDL0MsQ0FBUyxDQUNULENBQ0ksV0FBV3RDLEVBQU9zQyxFQUFTLENBQ3ZCLE9BQU8sS0FBSyxVQUFVLENBQ2xCLEtBQU0sYUFDTixNQUFPdEMsRUFDUCxRQUFTcUMsRUFBVSxTQUFTQyxDQUFPLENBQy9DLENBQVMsQ0FDVCxDQUNJLE9BQU9BLEVBQVMsQ0FDWixPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLFNBQ04sUUFBU0QsRUFBVSxTQUFTQyxDQUFPLENBQy9DLENBQVMsQ0FDVCxDQUNJLEtBQUtBLEVBQVMsQ0FDVixPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLE1BQ04sVUFBVyxHQUNYLE1BQU8sT0FBTyxpQkFDZCxRQUFTRCxFQUFVLFNBQVNDLENBQU8sQ0FDdEMsQ0FBQSxFQUFFLFVBQVUsQ0FDVCxLQUFNLE1BQ04sVUFBVyxHQUNYLE1BQU8sT0FBTyxpQkFDZCxRQUFTRCxFQUFVLFNBQVNDLENBQU8sQ0FDL0MsQ0FBUyxDQUNULENBQ0ksSUFBSSxVQUFXLENBQ1gsSUFBSWlWLEVBQU0sS0FDVixVQUFXRCxLQUFNLEtBQUssS0FBSyxPQUNuQkEsRUFBRyxPQUFTLFFBQ1JDLElBQVEsTUFBUUQsRUFBRyxNQUFRQyxLQUMzQkEsRUFBTUQsRUFBRyxPQUdyQixPQUFPQyxDQUNmLENBQ0ksSUFBSSxVQUFXLENBQ1gsSUFBSUMsRUFBTSxLQUNWLFVBQVdGLEtBQU0sS0FBSyxLQUFLLE9BQ25CQSxFQUFHLE9BQVMsUUFDUkUsSUFBUSxNQUFRRixFQUFHLE1BQVFFLEtBQzNCQSxFQUFNRixFQUFHLE9BR3JCLE9BQU9FLENBQ2YsQ0FDSSxJQUFJLE9BQVEsQ0FDUixNQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFNRixHQUFPQSxFQUFHLE9BQVMsT0FBVUEsRUFBRyxPQUFTLGNBQWdCclgsRUFBSyxVQUFVcVgsRUFBRyxLQUFLLENBQUUsQ0FDMUgsQ0FDSSxJQUFJLFVBQVcsQ0FDWCxJQUFJRSxFQUFNLEtBQ05ELEVBQU0sS0FDVixVQUFXRCxLQUFNLEtBQUssS0FBSyxPQUFRLENBQy9CLEdBQUlBLEVBQUcsT0FBUyxVQUFZQSxFQUFHLE9BQVMsT0FBU0EsRUFBRyxPQUFTLGFBQ3pELE1BQU8sR0FFRkEsRUFBRyxPQUFTLE9BQ2JDLElBQVEsTUFBUUQsRUFBRyxNQUFRQyxLQUMzQkEsRUFBTUQsRUFBRyxPQUVSQSxFQUFHLE9BQVMsUUFDYkUsSUFBUSxNQUFRRixFQUFHLE1BQVFFLEtBQzNCQSxFQUFNRixFQUFHLE1BRTdCLENBQ1EsT0FBTyxPQUFPLFNBQVNDLENBQUcsR0FBSyxPQUFPLFNBQVNDLENBQUcsQ0FDMUQsQ0FDQSxDQUNBUSxHQUFVLE9BQVU1RyxHQUNULElBQUk0RyxHQUFVLENBQ2pCLE9BQVEsQ0FBRSxFQUNWLFNBQVV6VixFQUFzQixVQUNoQyxRQUFRNk8sR0FBQSxZQUFBQSxFQUFRLFNBQVUsR0FDMUIsR0FBRzZCLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUUsTUFBTStHLFdBQWtCN0UsQ0FBUSxDQUNuQyxhQUFjLENBQ1YsTUFBTSxHQUFHLFNBQVMsRUFDbEIsS0FBSyxJQUFNLEtBQUssSUFDaEIsS0FBSyxJQUFNLEtBQUssR0FDeEIsQ0FDSSxPQUFPNUksRUFBTyxDQUNWLEdBQUksS0FBSyxLQUFLLE9BQ1YsR0FBSSxDQUNBQSxFQUFNLEtBQU8sT0FBT0EsRUFBTSxJQUFJLENBQzlDLE1BQ2tCLENBQ0YsT0FBTyxLQUFLLGlCQUFpQkEsQ0FBSyxDQUNsRCxDQUdRLEdBRG1CLEtBQUssU0FBU0EsQ0FBSyxJQUNuQmdHLEVBQWMsT0FDN0IsT0FBTyxLQUFLLGlCQUFpQmhHLENBQUssRUFFdEMsSUFBSW1ILEVBQ0osTUFBTUcsRUFBUyxJQUFJRCxHQUNuQixVQUFXalAsS0FBUyxLQUFLLEtBQUssT0FDdEJBLEVBQU0sT0FBUyxPQUNFQSxFQUFNLFVBQVk0SCxFQUFNLEtBQU81SCxFQUFNLE1BQVE0SCxFQUFNLE1BQVE1SCxFQUFNLFNBRTlFK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxVQUNuQixLQUFNLFNBQ04sUUFBUy9OLEVBQU0sTUFDZixVQUFXQSxFQUFNLFVBQ2pCLFFBQVNBLEVBQU0sT0FDdkMsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxHQUdibFAsRUFBTSxPQUFTLE9BQ0xBLEVBQU0sVUFBWTRILEVBQU0sS0FBTzVILEVBQU0sTUFBUTRILEVBQU0sTUFBUTVILEVBQU0sU0FFNUUrTyxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLFFBQ25CLEtBQU0sU0FDTixRQUFTL04sRUFBTSxNQUNmLFVBQVdBLEVBQU0sVUFDakIsUUFBU0EsRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBR2JsUCxFQUFNLE9BQVMsYUFDaEI0SCxFQUFNLEtBQU81SCxFQUFNLFFBQVUsT0FBTyxDQUFDLElBQ3JDK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxnQkFDbkIsV0FBWS9OLEVBQU0sTUFDbEIsUUFBU0EsRUFBTSxPQUN2QyxDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBSWxCL1IsRUFBSyxZQUFZNkMsQ0FBSyxFQUc5QixNQUFPLENBQUUsT0FBUWtQLEVBQU8sTUFBTyxNQUFPdEgsRUFBTSxJQUFNLENBQzFELENBQ0ksaUJBQWlCQSxFQUFPLENBQ3BCLE1BQU1tSCxFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUN0QyxPQUFBa0gsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVUgsRUFBYyxPQUN4QixTQUFVbUIsRUFBSSxVQUMxQixDQUFTLEVBQ01NLENBQ2YsQ0FDSSxJQUFJblMsRUFBT3NDLEVBQVMsQ0FDaEIsT0FBTyxLQUFLLFNBQVMsTUFBT3RDLEVBQU8sR0FBTXFDLEVBQVUsU0FBU0MsQ0FBTyxDQUFDLENBQzVFLENBQ0ksR0FBR3RDLEVBQU9zQyxFQUFTLENBQ2YsT0FBTyxLQUFLLFNBQVMsTUFBT3RDLEVBQU8sR0FBT3FDLEVBQVUsU0FBU0MsQ0FBTyxDQUFDLENBQzdFLENBQ0ksSUFBSXRDLEVBQU9zQyxFQUFTLENBQ2hCLE9BQU8sS0FBSyxTQUFTLE1BQU90QyxFQUFPLEdBQU1xQyxFQUFVLFNBQVNDLENBQU8sQ0FBQyxDQUM1RSxDQUNJLEdBQUd0QyxFQUFPc0MsRUFBUyxDQUNmLE9BQU8sS0FBSyxTQUFTLE1BQU90QyxFQUFPLEdBQU9xQyxFQUFVLFNBQVNDLENBQU8sQ0FBQyxDQUM3RSxDQUNJLFNBQVMyVixFQUFNalksRUFBT2tZLEVBQVc1VixFQUFTLENBQ3RDLE9BQU8sSUFBSTZWLEdBQVUsQ0FDakIsR0FBRyxLQUFLLEtBQ1IsT0FBUSxDQUNKLEdBQUcsS0FBSyxLQUFLLE9BQ2IsQ0FDSSxLQUFBRixFQUNBLE1BQUFqWSxFQUNBLFVBQUFrWSxFQUNBLFFBQVM3VixFQUFVLFNBQVNDLENBQU8sQ0FDdEMsQ0FDSixDQUNiLENBQVMsQ0FDVCxDQUNJLFVBQVVRLEVBQU8sQ0FDYixPQUFPLElBQUlxVixHQUFVLENBQ2pCLEdBQUcsS0FBSyxLQUNSLE9BQVEsQ0FBQyxHQUFHLEtBQUssS0FBSyxPQUFRclYsQ0FBSyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxTQUFTUixFQUFTLENBQ2QsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxNQUNOLE1BQU8sT0FBTyxDQUFDLEVBQ2YsVUFBVyxHQUNYLFFBQVNELEVBQVUsU0FBU0MsQ0FBTyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxTQUFTQSxFQUFTLENBQ2QsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxNQUNOLE1BQU8sT0FBTyxDQUFDLEVBQ2YsVUFBVyxHQUNYLFFBQVNELEVBQVUsU0FBU0MsQ0FBTyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxZQUFZQSxFQUFTLENBQ2pCLE9BQU8sS0FBSyxVQUFVLENBQ2xCLEtBQU0sTUFDTixNQUFPLE9BQU8sQ0FBQyxFQUNmLFVBQVcsR0FDWCxRQUFTRCxFQUFVLFNBQVNDLENBQU8sQ0FDL0MsQ0FBUyxDQUNULENBQ0ksWUFBWUEsRUFBUyxDQUNqQixPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLE1BQ04sTUFBTyxPQUFPLENBQUMsRUFDZixVQUFXLEdBQ1gsUUFBU0QsRUFBVSxTQUFTQyxDQUFPLENBQy9DLENBQVMsQ0FDVCxDQUNJLFdBQVd0QyxFQUFPc0MsRUFBUyxDQUN2QixPQUFPLEtBQUssVUFBVSxDQUNsQixLQUFNLGFBQ04sTUFBQXRDLEVBQ0EsUUFBU3FDLEVBQVUsU0FBU0MsQ0FBTyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxJQUFJLFVBQVcsQ0FDWCxJQUFJaVYsRUFBTSxLQUNWLFVBQVdELEtBQU0sS0FBSyxLQUFLLE9BQ25CQSxFQUFHLE9BQVMsUUFDUkMsSUFBUSxNQUFRRCxFQUFHLE1BQVFDLEtBQzNCQSxFQUFNRCxFQUFHLE9BR3JCLE9BQU9DLENBQ2YsQ0FDSSxJQUFJLFVBQVcsQ0FDWCxJQUFJQyxFQUFNLEtBQ1YsVUFBV0YsS0FBTSxLQUFLLEtBQUssT0FDbkJBLEVBQUcsT0FBUyxRQUNSRSxJQUFRLE1BQVFGLEVBQUcsTUFBUUUsS0FDM0JBLEVBQU1GLEVBQUcsT0FHckIsT0FBT0UsQ0FDZixDQUNBLENBQ0FXLEdBQVUsT0FBVS9HLEdBQ1QsSUFBSStHLEdBQVUsQ0FDakIsT0FBUSxDQUFFLEVBQ1YsU0FBVTVWLEVBQXNCLFVBQ2hDLFFBQVE2TyxHQUFBLFlBQUFBLEVBQVEsU0FBVSxHQUMxQixHQUFHNkIsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNZ0gsV0FBbUI5RSxDQUFRLENBQ3BDLE9BQU81SSxFQUFPLENBS1YsR0FKSSxLQUFLLEtBQUssU0FDVkEsRUFBTSxLQUFPLEVBQVFBLEVBQU0sTUFFWixLQUFLLFNBQVNBLENBQUssSUFDbkJnRyxFQUFjLFFBQVMsQ0FDdEMsTUFBTW1CLEVBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLLEVBQ3RDLE9BQUFrSCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxhQUNuQixTQUFVSCxFQUFjLFFBQ3hCLFNBQVVtQixFQUFJLFVBQzlCLENBQWEsRUFDTU0sQ0FDbkIsQ0FDUSxPQUFPTSxHQUFHL0gsRUFBTSxJQUFJLENBQzVCLENBQ0EsQ0FDQTBOLEdBQVcsT0FBVWhILEdBQ1YsSUFBSWdILEdBQVcsQ0FDbEIsU0FBVTdWLEVBQXNCLFdBQ2hDLFFBQVE2TyxHQUFBLFlBQUFBLEVBQVEsU0FBVSxHQUMxQixHQUFHNkIsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNaUgsV0FBZ0IvRSxDQUFRLENBQ2pDLE9BQU81SSxFQUFPLENBS1YsR0FKSSxLQUFLLEtBQUssU0FDVkEsRUFBTSxLQUFPLElBQUksS0FBS0EsRUFBTSxJQUFJLEdBRWpCLEtBQUssU0FBU0EsQ0FBSyxJQUNuQmdHLEVBQWMsS0FBTSxDQUNuQyxNQUFNbUIsRUFBTSxLQUFLLGdCQUFnQm5ILENBQUssRUFDdEMsT0FBQWtILEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLGFBQ25CLFNBQVVILEVBQWMsS0FDeEIsU0FBVW1CLEVBQUksVUFDOUIsQ0FBYSxFQUNNTSxDQUNuQixDQUNRLEdBQUksT0FBTyxNQUFNekgsRUFBTSxLQUFLLFFBQVMsQ0FBQSxFQUFHLENBQ3BDLE1BQU1tSCxFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUN0QyxPQUFBa0gsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsWUFDbkMsQ0FBYSxFQUNNc0IsQ0FDbkIsQ0FDUSxNQUFNSCxFQUFTLElBQUlELEdBQ25CLElBQUlGLEVBQ0osVUFBVy9PLEtBQVMsS0FBSyxLQUFLLE9BQ3RCQSxFQUFNLE9BQVMsTUFDWDRILEVBQU0sS0FBSyxRQUFPLEVBQUs1SCxFQUFNLFFBQzdCK08sRUFBTSxLQUFLLGdCQUFnQm5ILEVBQU9tSCxDQUFHLEVBQ3JDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxVQUNuQixRQUFTL04sRUFBTSxRQUNmLFVBQVcsR0FDWCxNQUFPLEdBQ1AsUUFBU0EsRUFBTSxNQUNmLEtBQU0sTUFDOUIsQ0FBcUIsRUFDRGtQLEVBQU8sTUFBTyxHQUdibFAsRUFBTSxPQUFTLE1BQ2hCNEgsRUFBTSxLQUFLLFFBQU8sRUFBSzVILEVBQU0sUUFDN0IrTyxFQUFNLEtBQUssZ0JBQWdCbkgsRUFBT21ILENBQUcsRUFDckNELEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLFFBQ25CLFFBQVMvTixFQUFNLFFBQ2YsVUFBVyxHQUNYLE1BQU8sR0FDUCxRQUFTQSxFQUFNLE1BQ2YsS0FBTSxNQUM5QixDQUFxQixFQUNEa1AsRUFBTyxNQUFPLEdBSWxCL1IsRUFBSyxZQUFZNkMsQ0FBSyxFQUc5QixNQUFPLENBQ0gsT0FBUWtQLEVBQU8sTUFDZixNQUFPLElBQUksS0FBS3RILEVBQU0sS0FBSyxRQUFPLENBQUUsQ0FDdkMsQ0FDVCxDQUNJLFVBQVU1SCxFQUFPLENBQ2IsT0FBTyxJQUFJdVYsR0FBUSxDQUNmLEdBQUcsS0FBSyxLQUNSLE9BQVEsQ0FBQyxHQUFHLEtBQUssS0FBSyxPQUFRdlYsQ0FBSyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxJQUFJd1YsRUFBU2hXLEVBQVMsQ0FDbEIsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxNQUNOLE1BQU9nVyxFQUFRLFFBQVMsRUFDeEIsUUFBU2pXLEVBQVUsU0FBU0MsQ0FBTyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxJQUFJaVcsRUFBU2pXLEVBQVMsQ0FDbEIsT0FBTyxLQUFLLFVBQVUsQ0FDbEIsS0FBTSxNQUNOLE1BQU9pVyxFQUFRLFFBQVMsRUFDeEIsUUFBU2xXLEVBQVUsU0FBU0MsQ0FBTyxDQUMvQyxDQUFTLENBQ1QsQ0FDSSxJQUFJLFNBQVUsQ0FDVixJQUFJaVYsRUFBTSxLQUNWLFVBQVdELEtBQU0sS0FBSyxLQUFLLE9BQ25CQSxFQUFHLE9BQVMsUUFDUkMsSUFBUSxNQUFRRCxFQUFHLE1BQVFDLEtBQzNCQSxFQUFNRCxFQUFHLE9BR3JCLE9BQU9DLEdBQU8sS0FBTyxJQUFJLEtBQUtBLENBQUcsRUFBSSxJQUM3QyxDQUNJLElBQUksU0FBVSxDQUNWLElBQUlDLEVBQU0sS0FDVixVQUFXRixLQUFNLEtBQUssS0FBSyxPQUNuQkEsRUFBRyxPQUFTLFFBQ1JFLElBQVEsTUFBUUYsRUFBRyxNQUFRRSxLQUMzQkEsRUFBTUYsRUFBRyxPQUdyQixPQUFPRSxHQUFPLEtBQU8sSUFBSSxLQUFLQSxDQUFHLEVBQUksSUFDN0MsQ0FDQSxDQUNBYSxHQUFRLE9BQVVqSCxHQUNQLElBQUlpSCxHQUFRLENBQ2YsT0FBUSxDQUFFLEVBQ1YsUUFBUWpILEdBQUEsWUFBQUEsRUFBUSxTQUFVLEdBQzFCLFNBQVU3TyxFQUFzQixRQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNb0gsV0FBa0JsRixDQUFRLENBQ25DLE9BQU81SSxFQUFPLENBRVYsR0FEbUIsS0FBSyxTQUFTQSxDQUFLLElBQ25CZ0csRUFBYyxPQUFRLENBQ3JDLE1BQU1tQixFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUN0QyxPQUFBa0gsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVUgsRUFBYyxPQUN4QixTQUFVbUIsRUFBSSxVQUM5QixDQUFhLEVBQ01NLENBQ25CLENBQ1EsT0FBT00sR0FBRy9ILEVBQU0sSUFBSSxDQUM1QixDQUNBLENBQ0E4TixHQUFVLE9BQVVwSCxHQUNULElBQUlvSCxHQUFVLENBQ2pCLFNBQVVqVyxFQUFzQixVQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNcUgsV0FBcUJuRixDQUFRLENBQ3RDLE9BQU81SSxFQUFPLENBRVYsR0FEbUIsS0FBSyxTQUFTQSxDQUFLLElBQ25CZ0csRUFBYyxVQUFXLENBQ3hDLE1BQU1tQixFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUN0QyxPQUFBa0gsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVUgsRUFBYyxVQUN4QixTQUFVbUIsRUFBSSxVQUM5QixDQUFhLEVBQ01NLENBQ25CLENBQ1EsT0FBT00sR0FBRy9ILEVBQU0sSUFBSSxDQUM1QixDQUNBLENBQ0ErTixHQUFhLE9BQVVySCxHQUNaLElBQUlxSCxHQUFhLENBQ3BCLFNBQVVsVyxFQUFzQixhQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNc0gsV0FBZ0JwRixDQUFRLENBQ2pDLE9BQU81SSxFQUFPLENBRVYsR0FEbUIsS0FBSyxTQUFTQSxDQUFLLElBQ25CZ0csRUFBYyxLQUFNLENBQ25DLE1BQU1tQixFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUN0QyxPQUFBa0gsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVUgsRUFBYyxLQUN4QixTQUFVbUIsRUFBSSxVQUM5QixDQUFhLEVBQ01NLENBQ25CLENBQ1EsT0FBT00sR0FBRy9ILEVBQU0sSUFBSSxDQUM1QixDQUNBLENBQ0FnTyxHQUFRLE9BQVV0SCxHQUNQLElBQUlzSCxHQUFRLENBQ2YsU0FBVW5XLEVBQXNCLFFBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUVFLE1BQU11SCxXQUFlckYsQ0FBUSxDQUNoQyxhQUFjLENBQ1YsTUFBTSxHQUFHLFNBQVMsRUFFbEIsS0FBSyxLQUFPLEVBQ3BCLENBQ0ksT0FBTzVJLEVBQU8sQ0FDVixPQUFPK0gsR0FBRy9ILEVBQU0sSUFBSSxDQUM1QixDQUNBLENBQ0FpTyxHQUFPLE9BQVV2SCxHQUNOLElBQUl1SCxHQUFPLENBQ2QsU0FBVXBXLEVBQXNCLE9BQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUVFLE1BQU13SCxXQUFtQnRGLENBQVEsQ0FDcEMsYUFBYyxDQUNWLE1BQU0sR0FBRyxTQUFTLEVBRWxCLEtBQUssU0FBVyxFQUN4QixDQUNJLE9BQU81SSxFQUFPLENBQ1YsT0FBTytILEdBQUcvSCxFQUFNLElBQUksQ0FDNUIsQ0FDQSxDQUNBa08sR0FBVyxPQUFVeEgsR0FDVixJQUFJd0gsR0FBVyxDQUNsQixTQUFVclcsRUFBc0IsV0FDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUUsTUFBTXlILFdBQWlCdkYsQ0FBUSxDQUNsQyxPQUFPNUksRUFBTyxDQUNWLE1BQU1tSCxFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUN0QyxPQUFBa0gsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVUgsRUFBYyxNQUN4QixTQUFVbUIsRUFBSSxVQUMxQixDQUFTLEVBQ01NLENBQ2YsQ0FDQSxDQUNBMEcsR0FBUyxPQUFVekgsR0FDUixJQUFJeUgsR0FBUyxDQUNoQixTQUFVdFcsRUFBc0IsU0FDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUUsTUFBTTBILFdBQWdCeEYsQ0FBUSxDQUNqQyxPQUFPNUksRUFBTyxDQUVWLEdBRG1CLEtBQUssU0FBU0EsQ0FBSyxJQUNuQmdHLEVBQWMsVUFBVyxDQUN4QyxNQUFNbUIsRUFBTSxLQUFLLGdCQUFnQm5ILENBQUssRUFDdEMsT0FBQWtILEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLGFBQ25CLFNBQVVILEVBQWMsS0FDeEIsU0FBVW1CLEVBQUksVUFDOUIsQ0FBYSxFQUNNTSxDQUNuQixDQUNRLE9BQU9NLEdBQUcvSCxFQUFNLElBQUksQ0FDNUIsQ0FDQSxDQUNBb08sR0FBUSxPQUFVMUgsR0FDUCxJQUFJMEgsR0FBUSxDQUNmLFNBQVV2VyxFQUFzQixRQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNNEMsV0FBaUJWLENBQVEsQ0FDbEMsT0FBTzVJLEVBQU8sQ0FDVixLQUFNLENBQUUsSUFBQW1ILEVBQUssT0FBQUcsQ0FBTSxFQUFLLEtBQUssb0JBQW9CdEgsQ0FBSyxFQUNoRGpMLEVBQU0sS0FBSyxLQUNqQixHQUFJb1MsRUFBSSxhQUFlbkIsRUFBYyxNQUNqQyxPQUFBa0IsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVUgsRUFBYyxNQUN4QixTQUFVbUIsRUFBSSxVQUM5QixDQUFhLEVBQ01NLEVBRVgsR0FBSTFTLEVBQUksY0FBZ0IsS0FBTSxDQUMxQixNQUFNd1gsRUFBU3BGLEVBQUksS0FBSyxPQUFTcFMsRUFBSSxZQUFZLE1BQzNDeVgsRUFBV3JGLEVBQUksS0FBSyxPQUFTcFMsRUFBSSxZQUFZLE9BQy9Dd1gsR0FBVUMsS0FDVnRGLEVBQWtCQyxFQUFLLENBQ25CLEtBQU1vRixFQUFTcEcsRUFBYSxRQUFVQSxFQUFhLFVBQ25ELFFBQVVxRyxFQUFXelgsRUFBSSxZQUFZLE1BQVEsT0FDN0MsUUFBVXdYLEVBQVN4WCxFQUFJLFlBQVksTUFBUSxPQUMzQyxLQUFNLFFBQ04sVUFBVyxHQUNYLE1BQU8sR0FDUCxRQUFTQSxFQUFJLFlBQVksT0FDN0MsQ0FBaUIsRUFDRHVTLEVBQU8sTUFBTyxFQUU5QixDQTJCUSxHQTFCSXZTLEVBQUksWUFBYyxNQUNkb1MsRUFBSSxLQUFLLE9BQVNwUyxFQUFJLFVBQVUsUUFDaENtUyxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxVQUNuQixRQUFTcFIsRUFBSSxVQUFVLE1BQ3ZCLEtBQU0sUUFDTixVQUFXLEdBQ1gsTUFBTyxHQUNQLFFBQVNBLEVBQUksVUFBVSxPQUMzQyxDQUFpQixFQUNEdVMsRUFBTyxNQUFPLEdBR2xCdlMsRUFBSSxZQUFjLE1BQ2RvUyxFQUFJLEtBQUssT0FBU3BTLEVBQUksVUFBVSxRQUNoQ21TLEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLFFBQ25CLFFBQVNwUixFQUFJLFVBQVUsTUFDdkIsS0FBTSxRQUNOLFVBQVcsR0FDWCxNQUFPLEdBQ1AsUUFBU0EsRUFBSSxVQUFVLE9BQzNDLENBQWlCLEVBQ0R1UyxFQUFPLE1BQU8sR0FHbEJILEVBQUksT0FBTyxNQUNYLE9BQU8sUUFBUSxJQUFJLENBQUMsR0FBR0EsRUFBSSxJQUFJLEVBQUUsSUFBSSxDQUFDL1UsRUFBTUosSUFDakMrQyxFQUFJLEtBQUssWUFBWSxJQUFJcVQsR0FBbUJqQixFQUFLL1UsRUFBTStVLEVBQUksS0FBTW5WLENBQUMsQ0FBQyxDQUM3RSxDQUFDLEVBQUUsS0FBTXdLLEdBQ0M2SyxHQUFZLFdBQVdDLEVBQVE5SyxDQUFNLENBQy9DLEVBRUwsTUFBTUEsRUFBUyxDQUFDLEdBQUcySyxFQUFJLElBQUksRUFBRSxJQUFJLENBQUMvVSxFQUFNSixJQUM3QitDLEVBQUksS0FBSyxXQUFXLElBQUlxVCxHQUFtQmpCLEVBQUsvVSxFQUFNK1UsRUFBSSxLQUFNblYsQ0FBQyxDQUFDLENBQzVFLEVBQ0QsT0FBT3FWLEdBQVksV0FBV0MsRUFBUTlLLENBQU0sQ0FDcEQsQ0FDSSxJQUFJLFNBQVUsQ0FDVixPQUFPLEtBQUssS0FBSyxJQUN6QixDQUNJLElBQUlrUSxFQUFXOVUsRUFBUyxDQUNwQixPQUFPLElBQUkwUixHQUFTLENBQ2hCLEdBQUcsS0FBSyxLQUNSLFVBQVcsQ0FBRSxNQUFPb0QsRUFBVyxRQUFTL1UsRUFBVSxTQUFTQyxDQUFPLENBQUcsQ0FDakYsQ0FBUyxDQUNULENBQ0ksSUFBSStVLEVBQVcvVSxFQUFTLENBQ3BCLE9BQU8sSUFBSTBSLEdBQVMsQ0FDaEIsR0FBRyxLQUFLLEtBQ1IsVUFBVyxDQUFFLE1BQU9xRCxFQUFXLFFBQVNoVixFQUFVLFNBQVNDLENBQU8sQ0FBRyxDQUNqRixDQUFTLENBQ1QsQ0FDSSxPQUFPOUYsRUFBSzhGLEVBQVMsQ0FDakIsT0FBTyxJQUFJMFIsR0FBUyxDQUNoQixHQUFHLEtBQUssS0FDUixZQUFhLENBQUUsTUFBT3hYLEVBQUssUUFBUzZGLEVBQVUsU0FBU0MsQ0FBTyxDQUFHLENBQzdFLENBQVMsQ0FDVCxDQUNJLFNBQVNBLEVBQVMsQ0FDZCxPQUFPLEtBQUssSUFBSSxFQUFHQSxDQUFPLENBQ2xDLENBQ0EsQ0FDQTBSLEdBQVMsT0FBUyxDQUFDOVAsRUFBUWtOLElBQ2hCLElBQUk0QyxHQUFTLENBQ2hCLEtBQU05UCxFQUNOLFVBQVcsS0FDWCxVQUFXLEtBQ1gsWUFBYSxLQUNiLFNBQVUzQixFQUFzQixTQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFTCxTQUFTMkgsR0FBZTdVLEVBQVEsQ0FDNUIsR0FBSUEsYUFBa0I4VSxFQUFXLENBQzdCLE1BQU1DLEVBQVcsQ0FBRSxFQUNuQixVQUFXclosS0FBT3NFLEVBQU8sTUFBTyxDQUM1QixNQUFNZ1YsRUFBY2hWLEVBQU8sTUFBTXRFLENBQUcsRUFDcENxWixFQUFTclosQ0FBRyxFQUFJa1UsR0FBWSxPQUFPaUYsR0FBZUcsQ0FBVyxDQUFDLENBQzFFLENBQ1EsT0FBTyxJQUFJRixFQUFVLENBQ2pCLEdBQUc5VSxFQUFPLEtBQ1YsTUFBTyxJQUFNK1UsQ0FDekIsQ0FBUyxDQUNULEtBQ1MsUUFBSS9VLGFBQWtCOFAsR0FDaEIsSUFBSUEsR0FBUyxDQUNoQixHQUFHOVAsRUFBTyxLQUNWLEtBQU02VSxHQUFlN1UsRUFBTyxPQUFPLENBQy9DLENBQVMsRUFFSUEsYUFBa0I0UCxHQUNoQkEsR0FBWSxPQUFPaUYsR0FBZTdVLEVBQU8sT0FBUSxDQUFBLENBQUMsRUFFcERBLGFBQWtCNlAsR0FDaEJBLEdBQVksT0FBT2dGLEdBQWU3VSxFQUFPLE9BQVEsQ0FBQSxDQUFDLEVBRXBEQSxhQUFrQmlWLEdBQ2hCQSxHQUFTLE9BQU9qVixFQUFPLE1BQU0sSUFBS3BILEdBQVNpYyxHQUFlamMsQ0FBSSxDQUFDLENBQUMsRUFHaEVvSCxDQUVmLENBQ08sTUFBTThVLFVBQWtCMUYsQ0FBUSxDQUNuQyxhQUFjLENBQ1YsTUFBTSxHQUFHLFNBQVMsRUFDbEIsS0FBSyxRQUFVLEtBS2YsS0FBSyxVQUFZLEtBQUssWUFxQ3RCLEtBQUssUUFBVSxLQUFLLE1BQzVCLENBQ0ksWUFBYSxDQUNULEdBQUksS0FBSyxVQUFZLEtBQ2pCLE9BQU8sS0FBSyxRQUNoQixNQUFNOEYsRUFBUSxLQUFLLEtBQUssTUFBTyxFQUN6QnZZLEVBQU9aLEVBQUssV0FBV21aLENBQUssRUFDbEMsWUFBSyxRQUFVLENBQUUsTUFBQUEsRUFBTyxLQUFBdlksQ0FBTSxFQUN2QixLQUFLLE9BQ3BCLENBQ0ksT0FBTzZKLEVBQU8sQ0FFVixHQURtQixLQUFLLFNBQVNBLENBQUssSUFDbkJnRyxFQUFjLE9BQVEsQ0FDckMsTUFBTW1CLEVBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLLEVBQ3RDLE9BQUFrSCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxhQUNuQixTQUFVSCxFQUFjLE9BQ3hCLFNBQVVtQixFQUFJLFVBQzlCLENBQWEsRUFDTU0sQ0FDbkIsQ0FDUSxLQUFNLENBQUUsT0FBQUgsRUFBUSxJQUFBSCxDQUFHLEVBQUssS0FBSyxvQkFBb0JuSCxDQUFLLEVBQ2hELENBQUUsTUFBQTBPLEVBQU8sS0FBTUMsQ0FBUyxFQUFLLEtBQUssV0FBWSxFQUM5Q0MsRUFBWSxDQUFFLEVBQ3BCLEdBQUksRUFBRSxLQUFLLEtBQUssb0JBQW9CVCxJQUFZLEtBQUssS0FBSyxjQUFnQixTQUN0RSxVQUFXalosS0FBT2lTLEVBQUksS0FDYndILEVBQVUsU0FBU3paLENBQUcsR0FDdkIwWixFQUFVLEtBQUsxWixDQUFHLEVBSTlCLE1BQU13UyxFQUFRLENBQUUsRUFDaEIsVUFBV3hTLEtBQU95WixFQUFXLENBQ3pCLE1BQU1FLEVBQWVILEVBQU14WixDQUFHLEVBQ3hCSSxFQUFRNlIsRUFBSSxLQUFLalMsQ0FBRyxFQUMxQndTLEVBQU0sS0FBSyxDQUNQLElBQUssQ0FBRSxPQUFRLFFBQVMsTUFBT3hTLENBQUssRUFDcEMsTUFBTzJaLEVBQWEsT0FBTyxJQUFJekcsR0FBbUJqQixFQUFLN1IsRUFBTzZSLEVBQUksS0FBTWpTLENBQUcsQ0FBQyxFQUM1RSxVQUFXQSxLQUFPaVMsRUFBSSxJQUN0QyxDQUFhLENBQ2IsQ0FDUSxHQUFJLEtBQUssS0FBSyxvQkFBb0JnSCxHQUFVLENBQ3hDLE1BQU1XLEVBQWMsS0FBSyxLQUFLLFlBQzlCLEdBQUlBLElBQWdCLGNBQ2hCLFVBQVc1WixLQUFPMFosRUFDZGxILEVBQU0sS0FBSyxDQUNQLElBQUssQ0FBRSxPQUFRLFFBQVMsTUFBT3hTLENBQUssRUFDcEMsTUFBTyxDQUFFLE9BQVEsUUFBUyxNQUFPaVMsRUFBSSxLQUFLalMsQ0FBRyxDQUFHLENBQ3hFLENBQXFCLFVBR0E0WixJQUFnQixTQUNqQkYsRUFBVSxPQUFTLElBQ25CMUgsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsa0JBQ25CLEtBQU15SSxDQUM5QixDQUFxQixFQUNEdEgsRUFBTyxNQUFPLFdBR2J3SCxJQUFnQixRQUdyQixNQUFNLElBQUksTUFBTSxzREFBc0QsQ0FFdEYsS0FDYSxDQUVELE1BQU1DLEVBQVcsS0FBSyxLQUFLLFNBQzNCLFVBQVc3WixLQUFPMFosRUFBVyxDQUN6QixNQUFNdFosRUFBUTZSLEVBQUksS0FBS2pTLENBQUcsRUFDMUJ3UyxFQUFNLEtBQUssQ0FDUCxJQUFLLENBQUUsT0FBUSxRQUFTLE1BQU94UyxDQUFLLEVBQ3BDLE1BQU82WixFQUFTLE9BQU8sSUFBSTNHLEdBQW1CakIsRUFBSzdSLEVBQU82UixFQUFJLEtBQU1qUyxDQUFHLENBQ3RFLEVBQ0QsVUFBV0EsS0FBT2lTLEVBQUksSUFDMUMsQ0FBaUIsQ0FDakIsQ0FDQSxDQUNRLE9BQUlBLEVBQUksT0FBTyxNQUNKLFFBQVEsUUFBTyxFQUNqQixLQUFLLFNBQVksQ0FDbEIsTUFBTVEsRUFBWSxDQUFFLEVBQ3BCLFVBQVdDLEtBQVFGLEVBQU8sQ0FDdEIsTUFBTXhTLEVBQU0sTUFBTTBTLEVBQUssSUFDakJ0UyxFQUFRLE1BQU1zUyxFQUFLLE1BQ3pCRCxFQUFVLEtBQUssQ0FDWCxJQUFBelMsRUFDQSxNQUFBSSxFQUNBLFVBQVdzUyxFQUFLLFNBQ3hDLENBQXFCLENBQ3JCLENBQ2dCLE9BQU9ELENBQ1YsQ0FBQSxFQUNJLEtBQU1BLEdBQ0FOLEdBQVksZ0JBQWdCQyxFQUFRSyxDQUFTLENBQ3ZELEVBR01OLEdBQVksZ0JBQWdCQyxFQUFRSSxDQUFLLENBRTVELENBQ0ksSUFBSSxPQUFRLENBQ1IsT0FBTyxLQUFLLEtBQUssTUFBTyxDQUNoQyxDQUNJLE9BQU85UCxFQUFTLENBQ1osT0FBQUQsRUFBVSxTQUNILElBQUkyVyxFQUFVLENBQ2pCLEdBQUcsS0FBSyxLQUNSLFlBQWEsU0FDYixHQUFJMVcsSUFBWSxPQUNWLENBQ0UsU0FBVSxDQUFDUCxFQUFPOFAsSUFBUSxTQUN0QixNQUFNNkgsSUFBZWhYLEdBQUFDLEVBQUEsS0FBSyxNQUFLLFdBQVYsWUFBQUQsRUFBQSxLQUFBQyxFQUFxQlosRUFBTzhQLEdBQUssVUFBV0EsRUFBSSxhQUNyRSxPQUFJOVAsRUFBTSxPQUFTLG9CQUNSLENBQ0gsUUFBU00sRUFBVSxTQUFTQyxDQUFPLEVBQUUsU0FBV29YLENBQ25ELEVBQ0UsQ0FDSCxRQUFTQSxDQUNaLENBQ0osQ0FDckIsRUFDa0IsRUFDbEIsQ0FBUyxDQUNULENBQ0ksT0FBUSxDQUNKLE9BQU8sSUFBSVYsRUFBVSxDQUNqQixHQUFHLEtBQUssS0FDUixZQUFhLE9BQ3pCLENBQVMsQ0FDVCxDQUNJLGFBQWMsQ0FDVixPQUFPLElBQUlBLEVBQVUsQ0FDakIsR0FBRyxLQUFLLEtBQ1IsWUFBYSxhQUN6QixDQUFTLENBQ1QsQ0FrQkksT0FBT1csRUFBYyxDQUNqQixPQUFPLElBQUlYLEVBQVUsQ0FDakIsR0FBRyxLQUFLLEtBQ1IsTUFBTyxLQUFPLENBQ1YsR0FBRyxLQUFLLEtBQUssTUFBTyxFQUNwQixHQUFHVyxDQUNuQixFQUNBLENBQVMsQ0FDVCxDQU1JLE1BQU1DLEVBQVMsQ0FVWCxPQVRlLElBQUlaLEVBQVUsQ0FDekIsWUFBYVksRUFBUSxLQUFLLFlBQzFCLFNBQVVBLEVBQVEsS0FBSyxTQUN2QixNQUFPLEtBQU8sQ0FDVixHQUFHLEtBQUssS0FBSyxNQUFPLEVBQ3BCLEdBQUdBLEVBQVEsS0FBSyxNQUFPLENBQ3ZDLEdBQ1ksU0FBVXJYLEVBQXNCLFNBQzVDLENBQVMsQ0FFVCxDQW9DSSxPQUFPM0MsRUFBS3NFLEVBQVEsQ0FDaEIsT0FBTyxLQUFLLFFBQVEsQ0FBRSxDQUFDdEUsQ0FBRyxFQUFHc0UsQ0FBTSxDQUFFLENBQzdDLENBc0JJLFNBQVN1RSxFQUFPLENBQ1osT0FBTyxJQUFJdVEsRUFBVSxDQUNqQixHQUFHLEtBQUssS0FDUixTQUFVdlEsQ0FDdEIsQ0FBUyxDQUNULENBQ0ksS0FBS29SLEVBQU0sQ0FDUCxNQUFNVCxFQUFRLENBQUUsRUFDaEIsVUFBV3haLEtBQU9LLEVBQUssV0FBVzRaLENBQUksRUFDOUJBLEVBQUtqYSxDQUFHLEdBQUssS0FBSyxNQUFNQSxDQUFHLElBQzNCd1osRUFBTXhaLENBQUcsRUFBSSxLQUFLLE1BQU1BLENBQUcsR0FHbkMsT0FBTyxJQUFJb1osRUFBVSxDQUNqQixHQUFHLEtBQUssS0FDUixNQUFPLElBQU1JLENBQ3pCLENBQVMsQ0FDVCxDQUNJLEtBQUtTLEVBQU0sQ0FDUCxNQUFNVCxFQUFRLENBQUUsRUFDaEIsVUFBV3haLEtBQU9LLEVBQUssV0FBVyxLQUFLLEtBQUssRUFDbkM0WixFQUFLamEsQ0FBRyxJQUNUd1osRUFBTXhaLENBQUcsRUFBSSxLQUFLLE1BQU1BLENBQUcsR0FHbkMsT0FBTyxJQUFJb1osRUFBVSxDQUNqQixHQUFHLEtBQUssS0FDUixNQUFPLElBQU1JLENBQ3pCLENBQVMsQ0FDVCxDQUlJLGFBQWMsQ0FDVixPQUFPTCxHQUFlLElBQUksQ0FDbEMsQ0FDSSxRQUFRYyxFQUFNLENBQ1YsTUFBTVosRUFBVyxDQUFFLEVBQ25CLFVBQVdyWixLQUFPSyxFQUFLLFdBQVcsS0FBSyxLQUFLLEVBQUcsQ0FDM0MsTUFBTWlaLEVBQWMsS0FBSyxNQUFNdFosQ0FBRyxFQUM5QmlhLEdBQVEsQ0FBQ0EsRUFBS2phLENBQUcsRUFDakJxWixFQUFTclosQ0FBRyxFQUFJc1osRUFHaEJELEVBQVNyWixDQUFHLEVBQUlzWixFQUFZLFNBQVUsQ0FFdEQsQ0FDUSxPQUFPLElBQUlGLEVBQVUsQ0FDakIsR0FBRyxLQUFLLEtBQ1IsTUFBTyxJQUFNQyxDQUN6QixDQUFTLENBQ1QsQ0FDSSxTQUFTWSxFQUFNLENBQ1gsTUFBTVosRUFBVyxDQUFFLEVBQ25CLFVBQVdyWixLQUFPSyxFQUFLLFdBQVcsS0FBSyxLQUFLLEVBQ3hDLEdBQUk0WixHQUFRLENBQUNBLEVBQUtqYSxDQUFHLEVBQ2pCcVosRUFBU3JaLENBQUcsRUFBSSxLQUFLLE1BQU1BLENBQUcsTUFFN0IsQ0FFRCxJQUFJa2EsRUFEZ0IsS0FBSyxNQUFNbGEsQ0FBRyxFQUVsQyxLQUFPa2EsYUFBb0JoRyxJQUN2QmdHLEVBQVdBLEVBQVMsS0FBSyxVQUU3QmIsRUFBU3JaLENBQUcsRUFBSWthLENBQ2hDLENBRVEsT0FBTyxJQUFJZCxFQUFVLENBQ2pCLEdBQUcsS0FBSyxLQUNSLE1BQU8sSUFBTUMsQ0FDekIsQ0FBUyxDQUNULENBQ0ksT0FBUSxDQUNKLE9BQU9jLEdBQWM5WixFQUFLLFdBQVcsS0FBSyxLQUFLLENBQUMsQ0FDeEQsQ0FDQSxDQUNBK1ksRUFBVSxPQUFTLENBQUNJLEVBQU9oSSxJQUNoQixJQUFJNEgsRUFBVSxDQUNqQixNQUFPLElBQU1JLEVBQ2IsWUFBYSxRQUNiLFNBQVVQLEdBQVMsT0FBUSxFQUMzQixTQUFVdFcsRUFBc0IsVUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUw0SCxFQUFVLGFBQWUsQ0FBQ0ksRUFBT2hJLElBQ3RCLElBQUk0SCxFQUFVLENBQ2pCLE1BQU8sSUFBTUksRUFDYixZQUFhLFNBQ2IsU0FBVVAsR0FBUyxPQUFRLEVBQzNCLFNBQVV0VyxFQUFzQixVQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFTDRILEVBQVUsV0FBYSxDQUFDSSxFQUFPaEksSUFDcEIsSUFBSTRILEVBQVUsQ0FDakIsTUFBQUksRUFDQSxZQUFhLFFBQ2IsU0FBVVAsR0FBUyxPQUFRLEVBQzNCLFNBQVV0VyxFQUFzQixVQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNK0MsV0FBaUJiLENBQVEsQ0FDbEMsT0FBTzVJLEVBQU8sQ0FDVixLQUFNLENBQUUsSUFBQW1ILENBQUssRUFBRyxLQUFLLG9CQUFvQm5ILENBQUssRUFDeEMxTCxFQUFVLEtBQUssS0FBSyxRQUMxQixTQUFTZ2IsRUFBYy9ILEVBQVMsQ0FFNUIsVUFBVy9LLEtBQVUrSyxFQUNqQixHQUFJL0ssRUFBTyxPQUFPLFNBQVcsUUFDekIsT0FBT0EsRUFBTyxPQUd0QixVQUFXQSxLQUFVK0ssRUFDakIsR0FBSS9LLEVBQU8sT0FBTyxTQUFXLFFBRXpCLE9BQUEySyxFQUFJLE9BQU8sT0FBTyxLQUFLLEdBQUczSyxFQUFPLElBQUksT0FBTyxNQUFNLEVBQzNDQSxFQUFPLE9BSXRCLE1BQU0rUyxFQUFjaEksRUFBUSxJQUFLL0ssR0FBVyxJQUFJMUYsR0FBUzBGLEVBQU8sSUFBSSxPQUFPLE1BQU0sQ0FBQyxFQUNsRixPQUFBMEssRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsY0FDbkIsWUFBQW9KLENBQ2hCLENBQWEsRUFDTTlILENBQ25CLENBQ1EsR0FBSU4sRUFBSSxPQUFPLE1BQ1gsT0FBTyxRQUFRLElBQUk3UyxFQUFRLElBQUksTUFBT2tWLEdBQVcsQ0FDN0MsTUFBTWdHLEVBQVcsQ0FDYixHQUFHckksRUFDSCxPQUFRLENBQ0osR0FBR0EsRUFBSSxPQUNQLE9BQVEsQ0FBRSxDQUNiLEVBQ0QsT0FBUSxJQUNYLEVBQ0QsTUFBTyxDQUNILE9BQVEsTUFBTXFDLEVBQU8sWUFBWSxDQUM3QixLQUFNckMsRUFBSSxLQUNWLEtBQU1BLEVBQUksS0FDVixPQUFRcUksQ0FDaEMsQ0FBcUIsRUFDRCxJQUFLQSxDQUNSLENBQ2pCLENBQWEsQ0FBQyxFQUFFLEtBQUtGLENBQWEsRUFFckIsQ0FDRCxJQUFJRyxFQUNKLE1BQU0xWSxFQUFTLENBQUUsRUFDakIsVUFBV3lTLEtBQVVsVixFQUFTLENBQzFCLE1BQU1rYixFQUFXLENBQ2IsR0FBR3JJLEVBQ0gsT0FBUSxDQUNKLEdBQUdBLEVBQUksT0FDUCxPQUFRLENBQUUsQ0FDYixFQUNELE9BQVEsSUFDWCxFQUNLM0ssRUFBU2dOLEVBQU8sV0FBVyxDQUM3QixLQUFNckMsRUFBSSxLQUNWLEtBQU1BLEVBQUksS0FDVixPQUFRcUksQ0FDNUIsQ0FBaUIsRUFDRCxHQUFJaFQsRUFBTyxTQUFXLFFBQ2xCLE9BQU9BLEVBRUZBLEVBQU8sU0FBVyxTQUFXLENBQUNpVCxJQUNuQ0EsRUFBUSxDQUFFLE9BQUFqVCxFQUFRLElBQUtnVCxDQUFVLEdBRWpDQSxFQUFTLE9BQU8sT0FBTyxRQUN2QnpZLEVBQU8sS0FBS3lZLEVBQVMsT0FBTyxNQUFNLENBRXRELENBQ1ksR0FBSUMsRUFDQSxPQUFBdEksRUFBSSxPQUFPLE9BQU8sS0FBSyxHQUFHc0ksRUFBTSxJQUFJLE9BQU8sTUFBTSxFQUMxQ0EsRUFBTSxPQUVqQixNQUFNRixFQUFjeFksRUFBTyxJQUFLQSxHQUFXLElBQUlELEdBQVNDLENBQU0sQ0FBQyxFQUMvRCxPQUFBbVEsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsY0FDbkIsWUFBQW9KLENBQ2hCLENBQWEsRUFDTTlILENBQ25CLENBQ0EsQ0FDSSxJQUFJLFNBQVUsQ0FDVixPQUFPLEtBQUssS0FBSyxPQUN6QixDQUNBLENBQ0FnQyxHQUFTLE9BQVMsQ0FBQzFOLEVBQU8ySyxJQUNmLElBQUkrQyxHQUFTLENBQ2hCLFFBQVMxTixFQUNULFNBQVVsRSxFQUFzQixTQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFTTCxNQUFNZ0osR0FBb0J4VyxHQUNsQkEsYUFBZ0J5VyxHQUNURCxHQUFpQnhXLEVBQUssTUFBTSxFQUU5QkEsYUFBZ0JpUSxHQUNkdUcsR0FBaUJ4VyxFQUFLLFdBQVcsRUFFbkNBLGFBQWdCMFcsR0FDZCxDQUFDMVcsRUFBSyxLQUFLLEVBRWJBLGFBQWdCMlcsR0FDZDNXLEVBQUssUUFFUEEsYUFBZ0I0VyxHQUVkdmEsRUFBSyxhQUFhMkQsRUFBSyxJQUFJLEVBRTdCQSxhQUFnQjRRLEdBQ2Q0RixHQUFpQnhXLEVBQUssS0FBSyxTQUFTLEVBRXRDQSxhQUFnQjZVLEdBQ2QsQ0FBQyxNQUFTLEVBRVo3VSxhQUFnQjhVLEdBQ2QsQ0FBQyxJQUFJLEVBRVA5VSxhQUFnQmtRLEdBQ2QsQ0FBQyxPQUFXLEdBQUdzRyxHQUFpQnhXLEVBQUssT0FBUSxDQUFBLENBQUMsRUFFaERBLGFBQWdCbVEsR0FDZCxDQUFDLEtBQU0sR0FBR3FHLEdBQWlCeFcsRUFBSyxPQUFRLENBQUEsQ0FBQyxFQUUzQ0EsYUFBZ0I2USxJQUdoQjdRLGFBQWdCbVIsR0FGZHFGLEdBQWlCeFcsRUFBSyxRQUFRLEVBS2hDQSxhQUFnQitRLEdBQ2R5RixHQUFpQnhXLEVBQUssS0FBSyxTQUFTLEVBR3BDLENBQUUsRUFHVixNQUFNNlcsV0FBOEJuSCxDQUFRLENBQy9DLE9BQU81SSxFQUFPLENBQ1YsS0FBTSxDQUFFLElBQUFtSCxDQUFLLEVBQUcsS0FBSyxvQkFBb0JuSCxDQUFLLEVBQzlDLEdBQUltSCxFQUFJLGFBQWVuQixFQUFjLE9BQ2pDLE9BQUFrQixFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxhQUNuQixTQUFVSCxFQUFjLE9BQ3hCLFNBQVVtQixFQUFJLFVBQzlCLENBQWEsRUFDTU0sRUFFWCxNQUFNdUksRUFBZ0IsS0FBSyxjQUNyQkMsRUFBcUI5SSxFQUFJLEtBQUs2SSxDQUFhLEVBQzNDeEcsRUFBUyxLQUFLLFdBQVcsSUFBSXlHLENBQWtCLEVBQ3JELE9BQUt6RyxFQVFEckMsRUFBSSxPQUFPLE1BQ0pxQyxFQUFPLFlBQVksQ0FDdEIsS0FBTXJDLEVBQUksS0FDVixLQUFNQSxFQUFJLEtBQ1YsT0FBUUEsQ0FDeEIsQ0FBYSxFQUdNcUMsRUFBTyxXQUFXLENBQ3JCLEtBQU1yQyxFQUFJLEtBQ1YsS0FBTUEsRUFBSSxLQUNWLE9BQVFBLENBQ3hCLENBQWEsR0FuQkRELEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLDRCQUNuQixRQUFTLE1BQU0sS0FBSyxLQUFLLFdBQVcsS0FBSSxDQUFFLEVBQzFDLEtBQU0sQ0FBQzZKLENBQWEsQ0FDcEMsQ0FBYSxFQUNNdkksRUFnQm5CLENBQ0ksSUFBSSxlQUFnQixDQUNoQixPQUFPLEtBQUssS0FBSyxhQUN6QixDQUNJLElBQUksU0FBVSxDQUNWLE9BQU8sS0FBSyxLQUFLLE9BQ3pCLENBQ0ksSUFBSSxZQUFhLENBQ2IsT0FBTyxLQUFLLEtBQUssVUFDekIsQ0FTSSxPQUFPLE9BQU91SSxFQUFlMWIsRUFBU29TLEVBQVEsQ0FFMUMsTUFBTXdKLEVBQWEsSUFBSSxJQUV2QixVQUFXaFgsS0FBUTVFLEVBQVMsQ0FDeEIsTUFBTTZiLEVBQXNCVCxHQUFpQnhXLEVBQUssTUFBTThXLENBQWEsQ0FBQyxFQUN0RSxHQUFJLENBQUNHLEVBQW9CLE9BQ3JCLE1BQU0sSUFBSSxNQUFNLG1DQUFtQ0gsQ0FBYSxtREFBbUQsRUFFdkgsVUFBVzFhLEtBQVM2YSxFQUFxQixDQUNyQyxHQUFJRCxFQUFXLElBQUk1YSxDQUFLLEVBQ3BCLE1BQU0sSUFBSSxNQUFNLDBCQUEwQixPQUFPMGEsQ0FBYSxDQUFDLHdCQUF3QixPQUFPMWEsQ0FBSyxDQUFDLEVBQUUsRUFFMUc0YSxFQUFXLElBQUk1YSxFQUFPNEQsQ0FBSSxDQUMxQyxDQUNBLENBQ1EsT0FBTyxJQUFJNlcsR0FBc0IsQ0FDN0IsU0FBVWxZLEVBQXNCLHNCQUNoQyxjQUFBbVksRUFDQSxRQUFBMWIsRUFDQSxXQUFBNGIsRUFDQSxHQUFHM0gsRUFBb0I3QixDQUFNLENBQ3pDLENBQVMsQ0FDVCxDQUNBLENBQ0EsU0FBUzBKLEdBQVluVSxFQUFHZSxFQUFHLENBQ3ZCLE1BQU1xVCxFQUFRcEssR0FBY2hLLENBQUMsRUFDdkJxVSxFQUFRckssR0FBY2pKLENBQUMsRUFDN0IsR0FBSWYsSUFBTWUsRUFDTixNQUFPLENBQUUsTUFBTyxHQUFNLEtBQU1mLENBQUcsRUFFOUIsR0FBSW9VLElBQVVySyxFQUFjLFFBQVVzSyxJQUFVdEssRUFBYyxPQUFRLENBQ3ZFLE1BQU11SyxFQUFRaGIsRUFBSyxXQUFXeUgsQ0FBQyxFQUN6QndULEVBQWFqYixFQUFLLFdBQVcwRyxDQUFDLEVBQUUsT0FBUS9HLEdBQVFxYixFQUFNLFFBQVFyYixDQUFHLElBQU0sRUFBRSxFQUN6RXViLEVBQVMsQ0FBRSxHQUFHeFUsRUFBRyxHQUFHZSxDQUFHLEVBQzdCLFVBQVc5SCxLQUFPc2IsRUFBWSxDQUMxQixNQUFNRSxFQUFjTixHQUFZblUsRUFBRS9HLENBQUcsRUFBRzhILEVBQUU5SCxDQUFHLENBQUMsRUFDOUMsR0FBSSxDQUFDd2IsRUFBWSxNQUNiLE1BQU8sQ0FBRSxNQUFPLEVBQU8sRUFFM0JELEVBQU92YixDQUFHLEVBQUl3YixFQUFZLElBQ3RDLENBQ1EsTUFBTyxDQUFFLE1BQU8sR0FBTSxLQUFNRCxDQUFRLENBQzVDLFNBQ2FKLElBQVVySyxFQUFjLE9BQVNzSyxJQUFVdEssRUFBYyxNQUFPLENBQ3JFLEdBQUkvSixFQUFFLFNBQVdlLEVBQUUsT0FDZixNQUFPLENBQUUsTUFBTyxFQUFPLEVBRTNCLE1BQU0yVCxFQUFXLENBQUUsRUFDbkIsUUFBUzVTLEVBQVEsRUFBR0EsRUFBUTlCLEVBQUUsT0FBUThCLElBQVMsQ0FDM0MsTUFBTTZTLEVBQVEzVSxFQUFFOEIsQ0FBSyxFQUNmOFMsRUFBUTdULEVBQUVlLENBQUssRUFDZjJTLEVBQWNOLEdBQVlRLEVBQU9DLENBQUssRUFDNUMsR0FBSSxDQUFDSCxFQUFZLE1BQ2IsTUFBTyxDQUFFLE1BQU8sRUFBTyxFQUUzQkMsRUFBUyxLQUFLRCxFQUFZLElBQUksQ0FDMUMsQ0FDUSxNQUFPLENBQUUsTUFBTyxHQUFNLEtBQU1DLENBQVUsQ0FDOUMsS0FDUyxRQUFJTixJQUFVckssRUFBYyxNQUFRc0ssSUFBVXRLLEVBQWMsTUFBUSxDQUFDL0osR0FBTSxDQUFDZSxFQUN0RSxDQUFFLE1BQU8sR0FBTSxLQUFNZixDQUFHLEVBR3hCLENBQUUsTUFBTyxFQUFPLENBRS9CLENBQ08sTUFBTTBOLFdBQXdCZixDQUFRLENBQ3pDLE9BQU81SSxFQUFPLENBQ1YsS0FBTSxDQUFFLE9BQUFzSCxFQUFRLElBQUFILENBQUcsRUFBSyxLQUFLLG9CQUFvQm5ILENBQUssRUFDaEQ4USxFQUFlLENBQUNDLEVBQVlDLElBQWdCLENBQzlDLEdBQUloSixHQUFVK0ksQ0FBVSxHQUFLL0ksR0FBVWdKLENBQVcsRUFDOUMsT0FBT3ZKLEVBRVgsTUFBTXdKLEVBQVNiLEdBQVlXLEVBQVcsTUFBT0MsRUFBWSxLQUFLLEVBQzlELE9BQUtDLEVBQU8sUUFNUmhKLEdBQVE4SSxDQUFVLEdBQUs5SSxHQUFRK0ksQ0FBVyxJQUMxQzFKLEVBQU8sTUFBTyxFQUVYLENBQUUsT0FBUUEsRUFBTyxNQUFPLE1BQU8ySixFQUFPLElBQU0sSUFSL0MvSixFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSwwQkFDdkMsQ0FBaUIsRUFDTXNCLEVBTWQsRUFDRCxPQUFJTixFQUFJLE9BQU8sTUFDSixRQUFRLElBQUksQ0FDZixLQUFLLEtBQUssS0FBSyxZQUFZLENBQ3ZCLEtBQU1BLEVBQUksS0FDVixLQUFNQSxFQUFJLEtBQ1YsT0FBUUEsQ0FDNUIsQ0FBaUIsRUFDRCxLQUFLLEtBQUssTUFBTSxZQUFZLENBQ3hCLEtBQU1BLEVBQUksS0FDVixLQUFNQSxFQUFJLEtBQ1YsT0FBUUEsQ0FDNUIsQ0FBaUIsQ0FDakIsQ0FBYSxFQUFFLEtBQUssQ0FBQyxDQUFDK0osRUFBTUMsQ0FBSyxJQUFNTCxFQUFhSSxFQUFNQyxDQUFLLENBQUMsRUFHN0NMLEVBQWEsS0FBSyxLQUFLLEtBQUssV0FBVyxDQUMxQyxLQUFNM0osRUFBSSxLQUNWLEtBQU1BLEVBQUksS0FDVixPQUFRQSxDQUNYLENBQUEsRUFBRyxLQUFLLEtBQUssTUFBTSxXQUFXLENBQzNCLEtBQU1BLEVBQUksS0FDVixLQUFNQSxFQUFJLEtBQ1YsT0FBUUEsQ0FDeEIsQ0FBYSxDQUFDLENBRWQsQ0FDQSxDQUNBd0MsR0FBZ0IsT0FBUyxDQUFDdUgsRUFBTUMsRUFBT3pLLElBQzVCLElBQUlpRCxHQUFnQixDQUN2QixLQUFNdUgsRUFDTixNQUFPQyxFQUNQLFNBQVV0WixFQUFzQixnQkFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBR0UsTUFBTStILFdBQWlCN0YsQ0FBUSxDQUNsQyxPQUFPNUksRUFBTyxDQUNWLEtBQU0sQ0FBRSxPQUFBc0gsRUFBUSxJQUFBSCxDQUFHLEVBQUssS0FBSyxvQkFBb0JuSCxDQUFLLEVBQ3RELEdBQUltSCxFQUFJLGFBQWVuQixFQUFjLE1BQ2pDLE9BQUFrQixFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxhQUNuQixTQUFVSCxFQUFjLE1BQ3hCLFNBQVVtQixFQUFJLFVBQzlCLENBQWEsRUFDTU0sRUFFWCxHQUFJTixFQUFJLEtBQUssT0FBUyxLQUFLLEtBQUssTUFBTSxPQUNsQyxPQUFBRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxVQUNuQixRQUFTLEtBQUssS0FBSyxNQUFNLE9BQ3pCLFVBQVcsR0FDWCxNQUFPLEdBQ1AsS0FBTSxPQUN0QixDQUFhLEVBQ01zQixFQUdQLENBRFMsS0FBSyxLQUFLLE1BQ1ZOLEVBQUksS0FBSyxPQUFTLEtBQUssS0FBSyxNQUFNLFNBQzNDRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxRQUNuQixRQUFTLEtBQUssS0FBSyxNQUFNLE9BQ3pCLFVBQVcsR0FDWCxNQUFPLEdBQ1AsS0FBTSxPQUN0QixDQUFhLEVBQ0RtQixFQUFPLE1BQU8sR0FFbEIsTUFBTXpSLEVBQVEsQ0FBQyxHQUFHc1IsRUFBSSxJQUFJLEVBQ3JCLElBQUksQ0FBQy9VLEVBQU1nZixJQUFjLENBQzFCLE1BQU01WCxFQUFTLEtBQUssS0FBSyxNQUFNNFgsQ0FBUyxHQUFLLEtBQUssS0FBSyxLQUN2RCxPQUFLNVgsRUFFRUEsRUFBTyxPQUFPLElBQUk0TyxHQUFtQmpCLEVBQUsvVSxFQUFNK1UsRUFBSSxLQUFNaUssQ0FBUyxDQUFDLEVBRGhFLElBRWQsQ0FBQSxFQUNJLE9BQVEvWCxHQUFNLENBQUMsQ0FBQ0EsQ0FBQyxFQUN0QixPQUFJOE4sRUFBSSxPQUFPLE1BQ0osUUFBUSxJQUFJdFIsQ0FBSyxFQUFFLEtBQU0wUixHQUNyQkYsR0FBWSxXQUFXQyxFQUFRQyxDQUFPLENBQ2hELEVBR01GLEdBQVksV0FBV0MsRUFBUXpSLENBQUssQ0FFdkQsQ0FDSSxJQUFJLE9BQVEsQ0FDUixPQUFPLEtBQUssS0FBSyxLQUN6QixDQUNJLEtBQUs4RCxFQUFNLENBQ1AsT0FBTyxJQUFJOFUsR0FBUyxDQUNoQixHQUFHLEtBQUssS0FDUixLQUFBOVUsQ0FDWixDQUFTLENBQ1QsQ0FDQSxDQUNBOFUsR0FBUyxPQUFTLENBQUM0QyxFQUFTM0ssSUFBVyxDQUNuQyxHQUFJLENBQUMsTUFBTSxRQUFRMkssQ0FBTyxFQUN0QixNQUFNLElBQUksTUFBTSx1REFBdUQsRUFFM0UsT0FBTyxJQUFJNUMsR0FBUyxDQUNoQixNQUFPNEMsRUFDUCxTQUFVeFosRUFBc0IsU0FDaEMsS0FBTSxLQUNOLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxDQUNMLEVBQ08sTUFBTTRLLFdBQWtCMUksQ0FBUSxDQUNuQyxJQUFJLFdBQVksQ0FDWixPQUFPLEtBQUssS0FBSyxPQUN6QixDQUNJLElBQUksYUFBYyxDQUNkLE9BQU8sS0FBSyxLQUFLLFNBQ3pCLENBQ0ksT0FBTzVJLEVBQU8sQ0FDVixLQUFNLENBQUUsT0FBQXNILEVBQVEsSUFBQUgsQ0FBRyxFQUFLLEtBQUssb0JBQW9CbkgsQ0FBSyxFQUN0RCxHQUFJbUgsRUFBSSxhQUFlbkIsRUFBYyxPQUNqQyxPQUFBa0IsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsYUFDbkIsU0FBVUgsRUFBYyxPQUN4QixTQUFVbUIsRUFBSSxVQUM5QixDQUFhLEVBQ01NLEVBRVgsTUFBTUMsRUFBUSxDQUFFLEVBQ1Z2TSxFQUFVLEtBQUssS0FBSyxRQUNwQm9XLEVBQVksS0FBSyxLQUFLLFVBQzVCLFVBQVdyYyxLQUFPaVMsRUFBSSxLQUNsQk8sRUFBTSxLQUFLLENBQ1AsSUFBS3ZNLEVBQVEsT0FBTyxJQUFJaU4sR0FBbUJqQixFQUFLalMsRUFBS2lTLEVBQUksS0FBTWpTLENBQUcsQ0FBQyxFQUNuRSxNQUFPcWMsRUFBVSxPQUFPLElBQUluSixHQUFtQmpCLEVBQUtBLEVBQUksS0FBS2pTLENBQUcsRUFBR2lTLEVBQUksS0FBTWpTLENBQUcsQ0FBQyxFQUNqRixVQUFXQSxLQUFPaVMsRUFBSSxJQUN0QyxDQUFhLEVBRUwsT0FBSUEsRUFBSSxPQUFPLE1BQ0pFLEdBQVksaUJBQWlCQyxFQUFRSSxDQUFLLEVBRzFDTCxHQUFZLGdCQUFnQkMsRUFBUUksQ0FBSyxDQUU1RCxDQUNJLElBQUksU0FBVSxDQUNWLE9BQU8sS0FBSyxLQUFLLFNBQ3pCLENBQ0ksT0FBTyxPQUFPL1EsRUFBT0MsRUFBUTRhLEVBQU8sQ0FDaEMsT0FBSTVhLGFBQWtCZ1MsRUFDWCxJQUFJMEksR0FBVSxDQUNqQixRQUFTM2EsRUFDVCxVQUFXQyxFQUNYLFNBQVVpQixFQUFzQixVQUNoQyxHQUFHMFEsRUFBb0JpSixDQUFLLENBQzVDLENBQWEsRUFFRSxJQUFJRixHQUFVLENBQ2pCLFFBQVNoRixHQUFVLE9BQVEsRUFDM0IsVUFBVzNWLEVBQ1gsU0FBVWtCLEVBQXNCLFVBQ2hDLEdBQUcwUSxFQUFvQjNSLENBQU0sQ0FDekMsQ0FBUyxDQUNULENBQ0EsQ0FDTyxNQUFNNmEsV0FBZTdJLENBQVEsQ0FDaEMsSUFBSSxXQUFZLENBQ1osT0FBTyxLQUFLLEtBQUssT0FDekIsQ0FDSSxJQUFJLGFBQWMsQ0FDZCxPQUFPLEtBQUssS0FBSyxTQUN6QixDQUNJLE9BQU81SSxFQUFPLENBQ1YsS0FBTSxDQUFFLE9BQUFzSCxFQUFRLElBQUFILENBQUcsRUFBSyxLQUFLLG9CQUFvQm5ILENBQUssRUFDdEQsR0FBSW1ILEVBQUksYUFBZW5CLEVBQWMsSUFDakMsT0FBQWtCLEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLGFBQ25CLFNBQVVILEVBQWMsSUFDeEIsU0FBVW1CLEVBQUksVUFDOUIsQ0FBYSxFQUNNTSxFQUVYLE1BQU10TSxFQUFVLEtBQUssS0FBSyxRQUNwQm9XLEVBQVksS0FBSyxLQUFLLFVBQ3RCN0osRUFBUSxDQUFDLEdBQUdQLEVBQUksS0FBSyxRQUFPLENBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQ2pTLEVBQUtJLENBQUssRUFBR3lJLEtBQzlDLENBQ0gsSUFBSzVDLEVBQVEsT0FBTyxJQUFJaU4sR0FBbUJqQixFQUFLalMsRUFBS2lTLEVBQUksS0FBTSxDQUFDcEosRUFBTyxLQUFLLENBQUMsQ0FBQyxFQUM5RSxNQUFPd1QsRUFBVSxPQUFPLElBQUluSixHQUFtQmpCLEVBQUs3UixFQUFPNlIsRUFBSSxLQUFNLENBQUNwSixFQUFPLE9BQU8sQ0FBQyxDQUFDLENBQ3pGLEVBQ0osRUFDRCxHQUFJb0osRUFBSSxPQUFPLE1BQU8sQ0FDbEIsTUFBTXVLLEVBQVcsSUFBSSxJQUNyQixPQUFPLFFBQVEsVUFBVSxLQUFLLFNBQVksQ0FDdEMsVUFBVzlKLEtBQVFGLEVBQU8sQ0FDdEIsTUFBTXhTLEVBQU0sTUFBTTBTLEVBQUssSUFDakJ0UyxFQUFRLE1BQU1zUyxFQUFLLE1BQ3pCLEdBQUkxUyxFQUFJLFNBQVcsV0FBYUksRUFBTSxTQUFXLFVBQzdDLE9BQU9tUyxHQUVQdlMsRUFBSSxTQUFXLFNBQVdJLEVBQU0sU0FBVyxVQUMzQ2dTLEVBQU8sTUFBTyxFQUVsQm9LLEVBQVMsSUFBSXhjLEVBQUksTUFBT0ksRUFBTSxLQUFLLENBQ3ZELENBQ2dCLE1BQU8sQ0FBRSxPQUFRZ1MsRUFBTyxNQUFPLE1BQU9vSyxDQUFVLENBQ2hFLENBQWEsQ0FDYixLQUNhLENBQ0QsTUFBTUEsRUFBVyxJQUFJLElBQ3JCLFVBQVc5SixLQUFRRixFQUFPLENBQ3RCLE1BQU14UyxFQUFNMFMsRUFBSyxJQUNYdFMsRUFBUXNTLEVBQUssTUFDbkIsR0FBSTFTLEVBQUksU0FBVyxXQUFhSSxFQUFNLFNBQVcsVUFDN0MsT0FBT21TLEdBRVB2UyxFQUFJLFNBQVcsU0FBV0ksRUFBTSxTQUFXLFVBQzNDZ1MsRUFBTyxNQUFPLEVBRWxCb0ssRUFBUyxJQUFJeGMsRUFBSSxNQUFPSSxFQUFNLEtBQUssQ0FDbkQsQ0FDWSxNQUFPLENBQUUsT0FBUWdTLEVBQU8sTUFBTyxNQUFPb0ssQ0FBVSxDQUM1RCxDQUNBLENBQ0EsQ0FDQUQsR0FBTyxPQUFTLENBQUN0VyxFQUFTb1csRUFBVzdLLElBQzFCLElBQUkrSyxHQUFPLENBQ2QsVUFBQUYsRUFDQSxRQUFBcFcsRUFDQSxTQUFVdEQsRUFBc0IsT0FDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUUsTUFBTWlMLFdBQWUvSSxDQUFRLENBQ2hDLE9BQU81SSxFQUFPLENBQ1YsS0FBTSxDQUFFLE9BQUFzSCxFQUFRLElBQUFILENBQUcsRUFBSyxLQUFLLG9CQUFvQm5ILENBQUssRUFDdEQsR0FBSW1ILEVBQUksYUFBZW5CLEVBQWMsSUFDakMsT0FBQWtCLEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLGFBQ25CLFNBQVVILEVBQWMsSUFDeEIsU0FBVW1CLEVBQUksVUFDOUIsQ0FBYSxFQUNNTSxFQUVYLE1BQU0xUyxFQUFNLEtBQUssS0FDYkEsRUFBSSxVQUFZLE1BQ1pvUyxFQUFJLEtBQUssS0FBT3BTLEVBQUksUUFBUSxRQUM1Qm1TLEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLFVBQ25CLFFBQVNwUixFQUFJLFFBQVEsTUFDckIsS0FBTSxNQUNOLFVBQVcsR0FDWCxNQUFPLEdBQ1AsUUFBU0EsRUFBSSxRQUFRLE9BQ3pDLENBQWlCLEVBQ0R1UyxFQUFPLE1BQU8sR0FHbEJ2UyxFQUFJLFVBQVksTUFDWm9TLEVBQUksS0FBSyxLQUFPcFMsRUFBSSxRQUFRLFFBQzVCbVMsRUFBa0JDLEVBQUssQ0FDbkIsS0FBTWhCLEVBQWEsUUFDbkIsUUFBU3BSLEVBQUksUUFBUSxNQUNyQixLQUFNLE1BQ04sVUFBVyxHQUNYLE1BQU8sR0FDUCxRQUFTQSxFQUFJLFFBQVEsT0FDekMsQ0FBaUIsRUFDRHVTLEVBQU8sTUFBTyxHQUd0QixNQUFNaUssRUFBWSxLQUFLLEtBQUssVUFDNUIsU0FBU0ssRUFBWUMsRUFBVSxDQUMzQixNQUFNQyxFQUFZLElBQUksSUFDdEIsVUFBV0MsS0FBV0YsRUFBVSxDQUM1QixHQUFJRSxFQUFRLFNBQVcsVUFDbkIsT0FBT3RLLEVBQ1BzSyxFQUFRLFNBQVcsU0FDbkJ6SyxFQUFPLE1BQU8sRUFDbEJ3SyxFQUFVLElBQUlDLEVBQVEsS0FBSyxDQUMzQyxDQUNZLE1BQU8sQ0FBRSxPQUFRekssRUFBTyxNQUFPLE1BQU93SyxDQUFXLENBQzdELENBQ1EsTUFBTUQsRUFBVyxDQUFDLEdBQUcxSyxFQUFJLEtBQUssUUFBUSxFQUFFLElBQUksQ0FBQy9VLEVBQU1KLElBQU11ZixFQUFVLE9BQU8sSUFBSW5KLEdBQW1CakIsRUFBSy9VLEVBQU0rVSxFQUFJLEtBQU1uVixDQUFDLENBQUMsQ0FBQyxFQUN6SCxPQUFJbVYsRUFBSSxPQUFPLE1BQ0osUUFBUSxJQUFJMEssQ0FBUSxFQUFFLEtBQU1BLEdBQWFELEVBQVlDLENBQVEsQ0FBQyxFQUc5REQsRUFBWUMsQ0FBUSxDQUV2QyxDQUNJLElBQUlHLEVBQVNwYSxFQUFTLENBQ2xCLE9BQU8sSUFBSStaLEdBQU8sQ0FDZCxHQUFHLEtBQUssS0FDUixRQUFTLENBQUUsTUFBT0ssRUFBUyxRQUFTcmEsRUFBVSxTQUFTQyxDQUFPLENBQUcsQ0FDN0UsQ0FBUyxDQUNULENBQ0ksSUFBSXFhLEVBQVNyYSxFQUFTLENBQ2xCLE9BQU8sSUFBSStaLEdBQU8sQ0FDZCxHQUFHLEtBQUssS0FDUixRQUFTLENBQUUsTUFBT00sRUFBUyxRQUFTdGEsRUFBVSxTQUFTQyxDQUFPLENBQUcsQ0FDN0UsQ0FBUyxDQUNULENBQ0ksS0FBS3NhLEVBQU10YSxFQUFTLENBQ2hCLE9BQU8sS0FBSyxJQUFJc2EsRUFBTXRhLENBQU8sRUFBRSxJQUFJc2EsRUFBTXRhLENBQU8sQ0FDeEQsQ0FDSSxTQUFTQSxFQUFTLENBQ2QsT0FBTyxLQUFLLElBQUksRUFBR0EsQ0FBTyxDQUNsQyxDQUNBLENBQ0ErWixHQUFPLE9BQVMsQ0FBQ0osRUFBVzdLLElBQ2pCLElBQUlpTCxHQUFPLENBQ2QsVUFBQUosRUFDQSxRQUFTLEtBQ1QsUUFBUyxLQUNULFNBQVUxWixFQUFzQixPQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFvSEUsTUFBTWlKLFdBQWdCL0csQ0FBUSxDQUNqQyxJQUFJLFFBQVMsQ0FDVCxPQUFPLEtBQUssS0FBSyxPQUFRLENBQ2pDLENBQ0ksT0FBTzVJLEVBQU8sQ0FDVixLQUFNLENBQUUsSUFBQW1ILENBQUssRUFBRyxLQUFLLG9CQUFvQm5ILENBQUssRUFFOUMsT0FEbUIsS0FBSyxLQUFLLE9BQVEsRUFDbkIsT0FBTyxDQUFFLEtBQU1tSCxFQUFJLEtBQU0sS0FBTUEsRUFBSSxLQUFNLE9BQVFBLENBQUcsQ0FBRSxDQUNoRixDQUNBLENBQ0F3SSxHQUFRLE9BQVMsQ0FBQ3dDLEVBQVF6TCxJQUNmLElBQUlpSixHQUFRLENBQ2YsT0FBUXdDLEVBQ1IsU0FBVXRhLEVBQXNCLFFBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUVFLE1BQU1rSixXQUFtQmhILENBQVEsQ0FDcEMsT0FBTzVJLEVBQU8sQ0FDVixHQUFJQSxFQUFNLE9BQVMsS0FBSyxLQUFLLE1BQU8sQ0FDaEMsTUFBTW1ILEVBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLLEVBQ3RDLE9BQUFrSCxFQUFrQkMsRUFBSyxDQUNuQixTQUFVQSxFQUFJLEtBQ2QsS0FBTWhCLEVBQWEsZ0JBQ25CLFNBQVUsS0FBSyxLQUFLLEtBQ3BDLENBQWEsRUFDTXNCLENBQ25CLENBQ1EsTUFBTyxDQUFFLE9BQVEsUUFBUyxNQUFPekgsRUFBTSxJQUFNLENBQ3JELENBQ0ksSUFBSSxPQUFRLENBQ1IsT0FBTyxLQUFLLEtBQUssS0FDekIsQ0FDQSxDQUNBNFAsR0FBVyxPQUFTLENBQUN0YSxFQUFPb1IsSUFDakIsSUFBSWtKLEdBQVcsQ0FDbEIsTUFBT3RhLEVBQ1AsU0FBVXVDLEVBQXNCLFdBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUVMLFNBQVMySSxHQUFjL1QsRUFBUW9MLEVBQVEsQ0FDbkMsT0FBTyxJQUFJbUosR0FBUSxDQUNmLE9BQUF2VSxFQUNBLFNBQVV6RCxFQUFzQixRQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssQ0FDTCxDQUNPLE1BQU1tSixXQUFnQmpILENBQVEsQ0FDakMsT0FBTzVJLEVBQU8sQ0FDVixHQUFJLE9BQU9BLEVBQU0sTUFBUyxTQUFVLENBQ2hDLE1BQU1tSCxFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUNoQ29TLEVBQWlCLEtBQUssS0FBSyxPQUNqQyxPQUFBbEwsRUFBa0JDLEVBQUssQ0FDbkIsU0FBVTVSLEVBQUssV0FBVzZjLENBQWMsRUFDeEMsU0FBVWpMLEVBQUksV0FDZCxLQUFNaEIsRUFBYSxZQUNuQyxDQUFhLEVBQ01zQixDQUNuQixDQUlRLEdBSEssS0FBSyxTQUNOLEtBQUssT0FBUyxJQUFJLElBQUksS0FBSyxLQUFLLE1BQU0sR0FFdEMsQ0FBQyxLQUFLLE9BQU8sSUFBSXpILEVBQU0sSUFBSSxFQUFHLENBQzlCLE1BQU1tSCxFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUNoQ29TLEVBQWlCLEtBQUssS0FBSyxPQUNqQyxPQUFBbEwsRUFBa0JDLEVBQUssQ0FDbkIsU0FBVUEsRUFBSSxLQUNkLEtBQU1oQixFQUFhLG1CQUNuQixRQUFTaU0sQ0FDekIsQ0FBYSxFQUNNM0ssQ0FDbkIsQ0FDUSxPQUFPTSxHQUFHL0gsRUFBTSxJQUFJLENBQzVCLENBQ0ksSUFBSSxTQUFVLENBQ1YsT0FBTyxLQUFLLEtBQUssTUFDekIsQ0FDSSxJQUFJLE1BQU8sQ0FDUCxNQUFNcVMsRUFBYSxDQUFFLEVBQ3JCLFVBQVcvYixLQUFPLEtBQUssS0FBSyxPQUN4QitiLEVBQVcvYixDQUFHLEVBQUlBLEVBRXRCLE9BQU8rYixDQUNmLENBQ0ksSUFBSSxRQUFTLENBQ1QsTUFBTUEsRUFBYSxDQUFFLEVBQ3JCLFVBQVcvYixLQUFPLEtBQUssS0FBSyxPQUN4QitiLEVBQVcvYixDQUFHLEVBQUlBLEVBRXRCLE9BQU8rYixDQUNmLENBQ0ksSUFBSSxNQUFPLENBQ1AsTUFBTUEsRUFBYSxDQUFFLEVBQ3JCLFVBQVcvYixLQUFPLEtBQUssS0FBSyxPQUN4QitiLEVBQVcvYixDQUFHLEVBQUlBLEVBRXRCLE9BQU8rYixDQUNmLENBQ0ksUUFBUS9XLEVBQVFnWCxFQUFTLEtBQUssS0FBTSxDQUNoQyxPQUFPekMsR0FBUSxPQUFPdlUsRUFBUSxDQUMxQixHQUFHLEtBQUssS0FDUixHQUFHZ1gsQ0FDZixDQUFTLENBQ1QsQ0FDSSxRQUFRaFgsRUFBUWdYLEVBQVMsS0FBSyxLQUFNLENBQ2hDLE9BQU96QyxHQUFRLE9BQU8sS0FBSyxRQUFRLE9BQVEwQyxHQUFRLENBQUNqWCxFQUFPLFNBQVNpWCxDQUFHLENBQUMsRUFBRyxDQUN2RSxHQUFHLEtBQUssS0FDUixHQUFHRCxDQUNmLENBQVMsQ0FDVCxDQUNBLENBQ0F6QyxHQUFRLE9BQVNSLEdBQ1YsTUFBTVMsV0FBc0JsSCxDQUFRLENBQ3ZDLE9BQU81SSxFQUFPLENBQ1YsTUFBTXdTLEVBQW1CamQsRUFBSyxtQkFBbUIsS0FBSyxLQUFLLE1BQU0sRUFDM0Q0UixFQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxFQUN0QyxHQUFJbUgsRUFBSSxhQUFlbkIsRUFBYyxRQUFVbUIsRUFBSSxhQUFlbkIsRUFBYyxPQUFRLENBQ3BGLE1BQU1vTSxFQUFpQjdjLEVBQUssYUFBYWlkLENBQWdCLEVBQ3pELE9BQUF0TCxFQUFrQkMsRUFBSyxDQUNuQixTQUFVNVIsRUFBSyxXQUFXNmMsQ0FBYyxFQUN4QyxTQUFVakwsRUFBSSxXQUNkLEtBQU1oQixFQUFhLFlBQ25DLENBQWEsRUFDTXNCLENBQ25CLENBSVEsR0FISyxLQUFLLFNBQ04sS0FBSyxPQUFTLElBQUksSUFBSWxTLEVBQUssbUJBQW1CLEtBQUssS0FBSyxNQUFNLENBQUMsR0FFL0QsQ0FBQyxLQUFLLE9BQU8sSUFBSXlLLEVBQU0sSUFBSSxFQUFHLENBQzlCLE1BQU1vUyxFQUFpQjdjLEVBQUssYUFBYWlkLENBQWdCLEVBQ3pELE9BQUF0TCxFQUFrQkMsRUFBSyxDQUNuQixTQUFVQSxFQUFJLEtBQ2QsS0FBTWhCLEVBQWEsbUJBQ25CLFFBQVNpTSxDQUN6QixDQUFhLEVBQ00zSyxDQUNuQixDQUNRLE9BQU9NLEdBQUcvSCxFQUFNLElBQUksQ0FDNUIsQ0FDSSxJQUFJLE1BQU8sQ0FDUCxPQUFPLEtBQUssS0FBSyxNQUN6QixDQUNBLENBQ0E4UCxHQUFjLE9BQVMsQ0FBQ3hVLEVBQVFvTCxJQUNyQixJQUFJb0osR0FBYyxDQUNyQixPQUFReFUsRUFDUixTQUFVekQsRUFBc0IsY0FDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUUsTUFBTTZDLFdBQW1CWCxDQUFRLENBQ3BDLFFBQVMsQ0FDTCxPQUFPLEtBQUssS0FBSyxJQUN6QixDQUNJLE9BQU81SSxFQUFPLENBQ1YsS0FBTSxDQUFFLElBQUFtSCxDQUFLLEVBQUcsS0FBSyxvQkFBb0JuSCxDQUFLLEVBQzlDLEdBQUltSCxFQUFJLGFBQWVuQixFQUFjLFNBQVdtQixFQUFJLE9BQU8sUUFBVSxHQUNqRSxPQUFBRCxFQUFrQkMsRUFBSyxDQUNuQixLQUFNaEIsRUFBYSxhQUNuQixTQUFVSCxFQUFjLFFBQ3hCLFNBQVVtQixFQUFJLFVBQzlCLENBQWEsRUFDTU0sRUFFWCxNQUFNZ0wsRUFBY3RMLEVBQUksYUFBZW5CLEVBQWMsUUFBVW1CLEVBQUksS0FBTyxRQUFRLFFBQVFBLEVBQUksSUFBSSxFQUNsRyxPQUFPWSxHQUFHMEssRUFBWSxLQUFNdk0sR0FDakIsS0FBSyxLQUFLLEtBQUssV0FBV0EsRUFBTSxDQUNuQyxLQUFNaUIsRUFBSSxLQUNWLFNBQVVBLEVBQUksT0FBTyxrQkFDckMsQ0FBYSxDQUNKLENBQUMsQ0FDVixDQUNBLENBQ0FvQyxHQUFXLE9BQVMsQ0FBQy9QLEVBQVFrTixJQUNsQixJQUFJNkMsR0FBVyxDQUNsQixLQUFNL1AsRUFDTixTQUFVM0IsRUFBc0IsV0FDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUUsTUFBTXlDLFdBQW1CUCxDQUFRLENBQ3BDLFdBQVksQ0FDUixPQUFPLEtBQUssS0FBSyxNQUN6QixDQUNJLFlBQWEsQ0FDVCxPQUFPLEtBQUssS0FBSyxPQUFPLEtBQUssV0FBYS9RLEVBQXNCLFdBQzFELEtBQUssS0FBSyxPQUFPLFdBQVUsRUFDM0IsS0FBSyxLQUFLLE1BQ3hCLENBQ0ksT0FBT21JLEVBQU8sQ0FDVixLQUFNLENBQUUsT0FBQXNILEVBQVEsSUFBQUgsQ0FBRyxFQUFLLEtBQUssb0JBQW9CbkgsQ0FBSyxFQUNoRDBTLEVBQVMsS0FBSyxLQUFLLFFBQVUsS0FDN0JDLEVBQVcsQ0FDYixTQUFXQyxHQUFRLENBQ2YxTCxFQUFrQkMsRUFBS3lMLENBQUcsRUFDdEJBLEVBQUksTUFDSnRMLEVBQU8sTUFBTyxFQUdkQSxFQUFPLE1BQU8sQ0FFckIsRUFDRCxJQUFJLE1BQU8sQ0FDUCxPQUFPSCxFQUFJLElBQ2QsQ0FDSixFQUVELEdBREF3TCxFQUFTLFNBQVdBLEVBQVMsU0FBUyxLQUFLQSxDQUFRLEVBQy9DRCxFQUFPLE9BQVMsYUFBYyxDQUM5QixNQUFNRyxFQUFZSCxFQUFPLFVBQVV2TCxFQUFJLEtBQU13TCxDQUFRLEVBQ3JELEdBQUl4TCxFQUFJLE9BQU8sTUFDWCxPQUFPLFFBQVEsUUFBUTBMLENBQVMsRUFBRSxLQUFLLE1BQU9BLEdBQWMsQ0FDeEQsR0FBSXZMLEVBQU8sUUFBVSxVQUNqQixPQUFPRyxFQUNYLE1BQU1qTCxFQUFTLE1BQU0sS0FBSyxLQUFLLE9BQU8sWUFBWSxDQUM5QyxLQUFNcVcsRUFDTixLQUFNMUwsRUFBSSxLQUNWLE9BQVFBLENBQ2hDLENBQXFCLEVBQ0QsT0FBSTNLLEVBQU8sU0FBVyxVQUNYaUwsRUFDUGpMLEVBQU8sU0FBVyxTQUVsQjhLLEVBQU8sUUFBVSxRQUNWUSxHQUFNdEwsRUFBTyxLQUFLLEVBQ3RCQSxDQUMzQixDQUFpQixFQUVBLENBQ0QsR0FBSThLLEVBQU8sUUFBVSxVQUNqQixPQUFPRyxFQUNYLE1BQU1qTCxFQUFTLEtBQUssS0FBSyxPQUFPLFdBQVcsQ0FDdkMsS0FBTXFXLEVBQ04sS0FBTTFMLEVBQUksS0FDVixPQUFRQSxDQUM1QixDQUFpQixFQUNELE9BQUkzSyxFQUFPLFNBQVcsVUFDWGlMLEVBQ1BqTCxFQUFPLFNBQVcsU0FFbEI4SyxFQUFPLFFBQVUsUUFDVlEsR0FBTXRMLEVBQU8sS0FBSyxFQUN0QkEsQ0FDdkIsQ0FDQSxDQUNRLEdBQUlrVyxFQUFPLE9BQVMsYUFBYyxDQUM5QixNQUFNSSxFQUFxQjdYLEdBQVEsQ0FDL0IsTUFBTXVCLEVBQVNrVyxFQUFPLFdBQVd6WCxFQUFLMFgsQ0FBUSxFQUM5QyxHQUFJeEwsRUFBSSxPQUFPLE1BQ1gsT0FBTyxRQUFRLFFBQVEzSyxDQUFNLEVBRWpDLEdBQUlBLGFBQWtCLFFBQ2xCLE1BQU0sSUFBSSxNQUFNLDJGQUEyRixFQUUvRyxPQUFPdkIsQ0FDVixFQUNELEdBQUlrTSxFQUFJLE9BQU8sUUFBVSxHQUFPLENBQzVCLE1BQU00TCxFQUFRLEtBQUssS0FBSyxPQUFPLFdBQVcsQ0FDdEMsS0FBTTVMLEVBQUksS0FDVixLQUFNQSxFQUFJLEtBQ1YsT0FBUUEsQ0FDNUIsQ0FBaUIsRUFDRCxPQUFJNEwsRUFBTSxTQUFXLFVBQ1Z0TCxHQUNQc0wsRUFBTSxTQUFXLFNBQ2pCekwsRUFBTyxNQUFPLEVBRWxCd0wsRUFBa0JDLEVBQU0sS0FBSyxFQUN0QixDQUFFLE9BQVF6TCxFQUFPLE1BQU8sTUFBT3lMLEVBQU0sS0FBTyxFQUNuRSxLQUVnQixRQUFPLEtBQUssS0FBSyxPQUFPLFlBQVksQ0FBRSxLQUFNNUwsRUFBSSxLQUFNLEtBQU1BLEVBQUksS0FBTSxPQUFRQSxDQUFLLENBQUEsRUFBRSxLQUFNNEwsR0FDbkZBLEVBQU0sU0FBVyxVQUNWdEwsR0FDUHNMLEVBQU0sU0FBVyxTQUNqQnpMLEVBQU8sTUFBTyxFQUNYd0wsRUFBa0JDLEVBQU0sS0FBSyxFQUFFLEtBQUssS0FDaEMsQ0FBRSxPQUFRekwsRUFBTyxNQUFPLE1BQU95TCxFQUFNLEtBQU8sRUFDdEQsRUFDSixDQUVqQixDQUNRLEdBQUlMLEVBQU8sT0FBUyxZQUNoQixHQUFJdkwsRUFBSSxPQUFPLFFBQVUsR0FBTyxDQUM1QixNQUFNL0ssRUFBTyxLQUFLLEtBQUssT0FBTyxXQUFXLENBQ3JDLEtBQU0rSyxFQUFJLEtBQ1YsS0FBTUEsRUFBSSxLQUNWLE9BQVFBLENBQzVCLENBQWlCLEVBQ0QsR0FBSSxDQUFDZSxHQUFROUwsQ0FBSSxFQUNiLE9BQU9xTCxFQUNYLE1BQU1qTCxFQUFTa1csRUFBTyxVQUFVdFcsRUFBSyxNQUFPdVcsQ0FBUSxFQUNwRCxHQUFJblcsYUFBa0IsUUFDbEIsTUFBTSxJQUFJLE1BQU0saUdBQWlHLEVBRXJILE1BQU8sQ0FBRSxPQUFROEssRUFBTyxNQUFPLE1BQU85SyxDQUFRLENBQzlELEtBRWdCLFFBQU8sS0FBSyxLQUFLLE9BQU8sWUFBWSxDQUFFLEtBQU0ySyxFQUFJLEtBQU0sS0FBTUEsRUFBSSxLQUFNLE9BQVFBLENBQUssQ0FBQSxFQUFFLEtBQU0vSyxHQUNsRjhMLEdBQVE5TCxDQUFJLEVBRVYsUUFBUSxRQUFRc1csRUFBTyxVQUFVdFcsRUFBSyxNQUFPdVcsQ0FBUSxDQUFDLEVBQUUsS0FBTW5XLElBQVksQ0FDN0UsT0FBUThLLEVBQU8sTUFDZixNQUFPOUssQ0FDL0IsRUFBc0IsRUFKU2lMLENBS2QsRUFHVGxTLEVBQUssWUFBWW1kLENBQU0sQ0FDL0IsQ0FDQSxDQUNBdkosR0FBVyxPQUFTLENBQUMzUCxFQUFRa1osRUFBUWhNLElBQzFCLElBQUl5QyxHQUFXLENBQ2xCLE9BQUEzUCxFQUNBLFNBQVUzQixFQUFzQixXQUNoQyxPQUFBNmEsRUFDQSxHQUFHbkssRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFTHlDLEdBQVcscUJBQXVCLENBQUM2SixFQUFZeFosRUFBUWtOLElBQzVDLElBQUl5QyxHQUFXLENBQ2xCLE9BQUEzUCxFQUNBLE9BQVEsQ0FBRSxLQUFNLGFBQWMsVUFBV3daLENBQVksRUFDckQsU0FBVW5iLEVBQXNCLFdBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUdFLE1BQU0wQyxXQUFvQlIsQ0FBUSxDQUNyQyxPQUFPNUksRUFBTyxDQUVWLE9BRG1CLEtBQUssU0FBU0EsQ0FBSyxJQUNuQmdHLEVBQWMsVUFDdEIrQixHQUFHLE1BQVMsRUFFaEIsS0FBSyxLQUFLLFVBQVUsT0FBTy9ILENBQUssQ0FDL0MsQ0FDSSxRQUFTLENBQ0wsT0FBTyxLQUFLLEtBQUssU0FDekIsQ0FDQSxDQUNBb0osR0FBWSxPQUFTLENBQUNsUSxFQUFNd04sSUFDakIsSUFBSTBDLEdBQVksQ0FDbkIsVUFBV2xRLEVBQ1gsU0FBVXJCLEVBQXNCLFlBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUVFLE1BQU0yQyxXQUFvQlQsQ0FBUSxDQUNyQyxPQUFPNUksRUFBTyxDQUVWLE9BRG1CLEtBQUssU0FBU0EsQ0FBSyxJQUNuQmdHLEVBQWMsS0FDdEIrQixHQUFHLElBQUksRUFFWCxLQUFLLEtBQUssVUFBVSxPQUFPL0gsQ0FBSyxDQUMvQyxDQUNJLFFBQVMsQ0FDTCxPQUFPLEtBQUssS0FBSyxTQUN6QixDQUNBLENBQ0FxSixHQUFZLE9BQVMsQ0FBQ25RLEVBQU13TixJQUNqQixJQUFJMkMsR0FBWSxDQUNuQixVQUFXblEsRUFDWCxTQUFVckIsRUFBc0IsWUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTSxDQUNyQyxDQUFLLEVBRUUsTUFBTW9ELFdBQW1CbEIsQ0FBUSxDQUNwQyxPQUFPNUksRUFBTyxDQUNWLEtBQU0sQ0FBRSxJQUFBbUgsQ0FBSyxFQUFHLEtBQUssb0JBQW9CbkgsQ0FBSyxFQUM5QyxJQUFJa0csRUFBT2lCLEVBQUksS0FDZixPQUFJQSxFQUFJLGFBQWVuQixFQUFjLFlBQ2pDRSxFQUFPLEtBQUssS0FBSyxhQUFjLEdBRTVCLEtBQUssS0FBSyxVQUFVLE9BQU8sQ0FDOUIsS0FBQUEsRUFDQSxLQUFNaUIsRUFBSSxLQUNWLE9BQVFBLENBQ3BCLENBQVMsQ0FDVCxDQUNJLGVBQWdCLENBQ1osT0FBTyxLQUFLLEtBQUssU0FDekIsQ0FDQSxDQUNBMkMsR0FBVyxPQUFTLENBQUM1USxFQUFNd04sSUFDaEIsSUFBSW9ELEdBQVcsQ0FDbEIsVUFBVzVRLEVBQ1gsU0FBVXJCLEVBQXNCLFdBQ2hDLGFBQWMsT0FBTzZPLEVBQU8sU0FBWSxXQUFhQSxFQUFPLFFBQVUsSUFBTUEsRUFBTyxRQUNuRixHQUFHNkIsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFFRSxNQUFNdUQsV0FBaUJyQixDQUFRLENBQ2xDLE9BQU81SSxFQUFPLENBQ1YsS0FBTSxDQUFFLElBQUFtSCxDQUFLLEVBQUcsS0FBSyxvQkFBb0JuSCxDQUFLLEVBRXhDaVQsRUFBUyxDQUNYLEdBQUc5TCxFQUNILE9BQVEsQ0FDSixHQUFHQSxFQUFJLE9BQ1AsT0FBUSxDQUFFLENBQ2IsQ0FDSixFQUNLM0ssRUFBUyxLQUFLLEtBQUssVUFBVSxPQUFPLENBQ3RDLEtBQU15VyxFQUFPLEtBQ2IsS0FBTUEsRUFBTyxLQUNiLE9BQVEsQ0FDSixHQUFHQSxDQUNOLENBQ2IsQ0FBUyxFQUNELE9BQUk5SyxHQUFRM0wsQ0FBTSxFQUNQQSxFQUFPLEtBQU1BLElBQ1QsQ0FDSCxPQUFRLFFBQ1IsTUFBT0EsRUFBTyxTQUFXLFFBQ25CQSxFQUFPLE1BQ1AsS0FBSyxLQUFLLFdBQVcsQ0FDbkIsSUFBSSxPQUFRLENBQ1IsT0FBTyxJQUFJMUYsR0FBU21jLEVBQU8sT0FBTyxNQUFNLENBQzNDLEVBQ0QsTUFBT0EsRUFBTyxJQUMxQyxDQUF5QixDQUNSLEVBQ0osRUFHTSxDQUNILE9BQVEsUUFDUixNQUFPelcsRUFBTyxTQUFXLFFBQ25CQSxFQUFPLE1BQ1AsS0FBSyxLQUFLLFdBQVcsQ0FDbkIsSUFBSSxPQUFRLENBQ1IsT0FBTyxJQUFJMUYsR0FBU21jLEVBQU8sT0FBTyxNQUFNLENBQzNDLEVBQ0QsTUFBT0EsRUFBTyxJQUN0QyxDQUFxQixDQUNSLENBRWIsQ0FDSSxhQUFjLENBQ1YsT0FBTyxLQUFLLEtBQUssU0FDekIsQ0FDQSxDQUNBaEosR0FBUyxPQUFTLENBQUMvUSxFQUFNd04sSUFDZCxJQUFJdUQsR0FBUyxDQUNoQixVQUFXL1EsRUFDWCxTQUFVckIsRUFBc0IsU0FDaEMsV0FBWSxPQUFPNk8sRUFBTyxPQUFVLFdBQWFBLEVBQU8sTUFBUSxJQUFNQSxFQUFPLE1BQzdFLEdBQUc2QixFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUVFLE1BQU13TSxXQUFldEssQ0FBUSxDQUNoQyxPQUFPNUksRUFBTyxDQUVWLEdBRG1CLEtBQUssU0FBU0EsQ0FBSyxJQUNuQmdHLEVBQWMsSUFBSyxDQUNsQyxNQUFNbUIsRUFBTSxLQUFLLGdCQUFnQm5ILENBQUssRUFDdEMsT0FBQWtILEVBQWtCQyxFQUFLLENBQ25CLEtBQU1oQixFQUFhLGFBQ25CLFNBQVVILEVBQWMsSUFDeEIsU0FBVW1CLEVBQUksVUFDOUIsQ0FBYSxFQUNNTSxDQUNuQixDQUNRLE1BQU8sQ0FBRSxPQUFRLFFBQVMsTUFBT3pILEVBQU0sSUFBTSxDQUNyRCxDQUNBLENBQ0FrVCxHQUFPLE9BQVV4TSxHQUNOLElBQUl3TSxHQUFPLENBQ2QsU0FBVXJiLEVBQXNCLE9BQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU0sQ0FDckMsQ0FBSyxFQUdFLE1BQU1xRCxXQUFtQm5CLENBQVEsQ0FDcEMsT0FBTzVJLEVBQU8sQ0FDVixLQUFNLENBQUUsSUFBQW1ILENBQUssRUFBRyxLQUFLLG9CQUFvQm5ILENBQUssRUFDeENrRyxFQUFPaUIsRUFBSSxLQUNqQixPQUFPLEtBQUssS0FBSyxLQUFLLE9BQU8sQ0FDekIsS0FBQWpCLEVBQ0EsS0FBTWlCLEVBQUksS0FDVixPQUFRQSxDQUNwQixDQUFTLENBQ1QsQ0FDSSxRQUFTLENBQ0wsT0FBTyxLQUFLLEtBQUssSUFDekIsQ0FDQSxDQUNPLE1BQU1pRCxXQUFvQnhCLENBQVEsQ0FDckMsT0FBTzVJLEVBQU8sQ0FDVixLQUFNLENBQUUsT0FBQXNILEVBQVEsSUFBQUgsQ0FBRyxFQUFLLEtBQUssb0JBQW9CbkgsQ0FBSyxFQUN0RCxHQUFJbUgsRUFBSSxPQUFPLE1BcUJYLE9BcEJvQixTQUFZLENBQzVCLE1BQU1nTSxFQUFXLE1BQU0sS0FBSyxLQUFLLEdBQUcsWUFBWSxDQUM1QyxLQUFNaE0sRUFBSSxLQUNWLEtBQU1BLEVBQUksS0FDVixPQUFRQSxDQUM1QixDQUFpQixFQUNELE9BQUlnTSxFQUFTLFNBQVcsVUFDYjFMLEVBQ1AwTCxFQUFTLFNBQVcsU0FDcEI3TCxFQUFPLE1BQU8sRUFDUFEsR0FBTXFMLEVBQVMsS0FBSyxHQUdwQixLQUFLLEtBQUssSUFBSSxZQUFZLENBQzdCLEtBQU1BLEVBQVMsTUFDZixLQUFNaE0sRUFBSSxLQUNWLE9BQVFBLENBQ2hDLENBQXFCLENBRVIsR0FDbUIsRUFFbkIsQ0FDRCxNQUFNZ00sRUFBVyxLQUFLLEtBQUssR0FBRyxXQUFXLENBQ3JDLEtBQU1oTSxFQUFJLEtBQ1YsS0FBTUEsRUFBSSxLQUNWLE9BQVFBLENBQ3hCLENBQWEsRUFDRCxPQUFJZ00sRUFBUyxTQUFXLFVBQ2IxTCxFQUNQMEwsRUFBUyxTQUFXLFNBQ3BCN0wsRUFBTyxNQUFPLEVBQ1AsQ0FDSCxPQUFRLFFBQ1IsTUFBTzZMLEVBQVMsS0FDbkIsR0FHTSxLQUFLLEtBQUssSUFBSSxXQUFXLENBQzVCLEtBQU1BLEVBQVMsTUFDZixLQUFNaE0sRUFBSSxLQUNWLE9BQVFBLENBQzVCLENBQWlCLENBRWpCLENBQ0EsQ0FDSSxPQUFPLE9BQU9sTCxFQUFHZSxFQUFHLENBQ2hCLE9BQU8sSUFBSW9OLEdBQVksQ0FDbkIsR0FBSW5PLEVBQ0osSUFBS2UsRUFDTCxTQUFVbkYsRUFBc0IsV0FDNUMsQ0FBUyxDQUNULENBQ0EsQ0FDTyxNQUFNd1MsV0FBb0J6QixDQUFRLENBQ3JDLE9BQU81SSxFQUFPLENBQ1YsTUFBTXhELEVBQVMsS0FBSyxLQUFLLFVBQVUsT0FBT3dELENBQUssRUFDekNvVCxFQUFVbE4sSUFDUmdDLEdBQVFoQyxDQUFJLElBQ1pBLEVBQUssTUFBUSxPQUFPLE9BQU9BLEVBQUssS0FBSyxHQUVsQ0EsR0FFWCxPQUFPaUMsR0FBUTNMLENBQU0sRUFBSUEsRUFBTyxLQUFNMEosR0FBU2tOLEVBQU9sTixDQUFJLENBQUMsRUFBSWtOLEVBQU81VyxDQUFNLENBQ3BGLENBQ0ksUUFBUyxDQUNMLE9BQU8sS0FBSyxLQUFLLFNBQ3pCLENBQ0EsQ0FDQTZOLEdBQVksT0FBUyxDQUFDblIsRUFBTXdOLElBQ2pCLElBQUkyRCxHQUFZLENBQ25CLFVBQVduUixFQUNYLFNBQVVyQixFQUFzQixZQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNLENBQ3JDLENBQUssRUFtREUsSUFBSTdPLEdBQ1YsU0FBVUEsRUFBdUIsQ0FDOUJBLEVBQXNCLFVBQWUsWUFDckNBLEVBQXNCLFVBQWUsWUFDckNBLEVBQXNCLE9BQVksU0FDbENBLEVBQXNCLFVBQWUsWUFDckNBLEVBQXNCLFdBQWdCLGFBQ3RDQSxFQUFzQixRQUFhLFVBQ25DQSxFQUFzQixVQUFlLFlBQ3JDQSxFQUFzQixhQUFrQixlQUN4Q0EsRUFBc0IsUUFBYSxVQUNuQ0EsRUFBc0IsT0FBWSxTQUNsQ0EsRUFBc0IsV0FBZ0IsYUFDdENBLEVBQXNCLFNBQWMsV0FDcENBLEVBQXNCLFFBQWEsVUFDbkNBLEVBQXNCLFNBQWMsV0FDcENBLEVBQXNCLFVBQWUsWUFDckNBLEVBQXNCLFNBQWMsV0FDcENBLEVBQXNCLHNCQUEyQix3QkFDakRBLEVBQXNCLGdCQUFxQixrQkFDM0NBLEVBQXNCLFNBQWMsV0FDcENBLEVBQXNCLFVBQWUsWUFDckNBLEVBQXNCLE9BQVksU0FDbENBLEVBQXNCLE9BQVksU0FDbENBLEVBQXNCLFlBQWlCLGNBQ3ZDQSxFQUFzQixRQUFhLFVBQ25DQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsUUFBYSxVQUNuQ0EsRUFBc0IsV0FBZ0IsYUFDdENBLEVBQXNCLGNBQW1CLGdCQUN6Q0EsRUFBc0IsWUFBaUIsY0FDdkNBLEVBQXNCLFlBQWlCLGNBQ3ZDQSxFQUFzQixXQUFnQixhQUN0Q0EsRUFBc0IsU0FBYyxXQUNwQ0EsRUFBc0IsV0FBZ0IsYUFDdENBLEVBQXNCLFdBQWdCLGFBQ3RDQSxFQUFzQixZQUFpQixjQUN2Q0EsRUFBc0IsWUFBaUIsYUFDM0MsR0FBR0EsSUFBMEJBLEVBQXdCLENBQUEsRUFBRyxFQVV4RCxNQUFNd2IsRUFBYS9HLEdBQVUsT0FDdkJnSCxFQUFhaEcsR0FBVSxPQUd2QmlHLEdBQWM3RixHQUFXLE9BS3pCOEYsRUFBVXZGLEdBQU8sT0FFTEUsR0FBUyxPQUUzQixNQUFNc0YsRUFBWW5LLEdBQVMsT0FDckJvSyxFQUFhcEYsRUFBVSxPQUV2QnFGLEdBQVlsSyxHQUFTLE9BQ3JCbUssR0FBeUI3RCxHQUFzQixPQUM1QnBHLEdBQWdCLE9BQ3ZCOEUsR0FBUyxPQUMzQixNQUFNb0YsR0FBYXZDLEdBQVUsT0FJdkJ3QyxHQUFXbkUsR0FBUSxPQUNuQm9FLEVBQWNuRSxHQUFXLE9BQ3pCb0UsR0FBV25FLEdBQVEsT0FFTHRHLEdBQVcsT0FFVkgsR0FBWSxPQUNaQyxHQUFZLE9DbGlIVjRLLEVBQVMsQ0FDNUIsS0FBTUMsRUFBVSxFQUNoQixZQUFhQSxFQUFVLEVBQUMsU0FBVSxFQUNsQyxZQUFhRCxFQUFTLENBQ2xCLEtBQU1FLEVBQVUsUUFBUSxFQUN4QixXQUFZQyxHQUFTRixFQUFVLEVBQUVHLEVBQUssQ0FBRSxFQUN4QyxTQUFVQyxFQUFRSixHQUFVLEVBQzVCLHFCQUFzQkssR0FBVyxDQUN6QyxDQUFLLENBQ0wsQ0FBQyxFQXlFTSxlQUFlQyxHQUF1QkMsRUFBWUMsRUFBeUIsR0FBTyxDQUNyRixNQUFNQyxFQUFXLENBQUUsRUFDYkMsRUFBWSxJQUFJLElBQ3RCLFVBQVdDLEtBQVVKLEVBQVksQ0FDN0IsTUFBTUssRUFBYyxNQUFNQyxHQUEyQkYsRUFBUUgsQ0FBc0IsRUFFN0VNLEVBQWUsQ0FBQyxHQURFLElBQUksSUFBSUYsRUFBWSxJQUFLRyxHQUFNQSxFQUFFLElBQUksQ0FBQyxDQUN0QixFQUFFLE9BQVE1VCxHQUFNdVQsRUFBVSxJQUFJdlQsQ0FBQyxDQUFDLEVBQ3hFLEdBQUkyVCxFQUFhLE9BQVMsRUFDdEIsTUFBTSxJQUFJdFYsRUFBVSxrREFBa0RzVixFQUFhLEtBQUssSUFBSSxDQUFDLEVBQUUsRUFFbkcsVUFBV0MsS0FBS0gsRUFDWkYsRUFBVSxJQUFJSyxFQUFFLElBQUksRUFDcEJOLEVBQVMsS0FBS00sQ0FBQyxDQUUzQixDQUNJLE9BQU9OLENBQ1gsQ0FDQSxNQUFNTyxHQUFlLENBQUUsRUFZdkIsZUFBZUgsR0FBMkJGLEVBQVFILEVBQXdCLENBQ3RFLE9BQUlHLEVBQU8sZ0JBQWtCSyxHQUFhTCxFQUFPLElBQUksRUFDMUNLLEdBQWFMLEVBQU8sSUFBSSxFQUFFLElBQUssR0FBTU0sR0FBa0IsRUFBR04sRUFBUUgsQ0FBc0IsQ0FBQyxFQUU3RlUsR0FBcUIsTUFBT0MsR0FBUyxDQUN4QyxNQUFNQyxFQUFXLE1BQU1ULEVBQU8sVUFBVyxFQUN6Q1EsRUFBSyxTQUFTLE9BQVNDLEVBQVMsSUFBS0wsR0FBTUEsRUFBRSxJQUFJLEVBQ2pELE1BQU1NLEVBQVFELEVBQVMsSUFBS0wsR0FBTUUsR0FBa0JGLEVBQUdKLEVBQVFILENBQXNCLENBQUMsRUFDdEYsT0FBSUcsRUFBTyxpQkFDUEssR0FBYUwsRUFBTyxJQUFJLEVBQUlTLEdBRXpCQyxDQUNmLEVBQU8sQ0FBRSxLQUFNLENBQUUsT0FBUVYsRUFBTyxJQUFNLENBQUEsQ0FBRSxDQUN4QyxDQUlPLGVBQWVXLEdBQWVmLEVBQVlDLEVBQXlCLEdBQU8sQ0FDN0UsT0FBT0YsR0FBdUJDLEVBQVlDLENBQXNCLENBQ3BFLENBSU8sU0FBU1MsR0FBa0JNLEVBQVNaLEVBQVFILEVBQXdCLGFBQ3ZFLGVBQWU5TyxFQUFPNUYsRUFBTzBWLEVBQVUsQ0FDbkMsSUFBSXZXLEVBQU8sQ0FBRSxFQUNULE9BQU9hLEdBQVUsVUFBWUEsRUFDN0JiLEVBQU8sS0FBSyxNQUFNYSxDQUFLLEVBRWxCLE9BQU9BLEdBQVUsVUFBWUEsR0FBUyxPQUMzQ2IsRUFBT2EsR0FFWCxNQUFNNkYsRUFBY0MsR0FBZ0IsRUFDaENELElBQ0FBLEVBQVksU0FBUyxTQUFjLENBQUUsT0FBUWdQLEVBQU8sSUFBTSxHQUU5RCxNQUFNNVYsRUFBVSxNQUFNNFYsRUFBTyxTQUFTWSxFQUFRLEtBQU10VyxDQUFJLEVBQ3hELE9BQU9GLEVBQVEsU0FBVyxFQUFJQSxFQUFRLENBQUMsRUFBSUEsQ0FDbkQsQ0FDSSxNQUFNekYsRUFBUyxDQUNYLE9BQU12QixFQUFBd2QsRUFBUSxjQUFSLFlBQUF4ZCxFQUFxQixPQUFRLFNBQ25DLGFBQVlELEVBQUF5ZCxFQUFRLGNBQVIsWUFBQXpkLEVBQXFCLGFBQWMsQ0FBRSxFQUNqRCxXQUFVa0QsRUFBQXVhLEVBQVEsY0FBUixZQUFBdmEsRUFBcUIsV0FBWSxDQUFFLEVBQzdDLHVCQUFzQkUsRUFBQXFhLEVBQVEsY0FBUixZQUFBcmEsRUFBcUIsdUJBQXdCLEVBQ3RFLEVBQ0QsR0FBSXNaLEdBQTBCbGIsRUFBTyx1QkFBeUIsR0FDMUQsR0FBSSxDQUNBLE1BQU1tYyxFQUFlQyxHQUF1QnBjLENBQU0sRUFDbEQsT0FBT21GLEdBQUssQ0FDUixLQUFNOFcsRUFBUSxLQUNkLFlBQWFBLEVBQVEsYUFBZSxHQUNwQyxXQUFZRSxFQUNaLE9BQVEsR0FDUixRQUFTL1AsQ0FDekIsQ0FBYSxDQUNiLE9BQ2UzUCxFQUFHLENBQ040ZixFQUFhLEtBQUssK0NBQStDNWYsQ0FBQyxFQUFFLENBQ2hGLENBRUksTUFBTTZmLEVBQWtCLENBQ3BCLEdBQUd0YyxFQUNILHFCQUFzQixFQUN6QixFQUNELE9BQU9tRixHQUFLLENBQ1IsS0FBTThXLEVBQVEsS0FDZCxZQUFhQSxFQUFRLGFBQWUsR0FDcEMsV0FBWUssRUFDWixPQUFRLEdBQ1IsUUFBU2xRLENBQ2pCLENBQUssQ0FDTCxDQUlBLFNBQVNnUSxHQUF1QnBjLEVBQVEsQ0FDcEMsTUFBTXVjLEVBQU0sQ0FDUixHQUFHdmMsRUFDSCxxQkFBc0IsRUFDekIsRUFDRCxPQUFLdWMsRUFBSSxXQUNMQSxFQUFJLFNBQVcsQ0FBRSxHQUNkQSxDQUNYLENDdFBPLFNBQVN2UixJQUFVLENBQ3RCLE1BQU8sQ0FBRSxDQUNiLENBQ08sTUFBTXdSLEVBQW9CLENBQTFCLGNBQ0hDLEVBQUEsS0FBQUMsR0FBVSxJQUFJLGFBQ2QsR0FBR2hkLEVBQU1pZCxFQUFVLENBQ2YsT0FBQUMsRUFBQSxLQUFLRixJQUFRLGlCQUFpQmhkLEVBQVEvRixHQUFVZ2pCLEVBQVMsR0FBSWhqQixFQUFNLFFBQVUsQ0FBQSxDQUFHLENBQUcsRUFDNUUsSUFDZixDQUNJLElBQUkrRixFQUFNaWQsRUFBVSxDQUNoQixPQUFBQyxFQUFBLEtBQUtGLElBQVEsb0JBQW9CaGQsRUFBUS9GLEdBQVVnakIsRUFBUyxHQUFJaGpCLEVBQU0sUUFBVSxDQUFBLENBQUcsQ0FBRyxFQUMvRSxJQUNmLENBQ0ksS0FBSytGLEtBQVNpRyxFQUFNLENBQ2hCLE1BQU1oTSxFQUFRLElBQUksWUFBWStGLEVBQU0sQ0FBRSxPQUFRaUcsRUFBTSxFQUNwRCxPQUFPaVgsRUFBQSxLQUFLRixJQUFRLGNBQWMvaUIsQ0FBSyxDQUMvQyxDQUNJLEtBQUsrRixFQUFNaWQsRUFBVSxDQUNqQixNQUFNRSxFQUFVLElBQUlsWCxJQUFTLENBQ3pCLEtBQUssSUFBSWpHLEVBQU1tZCxDQUFPLEVBQ3RCRixFQUFTLEdBQUdoWCxDQUFJLENBQ25CLEVBQ0QsWUFBSyxHQUFHakcsRUFBTW1kLENBQU8sRUFDZCxJQUNmLENBQ0EsQ0FyQklILEdBQUEsWUF1QkcsTUFBTUksR0FBYSxPQUFPLFdBQVcsS0FBSyxNQUFNLEVBQzFDQyxHQUFXLEtBQWUsQ0FDbkMsYUFBYyxDQUFBLENBQ2QsT0FBT0MsRUFBYzVoQixFQUFVLENBQUEsQ0FDL0IsWUFBWTZoQixFQUFZN2hCLEVBQVUsQ0FBQSxDQUN0QyxFQUNhOGhCLEdBQWlCLFdBQVcsZUFFNUJDLEdBQWtCLFdBQVcsZ0JBQ25DLE1BQU1DLEVBQWtCLENBRTNCLGFBQWMsQ0FEZHRYLEVBQUEsZUFBVSxLQUNJLENBQ2QsSUFBSThGLEVBQVN2UixFQUFJLENBQ2IsWUFBSyxRQUFVdVIsRUFDUnZSLEVBQUksQ0FDbkIsQ0FDSSxVQUFXLENBQ1AsT0FBTyxLQUFLLE9BQ3BCLENBQ0ksVUFBVXVSLEVBQVMsQ0FDZixLQUFLLFFBQVVBLENBQ3ZCLENBQ0EsQ0FRQSxNQUFNeVIsRUFBYSxDQUNmLGFBQWMsQ0FBQSxDQUNkLFdBQVdqWSxFQUFVbUMsRUFBSSxDQUNyQixNQUFNK1YsRUFBVSxXQUFXbFksRUFBVW1DLENBQUUsRUFDdkMsT0FBQStWLEVBQVEsSUFDSixPQUFPQSxFQUFRLEtBQVEsV0FBYUEsRUFBUSxJQUFNLElBQU1BLEVBQzVEQSxFQUFRLE1BQ0osT0FBT0EsRUFBUSxPQUFVLFdBQWFBLEVBQVEsTUFBUSxJQUFNQSxFQUNoRUEsRUFBUSxPQUNKLE9BQU9BLEVBQVEsUUFBVyxXQUFhQSxFQUFRLE9BQVMsSUFBTSxHQUNsRUEsRUFBUSxRQUNKLE9BQU9BLEVBQVEsU0FBWSxXQUFhQSxFQUFRLFFBQVUsSUFBTUEsRUFDN0RBLENBQ2YsQ0FDSSxhQUFhQyxFQUFXLENBQ3BCLE9BQU8sYUFBYUEsQ0FBUyxDQUNyQyxDQUNBLENBQ0EsTUFBTUMsR0FBUSxJQUFJSCxHQzVFbEIsSUFBSUksR0FDSixTQUFTQyxJQUE4QixDQUNuQyxPQUFBRCxRQUE4QixJQUFJTCxJQUMzQkssRUFDWCxDQU1PLFNBQVNFLElBQWtCLENBQzlCLE1BQU1DLEVBQWVGLEdBQTZCLEVBQUMsU0FBVSxFQUM3RCxPQUFJRSxHQUFBLE1BQUFBLEVBQWMsTUFDUEEsRUFBYSxNQUVqQixJQUNYLENBTU8sU0FBU3RSLElBQWlCLENBQzdCLE1BQU1ELEVBQWNxUixHQUE2QixFQUFDLFNBQVUsRUFDNUQsT0FBSXJSLEdBQUEsTUFBQUEsRUFBYSxLQUNOQSxFQUFZLEtBRWhCLElBQ1gsQ0FPQSxTQUFTd1IsR0FBZ0N4akIsRUFBSSxDQUN6QyxNQUFPLFVBQVksQ0FDZixNQUFNeWpCLEVBQVFILEdBQWlCLEVBQy9CLEdBQUksQ0FBQ0csRUFDRCxNQUFNLElBQUksTUFBTSxnQkFBZ0IsRUFFcEMsTUFBTUEsRUFBTSxNQUFPLEVBQ25CLE1BQU05YSxFQUFTLE1BQU0zSSxFQUFHeWpCLENBQUssRUFDN0IsYUFBTUEsRUFBTSxJQUFLLEVBQ1Y5YSxDQUNWLENBQ0wsQ0FRTyxlQUFlK2EsR0FBVUQsRUFBT3pqQixFQUFJUyxFQUFVLENBQUEsRUFBSSxDQUNyRCxNQUFNa2pCLEVBQVcsT0FBT0YsR0FBVSxTQUM1QkcsR0FBc0IsRUFBRyxZQUFZLENBQ25DLEdBQUduakIsRUFDSCxLQUFNZ2pCLENBQ1QsQ0FBQSxFQUNDQSxFQUNOLE9BQU9KLEdBQTJCLEVBQUcsSUFBSSxDQUFFLE1BQU9NLEdBQVlILEdBQWdDeGpCLENBQUUsQ0FBQyxDQUNyRyxDQVNPLGVBQWU2akIsR0FBaUI3akIsRUFBSVMsRUFBVSxHQUFJLENBRXJELEdBRHFCNmlCLEdBQWlCLEVBR2xDLE9BQU8sTUFBTXRqQixFQUFJLEVBRXJCLE1BQU0yakIsRUFBV0MsS0FBeUIsWUFBWW5qQixDQUFPLEVBQzdELE9BQU80aUIsR0FBMkIsRUFBRyxJQUFJLENBQUUsTUFBT00sR0FBWUgsR0FBZ0N4akIsQ0FBRSxDQUFDLENBQ3JHLENBTU8sU0FBUzhqQixHQUFldEMsRUFBTSxDQUNqQyxNQUFNalEsRUFBVThSLEdBQTZCLEVBQUMsU0FBVSxFQUN4RCxHQUFJLENBQUM5UixFQUNELE1BQU0sSUFBSSxNQUFNLHlCQUF5QixFQUV6Q0EsRUFBUSxPQUNSQSxFQUFRLEtBQUssYUFBZUEsRUFBUSxhQUNwQ0EsRUFBUSxhQUFlQSxFQUFRLE1BRW5DQSxFQUFRLEtBQU9pUSxFQUNmNkIsR0FBNkIsRUFBQyxVQUFVOVIsQ0FBTyxDQUNuRCxDQUNPLFNBQVN3UyxJQUFtQixPQUMvQixNQUFNeFMsRUFBVThSLEdBQTZCLEVBQUMsU0FBVSxFQUNwRDlSLElBQ0FBLEVBQVEsS0FBT0EsRUFBUSxhQUN2QkEsRUFBUSxjQUFlbk4sRUFBQW1OLEVBQVEsZUFBUixZQUFBbk4sRUFBc0IsYUFDN0NpZixHQUE2QixFQUFDLFVBQVU5UixDQUFPLEVBRXZELENBTU8sU0FBU3lTLEdBQXNCQyxFQUFXLENBQzdDLE1BQU1qUyxFQUFjQyxHQUFnQixFQUNoQ0QsR0FDQUEsRUFBWSxTQUFTaVMsQ0FBUyxDQUV0QyxDQVFPLFNBQVNDLEdBQW9CM1MsRUFBUyxXQUN6QyxNQUFPLENBQ0gsT0FBT25OLEVBQUFtTixFQUFRLFFBQVIsWUFBQW5OLEVBQWUsUUFDdEIsTUFBTUQsRUFBQW9OLEVBQVEsT0FBUixZQUFBcE4sRUFBYyxRQUNwQixjQUFja0QsRUFBQWtLLEVBQVEsZUFBUixZQUFBbEssRUFBc0IsT0FDdkMsQ0FDTCxDQU1PLFNBQVM4YyxHQUFtQm5rQixFQUFJLENBQ25DLE1BQU1va0IsRUFBaUJmLEdBQTZCLEVBQUMsU0FBVSxFQUMvRCxHQUFJLENBQUNlLEVBQ0QsTUFBTSxJQUFJLE1BQU0seUJBQXlCLEVBRTdDLE1BQU1DLEVBQWdCSCxHQUFvQkUsQ0FBYyxFQUN4RCxPQUFPZixHQUE2QixFQUFDLElBQUlnQixFQUFlcmtCLENBQUUsQ0FDOUQsQ0MxSU8sTUFBTXNrQixFQUFvQixDQUM3QixNQUFNLE9BQU90aUIsRUFBTyxDQUNoQixHQUFJK08sR0FBUSxTQUFVLENBQ2xCSyxFQUFPLE1BQU0sc0NBQXNDLEVBQ25ELE1BQ1osQ0FDUSxVQUFXN1MsS0FBUXlELEVBQ1h6RCxFQUFLLE9BQVMsUUFDZCxRQUFRLElBQUksbUNBQW1DQSxFQUFLLE9BQU8sU0FBU0EsRUFBSyxJQUFJLEVBQUUsRUFHL0UsUUFBUSxJQUFJLDJCQUEyQixLQUFLLFVBQVVBLENBQUksQ0FBQyxFQUFFLENBRzdFLENBQ0EsQ0FDTyxNQUFNZ21CLEVBQW9CLENBVzdCLFlBQVlDLEVBQVUsQ0FBRSxhQUFBQyxFQUFlLElBQU0sYUFBQUMsRUFBZSxJQUFLLGNBQUFDLEVBQWdCLElBQ2pGLG1CQUFBQyxFQUFxQixFQUFNLEVBQUcsR0FBSSxDQVovQnhDLEVBQUEsS0FBQXlDLElBQ0h6QyxFQUFBLEtBQUEwQyxJQUNBMUMsRUFBQSxLQUFBMkMsSUFDQTNDLEVBQUEsS0FBQTRDLElBQ0E1QyxFQUFBLEtBQUE2QyxJQUNBN0MsRUFBQSxLQUFBOEMsSUFDQTlDLEVBQUEsS0FBQStDLEdBQVUsQ0FBRSxHQUNaL0MsRUFBQSxLQUFBZ0QsSUFDQWhELEVBQUEsS0FBQWlELEdBQVcsTUFDWGpELEVBQUEsS0FBQWtELEdBQW9CLElBQ3BCbEQsRUFBQSxLQUFBbUQsR0FBMEIsTUFHdEJDLEVBQUEsS0FBS1YsR0FBZ0JMLEdBQ3JCZSxFQUFBLEtBQUtULEdBQWdCTCxHQUNyQmMsRUFBQSxLQUFLUixHQUFpQkwsR0FDdEJhLEVBQUEsS0FBS1AsR0FBcUJSLEVBQWVHLEdBQ3pDWSxFQUFBLEtBQUtOLEdBQVlWLEdBQ2pCZ0IsRUFBQSxLQUFLSixHQUFTQSxJQUtWaFUsRUFBTyxNQUFNLHVKQUF1SixDQUVoTCxDQUNJLE9BQVEsQ0FDSm9VLEVBQUEsS0FBS0QsR0FBMEIsSUFBSSxpQkFDbkNFLEVBQUEsS0FBS1osR0FBQWEsSUFBTCxVQUNSLENBNENJLE1BQU0sYUFBYWpDLEVBQU8sQ0FDdEIsTUFBTWdDLEVBQUEsS0FBS1osR0FBQWMsSUFBTCxVQUFrQmxDLEVBQ2hDLENBQ0ksTUFBTSxXQUFXbUMsRUFBUSxDQUU3QixDQUNJLE1BQU0sWUFBWUMsRUFBTyxDQUU3QixDQUNJLE1BQU0sVUFBVXJFLEVBQU0sQ0FDbEIsTUFBTWlFLEVBQUEsS0FBS1osR0FBQWMsSUFBTCxVQUFrQm5FLEVBQ2hDLENBQ0ksTUFBTSxTQUFTeUIsRUFBUyxPQVFwQixJQVBJQSxHQUNBVixFQUFBLEtBQUs2QyxJQUFPLFdBQVcsSUFBTSxRQUV6QmhoQixFQUFBbWUsRUFBQSxLQUFLZ0QsTUFBTCxNQUFBbmhCLEVBQThCLE9BQ2pDLEVBQUU2ZSxDQUFPLEVBRWQ3UixFQUFPLE1BQU0sMEJBQTBCLEVBQ2hDbVIsRUFBQSxLQUFLNEMsSUFBUSxPQUFTLEdBQUcsQ0FNNUIsR0FMQS9ULEVBQU8sTUFBTSw0Q0FBNENtUixFQUFBLEtBQUs0QyxJQUFRLE1BQU0sRUFBRSxFQUN6RTVDLEVBQUEsS0FBSytDLEtBRU4sTUFBTUcsRUFBQSxLQUFLWixHQUFBaUIsSUFBTCxVQUFvQixLQUUxQjFoQixFQUFBbWUsRUFBQSxLQUFLZ0QsTUFBTCxNQUFBbmhCLEVBQThCLE9BQU8sUUFBUyxDQUM5Q2dOLEVBQU8sTUFBTSxpQ0FBaUMsRUFDOUMsTUFBTXFVLEVBQUEsS0FBS1osR0FBQWlCLElBQUwsVUFBb0IsSUFDMUIsS0FDaEIsQ0FFWSxNQUFNLElBQUksUUFBU0MsR0FBWXhELEVBQUEsS0FBSzZDLElBQU8sV0FBV1csRUFBUyxHQUFHLENBQUMsQ0FDL0UsQ0FDUTNVLEVBQU8sTUFBTSx1QkFBdUIsRUFDaENtUixFQUFBLEtBQUs2QyxLQUFVN0MsRUFBQSxLQUFLOEMsS0FFcEI5QyxFQUFBLEtBQUs2QyxJQUFPLGFBQWE3QyxFQUFBLEtBQUs4QyxHQUFRLENBRWxELENBQ0ksTUFBTSxZQUFhLENBQ1g5QyxFQUFBLEtBQUs0QyxJQUFRLE9BQVMsR0FDdEIsTUFBTU0sRUFBQSxLQUFLWixHQUFBaUIsSUFBTCxVQUFvQixHQUV0QyxDQUNBLENBckhJaEIsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQVZHVixHQUFBLFlBOEJHYyxHQUFZLGVBQUNwbkIsRUFBTSxDQUNyQixHQUFJZ2tCLEVBQUEsS0FBSzRDLElBQVEsT0FBUyxFQUFJNUMsRUFBQSxLQUFLdUMsSUFBZSxDQUM5QzFULEVBQU8sTUFBTSx1Q0FBdUMsRUFDcEQsTUFDWixDQUVRbVIsRUFBQSxLQUFLNEMsSUFBUSxLQUFLNW1CLENBQUksRUFDbEJna0IsRUFBQSxLQUFLNEMsSUFBUSxPQUFTNUMsRUFBQSxLQUFLMEMsS0FFM0IsTUFBTVEsRUFBQSxLQUFLWixHQUFBaUIsSUFBTCxVQUVsQixFQUNJSixHQUFjLFVBQUcsQ0FDYkYsRUFBQSxLQUFLSCxHQUFXOUMsRUFBQSxLQUFLNkMsSUFBTyxXQUFXLFNBQVksQ0FFL0MsTUFBTUssRUFBQSxLQUFLWixHQUFBaUIsSUFBTCxXQUNOTCxFQUFBLEtBQUtaLEdBQUFhLElBQUwsVUFDWixFQUFXbkQsRUFBQSxLQUFLeUMsR0FBYyxHQUdsQixPQUFPekMsRUFBQSxLQUFLOEMsSUFBUyxPQUFVLFlBQy9COUMsRUFBQSxLQUFLOEMsSUFBUyxNQUFPLENBRWpDLEVBQ1VTLEdBQWMsZUFBQ0UsRUFBUSxHQUFPLENBQ2hDLEdBQUl6RCxFQUFBLEtBQUs0QyxJQUFRLFNBQVcsR0FJNUIsR0FEQS9ULEVBQU8sTUFBTSw2QkFBNkI0VSxDQUFLLGtCQUFrQnpELEVBQUEsS0FBSzRDLElBQVEsTUFBTSxFQUFFLEVBQ2xGYSxHQUFTekQsRUFBQSxLQUFLNEMsSUFBUSxPQUFTNUMsRUFBQSxLQUFLd0MsSUFBZSxDQUNuRCxNQUFNa0IsRUFBVyxDQUFDLEdBQUcxRCxFQUFBLEtBQUs0QyxHQUFPLEVBQ2pDSyxFQUFBLEtBQUtMLEdBQVUsQ0FBRSxHQUNqQkssRUFBQSxLQUFLRixHQUFvQixJQUN6QixNQUFNL0MsRUFBQSxLQUFLMkMsSUFBVSxPQUFPZSxDQUFRLEVBQ3BDVCxFQUFBLEtBQUtGLEdBQW9CLEdBQ3JDLFNBQ2lCL0MsRUFBQSxLQUFLNEMsSUFBUSxPQUFTLEVBQUcsQ0FDOUIsTUFBTWUsRUFBUTNELEVBQUEsS0FBSzRDLElBQVEsT0FBTyxFQUFHNUMsRUFBQSxLQUFLd0MsR0FBYSxFQUN2RFMsRUFBQSxLQUFLRixHQUFvQixJQUN6QixNQUFNL0MsRUFBQSxLQUFLMkMsSUFBVSxPQUFPZ0IsQ0FBSyxFQUNqQ1YsRUFBQSxLQUFLRixHQUFvQixHQUNyQyxFQUNBLEVBK0NPLE1BQU1hLEVBQXNCLENBQTVCLGNBQ0gvRCxFQUFBLEtBQUFnRSxHQUFjLENBQUUsR0FDaEIsT0FBUSxDQUNKLFVBQVdDLEtBQWE5RCxFQUFBLEtBQUs2RCxJQUNyQkMsRUFBVSxPQUNWQSxFQUFVLE1BQU8sQ0FHakMsQ0FDSSxrQkFBa0JBLEVBQVcsQ0FDekI5RCxFQUFBLEtBQUs2RCxJQUFZLEtBQUtDLENBQVMsQ0FDdkMsQ0FDSSxjQUFjQyxFQUFZLENBQ3RCbFYsRUFBTyxNQUFNLDhCQUE4QixFQUMzQyxVQUFXaVYsS0FBYTlELEVBQUEsS0FBSzZELElBQ3pCQyxFQUFVLFNBQVUsRUFFeEJiLEVBQUEsS0FBS1ksR0FBY0UsRUFDM0IsQ0FDSSxNQUFNLGFBQWE3QyxFQUFPLENBQ3RCLFVBQVc0QyxLQUFhOUQsRUFBQSxLQUFLNkQsSUFDekIsTUFBTUMsRUFBVSxhQUFhNUMsQ0FBSyxDQUU5QyxDQUNJLE1BQU0sV0FBV0EsRUFBTyxDQUNwQixVQUFXNEMsS0FBYTlELEVBQUEsS0FBSzZELElBQ3pCLE1BQU1DLEVBQVUsV0FBVzVDLENBQUssQ0FFNUMsQ0FDSSxNQUFNLFlBQVlqQyxFQUFNLENBQ3BCLFVBQVc2RSxLQUFhOUQsRUFBQSxLQUFLNkQsSUFDekIsTUFBTUMsRUFBVSxZQUFZN0UsQ0FBSSxDQUU1QyxDQUNJLE1BQU0sVUFBVUEsRUFBTSxDQUNsQixVQUFXNkUsS0FBYTlELEVBQUEsS0FBSzZELElBQ3pCLE1BQU1DLEVBQVUsVUFBVTdFLENBQUksQ0FFMUMsQ0FDSSxNQUFNLFNBQVN5QixFQUFTLENBQ3BCLFVBQVdvRCxLQUFhOUQsRUFBQSxLQUFLNkQsSUFDekIsTUFBTUMsRUFBVSxTQUFTcEQsQ0FBTyxDQUU1QyxDQUNJLE1BQU0sWUFBYSxDQUNmLFVBQVdvRCxLQUFhOUQsRUFBQSxLQUFLNkQsSUFDekIsTUFBTUMsRUFBVSxXQUFZLENBRXhDLENBQ0EsQ0FoRElELEdBQUEsWUFpREosSUFBSUcsR0FBbUIsS0FDbkJDLEdBQW9CLEtBQ2pCLFNBQVNDLElBQWtCLENBQzlCLE9BQUtGLEtBQ0RBLEdBQW1CLElBQUlqQyxJQUVwQmlDLEVBQ1gsQ0FDTyxTQUFTRyxJQUFtQixDQUMvQixPQUFLRixLQUNEQSxHQUFvQixJQUFJakMsR0FBb0JrQyxJQUFpQixHQUUxREQsRUFDWCxDQ3ZNTyxTQUFTRyxJQUFVLENBQ3RCLE9BQU8sSUFBSSxLQUFNLEVBQUMsWUFBYSxDQUNuQyxDQU1PLFNBQVNDLElBQWtCLENBQzlCLE1BQU8sU0FBU25FLEdBQVksRUFBQyxRQUFRLEtBQU0sRUFBRSxDQUFDLEVBQ2xELENBTU8sU0FBU29FLElBQWlCLENBQzdCLE1BQU8sUUFBUXBFLEdBQVksRUFBQyxRQUFRLEtBQU0sRUFBRSxFQUFFLE1BQU0sRUFBRyxFQUFFLENBQUMsRUFDOUQsQ0FjTyxTQUFTcUUsR0FBb0J6bUIsRUFBSyxDQUNyQyxPQUFPLE9BQU8sWUFBWSxPQUFPLFFBQVFBLENBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQ2dCLENBQUcsSUFBTSxDQUFDQSxFQUFJLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FDekYsQ0NyQ08sTUFBTTBsQixHQUFOLE1BQU1BLEVBQUssQ0FXZCxZQUFZdG1CLEVBQVM0bEIsRUFBVyxDQVZoQzVhLEVBQUEsWUFBTyxjQUNQMlcsRUFBQSxLQUFBNEUsSUFDQTVFLEVBQUEsS0FBQTZFLElBQ0E3RSxFQUFBLEtBQUE4RSxJQUNBOUUsRUFBQSxLQUFBK0UsSUFDQS9FLEVBQUEsS0FBQWdGLElBQ0FoRixFQUFBLEtBQUFpRixJQUNBakYsRUFBQSxLQUFBa0YsSUFDQWxGLEVBQUEsS0FBQW1GLElBQ0FuRixFQUFBLEtBQUFvRixJQUVJaEMsRUFBQSxLQUFLeUIsR0FBV3htQixFQUFRLFNBQ3hCK2tCLEVBQUEsS0FBSzBCLEdBQVV6bUIsRUFBUSxRQUFVb21CLEdBQWdCLEdBQ2pEckIsRUFBQSxLQUFLd0IsR0FBUXZtQixFQUFRLE1BQ3JCK2tCLEVBQUEsS0FBSzRCLEdBQWFmLEdBQ2xCYixFQUFBLEtBQUsyQixHQUFZMW1CLEVBQVEsVUFBWSxNQUNyQytrQixFQUFBLEtBQUsrQixHQUFTOW1CLEVBQVEsT0FBUyxNQUMvQitrQixFQUFBLEtBQUs2QixHQUFhNW1CLEVBQVEsV0FBYSxNQUN2QytrQixFQUFBLEtBQUs4QixHQUFXN21CLEVBQVEsU0FBVyxLQUMzQyxDQUNJLElBQUksU0FBVSxDQUNWLE9BQU84aEIsRUFBQSxLQUFLMEUsR0FDcEIsQ0FDSSxJQUFJLFVBQVcsQ0FDWCxPQUFPMUUsRUFBQSxLQUFLeUUsR0FDcEIsQ0FDSSxJQUFJLFFBQVMsQ0FDVCxPQUFPekUsRUFBQSxLQUFLMkUsR0FDcEIsQ0FDSSxJQUFJLFVBQVcsQ0FDWCxPQUFPM0UsRUFBQSxLQUFLNEUsR0FDcEIsQ0FDSSxJQUFJLGNBQWUsQ0FDZixPQUFPNUUsRUFBQSxLQUFLaUYsR0FDcEIsQ0FDSSxJQUFJLGFBQWFoRyxFQUFNLENBQ25CZ0UsRUFBQSxLQUFLZ0MsR0FBZ0JoRyxFQUM3QixDQUNJLE9BQVEsQ0FDSixHQUFJZSxFQUFBLEtBQUs4RSxJQUFZLENBQ2pCalcsRUFBTyxLQUFLLHNCQUFzQixFQUNsQyxNQUNaLENBQ1FvVSxFQUFBLEtBQUs2QixHQUFhVixHQUFTLEdBQzNCcEUsRUFBQSxLQUFLNkUsSUFBVyxZQUFZLElBQUksQ0FDeEMsQ0FDSSxLQUFNLENBQ0YsR0FBSTdFLEVBQUEsS0FBSytFLElBQVUsQ0FDZmxXLEVBQU8sTUFBTSx3QkFBeUIsS0FBSyxRQUFRLEVBQ25ELE1BQ1osQ0FDUW9VLEVBQUEsS0FBSzhCLEdBQVdYLEdBQVMsR0FDekJwRSxFQUFBLEtBQUs2RSxJQUFXLFVBQVUsSUFBSSxDQUN0QyxDQUNJLFNBQVNubkIsRUFBTyxDQUNadWxCLEVBQUEsS0FBSytCLEdBQVN0bkIsRUFDdEIsQ0FDSSxJQUFJLE9BQVEsQ0FDUixPQUFPc2lCLEVBQUEsS0FBS2dGLEdBQ3BCLENBQ0ksSUFBSSxXQUFZLENBQ1osT0FBT2hGLEVBQUEsS0FBSzhFLEdBQ3BCLENBQ0ksSUFBSSxTQUFVLENBQ1YsT0FBTzlFLEVBQUEsS0FBSytFLEdBQ3BCLENBQ0ksT0FBUSxPQUNKLE1BQU05RixFQUFPLElBQUl1RixHQUFLLENBQ2xCLFFBQVMsS0FBSyxRQUNkLE9BQVEsS0FBSyxPQUNiLFNBQVUsS0FBSyxVQUFZLE9BQzNCLEtBQU0sS0FBSyxTQUNYLFVBQVd4RSxFQUFBLEtBQUs4RSxLQUFjLE9BQzlCLFFBQVM5RSxFQUFBLEtBQUsrRSxLQUFZLE9BQzFCLE1BQU8vRSxFQUFBLEtBQUtnRixLQUFVLE1BQ2xDLEVBQVdoRixFQUFBLEtBQUs2RSxHQUFVLEVBQ2xCLE9BQUE1RixFQUFLLGNBQWVwZCxFQUFBLEtBQUssZUFBTCxZQUFBQSxFQUFtQixRQUNoQ29kLENBQ2YsQ0FDSSxRQUFTLENBQ0wsTUFBTyxDQUNILE9BQVEsS0FBSyxLQUNiLEdBQUksS0FBSyxPQUNULFNBQVUsS0FBSyxRQUNmLFVBQVcsS0FBSyxTQUNoQixXQUFZLEtBQUssVUFDakIsU0FBVSxLQUFLLFFBQ2YsVUFBV3NGLEdBQW9CLEtBQUssUUFBUSxFQUM1QyxNQUFPLEtBQUssS0FDZixDQUNULENBQ0EsRUExRklFLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBVkcsSUFBTUMsR0FBTlYsR0E2RkEsTUFBTVcsV0FBaUJELEVBQUssQ0FDL0IsWUFBWXBWLEVBQU1nVSxFQUFXLENBQ3pCLE1BQU0sQ0FBRSxRQUFTLFFBQVMsT0FBUSxRQUFTLEtBQUFoVSxDQUFNLEVBQUVnVSxDQUFTLENBQ3BFLENBQ0ksT0FBUSxDQUVaLENBQ0ksS0FBTSxDQUVWLENBQ0ksVUFBVyxDQUVmLENBQ0ksUUFBUyxDQUNMLE9BQU8sSUFDZixDQUNBLENDN0dPLE1BQU1zQixHQUFOLE1BQU1BLEVBQU0sQ0FRZixZQUFZbG5CLEVBQVM0bEIsRUFBVyxDQVBoQzVhLEVBQUEsWUFBTyxTQUNQQSxFQUFBLGdCQUNBQSxFQUFBLGFBQ0FBLEVBQUEsZUFBVSxNQUNWQSxFQUFBLGlCQUNBMlcsRUFBQSxLQUFBZ0YsSUFDQWhGLEVBQUEsS0FBQXdGLElBRUksS0FBSyxRQUFVbm5CLEVBQVEsU0FBV21tQixHQUFpQixFQUNuRCxLQUFLLEtBQU9ubUIsRUFBUSxNQUFRLGlCQUM1QixLQUFLLFFBQVVBLEVBQVEsU0FBVyxLQUNsQyxLQUFLLFNBQVdBLEVBQVEsVUFBWSxDQUFFLEVBQ3RDK2tCLEVBQUEsS0FBSzRCLEdBQWFmLEdBQWFLLEdBQWtCLEdBQ2pEbEIsRUFBQSxLQUFLb0MsR0FBV25uQixFQUFRLFNBQVcsR0FDM0MsQ0FDSSxNQUFNLE9BQVEsQ0FDTjhoQixFQUFBLEtBQUtxRixNQUdUcEMsRUFBQSxLQUFLb0MsR0FBVyxJQUNoQixNQUFNckYsRUFBQSxLQUFLNkUsSUFBVyxhQUFhLElBQUksRUFDL0MsQ0FDSSxNQUFNLEtBQU0sQ0FDSDdFLEVBQUEsS0FBS3FGLE1BR1ZwQyxFQUFBLEtBQUtvQyxHQUFXLElBQ2hCLE1BQU1yRixFQUFBLEtBQUs2RSxJQUFXLFdBQVcsSUFBSSxFQUM3QyxDQUNJLE9BQVEsQ0FDSixPQUFPLElBQUlPLEdBQU0sQ0FDYixRQUFTLEtBQUssUUFDZCxLQUFNLEtBQUssS0FDWCxRQUFTLEtBQUssU0FBVyxPQUN6QixTQUFVLEtBQUssU0FDZixRQUFTcEYsRUFBQSxLQUFLcUYsR0FDMUIsQ0FBUyxDQUNULENBQ0ksUUFBUyxDQUNMLE1BQU8sQ0FDSCxPQUFRLEtBQUssS0FDYixHQUFJLEtBQUssUUFDVCxjQUFlLEtBQUssS0FDcEIsU0FBVSxLQUFLLFFBQ2YsU0FBVSxLQUFLLFFBQ2xCLENBQ1QsQ0FDQSxFQTFDSVIsR0FBQSxZQUNBUSxHQUFBLFlBUEcsSUFBTUMsR0FBTkYsR0FpREEsTUFBTUcsV0FBa0JELEVBQU0sQ0FDakMsYUFBYyxDQUNWLE1BQU0sQ0FBQSxDQUFFLENBQ2hCLENBQ0ksTUFBTSxPQUFRLENBRWxCLENBQ0ksTUFBTSxLQUFNLENBRWhCLENBQ0ksUUFBUyxDQUNMLE9BQU8sSUFDZixDQUNBLENDekRPLE1BQU1FLEVBQWMsQ0FHdkIsYUFBYyxDQUhYM0YsRUFBQSxLQUFBNEYsSUFDSDVGLEVBQUEsS0FBQTZGLElBQ0E3RixFQUFBLEtBQUE4RixJQUVJMUMsRUFBQSxLQUFLeUMsR0FBa0IsSUFBSTlCLElBQzNCWCxFQUFBLEtBQUswQyxHQUFZblgsR0FBUSxVQUN6QjBVLEVBQUEsS0FBS3VDLEdBQUFHLElBQUwsVUFDUixDQU1JLGtCQUFrQjlCLEVBQVcsQ0FDekI5RCxFQUFBLEtBQUswRixJQUFnQixrQkFBa0I1QixDQUFTLENBQ3hELENBTUksY0FBY0MsRUFBWSxDQUN0Qi9ELEVBQUEsS0FBSzBGLElBQWdCLGNBQWMzQixDQUFVLENBQ3JELENBTUksaUJBQWtCLENBQ2QsT0FBT2hELEdBQWlCLENBQ2hDLENBQ0ksZ0JBQWlCLENBQ2IsT0FBT3JSLEdBQWdCLENBQy9CLENBQ0ksWUFBWW1XLEVBQVUsQ0FDbEI1QyxFQUFBLEtBQUswQyxHQUFZRSxFQUN6QixDQUNJLGlCQUFrQixDQUNkN0YsRUFBQSxLQUFLMEYsSUFBZ0IsTUFBTyxDQUNwQyxDQUNJLFlBQVlJLEVBQWMsQ0FDdEIsR0FBSTlGLEVBQUEsS0FBSzJGLElBQ0w5VyxPQUFBQSxFQUFPLE1BQU0sNkNBQThDaVgsQ0FBWSxFQUNoRSxJQUFJUCxHQUVmLE1BQU1RLEVBQVVELEVBQWEsU0FBV3pCLEdBQWlCLEVBQ25EM2xCLEVBQU9vbkIsRUFBYSxNQUFRLGlCQUNsQ2pYLE9BQUFBLEVBQU8sTUFBTSxpQ0FBa0NrWCxFQUFTcm5CLENBQUksRUFDckQsSUFBSTRtQixHQUFNLENBQUUsR0FBR1EsRUFBYyxLQUFBcG5CLEVBQU0sUUFBQXFuQixDQUFTLEVBQUUvRixFQUFBLEtBQUswRixHQUFlLENBQ2pGLENBQ0ksV0FBV00sRUFBYS9ULEVBQVEsQ0FDNUIsR0FBSStOLEVBQUEsS0FBSzJGLEtBQWFLLEVBQVksU0FDOUJuWCxPQUFBQSxFQUFPLE1BQU0sNENBQTZDbVgsQ0FBVyxFQUM5RCxJQUFJYixHQUFTYSxFQUFZLEtBQU1oRyxFQUFBLEtBQUswRixHQUFlLEVBRTlELElBQUlPLEVBQ0FGLEVBQ0osR0FBSzlULEdBcUJBLEdBQUlBLGFBQWtCcVQsR0FBTyxDQUM5QixHQUFJclQsYUFBa0JzVCxHQUNsQjFXLE9BQUFBLEVBQU8sTUFBTSwyQ0FBMkMsRUFDakQsSUFBSXNXLEdBQVNhLEVBQVksS0FBTWhHLEVBQUEsS0FBSzBGLEdBQWUsRUFFOURLLEVBQVU5VCxFQUFPLE9BQzdCLFNBQ2lCQSxhQUFrQmlULEdBQU0sQ0FDN0IsR0FBSWpULGFBQWtCa1QsR0FDbEJ0VyxPQUFBQSxFQUFPLE1BQU0sMENBQTBDLEVBQ2hELElBQUlzVyxHQUFTYSxFQUFZLEtBQU1oRyxFQUFBLEtBQUswRixHQUFlLEVBRTlETyxFQUFXaFUsRUFBTyxPQUNsQjhULEVBQVU5VCxFQUFPLE9BQzdCLE1BbkNxQixDQUNULE1BQU0rTyxFQUFlRCxHQUFpQixFQUNoQ3RSLEVBQWNDLEdBQWdCLEVBQ3BDLEdBQUksQ0FBQ3NSLEVBQ0RuUyxPQUFBQSxFQUFPLE1BQU0sMkZBQTJGLEVBQ2pHLElBQUlzVyxHQUFTYSxFQUFZLEtBQU1oRyxFQUFBLEtBQUswRixHQUFlLEVBRTlELEdBQUlqVyxhQUF1QjBWLElBQ3ZCbkUsYUFBd0J1RSxHQUN4QjFXLE9BQUFBLEVBQU8sTUFBTSxVQUFVWSxDQUFXLE9BQU91UixDQUFZLCtCQUErQixFQUM3RSxJQUFJbUUsR0FBU2EsRUFBWSxLQUFNaEcsRUFBQSxLQUFLMEYsR0FBZSxFQUU5REssRUFBVS9FLEVBQWEsUUFDbkJ2UixHQUNBWixFQUFPLE1BQU0sdUJBQXdCWSxFQUFZLE1BQU0sRUFDdkR3VyxFQUFXeFcsRUFBWSxRQUd2QlosRUFBTyxNQUFNLHlDQUEwQ21TLEVBQWEsT0FBTyxDQUUzRixDQWdCUSxPQUFLK0UsR0FJTGxYLEVBQU8sTUFBTSxpQkFBaUIsS0FBSyxVQUFVbVgsRUFBWSxJQUFJLENBQUMsWUFBWUEsRUFBWSxRQUFVRCxDQUFPLEVBQUUsRUFDbEcsSUFBSWIsR0FBSyxDQUNaLEdBQUdjLEVBQ0gsUUFBQUQsRUFDQSxTQUFBRSxDQUNaLEVBQVdqRyxFQUFBLEtBQUswRixHQUFlLElBUm5CN1csRUFBTyxNQUFNLDRGQUE0RixFQUNsRyxJQUFJc1csR0FBU2EsRUFBWSxLQUFNaEcsRUFBQSxLQUFLMEYsR0FBZSxFQVF0RSxDQUNJLE1BQU0sU0FBU2hGLEVBQVMsQ0FDcEIsR0FBSSxDQUNBN1IsRUFBTyxNQUFNLGdDQUFnQyxFQUM3QyxNQUFNbVIsRUFBQSxLQUFLMEYsSUFBZ0IsU0FBU2hGLENBQU8sQ0FDdkQsT0FDZWhqQixFQUFPLENBQ1ZtUixFQUFPLE1BQU0sMENBQTJDblIsQ0FBSyxDQUN6RSxDQUNBLENBNkNJLE1BQU0sWUFBYSxDQUNmLE1BQU1zaUIsRUFBQSxLQUFLMEYsSUFBZ0IsV0FBWSxDQUMvQyxDQUNBLENBaEtJQSxHQUFBLFlBQ0FDLEdBQUEsWUFGR0YsR0FBQSxZQW1ISEcsR0FBb0IsVUFBRyxDQUNuQixHQUFJLE9BQU8sUUFBWSxLQUFlLE9BQU8sUUFBUSxJQUFPLFdBQVksQ0FFcEUsTUFBTU0sRUFBVSxTQUFZLENBQ3hCLE1BQU14RixFQUFVLFdBQVcsSUFBTSxDQUM3QixRQUFRLEtBQUssK0JBQStCLEVBQzVDLFFBQVEsS0FBSyxDQUFDLENBQ2pCLEVBQUUsR0FBSSxFQUNQLEdBQUksQ0FDQSxNQUFNLEtBQUssU0FBVSxDQUN6QyxRQUN3QixDQUNKLGFBQWFBLENBQU8sQ0FDeEMsQ0FDYSxFQUVELFFBQVEsR0FBRyxhQUFjd0YsQ0FBTyxFQUVoQyxRQUFRLEdBQUcsU0FBVSxTQUFZLENBQzdCLE1BQU1BLEVBQVMsRUFDVkMsR0FBNEIsUUFBUSxHQUVyQyxRQUFRLEtBQUssR0FBRyxDQUVwQyxDQUFhLEVBRUQsUUFBUSxHQUFHLFVBQVcsU0FBWSxDQUM5QixNQUFNRCxFQUFTLEVBQ1ZDLEdBQTRCLFNBQVMsR0FFdEMsUUFBUSxLQUFLLENBQUMsQ0FFbEMsQ0FBYSxFQUNELFFBQVEsR0FBRyxxQkFBc0IsTUFBT0MsRUFBUUMsSUFBWSxDQUN4RHhYLEVBQU8sTUFBTSxzQkFBdUJ1WCxFQUFRQyxDQUFPLEVBQ25ELE1BQU1ILEVBQVMsRUFDVkksR0FBMkIsb0JBQW9CLEdBRWhELFFBQVEsS0FBSyxDQUFDLENBRWxDLENBQWEsQ0FDYixDQUNBLEVBS0EsU0FBU0gsR0FBNEJwcEIsRUFBTyxDQUN4QyxPQUFPLFFBQVEsVUFBVUEsQ0FBSyxFQUFFLE9BQVMsQ0FDN0MsQ0FDQSxTQUFTdXBCLEdBQTJCdnBCLEVBQU8sQ0FDdkMsT0FBTyxRQUFRLFVBQVVBLENBQUssRUFBRSxPQUFTLENBQzdDLENBQ0EsSUFBSXdwQixHQUNHLFNBQVNsRixJQUF5QixDQUNyQyxPQUFLa0YsS0FDREEsR0FBd0IsSUFBSWYsSUFFekJlLEVBQ1gsQ0NuTEEsU0FBU0MsR0FBaUJDLEVBQVksQ0FDbEMsTUFBTyxPQUFPaHBCLEtBQU9zTCxJQUVWNlksR0FBbUIsU0FBWSxDQUNsQyxNQUFNM0MsRUFBT3dILEVBQVcsR0FBRzFkLENBQUksRUFDL0J3WSxHQUFldEMsQ0FBSSxFQUNuQixHQUFJLENBQ0EsT0FBQUEsRUFBSyxNQUFPLEVBQ0wsTUFBTXhoQixFQUFHd2hCLENBQUksQ0FDcEMsT0FDbUJ2aEIsRUFBTyxDQUNWLE1BQUF1aEIsRUFBSyxTQUFTLENBQ1YsUUFBU3ZoQixFQUFNLFFBQ2YsS0FBTUEsRUFBTSxJQUNoQyxDQUFpQixFQUNLQSxDQUN0QixRQUNvQixDQUNKdWhCLEVBQUssSUFBSyxFQUNWdUMsR0FBa0IsQ0FDbEMsQ0FDQSxDQUFTLENBRVQsQ0EyQ08sU0FBU2tGLEdBQWdCeG9CLEVBQVMrVCxFQUFRLE9BQzdDLE9BQU9vUCxHQUF3QixFQUFDLFdBQVcsQ0FDdkMsR0FBR25qQixFQUNILEtBQU0sQ0FDRixLQUFNLFFBQ04sT0FBTTJELEVBQUEzRCxHQUFBLFlBQUFBLEVBQVMsT0FBVCxZQUFBMkQsRUFBZSxPQUFRLFFBQzdCLEdBQUczRCxHQUFBLFlBQUFBLEVBQVMsSUFDZixDQUNKLEVBQUUrVCxDQUFNLENBQ2IsQ0FlTyxTQUFTMFUsR0FBbUJ6b0IsRUFBUytULEVBQVEsU0FDaEQsT0FBT29QLEdBQXdCLEVBQUMsV0FBVyxDQUN2QyxHQUFHbmpCLEVBQ0gsS0FBTSxDQUNGLEtBQU0sV0FDTixRQUFPMkQsRUFBQTNELEdBQUEsWUFBQUEsRUFBUyxPQUFULFlBQUEyRCxFQUFlLFFBQVMsR0FDL0IsU0FBUUQsRUFBQTFELEdBQUEsWUFBQUEsRUFBUyxPQUFULFlBQUEwRCxFQUFlLFNBQVUsR0FDakMsR0FBRzFELEdBQUEsWUFBQUEsRUFBUyxJQUNmLENBQ0osRUFBRStULENBQU0sQ0FDYixDQUlPLE1BQU0yVSxHQUFtQkosR0FBaUJHLEVBQWtCLEVBVzVELFNBQVNFLEdBQWtCM29CLEVBQVMrVCxFQUFRLENBQy9DLE9BQU9vUCxHQUF3QixFQUFDLFdBQVcsQ0FDdkMsR0FBR25qQixFQUNILEtBQU0sQ0FBRSxLQUFNLFVBQVcsR0FBR0EsR0FBQSxZQUFBQSxFQUFTLElBQU0sQ0FDOUMsRUFBRStULENBQU0sQ0FDYixDQUlPLE1BQU02VSxHQUFrQk4sR0FBaUJLLEVBQWlCLEVBdUMxRCxTQUFTRSxHQUFvQjdvQixFQUFTK1QsRUFBUSxDQUNqRCxPQUFPb1AsR0FBd0IsRUFBQyxXQUFXLENBQ3ZDLEdBQUduakIsRUFDSCxLQUFNLENBQ0YsS0FBTSxZQUNOLFVBQVcsR0FDWCxHQUFHQSxHQUFBLFlBQUFBLEVBQVMsSUFDZixDQUNKLEVBQUUrVCxDQUFNLENBQ2IsQ0FDTyxNQUFNK1UsR0FBb0JSLEdBQWlCTyxFQUFtQixFQTJDOUQsU0FBU0UsR0FBdUIvb0IsRUFBUytULEVBQVEsQ0FDcEQsT0FBT29QLEdBQXdCLEVBQUMsV0FBVyxDQUN2QyxHQUFHbmpCLEVBQ0gsS0FBTSxDQUNGLEtBQU0sWUFDTixHQUFHQSxHQUFBLFlBQUFBLEVBQVMsSUFDZixDQUNKLEVBQUUrVCxDQUFNLENBQ2IsQ0FDTyxNQUFNK00sR0FBdUJ3SCxHQUFpQlMsRUFBc0IsRUN2TnBFLFNBQVNDLEdBQWtCcEQsRUFBVyxDQUN6Q3pDLEdBQXdCLEVBQUMsa0JBQWtCeUMsQ0FBUyxDQUN4RCxDQ2JPLE1BQU1xRCxFQUFxQixDQUM5QixHQUFHcmtCLEVBQU1pZCxFQUFVLENBQ2YsWUFBSyxhQUFhLEdBQUdqZCxFQUFNaWQsQ0FBUSxFQUM1QixLQUFLLFlBQ3BCLENBQ0ksSUFBSWpkLEVBQU1pZCxFQUFVLENBQ2hCLFlBQUssYUFBYSxJQUFJamQsRUFBTWlkLENBQVEsRUFDN0IsS0FBSyxZQUNwQixDQUNJLEtBQUtqZCxLQUFTaUcsRUFBTSxDQUNoQixPQUFPLEtBQUssYUFBYSxLQUFLakcsRUFBTSxHQUFHaUcsQ0FBSSxDQUNuRCxDQUNJLEtBQUtqRyxFQUFNaWQsRUFBVSxDQUNqQixZQUFLLGFBQWEsS0FBS2pkLEVBQU1pZCxDQUFRLEVBQzlCLEtBQUssWUFDcEIsQ0FDQSxDQUtPLE1BQU1xSCxXQUFtQkQsRUFBcUIsQ0FBOUMsa0NBQ0hqZSxFQUFBLG9CQUFlLElBQUltZSxJQUN2QixDQUtPLE1BQU1DLFdBQWlCSCxFQUFxQixDQUE1QyxrQ0FDSGplLEVBQUEsb0JBQWUsSUFBSW1lLElBQ3ZCLENDNUJPLFNBQVNFLEdBQXFCLENBQUUsS0FBQTdvQixFQUFNLFFBQUE4b0IsR0FBWSxDQUNyRCxNQUFPLENBQ0gsS0FBTSxRQUNOLEtBQUE5b0IsRUFDQSxrQkFBbUI4b0IsRUFDbkIsTUFBTSxJQUFJemUsRUFBTSxDQUNaLE1BQU8sQ0FDSCxVQUFXLENBQUUsS0FBTSxRQUFTLEtBQUFySyxDQUFNLEVBQ2xDLE9BQVEsTUFBTThvQixFQUFRemUsQ0FBSSxDQUM3QixDQUNKLENBQ0osQ0FDTCxDQUlPLFNBQVMwZSxHQUFzQixDQUFFLEtBQUEvb0IsRUFBTSxRQUFBOG9CLEdBQVksQ0FDdEQsTUFBTyxDQUNILEtBQU0sU0FDTixLQUFBOW9CLEVBQ0Esa0JBQW1COG9CLEVBQ25CLE1BQU0sSUFBSXplLEVBQU0sQ0FDWixNQUFPLENBQ0gsVUFBVyxDQUFFLEtBQU0sU0FBVSxLQUFBckssQ0FBTSxFQUNuQyxNQUFPcUssRUFBSyxNQUNaLFlBQWFBLEVBQUssWUFDbEIsT0FBUSxNQUFNeWUsRUFBUXplLENBQUksQ0FDN0IsQ0FDSixDQUNKLENBQ0wsQ0N0Qk8sU0FBUzJlLEdBQW1CQyxFQUFPLENBQ3RDLE9BQU8sS0FBSyxVQUFVLENBQUUsVUFBV0EsRUFBTSxJQUFJLENBQUUsQ0FDbkQsQ0FPQSxTQUFTQyxHQUF1QkQsRUFBTyxDQUNuQyxNQUFPLGVBQWU3ZCxHQUFtQjZkLEVBQU0sSUFBSSxDQUFDLEVBQ3hELENBT0EsU0FBU0UsR0FBOEJGLEVBQU8sQ0FDMUMsTUFBTyxrQkFBa0JBLEVBQU0sSUFBSSxpQ0FBaUNBLEVBQU0sb0JBQXNCLEVBQUUsRUFDdEcsQ0FVTyxNQUFNRyxFQUFRLENBK0RqQixZQUFZSCxFQUFPSSxFQUFpQixDQTNEcEM3ZSxFQUFBLGlCQUlBQSxFQUFBLHdCQUlBQSxFQUFBLHVCQUFrQixDQUNkLEtBQU0sU0FDTixXQUFZLENBQUUsRUFDZCxTQUFVLENBQUUsRUFDWixxQkFBc0IsRUFDekIsR0FLREEsRUFBQSx3QkFBbUIsSUFRbkJBLEVBQUEsd0JBSUFBLEVBQUEsa0JBWUFBLEVBQUEsb0JBSUFBLEVBQUEsY0FjSSxLQUFLLFVBQVl5ZSxFQUFNLEtBQ3ZCLEtBQUssZ0JBQWtCSSxFQUN2QixLQUFLLFNBQVdILEdBQXVCRCxDQUFLLEVBQzVDLEtBQUssZ0JBQWtCRSxHQUE4QkYsQ0FBSyxFQUMxRCxLQUFLLE1BQVFBLENBQ3JCLENBZkksMEJBQTJCLENBQ3ZCLE1BQU8sQ0FDSCxLQUFNLFdBQ04sS0FBTSxLQUFLLFNBQ1gsWUFBYSxLQUFLLGdCQUNsQixXQUFZLEtBQUssZ0JBQ2pCLE9BQVEsS0FBSyxnQkFDaEIsQ0FDVCxDQVFBLENBVU8sU0FBU0ssR0FBUUwsRUFBT00sRUFBUyxHQUFJLENBQ3hDLElBQUlwcUIsRUFDSixNQUFNcXFCLEVBQWUsQ0FBQyxDQUFDRCxFQUFPLFVBQ3hCRSxFQUFlLENBQUMsQ0FBQ0YsRUFBTyxVQUU5QixHQUFJLEVBRHdDQyxJQUFpQkMsR0FFekQsTUFBTSxJQUFJN2UsRUFBVSxzRUFBc0UsRUFFOUYsZUFBZXllLEVBQWdCL1ksRUFBU29aLEVBQWlCLE9BQ3JELEdBQUl2cUIsRUFBUSxDQUNSLEdBQUksQ0FBQ3VxQixFQUNELE1BQUEzRyxHQUFzQixDQUNsQixRQUFTLHNEQUFzRDJHLENBQWUsR0FDOUUsS0FBTSxDQUNGLFFBQVMsZ0JBQ1osQ0FDckIsQ0FBaUIsRUFDSyxJQUFJL2UsR0FBbUIsMkNBQTJDLEVBRTVFLEdBQUksQ0FFQSxNQUFNaUcsRUFBUyxNQUFNelIsRUFBT3VxQixDQUFlLEVBQ3ZDSCxFQUFPLFdBQ1AsTUFBTUEsRUFBTyxVQUFValosRUFBU00sQ0FBTSxDQUUxRCxPQUNtQjVSLEVBQU8sQ0FDVixNQUFBK2pCLEdBQXNCLENBQ2xCLFFBQVMsd0JBQ1QsS0FBTSxDQUFFLENBQzVCLENBQWlCLEVBQ0k1UyxFQUFPLGlCQUNSQSxFQUFPLE1BQU0sOEJBQThCdVosQ0FBZSxZQUFZMXFCLENBQUssRUFBRSxFQUUzRSxJQUFJMkwsR0FBbUIsdUJBQXVCLENBQ3BFLENBQ0EsTUFFWSxPQUFNeEgsRUFBQW9tQixFQUFPLFlBQVAsWUFBQXBtQixFQUFBLEtBQUFvbUIsRUFBbUJqWixJQUU3QixPQUFPMlksQ0FDZixDQUNJLE1BQU1LLEVBQVUsSUFBSUYsR0FBUUgsRUFBT0ksQ0FBZSxFQUNsRCxHQUFJRSxFQUFPLFVBQVcsQ0FDbEIsTUFBTTdoQixFQUFTMkQsR0FBZ0NrZSxFQUFPLFVBQVdELEVBQVEsUUFBUSxFQUNqRkEsRUFBUSxnQkFBa0I1aEIsRUFBTyxPQUNqQzRoQixFQUFRLGlCQUFtQixHQUMzQm5xQixFQUFTdUksRUFBTyxNQUN4QixDQUNJLE9BQUk2aEIsRUFBTyxtQkFDUEQsRUFBUSxTQUFXQyxFQUFPLGtCQUUxQkEsRUFBTywwQkFDUEQsRUFBUSxnQkFBa0JDLEVBQU8seUJBRWpDQSxFQUFPLGNBQ1BELEVBQVEsWUFBY0MsRUFBTyxhQUUxQkQsQ0FDWCxDQVFPLFNBQVNLLEdBQVdWLEVBQU8sQ0FDOUIsT0FBSUEsYUFBaUJHLEdBQ1ZILEVBRUpLLEdBQVFMLENBQUssQ0FDeEIsQ0NuTE8sU0FBU1csSUFBMEIsQ0FFbEMsTUFBTSxJQUFJLE1BQU0sK0pBQStKLENBR3ZMLENDWE8sTUFBTUMsR0FBYTFLLEVBQVMsQ0FLL0IsYUFBY0csR0FBU0YsRUFBUSxFQUFJRyxFQUFPLENBQUEsRUFBRSxTQUFVLENBQzFELENBQUMsRUFJWXVLLEdBQVdELEdBQVcsT0FBTyxDQUt0QyxHQUFJekssRUFBVSxFQUFDLFNBQVUsQ0FDN0IsQ0FBQyxFQUlZMkssR0FBVUYsR0FBVyxPQUFPLENBQ3JDLEtBQU14SyxFQUFVLFNBQVMsRUFJekIsUUFBU0QsRUFBVSxDQUN2QixDQUFDLEVBQ1k0SyxHQUFhSCxHQUFXLE9BQU8sQ0FDeEMsS0FBTXhLLEVBQVUsYUFBYSxFQUk3QixLQUFNRCxFQUFVLENBQ3BCLENBQUMsRUFDWTZLLEdBQVlKLEdBQVcsT0FBTyxDQUN2QyxLQUFNeEssRUFBVSxZQUFZLEVBSTVCLEtBQU1ELEVBQVUsQ0FDcEIsQ0FBQyxFQUNZOEssR0FBYUwsR0FBVyxPQUFPLENBQ3hDLEtBQU14SyxFQUFVLGFBQWEsRUFJN0IsTUFBTzhLLEVBQ0ksRUFDTixHQUFHaEwsRUFBUyxDQUNiLEdBQUlDLEVBQVUsQ0FDdEIsQ0FBSyxDQUFDLEVBQ0csU0FBUyxxREFBcUQsQ0FDdkUsQ0FBQyxFQUNZZ0wsR0FBWVAsR0FBVyxPQUFPLENBQ3ZDLEtBQU14SyxFQUFVLFlBQVksRUFJNUIsS0FBTThLLEVBQ0ssRUFDTixTQUFTLG1FQUFtRSxFQUM1RSxHQUFHaEwsRUFBUyxDQUNiLEdBQUlDLEVBQVEsRUFBRyxTQUFTLGdCQUFnQixDQUNoRCxDQUFLLENBQUMsRUFDRyxHQUFHRCxFQUFTLENBQ2IsSUFBS0MsRUFBUSxFQUFHLFNBQVMsa0NBQWtDLENBQ25FLENBQUssQ0FBQyxFQUNHLFNBQVMsbURBQW1ELENBQ3JFLENBQUMsRUFDWWlMLEdBQWVSLEdBQVcsT0FBTyxDQUMxQyxLQUFNeEssRUFBVSxPQUFPLEVBSXZCLE1BQU84SyxFQUNJLEVBQ04sR0FBR2hMLEVBQVMsQ0FDYixHQUFJQyxFQUFVLENBQ3RCLENBQUssQ0FBQyxFQUNHLFNBQVMsc0NBQXNDLEVBSXBELE9BQVFBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxFQUl4QyxXQUFZQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsQ0FDaEQsQ0FBQyxFQUNZa0wsR0FBZVQsR0FBVyxPQUFPLENBQzFDLEtBQU14SyxFQUFVLE9BQU8sRUFJdkIsTUFBT0QsRUFBUSxFQUFHLFNBQVMsMkJBQTJCLENBQzFELENBQUMsRUFDWW1MLEdBQWlCVixHQUFXLE9BQU8sQ0FDNUMsS0FBTXhLLEVBQVUsTUFBTSxFQUl0QixLQUFNRCxFQUFVLENBQ3BCLENBQUMsRUFDWW9MLEdBQWtCWCxHQUFXLE9BQU8sQ0FDN0MsS0FBTXhLLEVBQVUsT0FBTyxFQUl2QixLQUFNRCxFQUFRLEVBQUcsU0FBUywyQkFBMkIsRUFJckQsVUFBV0EsRUFBUSxFQUFHLFNBQVMsOEJBQThCLENBQ2pFLENBQUMsRUFDWXFMLEdBQXFCWixHQUFXLE9BQU8sQ0FDaEQsS0FBTXhLLEVBQVUscUJBQXFCLEVBSXJDLEtBQU1ELEVBQVEsRUFBRyxTQUFTLGtDQUFrQyxDQUNoRSxDQUFDLEVBQ1lzTCxHQUFrQkMsR0FBcUIsT0FBUSxDQUN4RHhMLEVBQVMsQ0FBRSxLQUFNRSxFQUFVLFlBQVksQ0FBQyxDQUFFLEVBQzFDRixFQUFTLENBQ0wsS0FBTUUsRUFBVSxPQUFPLEVBQ3ZCLEVBQUd1TCxFQUFVLEVBQ2IsRUFBR0EsRUFBVSxFQUNiLE9BQVFDLEdBQU8sQ0FBQyxPQUFRLFFBQVMsUUFBUyxPQUFRLFNBQVMsQ0FBQyxDQUNwRSxDQUFLLEVBQ0QxTCxFQUFTLENBQ0wsS0FBTUUsRUFBVSxjQUFjLEVBQzlCLEVBQUd1TCxFQUFVLEVBQ2IsRUFBR0EsRUFBVSxDQUNyQixDQUFLLEVBQ0R6TCxFQUFTLENBQ0wsS0FBTUUsRUFBVSxRQUFRLEVBQ3hCLEVBQUd1TCxFQUFVLEVBQ2IsRUFBR0EsRUFBVSxFQUNiLFNBQVVBLEVBQVUsRUFDcEIsU0FBVUEsRUFBVSxDQUM1QixDQUFLLEVBQ0R6TCxFQUFTLENBQ0wsS0FBTUUsRUFBVSxNQUFNLEVBQ3RCLEtBQU1ELEVBQVUsQ0FDeEIsQ0FBSyxFQUNERCxFQUFTLENBQUUsS0FBTUUsRUFBVSxNQUFNLENBQUMsQ0FBRSxFQUNwQ0YsRUFBUyxDQUNMLEtBQU1FLEVBQVUsTUFBTSxFQUN0QixFQUFHdUwsRUFBVSxFQUNiLEVBQUdBLEVBQVUsQ0FDckIsQ0FBSyxFQUNEekwsRUFBUyxDQUNMLEtBQU1FLEVBQVUsVUFBVSxFQUMxQixLQUFNRyxFQUFRSixHQUFVLENBQ2hDLENBQUssRUFDREQsRUFBUyxDQUNMLEtBQU1FLEVBQVUsTUFBTSxFQUN0QixLQUFNRyxFQUFRTCxFQUFTLENBQUUsRUFBR3lMLEVBQVEsRUFBSSxFQUFHQSxFQUFVLENBQUEsQ0FBRSxDQUFDLENBQ2hFLENBQUssQ0FDTCxDQUFDLEVBSVlFLEdBQW1CSCxHQUFxQixPQUFRLENBQ3pEWCxHQUNBRCxHQUNBRSxHQUNBSSxHQUNBQyxFQUNKLENBQUMsRUFDS1MsR0FBY2pCLEdBQVMsT0FBTyxDQUloQyxLQUFNekssRUFBVSxTQUFTLEVBQUUsU0FBVSxDQUN6QyxDQUFDLEVBQ1kyTCxHQUF1QkQsR0FBWSxPQUFPLENBSW5ELEtBQU0xTCxFQUFVLFdBQVcsRUFJM0IsT0FBUXdMLEdBQU8sQ0FBQyxjQUFlLFlBQWEsWUFBWSxDQUFDLEVBSXpELFFBQVNyTCxFQUFRc0wsRUFBZ0IsQ0FDckMsQ0FBQyxFQUNZRyxHQUFjTixHQUFxQixPQUFRLENBQ3BEVixHQUNBQyxHQUNBRSxHQUNBQyxFQUNKLENBQUMsRUFDWWEsR0FBa0JILEdBQVksT0FBTyxDQUs5QyxLQUFNMUwsRUFBVSxNQUFNLEVBSXRCLFFBQVNHLEVBQVF5TCxFQUFXLEVBQUUsR0FBRzdMLEVBQVEsQ0FBRSxDQUMvQyxDQUFDLEVBQ0srTCxHQUFvQkosR0FBWSxPQUFPLENBS3pDLEtBQU0xTCxFQUFVLFFBQVEsRUFJeEIsUUFBU0QsRUFBVSxDQUN2QixDQUFDLEVBQzhDTixHQUFDLE9BQVEsQ0FDcERxTSxHQUNBSCxHQUNBRSxFQUNKLENBQUMsRUFJTSxNQUFNRSxHQUFxQnRCLEdBQVMsT0FBTyxDQUM5QyxLQUFNekssRUFBVSxrQkFBa0IsRUFJbEMsS0FBTUQsRUFBUSxFQUFHLFNBQVMsNkJBQTZCLEVBSXZELFVBQVcrSyxFQUNBLEVBQ04sU0FBUyx1Q0FBdUMsRUFDaEQsU0FBVSxFQUlmLE9BQVEvSyxFQUFVLEVBQUMsU0FBVSxFQUk3QixPQUFRQSxFQUFVLEVBQUMsU0FBVSxDQUNqQyxDQUFDLEVBQ1lpTSxHQUFtQnZCLEdBQVMsT0FBTyxDQUM1QyxLQUFNekssRUFBVSxlQUFlLEVBSS9CLE9BQVFELEVBQVEsRUFBRyxTQUFTLHlCQUF5QixFQUlyRCxLQUFNQSxFQUFRLEVBQUcsU0FBUywwQkFBMEIsRUFJcEQsT0FBUXlMLEdBQU8sQ0FBQyxjQUFlLFlBQWEsWUFBWSxDQUFDLEVBQUUsU0FBVSxFQUlyRSxVQUFXekwsRUFBVSxDQUN6QixDQUFDLEVBQ1lrTSxHQUF5QnhCLEdBQVMsT0FBTyxDQUNsRCxLQUFNekssRUFBVSxzQkFBc0IsRUFJdEMsS0FBTUQsRUFBUSxFQUFHLFNBQVMsc0JBQXNCLEVBSWhELE9BQVFBLEVBQVEsRUFBRyxTQUFTLHlCQUF5QixFQUlyRCxPQUFReUwsR0FBTyxDQUFDLGNBQWUsWUFBYSxZQUFZLENBQUMsRUFJekQsT0FBUUYsR0FBcUIsT0FBUSxDQUFDSixHQUFnQkMsRUFBZSxDQUFDLENBQzFFLENBQUMsRUFDWWUsR0FBc0J6QixHQUFTLE9BQU8sQ0FDL0MsS0FBTXpLLEVBQVUsZUFBZSxFQUkvQixPQUFRRCxFQUFRLEVBQUcsU0FBUyw2QkFBNkIsRUFJekQsT0FBUXlMLEdBQU8sQ0FBQyxjQUFlLFlBQWEsWUFBWSxDQUFDLEVBSXpELE9BQVFILEVBQ1osQ0FBQyxFQUNZYyxHQUF5QjFCLEdBQVMsT0FBTyxDQUNsRCxLQUFNekssRUFBVSxzQkFBc0IsRUFJdEMsT0FBUUQsRUFBUSxFQUFHLFNBQVMsNkJBQTZCLEVBSXpELE9BQVFxTCxFQUNaLENBQUMsRUFDWWdCLEdBQWVkLEdBQXFCLE9BQVEsQ0FDckRZLEdBQ0FGLEdBQ0FELEVBQ0osQ0FBQyxFQUlZTSxHQUFnQjdCLEdBQVcsT0FBTyxDQUMzQyxHQUFJekssRUFBVSxFQUFDLFNBQVUsRUFDekIsS0FBTUMsRUFBVSxXQUFXLEVBSTNCLFFBQVNHLEVBQVF5SyxFQUFTLENBQzlCLENBQUMsRUFVWTBCLEdBQWM3QixHQUFTLE9BQU8sQ0FDdkMsS0FBTXpLLEVBQVUsU0FBUyxDQUM3QixDQUFDLEVBSVl1TSxHQUFrQmpCLEdBQXFCLE9BQVEsQ0FDeERLLEdBQ0FJLEdBQ0FDLEdBQ0FFLEdBQ0FHLEdBQ0FDLEVBQ0osQ0FBQyxFQUNZRSxHQUFZQyxHQUFRLENBQzdCWixHQUNBRixHQUNBRyxHQUNBQyxHQUNBQyxHQUNBRSxHQUNBRCxHQUNBRSxHQUNBRSxHQUNBQyxFQUNKLENBQUMsRUFJWUksR0FBWTVNLEVBQVMsQ0FDOUIsU0FBVXlMLEVBQVUsRUFBQyxTQUFVLEVBQy9CLFlBQWFBLEVBQVUsRUFDdkIsYUFBY0EsRUFBVSxFQUN4QixZQUFhQSxFQUFVLEVBQ3ZCLG1CQUFvQnRMLEdBQVNGLEVBQVEsRUFBSXdMLEVBQVUsQ0FBQSxFQUFFLFNBQVUsRUFDL0Qsb0JBQXFCdEwsR0FBU0YsRUFBUSxFQUFJd0wsRUFBVSxDQUFBLEVBQUUsU0FBVSxDQUNwRSxDQUFDLEVBT1lvQixHQUF3Qm5DLEdBQVcsT0FBTyxDQUNuRCxLQUFNeEssRUFBVSxtQkFBbUIsRUFJbkMsTUFBT0QsRUFBVSxDQUNyQixDQUFDLEVBSVk2TSxHQUE2QnBDLEdBQVcsT0FBTyxDQUN4RCxLQUFNeEssRUFBVSxrQkFBa0IsQ0FDdEMsQ0FBQyxFQUlZNk0sR0FBK0JyQyxHQUFXLE9BQU8sQ0FDMUQsS0FBTXhLLEVBQVUsZUFBZSxFQUkvQixTQUFVd0ssR0FBVyxPQUFPLENBSXhCLEdBQUl6SyxFQUFVLEVBSWQsTUFBTzJNLEdBSVAsT0FBUXZNLEVBQVFvTSxFQUFlLENBQ3ZDLENBQUssQ0FDTCxDQUFDLEVBS1lPLEdBQXlCdEMsR0FBVyxPQUFPLENBQ3BELEtBQU14SyxFQUFVLE9BQU8sRUFDdkIsTUFBT0UsRUFBSyxFQUFHLFNBQVMsMEJBQTBCLENBQ3RELENBQUMsRUFDOENULEdBQUMsT0FBUSxDQUNwRGtOLEdBQ0FFLEdBQ0FELEdBQ0FFLEVBQ0osQ0FBQyxFQ2piTSxNQUFNQyxFQUFNLENBeUJmLFlBQVlsaEIsRUFBTyxDQXJCbkJWLEVBQUEsaUJBSUFBLEVBQUEsb0JBSUFBLEVBQUEscUJBSUFBLEVBQUEsb0JBSUFBLEVBQUEsMEJBQXFCLENBQUUsR0FJdkJBLEVBQUEsMkJBQXNCLENBQUUsR0FFaEIsT0FBT1UsRUFBVSxLQUNqQixLQUFLLFNBQVcsRUFDaEIsS0FBSyxZQUFjLEVBQ25CLEtBQUssYUFBZSxFQUNwQixLQUFLLFlBQWMsRUFDbkIsS0FBSyxtQkFBcUIsQ0FBRSxFQUM1QixLQUFLLG9CQUFzQixDQUFFLElBRzdCLEtBQUssVUFBV0EsR0FBQSxZQUFBQSxFQUFPLFdBQVksRUFDbkMsS0FBSyxhQUFjQSxHQUFBLFlBQUFBLEVBQU8sY0FBZSxFQUN6QyxLQUFLLGNBQWVBLEdBQUEsWUFBQUEsRUFBTyxlQUFnQixFQUMzQyxLQUFLLGFBQWNBLEdBQUEsWUFBQUEsRUFBTyxjQUFlLEVBQ3pDLEtBQUssbUJBQXFCQSxHQUFBLE1BQUFBLEVBQU8sbUJBQzNCLENBQUNBLEVBQU0sa0JBQWtCLEVBQ3pCLENBQUUsRUFDUixLQUFLLG9CQUFzQkEsR0FBQSxNQUFBQSxFQUFPLG9CQUM1QixDQUFDQSxFQUFNLG1CQUFtQixFQUMxQixDQUFFLEVBRXBCLENBQ0ksSUFBSW1oQixFQUFVLENBQ1YsS0FBSyxVQUFZQSxFQUFTLFNBQzFCLEtBQUssYUFBZUEsRUFBUyxZQUM3QixLQUFLLGNBQWdCQSxFQUFTLGFBQzlCLEtBQUssYUFBZUEsRUFBUyxZQUN6QkEsRUFBUyxvQkFFVCxLQUFLLG1CQUFtQixLQUFLLEdBQUdBLEVBQVMsa0JBQWtCLEVBRTNEQSxFQUFTLHFCQUVULEtBQUssb0JBQW9CLEtBQUssR0FBR0EsRUFBUyxtQkFBbUIsQ0FFekUsQ0FDQSxDQzVETyxNQUFNQyxFQUFXLENBY3BCLFlBQVloYyxFQUFVLEdBQUksQ0FWMUI5RixFQUFBLGdCQUtBQSxFQUFBLGNBSUEyVyxFQUFBLEtBQUFvTCxJQUVJLEtBQUssUUFBVWpjLEVBQ2YsS0FBSyxNQUFRLElBQUk4YixHQUNqQjdILEVBQUEsS0FBS2dJLEdBQWEsSUFBSSxJQUM5QixDQU9JLGtCQUFrQkMsRUFBVyxDQUN6QmpJLEVBQUEsS0FBS2dJLEdBQWEsSUFBSSxJQUFJLE9BQU8sUUFBUUMsQ0FBUyxDQUFDLEVBQzNELENBUUksZUFBZSxDQUFFLFNBQUFDLEVBQVUsT0FBQUMsR0FBVSxDQUNqQyxNQUFNQyxFQUFnQnJMLEVBQUEsS0FBS2lMLElBQVcsSUFBSUUsQ0FBUSxFQUNsRCxJQUFJRSxHQUFBLFlBQUFBLEVBQWUsWUFBYSxJQUFRQSxFQUFjLFdBQWEsR0FDL0R4YyxPQUFBQSxFQUFPLEtBQUssdUZBQXVGLEVBQzVGLEdBRVgsSUFBSXdjLEdBQUEsWUFBQUEsRUFBZSxZQUFhLEdBQzVCLE1BQU8sR0FFWCxJQUFJQSxHQUFBLFlBQUFBLEVBQWUsWUFBYSxHQUM1QixNQUFPLEdBRVgsTUFBTUMsRUFBeUIsTUFBTSxRQUFRRCxHQUFBLFlBQUFBLEVBQWUsUUFBUSxFQUM5REEsRUFBYyxTQUFTLFNBQVNELENBQU0sRUFDdEMsR0FDQUcsRUFBMEIsTUFBTSxRQUFRRixHQUFBLFlBQUFBLEVBQWUsUUFBUSxFQUMvREEsRUFBYyxTQUFTLFNBQVNELENBQU0sRUFDdEMsR0FDTixHQUFJRSxHQUEwQkMsRUFDMUIxYyxPQUFBQSxFQUFPLEtBQUssYUFBYXVjLENBQU0sNEVBQTRFLEVBQ3BHLEdBRVgsR0FBSUUsRUFDQSxNQUFPLEdBRVgsR0FBSUMsRUFDQSxNQUFPLEVBR25CLENBT0ksWUFBWUMsRUFBYyxDQUFFLGNBQUFDLEVBQWdCLEVBQUssRUFBSyxDQUFBLEVBQUksQ0FDdEQsTUFBTU4sRUFBV0ssRUFBYSxRQUFRLEtBQ3RDLEdBQUlDLEVBQWUsQ0FDZnpMLEVBQUEsS0FBS2lMLElBQVcsSUFBSUUsRUFBVSxDQUMxQixTQUFVLEdBQ1YsU0FBVSxDQUFFLENBQzVCLENBQWEsRUFDRCxNQUNaLENBQ1EsTUFBTUUsRUFBZ0JyTCxFQUFBLEtBQUtpTCxJQUFXLElBQUlFLENBQVEsR0FBSyxDQUNuRCxTQUFVLENBQUUsRUFDWixTQUFVLENBQUUsQ0FDZixFQUNELEdBQUksTUFBTSxRQUFRRSxFQUFjLFFBQVEsRUFBRyxDQUV2QyxNQUFNRCxFQUFTLFdBQVlJLEVBQWEsUUFDbENBLEVBQWEsUUFBUSxPQUNyQkEsRUFBYSxRQUFRLEdBQzNCSCxFQUFjLFNBQVMsS0FBS0QsQ0FBTSxDQUM5QyxDQUNRcEwsRUFBQSxLQUFLaUwsSUFBVyxJQUFJRSxFQUFVRSxDQUFhLENBQ25ELENBTUksV0FBV0csRUFBYyxDQUFFLGFBQUFFLEVBQWUsRUFBSyxFQUFLLENBQUEsRUFBSSxDQUNwRCxNQUFNUCxFQUFXSyxFQUFhLFFBQVEsS0FDdEMsR0FBSUUsRUFBYyxDQUNkMUwsRUFBQSxLQUFLaUwsSUFBVyxJQUFJRSxFQUFVLENBQzFCLFNBQVUsR0FDVixTQUFVLEVBQzFCLENBQWEsRUFDRCxNQUNaLENBQ1EsTUFBTUUsRUFBZ0JyTCxFQUFBLEtBQUtpTCxJQUFXLElBQUlFLENBQVEsR0FBSyxDQUNuRCxTQUFVLENBQUUsRUFDWixTQUFVLENBQUUsQ0FDZixFQUNELEdBQUksTUFBTSxRQUFRRSxFQUFjLFFBQVEsRUFBRyxDQUV2QyxNQUFNRCxFQUFTLFdBQVlJLEVBQWEsUUFDbENBLEVBQWEsUUFBUSxPQUNyQkEsRUFBYSxRQUFRLEdBQzNCSCxFQUFjLFNBQVMsS0FBS0QsQ0FBTSxDQUM5QyxDQUNRcEwsRUFBQSxLQUFLaUwsSUFBVyxJQUFJRSxFQUFVRSxDQUFhLENBQ25ELENBQ0ksUUFBUyxDQUNMLE1BQU8sQ0FDSCxRQUFTLEtBQUssUUFDZCxNQUFPLEtBQUssTUFDWixVQUFXLE9BQU8sWUFBWXJMLEVBQUEsS0FBS2lMLElBQVcsUUFBTyxDQUFFLENBQzFELENBQ1QsQ0FDQSxDQWxISUEsR0FBQSxZQ2RKLE1BQU1VLEVBQWMsQ0FFaEIsWUFBWTFpQixFQUFPLENBRG5CQyxFQUFBLGNBRUksS0FBSyxNQUFRRCxDQUNyQixDQU9JLElBQUksU0FBVSxDQUNWLE9BQU8yaUIsR0FBYSxLQUFLLE1BQU8sS0FBSyxRQUFRLENBQ3JELENBU0ksSUFBSSxRQUFTLENBQ1QsT0FBT0EsR0FBYSxDQUFBLEVBQUksS0FBSyxRQUFRLENBQzdDLENBSUksSUFBSSxPQUFRLENBQ1IsT0FBTyxLQUFLLE1BQU0sY0FDMUIsQ0FNSSxJQUFJLFVBQVcsQ0FDWCxPQUFPLEtBQUssTUFBTSxlQUMxQixDQUlJLElBQUksY0FBZSxDQUNmLE9BQU8sS0FBSyxNQUFNLGVBQzFCLENBSUksSUFBSSxnQkFBaUIsQ0FDakIsTUFBTUMsRUFBWSxLQUFLLGFBQ3ZCLE9BQU9BLEdBQWFBLEVBQVUsT0FBUyxFQUNqQ0EsRUFBVUEsRUFBVSxPQUFTLENBQUMsRUFBRSxXQUNoQyxNQUNkLENBSUksSUFBSSxXQUFZLENBQ1osT0FBTyxLQUFLLE1BQU0sYUFDMUIsQ0FJSSxJQUFJLHVCQUF3QixDQUN4QixPQUFPLEtBQUssTUFBTSxzQkFDMUIsQ0FJSSxJQUFJLHdCQUF5QixDQUN6QixPQUFPLEtBQUssTUFBTSx1QkFDMUIsQ0FJSSxJQUFJLGVBQWdCLE9BQ2hCLFFBQUlocUIsRUFBQSxLQUFLLE1BQU0sZUFBWCxZQUFBQSxFQUF5QixRQUFTLHlCQUMzQixLQUFLLE1BQU0sYUFBYSxLQUFLLGNBRWpDLENBQUUsQ0FDakIsQ0FLSSxJQUFJLGFBQWMsT0FDZCxLQUFJQSxFQUFBLEtBQUssTUFBTSxlQUFYLFlBQUFBLEVBQXlCLFFBQVMseUJBQ2xDLE9BQU8sS0FBSyxNQUFNLGNBQWMsbUJBQW1CLEtBQUssTUFBTSxhQUFhLE1BQU0sRUFFckZnTixFQUFPLEtBQUsscURBQXFELENBRXpFLENBQ0EsQ0FJTyxNQUFNaWQsV0FBa0JILEVBQWMsQ0FDekMsWUFBWTFpQixFQUFPLENBQ2YsTUFBTUEsQ0FBSyxDQUNuQixDQUNBLENBSU8sTUFBTThpQixXQUEwQkosRUFBYyxDQXVCakQsWUFBWXZsQixFQUFTLEdBQUksQ0FDckIsTUFBTUEsRUFBTyxLQUFLLEVBZHRCOEMsRUFBQSxtQkFBYyxHQUlkQSxFQUFBLGlCQUNBMlcsRUFBQSxLQUFBbUYsR0FBUyxNQUNUbkYsRUFBQSxLQUFBbU0sSUFDQW5NLEVBQUEsS0FBQW9NLElBQ0FwTSxFQUFBLEtBQUFxTSxJQUNBck0sRUFBQSxLQUFBc00sSUFDQXRNLEVBQUEsS0FBQXVNLElBQ0F2TSxFQUFBLEtBQUF3TSxJQUNBeE0sRUFBQSxLQUFBeU0sR0FBYSxJQUdUckosRUFBQSxLQUFLK0ksR0FBVTVsQixFQUFPLFFBQ2xCNFosRUFBQSxLQUFLZ00sS0FDTGhNLEVBQUEsS0FBS2dNLElBQVEsaUJBQWlCLFFBQVMsU0FBWSxDQUMvQyxNQUFNaE0sRUFBQSxLQUFLa00sSUFBZ0IsT0FBUSxDQUNuRCxDQUFhLEVBRUxqSixFQUFBLEtBQUtpSixHQUFrQixJQUFJSyxHQUFnQixDQUN2QyxNQUFRQyxHQUFlLENBQ25CdkosRUFBQSxLQUFLZ0osR0FBc0JPLEVBQzlCLEVBQ0QsT0FBUSxJQUFNLENBQ1Z2SixFQUFBLEtBQUtxSixHQUFhLEdBQ3JCLENBQ2IsQ0FBUyxHQUNEckosRUFBQSxLQUFLa0osR0FBb0IsSUFBSSxRQUFRLENBQUMzSSxFQUFTaUosSUFBVyxDQUN0RHhKLEVBQUEsS0FBS21KLEdBQTJCNUksR0FDaENQLEVBQUEsS0FBS29KLEdBQTBCSSxFQUMzQyxDQUFTLEVBQ1QsQ0F2Q0ksSUFBSSxjQUFlLENBQ2YsT0FBTyxLQUFLLFNBQ3BCLENBMENJLFNBQVN6d0IsRUFBTSxPQUNOLEtBQUssWUFDTjZGLEVBQUFtZSxFQUFBLEtBQUtpTSxNQUFMLE1BQUFwcUIsRUFBMEIsUUFBUTdGLEVBRTlDLENBS0ksT0FBUSxPQUNBLENBQUMsS0FBSyxXQUFhZ2tCLEVBQUEsS0FBS2lNLE1BQ3hCak0sRUFBQSxLQUFLaU0sSUFBb0IsTUFBTyxFQUNoQ2hKLEVBQUEsS0FBS2dKLEdBQXNCLFNBQzNCcHFCLEVBQUFtZSxFQUFBLEtBQUtvTSxNQUFMLE1BQUF2cUIsRUFBQSxXQUVaLENBS0ksWUFBWTRRLEVBQUssT0FDVCxDQUFDLEtBQUssV0FBYXVOLEVBQUEsS0FBS2lNLE1BQ3hCak0sRUFBQSxLQUFLaU0sSUFBb0IsTUFBTXhaLENBQUcsRUFDbEN3USxFQUFBLEtBQUtnSixHQUFzQixTQUUvQmhKLEVBQUEsS0FBSytCLEdBQVN2UyxJQUNkNVEsRUFBQW1lLEVBQUEsS0FBS3FNLE1BQUwsTUFBQXhxQixFQUFBLFVBQStCNFEsR0FDL0J1TixFQUFBLEtBQUttTSxJQUFrQixNQUFPdHNCLEdBQU0sQ0FDaENnUCxFQUFPLE1BQU0seUJBQXlCaFAsQ0FBQyxFQUFFLENBQ3JELENBQVMsQ0FDVCxDQUlJLElBQUksV0FBWSxDQUNaLE9BQU9tZ0IsRUFBQSxLQUFLc00sR0FDcEIsQ0FLSSxVQUFXLENBQ1AsT0FBT3RNLEVBQUEsS0FBS2tNLEdBQ3BCLENBS0ksSUFBSSxXQUFZLENBQ1osT0FBT2xNLEVBQUEsS0FBS21NLEdBQ3BCLENBSUksSUFBSSxPQUFRLENBQ1IsT0FBT25NLEVBQUEsS0FBS2dGLEdBQ3BCLENBQ0ksYUFBYTltQixFQUFVLEdBQUksQ0FDdkIsTUFBTXd1QixFQUFTMU0sRUFBQSxLQUFLa00sSUFBZ0IsWUFBWSxJQUFJM0wsR0FBZ0IsQ0FDaEUsVUFBVXhqQixFQUFPeXZCLEVBQVksQ0FDekIsR0FBSXp2QixFQUFNLE9BQVMsMEJBQ2ZBLEVBQU0sS0FBSyxPQUFTLG9CQUFxQixDQUN6QyxNQUFNZixFQUFPMHVCLEdBQXNCLE1BQU0zdEIsRUFBTSxJQUFJLEVBQ25EeXZCLEVBQVcsUUFBUXh3QixFQUFLLEtBQUssQ0FDakQsQ0FDYSxDQUNiLENBQVMsQ0FBQyxFQUNGLE9BQUlrQyxFQUFRLDBCQUNEaWlCLEdBQVMsUUFBUXVNLENBQU0sRUFFM0JBLENBQ2YsQ0FDSSxDQUFDLE9BQU8sYUFBYSxHQUFJLENBQ3JCLE9BQU8xTSxFQUFBLEtBQUtrTSxJQUFnQixPQUFPLGFBQWEsRUFBRyxDQUMzRCxDQUNBLENBNUdJbEgsR0FBQSxZQUNBZ0gsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQ2xJRyxTQUFTSyxHQUFjcGtCLEVBQU0sQ0FDaEMsT0FBSUEsRUFBSyxPQUFTLFdBQ1AsQ0FDSCxLQUFNLFdBQ04sS0FBTUEsRUFBSyxLQUNYLFlBQWFBLEVBQUssWUFDbEIsV0FBWUEsRUFBSyxXQUNqQixPQUFRQSxFQUFLLE1BQ2hCLEVBRURBLEVBQUssT0FBUyxXQUNQLENBQ0gsS0FBTSxXQUNOLEtBQU1BLEVBQUssS0FDWCxZQUFhQSxFQUFLLFNBQVMsWUFDM0IsV0FBWUEsRUFBSyxTQUFTLFVBQzdCLEVBRUUsQ0FDSCxLQUFNLGNBQ04sS0FBTUEsRUFBSyxLQUNYLGFBQWNBLEVBQUssWUFDdEIsQ0FDTCxDQUNPLFNBQVNxa0IsR0FBaUJyaUIsRUFBRyxDQUNoQyxNQUFPLENBQ0gsU0FBVUEsRUFBRSxTQUNaLGdCQUFpQkEsRUFBRSxnQkFDbkIsZ0JBQWlCQSxFQUFFLGdCQUNuQixpQkFBa0JBLEVBQUUsZ0JBQ3ZCLENBQ0wsQ0M5Qk8sTUFBTXNpQixFQUFZLENBQWxCLGNBQ0gzakIsRUFBQSxZQUFPLGFBQ1BBLEVBQUEsZ0JBQ0EsUUFBUyxDQUNMLE1BQU8sQ0FDSCxLQUFNLEtBQUssS0FDWCxRQUFTLEtBQUssT0FDakIsQ0FDVCxDQUNBLENBQ08sTUFBTTRqQixXQUE2QkQsRUFBWSxDQUlsRCxZQUFZRSxFQUFTcEYsRUFBTyxDQUN4QixNQUFPLEVBSlh6ZSxFQUFBLGdCQUNBQSxFQUFBLGNBQ0FBLEVBQUEsWUFBTyx1QkFHSCxLQUFLLFFBQVU2akIsRUFDZixLQUFLLE1BQVFwRixDQUNyQixDQUNJLFFBQVMsQ0FDTCxNQUFPLENBQ0gsR0FBRyxNQUFNLE9BQVEsRUFDakIsTUFBTyxLQUFLLE1BQU0sT0FBUSxDQUM3QixDQUNULENBQ0ksSUFBSSxTQUFVLENBQ1YsSUFBSTllLEVBQVUsR0FDZCxVQUFXbWtCLEtBQVEsS0FBSyxRQUFRLFFBQ3hCQSxFQUFLLE9BQVMsZ0JBQ2Rua0IsR0FBV21rQixFQUFLLE1BR3hCLE9BQU9ua0IsQ0FDZixDQUNBLENBQ08sTUFBTW9rQixXQUF3QkosRUFBWSxDQUk3QyxZQUFZRSxFQUFTcEYsRUFBTyxDQUN4QixNQUFPLEVBSlh6ZSxFQUFBLGdCQUNBQSxFQUFBLGNBQ0FBLEVBQUEsWUFBTyxrQkFHSCxLQUFLLFFBQVU2akIsRUFDZixLQUFLLE1BQVFwRixDQUNyQixDQUNJLFFBQVMsQ0FDTCxNQUFPLENBQ0gsR0FBRyxNQUFNLE9BQVEsRUFDakIsTUFBTyxLQUFLLE1BQU0sT0FBUSxDQUM3QixDQUNULENBQ0EsQ0FDTyxNQUFNdUYsV0FBOEJMLEVBQVksQ0FLbkQsWUFBWUUsRUFBU3BGLEVBQU92ZCxFQUFRLENBQ2hDLE1BQU8sRUFMWGxCLEVBQUEsZ0JBQ0FBLEVBQUEsY0FDQUEsRUFBQSxlQUNBQSxFQUFBLFlBQU8seUJBR0gsS0FBSyxRQUFVNmpCLEVBQ2YsS0FBSyxNQUFRcEYsRUFDYixLQUFLLE9BQVN2ZCxDQUN0QixDQUNJLFFBQVMsQ0FDTCxNQUFPLENBQ0gsR0FBRyxNQUFNLE9BQVEsRUFDakIsTUFBTyxLQUFLLE1BQU0sT0FBUSxFQUMxQixPQUFRMEUsR0FBYyxLQUFLLE1BQU0sQ0FDcEMsQ0FDVCxDQUNBLENBQ08sTUFBTXFlLFdBQXlCTixFQUFZLENBSTlDLFlBQVlFLEVBQVNwRixFQUFPLENBQ3hCLE1BQU8sRUFKWHplLEVBQUEsZ0JBQ0FBLEVBQUEsY0FDQUEsRUFBQSxZQUFPLGtCQUdILEtBQUssUUFBVTZqQixFQUNmLEtBQUssTUFBUXBGLENBQ3JCLENBQ0ksUUFBUyxDQUNMLE1BQU8sQ0FDSCxHQUFHLE1BQU0sT0FBUSxFQUNqQixNQUFPLEtBQUssTUFBTSxPQUFRLENBQzdCLENBQ1QsQ0FDQSxDQUNPLE1BQU15RixXQUEyQlAsRUFBWSxDQUloRCxZQUFZRSxFQUFTcEYsRUFBTyxDQUN4QixNQUFPLEVBSlh6ZSxFQUFBLGdCQUNBQSxFQUFBLGNBQ0FBLEVBQUEsWUFBTyxxQkFHSCxLQUFLLFFBQVU2akIsRUFDZixLQUFLLE1BQVFwRixDQUNyQixDQUNJLFFBQVMsQ0FDTCxNQUFPLENBQ0gsR0FBRyxNQUFNLE9BQVEsRUFDakIsTUFBTyxLQUFLLE1BQU0sT0FBUSxDQUM3QixDQUNULENBQ0EsQ0FDTyxNQUFNMEYsV0FBNkJSLEVBQVksQ0FLbEQsWUFBWUUsRUFBU08sRUFBYUMsRUFBYSxDQUMzQyxNQUFPLEVBTFhya0IsRUFBQSxnQkFDQUEsRUFBQSxvQkFDQUEsRUFBQSxvQkFDQUEsRUFBQSxZQUFPLHVCQUdILEtBQUssUUFBVTZqQixFQUNmLEtBQUssWUFBY08sRUFDbkIsS0FBSyxZQUFjQyxDQUMzQixDQUNJLFFBQVMsQ0FDTCxNQUFPLENBQ0gsR0FBRyxNQUFNLE9BQVEsRUFDakIsWUFBYSxLQUFLLFlBQVksT0FBUSxFQUN0QyxZQUFhLEtBQUssWUFBWSxPQUFRLENBQ3pDLENBQ1QsQ0FDQSxDQUNPLE1BQU1DLFdBQTRCWCxFQUFZLENBSWpELFlBQVlFLEVBQVNwRixFQUFPLENBQ3hCLE1BQU8sRUFKWHplLEVBQUEsZ0JBQ0FBLEVBQUEsY0FDQUEsRUFBQSxZQUFPLHNCQUdILEtBQUssUUFBVTZqQixFQUNmLEtBQUssTUFBUXBGLENBQ3JCLENBQ0ksUUFBUyxDQUNMLE1BQU8sQ0FDSCxHQUFHLE1BQU0sT0FBUSxFQUNqQixNQUFPLEtBQUssTUFBTSxPQUFRLENBQzdCLENBQ1QsQ0FDQSxDQ3BJTyxTQUFTOEYsR0FBNkJDLEVBQWUsQ0FJeEQsR0FISUEsRUFBYyxPQUFTLFdBR3ZCQSxFQUFjLE9BQVMsWUFDdkIsT0FFSixNQUFNQyxFQUFXRCxFQUFjLFFBQVFBLEVBQWMsUUFBUSxPQUFTLENBQUMsRUFDdkUsR0FBSUMsRUFBUyxPQUFTLGNBR3RCLE9BQU9BLEVBQVMsSUFDcEIsQ0FNTyxTQUFTQyxHQUFjeGpCLEVBQVEsQ0FDbEMsT0FBSUEsRUFBTyxPQUFPLFNBQVcsRUFDbEIsR0FFSHFqQixHQUE2QnJqQixFQUFPLE9BQU9BLEVBQU8sT0FBTyxPQUFTLENBQUMsQ0FBQyxHQUFLLEVBQ3JGLENDeEJPLE1BQU15akIsRUFBdUIsQ0FTaEMsWUFBWS9kLEVBQU0sQ0FSbEI1RyxFQUFBLGFBSUFBLEVBQUEsWUFBTywwQkFLSCxLQUFLLEtBQU80RyxDQUNwQixDQUNBLENBS08sTUFBTWdlLEVBQW1CLENBUTVCLFlBQVlwdkIsRUFBTTFDLEVBQU0sQ0FQeEJrTixFQUFBLGFBQ0FBLEVBQUEsYUFDQUEsRUFBQSxZQUFPLHlCQU1ILEtBQUssS0FBT3hLLEVBQ1osS0FBSyxLQUFPMUMsQ0FDcEIsQ0FDQSxDQUlPLE1BQU0reEIsRUFBMkIsQ0FNcEMsWUFBWXBHLEVBQU8sQ0FMbkJ6ZSxFQUFBLGNBQ0FBLEVBQUEsWUFBTyw4QkFLSCxLQUFLLE1BQVF5ZSxDQUNyQixDQUNBLENDOUJPLFNBQVNxRyxHQUFxQkMsRUFBZXRHLEVBQU94SSxFQUFPK08sRUFBVSxPQUN4RSxNQUFNenVCLEVBQVEsQ0FBRSxFQUNWMHVCLEVBQWMsQ0FBRSxFQUNoQkMsRUFBZSxDQUFFLEVBQ2pCQyxFQUFxQixDQUFFLEVBQ3ZCQyxFQUF5QixDQUFFLEVBQzNCQyxFQUFZLENBQUUsRUFDZEMsRUFBYSxJQUFJLElBQUlOLEVBQVMsSUFBSzNqQixHQUFNLENBQUNBLEVBQUUsU0FBVUEsQ0FBQyxDQUFDLENBQUMsRUFDekRra0IsRUFBYyxJQUFJLElBQUl0UCxFQUFNLE9BQVFOLEdBQU1BLEVBQUUsT0FBUyxVQUFVLEVBQUUsSUFBS0EsR0FBTSxDQUFDQSxFQUFFLEtBQU1BLENBQUMsQ0FBQyxDQUFDLEVBQ3hGNlAsRUFBZXZQLEVBQU0sS0FBTU4sR0FBTUEsRUFBRSxPQUFTLFVBQVUsRUFDdEQ4UCxFQUFhLElBQUksSUFBSXhQLEVBQ3RCLE9BQVFOLEdBQUMsT0FBSyxPQUFBQSxFQUFFLE9BQVMsaUJBQWlCaGQsRUFBQWdkLEVBQUUsZUFBRixZQUFBaGQsRUFBZ0IsUUFBUyxNQUFLLEVBQ3hFLElBQUtnZCxHQUFNQSxDQUFDLEVBQ1osSUFBS0EsR0FBTSxDQUFDQSxFQUFFLGFBQWEsYUFBY0EsQ0FBQyxDQUFDLENBQUMsRUFDakQsVUFBV3pVLEtBQVU2akIsRUFBYyxPQUFRLENBQ3ZDLEdBQUk3akIsRUFBTyxPQUFTLFVBQ1pBLEVBQU8sT0FBUyxhQUNoQjNLLEVBQU0sS0FBSyxJQUFJcXRCLEdBQXFCMWlCLEVBQVF1ZCxDQUFLLENBQUMsVUFHakR2ZCxFQUFPLE9BQVMsbUJBQW9CLENBQ3pDM0ssRUFBTSxLQUFLLElBQUl3dEIsR0FBZ0I3aUIsRUFBUXVkLENBQUssQ0FBQyxFQUM3QyxNQUFNd0QsRUFBVy9nQixFQUFPLEtBRXhCLEdBREFta0IsRUFBVSxLQUFLcEQsQ0FBUSxJQUNuQnRwQixFQUFBdUksRUFBTyxlQUFQLFlBQUF2SSxFQUFxQixRQUFTLHdCQUM5QnVJLEVBQU8sT0FBUyx1QkFBd0IsQ0FFeEMsTUFBTXdrQixFQUFleGtCLEVBQU8sYUFDdEJ5a0IsR0FBaUJELEVBQWEsYUFDOUJFLEdBQWdCSCxFQUFXLElBQUlFLEVBQWMsRUFDbkQsR0FBSSxPQUFPQyxHQUFrQixJQUFhLENBQ3RDLE1BQU10dEIsR0FBVSxlQUFlcXRCLEVBQWMseUJBQXlCbEgsRUFBTSxJQUFJLElBQ2hGLE1BQUFsRyxHQUFzQixDQUNsQixRQUFBamdCLEdBQ0EsS0FBTSxDQUFFLGlCQUFrQnF0QixFQUFnQixDQUNsRSxDQUFxQixFQUNLLElBQUl4bEIsR0FBbUI3SCxFQUFPLENBQ3hELENBR2dCLE1BQU1ncUIsR0FBZSxJQUFJZ0MsR0FBb0IsQ0FDekMsS0FBTSxtQkFFTixLQUFNb0IsRUFBYSxLQUNuQixHQUFJQSxFQUFhLEdBQ2pCLE9BQVEsY0FDUixhQUFBQSxDQUNILEVBQUVqSCxDQUFLLEVBQ1IyRyxFQUF1QixLQUFLLENBQ3hCLFlBQWE5QyxHQUNiLFFBQVNzRCxFQUM3QixDQUFpQixFQUNJQSxHQUFjLGFBQWEsYUFHNUJydkIsRUFBTSxLQUFLK3JCLEVBQVksQ0FFM0MsQ0FDQSxTQUNpQnBoQixFQUFPLE9BQVMsWUFDckIzSyxFQUFNLEtBQUssSUFBSTB0QixHQUFpQi9pQixFQUFRdWQsQ0FBSyxDQUFDLFVBRXpDdmQsRUFBTyxPQUFTLGdCQUFpQixDQUd0QyxHQUZBM0ssRUFBTSxLQUFLLElBQUl3dEIsR0FBZ0I3aUIsRUFBUXVkLENBQUssQ0FBQyxFQUM3QzRHLEVBQVUsS0FBSyxjQUFjLEVBQ3pCLENBQUNHLEVBQ0QsTUFBQWpOLEdBQXNCLENBQ2xCLFFBQVMsMERBQ1QsS0FBTSxDQUNGLFdBQVlrRyxFQUFNLElBQ3JCLENBQ3JCLENBQWlCLEVBQ0ssSUFBSXRlLEdBQW1CLHlEQUF5RCxFQUUxRmdsQixFQUFtQixLQUFLLENBQ3BCLFNBQVVqa0IsRUFDVixTQUFVc2tCLENBQzFCLENBQWEsQ0FDYixDQUNRLEdBQUl0a0IsRUFBTyxPQUFTLGdCQUNoQixTQUVKbWtCLEVBQVUsS0FBS25rQixFQUFPLElBQUksRUFDMUIsTUFBTTRkLEVBQVV3RyxFQUFXLElBQUlwa0IsRUFBTyxJQUFJLEVBQzFDLEdBQUk0ZCxFQUNBdm9CLEVBQU0sS0FBSyxJQUFJMnRCLEdBQW1CaGpCLEVBQVF1ZCxDQUFLLENBQUMsRUFDaER3RyxFQUFZLEtBQUssQ0FDYixTQUFVL2pCLEVBQ1YsUUFBUzRkLENBQ3pCLENBQWEsTUFFQSxDQUNELE1BQU0rRyxFQUFlTixFQUFZLElBQUlya0IsRUFBTyxJQUFJLEVBQ2hELEdBQUksQ0FBQzJrQixFQUNELE1BQUF0TixHQUFzQixDQUNsQixRQUFTLFFBQVFyWCxFQUFPLElBQUksdUJBQXVCdWQsRUFBTSxJQUFJLElBQzdELEtBQU0sQ0FDRixVQUFXdmQsRUFBTyxLQUNsQixXQUFZdWQsRUFBTSxJQUNyQixDQUNyQixDQUFpQixFQUNLLElBQUl0ZSxHQUFtQixRQUFRZSxFQUFPLElBQUksdUJBQXVCdWQsRUFBTSxJQUFJLEdBQUcsRUFFeEZsb0IsRUFBTSxLQUFLLElBQUl3dEIsR0FBZ0I3aUIsRUFBUXVkLENBQUssQ0FBQyxFQUM3Q3lHLEVBQWEsS0FBSyxDQUNkLFNBQVVoa0IsRUFDVixLQUFNMmtCLENBQ3RCLENBQWEsQ0FDYixDQUNBLENBQ0ksTUFBTyxDQUNILFNBQVV0dkIsRUFDVixTQUFVMHVCLEVBQ1YsVUFBV0MsRUFDWCxnQkFBaUJDLEVBQ2pCLG9CQUFxQkMsRUFDckIsVUFBV0MsRUFDWCwwQkFBMkIsQ0FDdkIsT0FBUUosRUFBWSxPQUFTLEdBQ3pCQyxFQUFhLE9BQVMsR0FDdEJFLEVBQXVCLE9BQVMsR0FDaENELEVBQW1CLE9BQVMsQ0FDbkMsQ0FDSixDQUNMLENBQ08sTUFBTVcsR0FBaUIzRixHQUFxQixPQUFRLENBQ3ZEeEwsRUFBUyxDQUNMLEtBQU1FLEVBQVUsbUJBQW1CLEVBQ25DLFNBQVVFLEVBQU8sQ0FDekIsQ0FBSyxFQUNESixFQUFTLENBQ0wsS0FBTUUsRUFBVSx3QkFBd0IsRUFDeEMsT0FBUUQsRUFBVSxDQUMxQixDQUFLLEVBQ0RELEVBQVMsQ0FDTCxLQUFNRSxFQUFVLHFCQUFxQixDQUM3QyxDQUFLLEVBQ0RGLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLHdCQUF3QixFQUN4QyxLQUFNQyxHQUFTRixFQUFVLEVBQUVHLEVBQUssQ0FBRSxDQUMxQyxDQUFLLENBQ0wsQ0FBQyxFQUNELE1BQU1nUixFQUFpQixDQU1uQixZQUlBQyxFQUlBakIsRUFJQWtCLEVBSUFDLEVBSUFDLEVBQVUsQ0F6QlZubUIsRUFBQSxzQkFDQUEsRUFBQSxzQkFDQUEsRUFBQSxxQkFDQUEsRUFBQSxxQkFDQUEsRUFBQSxpQkFzQkksS0FBSyxjQUFnQmdtQixFQUNyQixLQUFLLGNBQWdCakIsRUFDckIsS0FBSyxhQUFla0IsRUFDcEIsS0FBSyxhQUFlQyxFQUNwQixLQUFLLFNBQVdDLENBQ3hCLENBSUksSUFBSSxnQkFBaUIsQ0FDakIsT0FBTyxLQUFLLGFBQWEsT0FBTyxLQUFLLFlBQVksQ0FDekQsQ0FDQSxDQUlPLFNBQVNDLEdBQXFCM0gsRUFBTzRILEVBQWdCQyxFQUFlLENBQ3ZFLE9BQUk3SCxFQUFNLGlCQUFtQjRILEVBQWUsYUFBYTVILENBQUssRUFDbkQsQ0FBRSxHQUFHNkgsRUFBZSxXQUFZLE1BQVcsRUFFL0NBLENBQ1gsQ0FJTyxlQUFlQyxHQUFzQzlILEVBQU91SCxFQUFlUSxFQUFzQkMsRUFBYUMsRUFBbUJDLEVBQVE1bUIsRUFBTyxDQUVuSixNQUFNNm1CLEVBQWtCSixFQUNuQixPQUFRMXpCLEdBQVNBLGFBQWdCd3hCLElBQ2xDLFdBQVl4eEIsRUFBSyxTQUNqQkEsRUFBSyxRQUFRLE9BQVMsZUFBZSxFQUNwQyxJQUFLQSxHQUFTQSxFQUFLLFFBQVEsTUFBTSxFQUVoQyt6QixFQUFtQkgsRUFBa0IsVUFBVSxPQUFRSSxHQUNsREYsRUFBZ0IsU0FBU0UsRUFBSSxTQUFTLE1BQU0sQ0FDdEQsRUFDS0MsRUFBa0IsTUFBTUMsR0FBeUJ2SSxFQUFPb0ksRUFBa0JGLEVBQVE1bUIsQ0FBSyxFQUV2RmtuQixFQUFXRixFQUFnQixJQUFLL2hCLEdBQU1BLEVBQUUsT0FBTyxFQUUvQ2tpQixFQUFrQlIsRUFBa0Isb0JBQW9CLE9BQVFJLEdBQVEsT0FDMUUsT0FBUUEsRUFBSSxZQUFZLE9BQVMsc0JBQzdCQSxFQUFJLFlBQVksUUFBUSxPQUFTLHNCQUNqQ251QixFQUFBbXVCLEVBQUksWUFBWSxRQUFRLGVBQXhCLFlBQUFudUIsRUFBc0MsUUFBUyxzQkFDM0QsQ0FBSyxFQUNELFVBQVdtdUIsS0FBT0ksRUFBaUIsQ0FFL0IsTUFBTUMsRUFBb0JMLEVBQUksWUFBWSxRQUFRLEdBQzVDTSxFQUFXcm5CLEVBQU0sU0FBUyxlQUFlLENBRTNDLFNBQVUrbUIsRUFBSSxZQUFZLFFBQVEsS0FDbEMsT0FBUUssQ0FDcEIsQ0FBUyxFQUNELEdBQUksT0FBT0MsRUFBYSxJQUFhLENBQ2pDLE1BQU0xQixFQUFlLENBQ2pCLFFBQVMwQixFQUNULG9CQUFxQkQsRUFDckIsT0FBUSxNQUNYLEVBRURGLEVBQVMsS0FBSyxJQUFJbEQsR0FBZ0IsQ0FDOUIsS0FBTSxtQkFDTixLQUFNLHdCQUNOLGFBQUEyQixDQUNILEVBQUVqSCxDQUFLLENBQUMsQ0FDckIsQ0FDQSxDQUNJLE1BQU00SSxFQUFrQixNQUFNQyxHQUE2QjdJLEVBQU9zSSxFQUFpQmhuQixDQUFLLEVBR2xGa21CLEVBQWVPLEVBQXFCLE9BQVExekIsR0FDdkMsRUFBRUEsYUFBZ0J3eEIsR0FDNUIsRUFDRCxPQUFJK0MsRUFBZ0IsZUFDaEJWLEVBQU8sS0FBSyxZQUFhNW1CLEVBQU0sU0FBVTBlLEVBQU80SSxFQUFnQixXQUFXLEVBQzNFNUksRUFBTSxLQUFLLFlBQWExZSxFQUFNLFNBQVVzbkIsRUFBZ0IsV0FBVyxFQUM1RCxJQUFJdEIsR0FBaUJDLEVBQWVTLEVBQWFSLEVBQWNnQixFQUFVLENBQzVFLEtBQU0seUJBQ04sT0FBUUksRUFBZ0IsV0FDcEMsQ0FBUyxHQUVJQSxFQUFnQixjQUNkLElBQUl0QixHQUFpQkMsRUFBZVMsRUFBYVIsRUFBY2dCLEVBQVUsQ0FDNUUsS0FBTSx5QkFDTixLQUFNLENBQ0YsY0FBZUksRUFBZ0IsYUFDbEMsQ0FDYixDQUFTLEVBR0UsSUFBSXRCLEdBQWlCQyxFQUFlUyxFQUFhUixFQUFjZ0IsRUFBVSxDQUFFLEtBQU0sc0JBQXVCLENBQ25ILENBSU8sZUFBZU0sR0FBMkI5SSxFQUFPdUgsRUFBZVEsRUFBc0JDLEVBQWFDLEVBQW1CQyxFQUFRNW1CLEVBQU8sQ0FDeEksTUFBTWttQixFQUFlTyxFQUNyQixJQUFJUyxFQUFXUCxFQUFrQixTQUNqQyxLQUFNLENBQUNLLEVBQWlCUyxDQUFlLEVBQUksTUFBTSxRQUFRLElBQUksQ0FDekRSLEdBQXlCdkksRUFBT2lJLEVBQWtCLFVBQVdDLEVBQVE1bUIsQ0FBSyxFQUMxRTBuQixHQUF1QmhKLEVBQU9pSSxFQUFrQixnQkFBaUJDLEVBQVE1bUIsRUFBTSxRQUFRLENBQy9GLENBQUssRUFJRCxHQUhBa25CLEVBQVdBLEVBQVMsT0FBT0YsRUFBZ0IsSUFBSy9oQixHQUFNQSxFQUFFLE9BQU8sQ0FBQyxFQUNoRWlpQixFQUFXQSxFQUFTLE9BQU9PLENBQWUsRUFFdENkLEVBQWtCLG9CQUFvQixPQUFTLEVBQy9DLFVBQVdnQixLQUFtQmhCLEVBQWtCLG9CQUFxQixDQUNqRSxNQUFNaUIsRUFBV0QsRUFBZ0IsUUFDNUIsYUFDQ0UsRUFBY0YsRUFBZ0IsWUFBWSxRQUMzQyxhQUNMLEdBQUlDLEVBQVMsWUFBYSxDQUV0QixNQUFNRSxFQUFpQixNQUFNRixFQUFTLFlBQVk1bkIsRUFBTSxTQUFVMm5CLEVBQWdCLFdBQVcsRUFDdkZJLEVBQXVCLENBQ3pCLFFBQVNELEVBQWUsUUFDeEIsb0JBQXFCRCxFQUFZLEdBQ2pDLE9BQVFDLEVBQWUsTUFDMUIsRUFDRFosRUFBUyxLQUFLLElBQUlsRCxHQUFnQixDQUM5QixLQUFNLG1CQUNOLEtBQU0sd0JBQ04sYUFBYytELENBQ2pCLEVBQUVySixDQUFLLENBQUMsQ0FDekIsS0FDaUIsQ0FFRHdJLEVBQVMsS0FBS1MsRUFBZ0IsV0FBVyxFQUN6QyxNQUFNcEYsRUFBZSxDQUNqQixLQUFNLDJCQUNOLEtBQU1vRixFQUFnQixRQUN0QixRQUFTLElBQUlwRCxHQUFvQixDQUM3QixLQUFNLG1CQUNOLEtBQU1zRCxFQUFZLEtBQ2xCLEdBQUlBLEVBQVksR0FDaEIsVUFBV0EsRUFBWSxVQUN2QixPQUFRLGNBQ1IsYUFBY0EsQ0FDakIsRUFBRW5KLENBQUssQ0FDWCxFQUNEc0ksRUFBZ0IsS0FBS3pFLENBQVksQ0FFakQsQ0FDQSxDQUdJLEdBQUlvRSxFQUFrQixTQUFTLE9BQVMsRUFDcEMsT0FBTyxNQUFNcUIsR0FBb0J0SixFQUFPdUgsRUFBZUMsRUFBY2dCLEVBQVVSLEVBQWFDLEVBQWtCLFNBQVVDLEVBQVE1bUIsRUFBTSxRQUFRLEVBRWxKLE1BQU1zbkIsRUFBa0IsTUFBTUMsR0FBNkI3SSxFQUFPc0ksRUFBaUJobkIsQ0FBSyxFQUN4RixHQUFJc25CLEVBQWdCLGNBQ2hCLE9BQUFWLEVBQU8sS0FBSyxZQUFhNW1CLEVBQU0sU0FBVTBlLEVBQU80SSxFQUFnQixXQUFXLEVBQzNFNUksRUFBTSxLQUFLLFlBQWExZSxFQUFNLFNBQVVzbkIsRUFBZ0IsV0FBVyxFQUM1RCxJQUFJdEIsR0FBaUJDLEVBQWVTLEVBQWFSLEVBQWNnQixFQUFVLENBQzVFLEtBQU0seUJBQ04sT0FBUUksRUFBZ0IsV0FDcEMsQ0FBUyxFQUVBLEdBQUlBLEVBQWdCLGNBQ3JCLE9BQU8sSUFBSXRCLEdBQWlCQyxFQUFlUyxFQUFhUixFQUFjZ0IsRUFBVSxDQUM1RSxLQUFNLHlCQUNOLEtBQU0sQ0FDRixjQUFlSSxFQUFnQixhQUNsQyxDQUNiLENBQVMsRUFHTCxNQUFNVyxFQUFlZixFQUFTLE9BQVFuMEIsR0FBU0EsYUFBZ0I4d0IsRUFBb0IsRUFFN0VxRSxFQUF1QkQsRUFBYSxPQUFTLEVBQzdDekQsR0FBNkJ5RCxFQUFhQSxFQUFhLE9BQVMsQ0FBQyxFQUFFLE9BQU8sRUFDMUUsT0FFTixHQUFJLENBQUNDLEVBQ0QsT0FBTyxJQUFJbEMsR0FBaUJDLEVBQWVTLEVBQWFSLEVBQWNnQixFQUFVLENBQUUsS0FBTSxzQkFBdUIsRUFFbkgsR0FBSXhJLEVBQU0sYUFBZSxRQUNyQixDQUFDaUksRUFBa0IsMkJBQ25CLE9BQU8sSUFBSVgsR0FBaUJDLEVBQWVTLEVBQWFSLEVBQWNnQixFQUFVLENBQzVFLEtBQU0seUJBQ04sT0FBUWdCLENBQ3BCLENBQVMsRUFFQSxHQUFJeEosRUFBTSxhQUFlLFFBQVV3SixFQUFzQixDQUUxRCxLQUFNLENBQUUsT0FBQXR6QixDQUFNLEVBQUtrTSxHQUFnQzRkLEVBQU0sV0FBWSxjQUFjLEVBQzdFLENBQUNqcUIsQ0FBSyxFQUFJLE1BQU1GLEdBQVksSUFBTUssRUFBT3N6QixDQUFvQixDQUFDLEVBQ3BFLEdBQUl6ekIsRUFDQSxNQUFBK2pCLEdBQXNCLENBQ2xCLFFBQVMsc0JBQ1QsS0FBTSxDQUNGLE1BQU8sT0FBTy9qQixDQUFLLENBQ3RCLENBQ2pCLENBQWEsRUFDSyxJQUFJMkwsR0FBbUIscUJBQXFCLEVBRXRELE9BQU8sSUFBSTRsQixHQUFpQkMsRUFBZVMsRUFBYVIsRUFBY2dCLEVBQVUsQ0FBRSxLQUFNLHlCQUEwQixPQUFRZ0IsQ0FBb0IsQ0FBRSxDQUN4SixDQUNJLE9BQU8sSUFBSWxDLEdBQWlCQyxFQUFlUyxFQUFhUixFQUFjZ0IsRUFBVSxDQUFFLEtBQU0sc0JBQXVCLENBQ25ILENBSU8sU0FBU2lCLEdBQXNCQyxFQUFVam5CLEVBQVEsQ0FDcEQsTUFBTyxDQUNILEtBQU0sdUJBQ04sS0FBTWluQixFQUFTLEtBQ2YsT0FBUUEsRUFBUyxPQUNqQixPQUFRLFlBQ1IsT0FBUSxDQUNKLEtBQU0sT0FDTixLQUFNdmlCLEdBQWMxRSxDQUFNLENBQzdCLENBQ0osQ0FDTCxDQUlPLGVBQWU4bEIsR0FBeUJ2SSxFQUFPMkosRUFBVXpCLEVBQVE1bUIsRUFBTyxDQUMzRSxlQUFlc29CLEVBQWNDLEVBQVMsQ0FDbEMsSUFBSUMsRUFBYUQsRUFBUSxTQUFTLFVBVWxDLEdBVElBLEVBQVEsS0FBSyxhQUNUN25CLEdBQVk2bkIsRUFBUSxLQUFLLFVBQVUsRUFDbkNDLEVBQWFELEVBQVEsS0FBSyxXQUFXLE1BQU1DLENBQVUsRUFHckRBLEVBQWEsS0FBSyxNQUFNQSxDQUFVLEdBR3BCLE1BQU1ELEVBQVEsS0FBSyxjQUFjdm9CLEVBQU0sU0FBVXdvQixFQUFZRCxFQUFRLFNBQVMsTUFBTSxFQUN2RixDQUNmLE1BQU1FLEVBQVd6b0IsRUFBTSxTQUFTLGVBQWUsQ0FDM0MsU0FBVXVvQixFQUFRLEtBQUssS0FDdkIsT0FBUUEsRUFBUSxTQUFTLE1BQ3pDLENBQWEsRUFDRCxHQUFJRSxJQUFhLEdBRWIsT0FBTzlLLEdBQWlCLE1BQU8zSCxHQUFTLENBQ3BDLE1BQU0wUyxFQUFXLG1DQUNqQixPQUFBMVMsRUFBSyxTQUFTLENBQ1YsUUFBUzBTLEVBQ1QsS0FBTSxDQUNGLFVBQVdILEVBQVEsS0FBSyxLQUN4QixNQUFPLHNCQUFzQkEsRUFBUSxTQUFTLE1BQU0saUNBQ3ZELENBQ3pCLENBQXFCLEVBQ0R2UyxFQUFLLFNBQVMsT0FBUzBTLEVBQ2hCLENBQ0gsS0FBTSxrQkFDTixLQUFNSCxFQUFRLEtBQ2QsT0FBUUcsRUFDUixRQUFTLElBQUl6RSxHQUFzQmtFLEdBQXNCSSxFQUFRLFNBQVVHLENBQVEsRUFBR2hLLEVBQU9nSyxDQUFRLENBQ3hHLENBQ3JCLEVBQW1CLENBQ0MsS0FBTSxDQUNGLEtBQU1ILEVBQVEsS0FBSyxJQUN0QixDQUNyQixDQUFpQixFQUVMLEdBQUlFLElBQWEsR0FFYixNQUFPLENBQ0gsS0FBTSxvQkFDTixLQUFNRixFQUFRLEtBQ2QsUUFBUyxJQUFJaEUsR0FBb0JnRSxFQUFRLFNBQVU3SixDQUFLLENBQzNELENBRWpCLENBQ1EsT0FBT2YsR0FBaUIsTUFBTzNILEdBQVMsQ0FDaEM0USxFQUFPLE9BQU8sNEJBQ2Q1USxFQUFLLFNBQVMsTUFBUXVTLEVBQVEsU0FBUyxXQUUzQyxHQUFJLENBQ0EzQixFQUFPLEtBQUssbUJBQW9CNW1CLEVBQU0sU0FBVTBlLEVBQU82SixFQUFRLEtBQU0sQ0FDakUsU0FBVUEsRUFBUSxRQUN0QyxDQUFpQixFQUNEN0osRUFBTSxLQUFLLG1CQUFvQjFlLEVBQU0sU0FBVXVvQixFQUFRLEtBQU0sQ0FDekQsU0FBVUEsRUFBUSxRQUN0QyxDQUFpQixFQUNELE1BQU1wckIsRUFBUyxNQUFNb3JCLEVBQVEsS0FBSyxPQUFPdm9CLEVBQU0sU0FBVXVvQixFQUFRLFNBQVMsU0FBUyxFQUU3RWppQixFQUFlVCxHQUFjMUksQ0FBTSxFQUN6QyxPQUFBeXBCLEVBQU8sS0FBSyxpQkFBa0I1bUIsRUFBTSxTQUFVMGUsRUFBTzZKLEVBQVEsS0FBTWppQixFQUFjLENBQUUsU0FBVWlpQixFQUFRLFFBQVEsQ0FBRSxFQUMvRzdKLEVBQU0sS0FBSyxpQkFBa0IxZSxFQUFNLFNBQVV1b0IsRUFBUSxLQUFNamlCLEVBQWMsQ0FBRSxTQUFVaWlCLEVBQVEsUUFBUSxDQUFFLEVBQ25HM0IsRUFBTyxPQUFPLDRCQUNkNVEsRUFBSyxTQUFTLE9BQVMxUCxHQUVwQixDQUNILEtBQU0sa0JBQ04sS0FBTWlpQixFQUFRLEtBQ2QsT0FBUXByQixFQUNSLFFBQVMsSUFBSThtQixHQUFzQmtFLEdBQXNCSSxFQUFRLFNBQVVwckIsQ0FBTSxFQUFHdWhCLEVBQU92aEIsQ0FBTSxDQUNwRyxDQUNqQixPQUNtQjFJLEVBQU8sQ0FDVixNQUFBdWhCLEVBQUssU0FBUyxDQUNWLFFBQVMscUJBQ1QsS0FBTSxDQUNGLFVBQVd1UyxFQUFRLEtBQUssS0FDeEIsTUFBTyxPQUFPOXpCLENBQUssQ0FDdEIsQ0FDckIsQ0FBaUIsRUFDS0EsQ0FDdEIsQ0FDQSxFQUFXLENBQ0MsS0FBTSxDQUNGLEtBQU04ekIsRUFBUSxLQUFLLElBQ3RCLENBQ2IsQ0FBUyxDQUNULENBQ0ksR0FBSSxDQUVBLE9BRGdCLE1BQU0sUUFBUSxJQUFJRixFQUFTLElBQUlDLENBQWEsQ0FBQyxDQUVyRSxPQUNXMXhCLEVBQUcsQ0FDTixNQUFNLElBQUkySixHQUFjLGlDQUFpQzNKLENBQUMsR0FBSUEsRUFBR29KLENBQUssQ0FDOUUsQ0FDQSxDQUtBLGVBQWUyb0IsR0FBZ0NDLEVBQVVSLEVBQVUsQ0FDL0QsTUFBTVMsRUFBU1QsRUFBUyxPQUN4QixJQUFJVSxFQUVKLE9BQVFELEVBQU8sS0FBSSxDQUNmLElBQUssUUFDRCxNQUFNRCxFQUFTLE1BQU1DLEVBQU8sRUFBR0EsRUFBTyxFQUFHQSxFQUFPLE1BQU0sRUFDdEQsTUFDSixJQUFLLGVBQ0QsTUFBTUQsRUFBUyxZQUFZQyxFQUFPLEVBQUdBLEVBQU8sQ0FBQyxFQUM3QyxNQUNKLElBQUssT0FDRCxNQUFNRCxFQUFTLEtBQUtDLEVBQU8sS0FBSyxJQUFLRSxHQUFNLENBQUNBLEVBQUUsRUFBR0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUN0RCxNQUNKLElBQUssV0FDRCxNQUFNSCxFQUFTLFNBQVNDLEVBQU8sSUFBSSxFQUNuQyxNQUNKLElBQUssT0FDRCxNQUFNRCxFQUFTLEtBQUtDLEVBQU8sRUFBR0EsRUFBTyxDQUFDLEVBQ3RDLE1BQ0osSUFBSyxhQUNEQyxFQUFhLE1BQU1GLEVBQVMsV0FBWSxFQUN4QyxNQUNKLElBQUssU0FDRCxNQUFNQSxFQUFTLE9BQU9DLEVBQU8sRUFBR0EsRUFBTyxFQUFHQSxFQUFPLFNBQVVBLEVBQU8sUUFBUSxFQUMxRSxNQUNKLElBQUssT0FDRCxNQUFNRCxFQUFTLEtBQUtDLEVBQU8sSUFBSSxFQUMvQixNQUNKLElBQUssT0FDRCxNQUFNRCxFQUFTLEtBQU0sRUFDckIsS0FLWixDQUtJLEdBSkksT0FBT0UsRUFBZSxLQUl0QixPQUFPRixFQUFTLFlBQWUsYUFDL0JFLEVBQWEsTUFBTUYsRUFBUyxXQUFZLEVBQ3BDLE9BQU9FLEVBQWUsS0FDdEIsT0FBT0EsRUFHZixNQUFNLElBQUksTUFBTSwwQ0FBMEMsQ0FDOUQsQ0FJTyxlQUFlcEIsR0FBdUJoSixFQUFPc0ssRUFBU3BDLEVBQVF4Z0IsRUFBWTZpQixFQUFlLE9BQVcsQ0FDdkcsTUFBTUMsRUFBVUQsR0FBZ0JyakIsRUFDMUJzQyxFQUFVLENBQUUsRUFDbEIsVUFBVzJnQixLQUFVRyxFQUFTLENBQzFCLE1BQU1KLEVBQVdDLEVBQU8sU0FBUyxTQUMzQlQsRUFBV1MsRUFBTyxTQUV4QmpDLEVBQU8sS0FBSyxtQkFBb0J4Z0IsRUFBWXNZLEVBQU9tSyxFQUFPLFNBQVUsQ0FDaEUsU0FBQVQsQ0FDWixDQUFTLEVBQ0csT0FBTzFKLEVBQU0sTUFBUyxZQUN0QkEsRUFBTSxLQUFLLG1CQUFvQnRZLEVBQVl5aUIsRUFBTyxTQUFVLENBQUUsU0FBQVQsRUFBVSxFQUc1RSxJQUFJam5CLEVBQ0osR0FBSSxDQUNBQSxFQUFTLE1BQU13bkIsR0FBZ0NDLEVBQVVSLENBQVEsQ0FDN0UsT0FDZTVlLEVBQUssQ0FDUjBmLEVBQVEsTUFBTSxxQ0FBc0MxZixDQUFHLEVBQ3ZEckksRUFBUyxFQUNyQixDQUVReWxCLEVBQU8sS0FBSyxpQkFBa0J4Z0IsRUFBWXNZLEVBQU9tSyxFQUFPLFNBQVUxbkIsRUFBUSxDQUN0RSxTQUFBaW5CLENBQ1osQ0FBUyxFQUNHLE9BQU8xSixFQUFNLE1BQVMsWUFDdEJBLEVBQU0sS0FBSyxpQkFBa0J0WSxFQUFZeWlCLEVBQU8sU0FBVTFuQixFQUFRLENBQzlELFNBQUFpbkIsQ0FDaEIsQ0FBYSxFQUdMLE1BQU1lLEVBQVdob0IsRUFBUyx5QkFBeUJBLENBQU0sR0FBSyxHQUN4RDJpQixFQUFVLENBQ1osS0FBTSx1QkFDTixPQUFRc0UsRUFBUyxPQUNqQixPQUFRLENBQUUsS0FBTSxzQkFBdUIsS0FBTWUsQ0FBVSxDQUMxRCxFQUNEamhCLEVBQVEsS0FBSyxJQUFJK2IsR0FBc0JILEVBQVNwRixFQUFPeUssQ0FBUSxDQUFDLENBQ3hFLENBQ0ksT0FBT2poQixDQUNYLENBSU8sZUFBZThmLEdBQW9CdEosRUFBT3VILEVBQWVDLEVBQWNDLEVBQWNPLEVBQWF4QixFQUFhMEIsRUFBUXhnQixFQUFZLENBRXRJLEdBREErZixFQUFlLENBQUMsR0FBR0EsQ0FBWSxFQUMzQmpCLEVBQVksU0FBVyxFQUN2QnRmLE9BQUFBLEVBQU8sS0FBSyw2RkFBNkYsRUFDbEcsSUFBSW9nQixHQUFpQkMsRUFBZVMsRUFBYVIsRUFBY0MsRUFBYyxDQUFFLEtBQU0sc0JBQXVCLEVBRXZILEdBQUlqQixFQUFZLE9BQVMsRUFBRyxDQUV4QixNQUFNVCxFQUFnQixpREFDdEIsUUFBUzl4QixFQUFJLEVBQUdBLEVBQUl1eUIsRUFBWSxPQUFRdnlCLElBQ3BDd3pCLEVBQWEsS0FBSyxJQUFJbEMsR0FBc0JrRSxHQUFzQmpELEVBQVl2eUIsQ0FBQyxFQUFFLFNBQVU4eEIsQ0FBYSxFQUFHL0YsRUFBTytGLENBQWEsQ0FBQyxDQUU1SSxDQUNJLE1BQU0yRSxFQUFnQmxFLEVBQVksQ0FBQyxFQUNuQyxPQUFPckgsR0FBZ0IsTUFBT3dMLEdBQWdCLENBQzFDLE1BQU10SyxFQUFVcUssRUFBYyxRQUN4QkUsRUFBVyxNQUFNdkssRUFBUSxnQkFBZ0IzWSxFQUFZZ2pCLEVBQWMsU0FBUyxTQUFTLEVBRTNGLEdBREFDLEVBQVksU0FBUyxTQUFXQyxFQUFTLEtBQ3JDcEUsRUFBWSxPQUFTLEVBQUcsQ0FDeEIsTUFBTXFFLEVBQWtCckUsRUFBWSxJQUFLNWpCLEdBQU1BLEVBQUUsUUFBUSxTQUFTLEVBQ2xFK25CLEVBQVksU0FBUyxDQUNqQixRQUFTLDhCQUNULEtBQU0sQ0FDRixpQkFBa0JFLENBQ3JCLENBQ2pCLENBQWEsQ0FDYixDQUNRcEQsRUFBYSxLQUFLLElBQUkvQixHQUFxQitELEdBQXNCaUIsRUFBYyxTQUFVM0ssR0FBbUI2SyxDQUFRLENBQUMsRUFBRzVLLEVBQU80SyxDQUFRLENBQUMsRUFDeEkxQyxFQUFPLEtBQUssZ0JBQWlCeGdCLEVBQVlzWSxFQUFPNEssQ0FBUSxFQUN4RDVLLEVBQU0sS0FBSyxnQkFBaUJ0WSxFQUFZa2pCLENBQVEsRUFDaEQsTUFBTUUsRUFBY3pLLEVBQVEsYUFBZTZILEVBQU8sT0FBTyxtQkFDekQsR0FBSTRDLEVBQWEsQ0FDYjVqQixFQUFPLE1BQU0sOEJBQThCLEVBQ3ZDLE9BQU80akIsR0FBZ0IsWUFDdkJILEVBQVksU0FBUyxDQUNqQixRQUFTLHVCQUNULEtBQU0sQ0FDRixRQUFTLGNBQ1osQ0FDckIsQ0FBaUIsRUFFTCxNQUFNSSxFQUFtQixDQUNyQixhQUFjLE1BQU0sUUFBUXhELENBQWEsRUFDbkMsQ0FBQyxHQUFHQSxDQUFhLEVBQ2pCQSxFQUNOLGdCQUFpQixDQUFDLEdBQUdDLENBQVksRUFDakMsU0FBVSxDQUFDLEdBQUdDLENBQVksQ0FDN0IsRUFDS3h2QixFQUFXNnlCLEVBQVlDLENBQWdCLEVBQzdDeEQsRUFBZ0J0dkIsRUFBUyxhQUN6QnV2QixFQUFldnZCLEVBQVMsZ0JBQ3hCd3ZCLEVBQWV4dkIsRUFBUyxRQUNwQyxDQUNRLE9BQU8sSUFBSXF2QixHQUFpQkMsRUFBZVMsRUFBYVIsRUFBY0MsRUFBYyxDQUFFLEtBQU0sb0JBQXFCLFNBQUFtRCxFQUFVLENBQ25JLEVBQU8sQ0FDQyxLQUFNLENBQ0YsV0FBWTVLLEVBQU0sSUFDckIsQ0FDVCxDQUFLLENBQ0wsQ0FDQSxNQUFNZ0wsR0FBbUIsQ0FDckIsY0FBZSxHQUNmLGNBQWUsTUFDbkIsRUFJTyxlQUFlbkMsR0FBNkI3SSxFQUFPaUwsRUFBYTNwQixFQUFPLENBQzFFLEdBQUkycEIsRUFBWSxTQUFXLEVBQ3ZCLE9BQU9ELEdBRVgsTUFBTUUsRUFBZ0JELEVBQ2pCLE9BQVExa0IsR0FBTUEsRUFBRSxtQkFBbUJzZixFQUFtQixFQUN0RCxJQUFLdGYsR0FBTUEsRUFBRSxPQUFPLEVBQ3pCLEdBQUkya0IsRUFBYyxPQUFTLEVBQ3ZCLE1BQU8sQ0FDSCxjQUFlLEdBQ2YsY0FBZSxHQUNmLGNBQUFBLENBQ0gsRUFFTCxHQUFJbEwsRUFBTSxrQkFBb0IsZ0JBQzFCLE9BQU9nTCxHQUVYLE1BQU1HLEVBQWtCRixFQUFZLENBQUMsRUFDckMsR0FBSWpMLEVBQU0sa0JBQW9CLHFCQUMxQixPQUFJbUwsR0FBQSxZQUFBQSxFQUFpQixRQUFTLGtCQUVuQixDQUNILGNBQWUsR0FDZixjQUFlLE9BQ2YsWUFKaUJoa0IsR0FBY2drQixFQUFnQixNQUFNLENBS3hELEVBRUVILEdBRVgsTUFBTUksRUFBa0JwTCxFQUFNLGdCQUM5QixHQUFJLE9BQU9vTCxHQUFvQixTQUFVLENBQ3JDLE1BQU1DLEVBQWVKLEVBQVksS0FBTTFrQixHQUFNNmtCLEVBQWdCLGdCQUFnQixTQUFTN2tCLEVBQUUsS0FBSyxJQUFJLENBQUMsRUFDbEcsT0FBSThrQixHQUFBLFlBQUFBLEVBQWMsUUFBUyxrQkFFaEIsQ0FDSCxjQUFlLEdBQ2YsY0FBZSxPQUNmLFlBSmlCbGtCLEdBQWNra0IsRUFBYSxNQUFNLENBS3JELEVBRUVMLEVBQ2YsQ0FDSSxHQUFJLE9BQU9JLEdBQW9CLFdBQzNCLE9BQU9BLEVBQWdCOXBCLEVBQU0sU0FBVTJwQixDQUFXLEVBRXRELE1BQU0sSUFBSXRwQixFQUFVLDRCQUE0QnlwQixDQUFlLEdBQUk5cEIsQ0FBSyxDQUM1RSxDQUNPLFNBQVNncUIsR0FBbUI3c0IsRUFBUXdRLEVBQU0sQ0FDN0MsVUFBVzVhLEtBQVE0YSxFQUFLLGFBQWMsQ0FDbEMsSUFBSXNjLEVBQ0osR0FBSWwzQixhQUFnQjh3QixHQUNoQm9HLEVBQVcsaUNBRU5sM0IsYUFBZ0JveEIsR0FDckI4RixFQUFXLDRCQUVObDNCLGFBQWdCcXhCLEdBQ3JCNkYsRUFBVywyQkFFTmwzQixhQUFnQml4QixHQUNyQmlHLEVBQVcsc0JBRU5sM0IsYUFBZ0JreEIsR0FDckJnRyxFQUFXLHNCQUVObDNCLGFBQWdCbXhCLEdBQ3JCK0YsRUFBVyxpQ0FFTmwzQixhQUFnQnd4QixHQUNyQjBGLEVBQVcsOEJBRVYsQ0FDRHJrQixFQUFPLEtBQUssc0JBQXVCN1MsQ0FBSSxFQUN2QyxRQUNaLENBQ1FvSyxFQUFPLFNBQVMsSUFBSTBuQixHQUFtQm9GLEVBQVVsM0IsQ0FBSSxDQUFDLENBQzlELENBQ0EsQ0FDTyxNQUFNbTNCLEVBQW9CLENBQTFCLGNBQ0h0VCxFQUFBLEtBQUF1VCxHQUFnQixJQUFJLEtBQ3BCLFdBQVd6TCxFQUFPbkosRUFBVyxDQUN6QndCLEVBQUEsS0FBS29ULElBQWMsSUFBSXpMLEVBQU9uSixDQUFTLENBQy9DLENBQ0ksYUFBYW1KLEVBQU8sQ0FDaEIsT0FBTzNILEVBQUEsS0FBS29ULElBQWMsSUFBSXpMLENBQUssQ0FDM0MsQ0FDSSxRQUFTLENBQ0wsT0FBTyxPQUFPLFlBQVksTUFBTSxLQUFLM0gsRUFBQSxLQUFLb1QsSUFBYyxRQUFPLENBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQ3pMLEVBQU9uSixDQUFTLElBQzlFLENBQUNtSixFQUFNLEtBQU1uSixDQUFTLENBQ2hDLENBQUMsQ0FDVixDQUNBLENBWkk0VSxHQUFBLFlDNXRCRyxNQUFNQyxHQUF5QixNQUNoQ0MsR0FBaUJ2VixFQUFVc1YsRUFBc0IsRUFDakRFLEdBQXdCMVYsRUFBUyxDQUNuQyxLQUFNQyxFQUFVLENBQ3BCLENBQUMsRUFnQkswVixHQWZxQjNWLEVBQVMsQ0FDaEMsT0FBUUUsRUFBVSxZQUFZLEVBQzlCLEdBQUlELEVBQVUsRUFDZCxTQUFVQSxFQUFVLEVBQ3BCLFVBQVdBLEVBQVUsRUFBQyxTQUFVLEVBQ2hDLFdBQVlBLEVBQVUsRUFBQyxTQUFVLEVBQ2pDLFNBQVVBLEVBQVUsRUFBQyxTQUFVLEVBQy9CLE1BQU8yVixFQUNLLENBQ1IsUUFBUzNWLEVBQVUsRUFDbkIsS0FBTUUsR0FBU0YsRUFBUSxFQUFJRyxFQUFPLENBQUEsRUFBRSxTQUFVLENBQ2pELENBQUEsRUFDSSxTQUFVLEVBQ2YsVUFBV0QsR0FBU0YsRUFBVSxFQUFFRyxFQUFLLENBQUUsQ0FDM0MsQ0FBQyxFQUN5QyxPQUFPLENBQzdDLGNBQWV5VixHQUFPLElBQU1GLEVBQWMsRUFBRSxTQUFVLENBQzFELENBQUMsRUFDS0csR0FBYzlWLEVBQVMsQ0FDekIsU0FBVXlMLEVBQVUsRUFDcEIsWUFBYUEsRUFBVSxFQUN2QixhQUFjQSxFQUFVLEVBQ3hCLFlBQWFBLEVBQVUsQ0FDM0IsQ0FBQyxFQUNLc0ssR0FBc0IvVixFQUFTLENBQ2pDLE1BQU84VixHQUNQLE9BQVF6VixFQUFRMlYsRUFBd0IsRUFDeEMsV0FBWS9WLEVBQVUsRUFBQyxTQUFVLEVBQ2pDLGFBQWNFLEdBQVNGLEVBQVEsRUFBSUcsRUFBTyxDQUFBLEVBQUUsU0FBVSxDQUMxRCxDQUFDLEVBQ0s2VixHQUFhekssR0FBcUIsT0FBUSxDQUM1Q3hMLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLHFCQUFxQixFQUNyQyxRQUFTZ1csR0FDVCxNQUFPUixFQUNmLENBQUssRUFDRDFWLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLGdCQUFnQixFQUNoQyxRQUFTaVcsR0FBc0IsR0FBR0MsRUFBMkIsRUFDN0QsTUFBT1YsRUFDZixDQUFLLEVBQ0QxVixFQUFTLENBQ0wsS0FBTUUsRUFBVSx1QkFBdUIsRUFDdkMsUUFBU21XLEdBQ1QsTUFBT1gsR0FDUCxPQUFRelYsRUFBVSxDQUMxQixDQUFLLEVBQ0RELEVBQVMsQ0FDTCxLQUFNRSxFQUFVLGdCQUFnQixFQUNoQyxRQUFTb1csR0FDVCxNQUFPWixFQUNmLENBQUssRUFDRDFWLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLG1CQUFtQixFQUNuQyxRQUFTcVcsR0FDVCxNQUFPYixFQUNmLENBQUssRUFDRDFWLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLHFCQUFxQixFQUNyQyxRQUFTbVcsR0FDVCxZQUFhWCxHQUNiLFlBQWFBLEVBQ3JCLENBQUssRUFDRDFWLEVBQVMsQ0FDTCxLQUFNRSxFQUFVLG9CQUFvQixFQUNwQyxRQUFTcVcsR0FBMEIsR0FBR0gsRUFBMkIsRUFDakUsTUFBT1YsRUFDZixDQUFLLENBQ0wsQ0FBQyxFQUNLYyxHQUF3QnhXLEVBQVMsQ0FDbkMsT0FBUUUsRUFBVSxPQUFPLEVBQ3pCLEdBQUlELEVBQVUsRUFDZCxjQUFlQSxFQUFVLEVBQ3pCLFNBQVVBLEVBQVUsRUFBQyxTQUFVLEVBQy9CLFNBQVVFLEdBQVNGLEVBQVUsRUFBRUcsRUFBSyxDQUFFLENBQzFDLENBQUMsRUFDS3FXLEdBQW9DelcsRUFBUyxDQUMvQyxTQUFVSyxFQUFRNFYsRUFBVSxFQUM1QixVQUFXNVYsRUFBUUosR0FBVSxFQUM3QixTQUFVSSxFQUFRTCxFQUFTLENBQ3ZCLFNBQVVJLEVBQU8sRUFDakIsUUFBU0EsRUFBTyxDQUN4QixDQUFLLENBQUMsRUFDRixVQUFXQyxFQUFRTCxFQUFTLENBQ3hCLFNBQVVJLEVBQU8sRUFDakIsS0FBTUEsRUFBTyxDQUNyQixDQUFLLENBQUMsRUFDRixnQkFBaUJDLEVBQVFMLEVBQVMsQ0FDOUIsU0FBVUksRUFBTyxFQUNqQixTQUFVQSxFQUFPLENBQ3pCLENBQUssQ0FBQyxFQUNGLG9CQUFxQnNXLEVBQ1YxVyxFQUFTLENBQ2hCLFlBQWFBLEVBQVMsQ0FFbEIsUUFBU0EsRUFBUyxDQUNkLEtBQU1FLEVBQVUsa0JBQWtCLEVBQ2xDLEtBQU1ELEVBQVUsRUFDaEIsVUFBV0EsRUFBVSxFQUFDLFNBQVUsRUFDaEMsT0FBUUEsRUFBVSxFQUFDLFNBQVUsRUFDN0IsT0FBUUEsRUFBVSxFQUFDLFNBQVUsRUFFN0IsYUFBY0UsR0FBU0YsRUFBVSxFQUFFRyxFQUFLLENBQUUsRUFBRSxTQUFVLEVBQUMsU0FBVSxDQUNqRixDQUFhLENBQ2IsQ0FBUyxFQUVELFFBQVNKLEVBQVMsQ0FDZCxLQUFNRSxFQUFVLGFBQWEsRUFDN0IsS0FBTUEsRUFBVSxZQUFZLEVBQzVCLGFBQWNDLEdBQVNGLEVBQVUsRUFBRUcsRUFBSyxDQUFFLENBQ3RELENBQVMsQ0FDVCxDQUFLLENBQUMsRUFDRyxTQUFVLENBQ25CLENBQUMsRUFDS3VXLEdBQWdDM1csRUFBUyxDQUMzQyxrQkFBbUJNLEdBQVcsRUFDOUIsV0FBWUYsRUFBTyxDQUN2QixDQUFDLEVBQ0t3VyxHQUE2QjVXLEVBQVMsQ0FDeEMsVUFBV0EsRUFBUyxDQUNoQixLQUFNRSxFQUFVLE9BQU8sRUFDdkIsS0FBTUQsRUFBVSxDQUN4QixDQUFLLEVBQ0QsT0FBUTBXLEVBQ1osQ0FBQyxFQUNLRSxHQUE4QjdXLEVBQVMsQ0FDekMsVUFBV0EsRUFBUyxDQUNoQixLQUFNRSxFQUFVLFFBQVEsRUFDeEIsS0FBTUQsRUFBVSxDQUN4QixDQUFLLEVBQ0QsWUFBYUcsRUFBTyxFQUNwQixNQUFPc1YsR0FDUCxPQUFRaUIsRUFDWixDQUFDLEVBQ1lHLEdBQXFCOVcsRUFBUyxDQUN2QyxlQUFBeVYsR0FDQSxZQUFhaEssRUFBVSxFQUN2QixhQUFjaUssR0FDZCxjQUFlelYsRUFBVSxFQUFDLEdBQUdJLEVBQVEwVyxFQUFrQixDQUFDLEVBQ3hELGVBQWdCMVcsRUFBUTBWLEVBQW1CLEVBQzNDLFFBQVMvVixFQUFTLENBQ2QsTUFBTzhWLEdBQ1AsVUFBVzNWLEdBQVNGLEVBQVUsRUFBRUQsRUFBUyxDQUNyQyxTQUFVSyxFQUFRSixFQUFRLENBQUUsRUFBRSxHQUFHSyxHQUFTLENBQUUsRUFDNUMsU0FBVUQsRUFBUUosRUFBUSxDQUFFLEVBQUUsR0FBR0ssR0FBUyxDQUFFLENBQ3hELENBQVMsQ0FBQyxFQUNGLFFBQVNILEdBQVNGLEVBQVUsRUFBRUcsRUFBSyxDQUFFLENBQzdDLENBQUssRUFDRCxlQUFnQkQsR0FBU0YsRUFBUSxFQUFJSSxFQUFRSixFQUFVLENBQUEsQ0FBQyxFQUN4RCxTQUFVd0wsRUFBVSxFQUNwQixpQkFBa0JrSyxHQUFlLFNBQVUsRUFBQyxTQUFVLEVBQ3RELGlCQUFrQnJWLEdBQVcsRUFDN0Isc0JBQXVCRCxFQUFRdVcsRUFBMEIsRUFDekQsdUJBQXdCdlcsRUFBUXdXLEVBQTJCLEVBQzNELFlBQWExRixHQUFlLFNBQVUsRUFDdEMsa0JBQW1CNEUsR0FBb0IsU0FBVSxFQUNqRCxlQUFnQjFWLEVBQVE0VixFQUFVLEVBQ2xDLHNCQUF1QlEsR0FBa0MsU0FBVSxFQUNuRSxNQUFPRCxHQUFzQixTQUFVLENBQzNDLENBQUMsRUFTTSxNQUFNUSxFQUFTLENBaUVsQixZQUFZN2xCLEVBQVNrZ0IsRUFBZTRGLEVBQWVDLEVBQVUsQ0E3RDdEN3JCLEVBQUEsb0JBQWUsR0FJZkEsRUFBQSxzQkFJQUEsRUFBQSx1QkFJQUEsRUFBQSx3QkFJQUEsRUFBQSwwQkFJQUEsRUFBQSxpQkFJQUEsRUFBQSx3QkFJQUEsRUFBQSx3QkFJQUEsRUFBQSxrQkFJQUEsRUFBQSx5QkFBb0IsSUFJcEJBLEVBQUEsMEJBSUFBLEVBQUEsK0JBSUFBLEVBQUEsZ0NBSUFBLEVBQUEscUJBSUFBLEVBQUEsK0JBSUFBLEVBQUEsY0FBUyxNQUVMLEtBQUssU0FBVzhGLEVBQ2hCLEtBQUssZUFBaUIsZ0JBQWdCa2dCLENBQWEsRUFDbkQsS0FBSyxnQkFBa0IsQ0FBRSxFQUN6QixLQUFLLGtCQUFvQixPQUN6QixLQUFLLGNBQWdCNEYsRUFDckIsS0FBSyxnQkFBa0IsSUFBSTNCLEdBQzNCLEtBQUssZ0JBQWtCLENBQUUsRUFDekIsS0FBSyxVQUFZNEIsRUFDakIsS0FBSyx1QkFBeUIsQ0FBRSxFQUNoQyxLQUFLLHdCQUEwQixDQUFFLEVBQ2pDLEtBQUssT0FBU2hVLEdBQWlCLENBQ3ZDLENBSUksa0JBQW1CLE9BQ2YsUUFBSWxmLEVBQUEsS0FBSyxlQUFMLFlBQUFBLEVBQW1CLFFBQVMseUJBQ3JCLENBQUUsRUFFTixLQUFLLGFBQWEsS0FBSyxhQUN0QyxDQWFJLFFBQVEycEIsRUFBY3R0QixFQUFVLENBQUUsY0FBZSxFQUFLLEVBQUksQ0FDdEQsS0FBSyxTQUFTLFlBQVlzdEIsRUFBY3R0QixDQUFPLENBQ3ZELENBYUksT0FBT3N0QixFQUFjdHRCLEVBQVUsQ0FBRSxhQUFjLEVBQUssRUFBSSxDQUNwRCxLQUFLLFNBQVMsV0FBV3N0QixFQUFjdHRCLENBQU8sQ0FDdEQsQ0FTSSxRQUFTLE9BQ0wsTUFBTWtNLEVBQVMsQ0FDWCxlQUFnQmlwQixHQUNoQixZQUFhLEtBQUssYUFDbEIsYUFBYyxDQUNWLEtBQU0sS0FBSyxjQUFjLElBQzVCLEVBQ0QsY0FBZSxLQUFLLGVBQ3BCLGVBQWdCLEtBQUssZ0JBQWdCLElBQUsxQixJQUMvQixDQUNILE1BQU8sQ0FDSCxTQUFVQSxFQUFTLE1BQU0sU0FDekIsWUFBYUEsRUFBUyxNQUFNLFlBQzVCLGFBQWNBLEVBQVMsTUFBTSxhQUM3QixZQUFhQSxFQUFTLE1BQU0sV0FDL0IsRUFDRCxPQUFRQSxFQUFTLE9BQ2pCLFdBQVlBLEVBQVMsV0FDckIsYUFBY0EsRUFBUyxZQUMxQixFQUNKLEVBQ0QsUUFBUyxLQUFLLFNBQVMsT0FBUSxFQUMvQixlQUFnQixLQUFLLGdCQUFnQixPQUFRLEVBQzdDLFNBQVUsS0FBSyxVQUNmLGtCQUFrQjl2QixFQUFBLEtBQUssb0JBQUwsWUFBQUEsRUFBd0IsU0FDMUMsaUJBQWtCLEtBQUssa0JBQ3ZCLHNCQUF1QixLQUFLLHVCQUM1Qix1QkFBd0IsS0FBSyx3QkFBd0IsSUFBS3FNLElBQU8sQ0FDN0QsR0FBR0EsRUFDSCxNQUFPQSxFQUFFLE1BQU0sT0FBUSxDQUN2QyxFQUFjLEVBQ0YsWUFBYSxLQUFLLGFBQ2xCLGtCQUFtQixLQUFLLGtCQUN4QixlQUFnQixLQUFLLGdCQUFnQixJQUFLbFMsR0FBU0EsRUFBSyxRQUFRLEVBQ2hFLHNCQUF1QixLQUFLLHVCQUM1QixNQUFPLEtBQUssT0FBUyxLQUFLLE9BQU8sT0FBTSxFQUFLLElBQy9DLEVBRUtzVCxFQUFTcWxCLEdBQW1CLFVBQVV2cUIsQ0FBTSxFQUNsRCxHQUFJLENBQUNrRixFQUFPLFFBQ1IsTUFBTSxJQUFJbkcsR0FBWSxrQ0FBa0NtRyxFQUFPLE1BQU0sT0FBTyxFQUFFLEVBRWxGLE9BQU9BLEVBQU8sSUFDdEIsQ0FTSSxVQUFXLENBQ1AsT0FBTyxLQUFLLFVBQVUsS0FBSyxPQUFNLENBQUUsQ0FDM0MsQ0FPSSxhQUFhLFdBQVcwbEIsRUFBY2pxQixFQUFLLGVBQ3ZDLEtBQU0sQ0FBQ2txQixFQUFjQyxDQUFVLEVBQUksTUFBTTEzQixHQUFZLElBQU0sS0FBSyxNQUFNdU4sQ0FBRyxDQUFDLEVBQzFFLEdBQUlrcUIsRUFDQSxNQUFNLElBQUkzckIsRUFBVSw4QkFBOEIyckIsYUFBd0IsTUFBUUEsRUFBYSxRQUFVLE9BQU9BLENBQVksQ0FBQyxFQUFFLEVBRW5JLE1BQU1FLEVBQXVCRCxFQUFXLGVBQ3hDLEdBQUksQ0FBQ0MsRUFDRCxNQUFNLElBQUk3ckIsRUFBVSxxQ0FBcUMsRUFFN0QsR0FBSTZyQixJQUF5QjlCLEdBQ3pCLE1BQU0sSUFBSS9wQixFQUFVLDRCQUE0QjZyQixDQUFvQix5Q0FBeUM5QixFQUFzQixFQUFFLEVBRXpJLE1BQU0rQixFQUFZVCxHQUFtQixNQUFNLEtBQUssTUFBTTVwQixDQUFHLENBQUMsRUFDcERzcUIsRUFBV0MsR0FBY04sQ0FBWSxFQUlyQ2htQixFQUFVLElBQUlnYyxHQUFXb0ssRUFBVSxRQUFRLE9BQU8sRUFDeERwbUIsRUFBUSxrQkFBa0JvbUIsRUFBVSxRQUFRLFNBQVMsRUFJckQsTUFBTUcsRUFBZUYsRUFBUyxJQUFJRCxFQUFVLGFBQWEsSUFBSSxFQUM3RCxHQUFJLENBQUNHLEVBQ0QsTUFBTSxJQUFJanNCLEVBQVUsU0FBUzhyQixFQUFVLGFBQWEsSUFBSSxZQUFZLEVBRXhFLE1BQU1uc0IsRUFBUSxJQUFJNHJCLEdBQVM3bEIsRUFBUyxHQUFJdW1CLEVBQWNILEVBQVUsUUFBUSxFQUN4RW5zQixFQUFNLGFBQWVtc0IsRUFBVSxZQUUvQm5zQixFQUFNLGdCQUFrQixJQUFJa3FCLEdBQzVCLFNBQVcsQ0FBQ3FDLEVBQVdoWCxDQUFTLElBQUssT0FBTyxRQUFRNFcsRUFBVSxjQUFjLEVBQ3hFbnNCLEVBQU0sZ0JBQWdCLFdBQVdvc0IsRUFBUyxJQUFJRyxDQUFTLEVBQUdoWCxDQUFTLEVBR3ZFLEdBQUk0VyxFQUFVLGlCQUFrQixDQUN2QkEsRUFBVSxPQUNYdm1CLEVBQU8sS0FBSywwQ0FBMEMsRUFFMUQsTUFBTXFTLEVBQVFHLEdBQXdCLEVBQUMsWUFBWSxDQUMvQyxTQUFTeGYsRUFBQXV6QixFQUFVLFFBQVYsWUFBQXZ6QixFQUFpQixHQUMxQixNQUFNRCxFQUFBd3pCLEVBQVUsUUFBVixZQUFBeHpCLEVBQWlCLGNBQ3ZCLFVBQVNrRCxFQUFBc3dCLEVBQVUsUUFBVixZQUFBdHdCLEVBQWlCLFdBQVksT0FDdEMsVUFBVUUsRUFBQW93QixFQUFVLFFBQVYsWUFBQXB3QixFQUFpQixRQUMzQyxDQUFhLEVBQ0RpRSxFQUFNLGtCQUFvQndzQixHQUFnQnZVLEVBQU9rVSxFQUFVLGdCQUFnQixFQUMzRW5zQixFQUFNLE9BQVNpWSxDQUMzQixDQUNRLE9BQUFqWSxFQUFNLGtCQUFvQm1zQixFQUFVLGlCQUNwQ25zQixFQUFNLHVCQUNGbXNCLEVBQVUsc0JBQ2Ruc0IsRUFBTSx3QkFBMEJtc0IsRUFBVSx1QkFBdUIsSUFBS2xuQixJQUFPLENBQ3pFLEdBQUdBLEVBQ0gsTUFBT21uQixFQUFTLElBQUlubkIsRUFBRSxNQUFNLElBQUksQ0FDNUMsRUFBVSxFQUNGakYsRUFBTSxhQUFlbXNCLEVBQVUsWUFDL0Juc0IsRUFBTSxlQUFpQm1zQixFQUFVLGNBQ2pDbnNCLEVBQU0sZ0JBQWtCbXNCLEVBQVUsZUFBZSxJQUFJTSxFQUF3QixFQUM3RXpzQixFQUFNLGtCQUFvQm1zQixFQUFVLGtCQUM5Qk0sR0FBeUJOLEVBQVUsaUJBQWlCLEVBQ3BELE9BQ05uc0IsRUFBTSxnQkFBa0Jtc0IsRUFBVSxlQUFlLElBQUtwNUIsR0FBUzI1QixHQUFnQjM1QixFQUFNcTVCLENBQVEsQ0FBQyxFQUM5RnBzQixFQUFNLHVCQUF5Qm1zQixFQUFVLHNCQUNuQyxNQUFNUSxHQUE2QlAsRUFBVXBzQixFQUFNLGNBQWVtc0IsRUFBVSxxQkFBcUIsRUFDakcsU0FDRlMsRUFBQVQsRUFBVSxjQUFWLFlBQUFTLEVBQXVCLFFBQVMsc0JBQ2hDNXNCLEVBQU0sYUFBZSxDQUNqQixLQUFNLG9CQUNOLFNBQVVvc0IsRUFBUyxJQUFJRCxFQUFVLFlBQVksU0FBUyxJQUFJLENBQzdELEdBRUVuc0IsQ0FDZixDQUNBLENBSU8sU0FBU3FzQixHQUFjTixFQUFjLENBQ3hDLE1BQU1ua0IsRUFBTSxJQUFJLElBQ1ZpbEIsRUFBUSxDQUFDZCxDQUFZLEVBQzNCLEtBQU9jLEVBQU0sT0FBUyxHQUFHLENBQ3JCLE1BQU1QLEVBQWVPLEVBQU0sTUFBTyxFQUNsQyxHQUFJLENBQUFqbEIsRUFBSSxJQUFJMGtCLEVBQWEsSUFBSSxFQUc3QixDQUFBMWtCLEVBQUksSUFBSTBrQixFQUFhLEtBQU1BLENBQVksRUFDdkMsVUFBV3ZOLEtBQVd1TixFQUFhLFNBQzNCdk4sYUFBbUIrTixHQUNkbGxCLEVBQUksSUFBSW1YLEVBQVEsSUFBSSxHQUNyQjhOLEVBQU0sS0FBSzlOLENBQU8sRUFHakJBLEVBQVEsUUFDUm5YLEVBQUksSUFBSW1YLEVBQVEsTUFBTSxJQUFJLEdBQzNCOE4sRUFBTSxLQUFLOU4sRUFBUSxLQUFLLEdBSTVDLENBQ0ksT0FBT25YLENBQ1gsQ0FJTyxTQUFTNGtCLEdBQWdCdlUsRUFBTzhVLEVBQWdCLENBQ25ELE1BQU1DLEVBQVdELEVBQWUsVUFDMUJFLEVBQWVGLEVBQWUsY0FDOUJQLEdBQWdCdlUsRUFBTzhVLEVBQWUsYUFBYSxFQUNuRCxPQUNBL1csRUFBT29DLEdBQXdCLEVBQUMsV0FBVyxDQUM3QyxPQUFRMlUsRUFBZSxHQUN2QixRQUFTQSxFQUFlLFNBQ3hCLFNBQVVBLEVBQWUsV0FBYSxPQUN0QyxVQUFXQSxFQUFlLFlBQWMsT0FDeEMsUUFBU0EsRUFBZSxVQUFZLE9BQ3BDLEtBQU1DLENBQ1QsRUFBRS9VLENBQUssRUFDUixPQUFBakMsRUFBSyxhQUFlaVgsRUFDYmpYLENBQ1gsQ0FJTyxTQUFTeVcsR0FBeUJTLEVBQXlCLENBQzlELE1BQU1DLEVBQVEsSUFBSXRMLEdBQ2xCLE9BQUFzTCxFQUFNLFNBQVdELEVBQXdCLE1BQU0sU0FDL0NDLEVBQU0sWUFBY0QsRUFBd0IsTUFBTSxZQUNsREMsRUFBTSxhQUFlRCxFQUF3QixNQUFNLGFBQ25EQyxFQUFNLFlBQWNELEVBQXdCLE1BQU0sWUFDM0MsQ0FDSCxNQUFBQyxFQUNBLE9BQVFELEVBQXdCLE9BQU8sSUFBS242QixHQUFTNjNCLEdBQXlCLE1BQU03M0IsQ0FBSSxDQUFDLEVBQ3pGLFdBQVltNkIsRUFBd0IsV0FDcEMsYUFBY0EsRUFBd0IsWUFDekMsQ0FDTCxDQUlPLFNBQVNSLEdBQWdCVSxFQUFnQmhCLEVBQVUsQ0FDdEQsT0FBUWdCLEVBQWUsS0FBSSxDQUN2QixJQUFLLHNCQUNELE9BQU8sSUFBSXZKLEdBQXFCdUosRUFBZSxRQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQyxFQUNuRyxJQUFLLGlCQUNELE9BQU8sSUFBSXBKLEdBQWdCb0osRUFBZSxRQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQyxFQUM5RixJQUFLLHdCQUNELE9BQU8sSUFBSW5KLEdBQXNCbUosRUFBZSxRQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksRUFBR0EsRUFBZSxNQUFNLEVBQzNILElBQUssaUJBQ0QsT0FBTyxJQUFJbEosR0FBaUJrSixFQUFlLFFBQVNoQixFQUFTLElBQUlnQixFQUFlLE1BQU0sSUFBSSxDQUFDLEVBQy9GLElBQUssb0JBQ0QsT0FBTyxJQUFJakosR0FBbUJpSixFQUFlLFFBQVNoQixFQUFTLElBQUlnQixFQUFlLE1BQU0sSUFBSSxDQUFDLEVBQ2pHLElBQUssc0JBQ0QsT0FBTyxJQUFJaEosR0FBcUJnSixFQUFlLFFBQVNoQixFQUFTLElBQUlnQixFQUFlLFlBQVksSUFBSSxFQUFHaEIsRUFBUyxJQUFJZ0IsRUFBZSxZQUFZLElBQUksQ0FBQyxFQUN4SixJQUFLLHFCQUNELE9BQU8sSUFBSTdJLEdBQW9CNkksRUFBZSxRQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQyxDQUMxRyxDQUNBLENBSUEsZUFBZVQsR0FBNkJQLEVBQVVFLEVBQWNlLEVBQTZCLENBQzdGLE1BQU0vWCxFQUFXLE1BQU1nWCxFQUFhLFlBQWEsRUFDM0NwVyxFQUFRLElBQUksSUFBSVosRUFDakIsT0FBUWhXLEdBQVNBLEVBQUssT0FBUyxVQUFVLEVBQ3pDLElBQUtBLEdBQVMsQ0FBQ0EsRUFBSyxLQUFNQSxDQUFJLENBQUMsQ0FBQyxFQUMvQmd1QixFQUFnQixJQUFJLElBQUloWSxFQUN6QixPQUFRaFcsR0FBU0EsRUFBSyxPQUFTLFVBQVUsRUFDekMsSUFBS0EsR0FBUyxDQUFDQSxFQUFLLEtBQU1BLENBQUksQ0FBQyxDQUFDLEVBQy9CMmxCLEVBQVcsSUFBSSxJQUFJcUgsRUFBYSxTQUFTLElBQUszNEIsR0FDNUNBLGFBQWlCbTVCLEdBQ1YsQ0FBQ241QixFQUFNLEtBQU1vckIsR0FBUXByQixDQUFLLENBQUMsRUFFL0IsQ0FBQ0EsRUFBTSxTQUFVQSxDQUFLLENBQ2hDLENBQUMsRUFDSXdKLEVBQVMsQ0FDWCxTQUFVa3dCLEVBQTRCLFNBQVMsSUFBS3Q2QixHQUFTMjVCLEdBQWdCMzVCLEVBQU1xNUIsQ0FBUSxDQUFDLEVBQzVGLFVBQVdpQixFQUE0QixVQUN2QyxTQUFVQSxFQUE0QixTQUFTLElBQUt0TyxHQUFZLENBQzVELEdBQUksQ0FBQ2tHLEVBQVMsSUFBSWxHLEVBQVEsUUFBUSxRQUFRLEVBQ3RDLE1BQU0sSUFBSTFlLEVBQVUsV0FBVzBlLEVBQVEsUUFBUSxRQUFRLFlBQVksRUFFdkUsTUFBTyxDQUNILFNBQVVBLEVBQVEsU0FDbEIsUUFBU2tHLEVBQVMsSUFBSWxHLEVBQVEsUUFBUSxRQUFRLENBQ2pELENBQ2IsQ0FBUyxFQUNELFVBQVcsTUFBTSxRQUFRLElBQUlzTyxFQUE0QixVQUFVLElBQUksTUFBT0UsR0FBaUIsQ0FDM0YsR0FBSSxDQUFDclgsRUFBTSxJQUFJcVgsRUFBYSxLQUFLLElBQUksRUFDakMsTUFBTSxJQUFJbHRCLEVBQVUsUUFBUWt0QixFQUFhLEtBQUssSUFBSSxZQUFZLEVBRWxFLE1BQU8sQ0FDSCxTQUFVQSxFQUFhLFNBQ3ZCLEtBQU1yWCxFQUFNLElBQUlxWCxFQUFhLEtBQUssSUFBSSxDQUN6QyxDQUNiLENBQVMsQ0FBQyxFQUNGLGdCQUFpQkYsRUFBNEIsZ0JBQWdCLElBQUtHLEdBQW1CLENBQ2pGLE1BQU10TCxFQUFXc0wsRUFBZSxTQUFTLEtBQ3pDLEdBQUksQ0FBQ0YsRUFBYyxJQUFJcEwsQ0FBUSxFQUMzQixNQUFNLElBQUk3aEIsRUFBVSxpQkFBaUI2aEIsQ0FBUSxZQUFZLEVBRTdELE1BQU8sQ0FDSCxTQUFVc0wsRUFBZSxTQUN6QixTQUFVRixFQUFjLElBQUlwTCxDQUFRLENBQ3ZDLENBQ2IsQ0FBUyxFQUNELHFCQUFzQm1MLEVBQTRCLHFCQUF1QixDQUFBLEdBQUksSUFBSzFGLElBQXFCLENBQ25HLFlBQWEsSUFBSXBELEdBQW9Cb0QsRUFBZ0IsWUFDaEQsUUFBUzJFLENBQVksRUFDMUIsUUFBUzNFLEVBQWdCLE9BQ3JDLEVBQVUsQ0FDTCxFQUNELE1BQU8sQ0FDSCxHQUFHeHFCLEVBQ0gsMEJBQTJCLENBQ3ZCLE9BQVFBLEVBQU8sU0FBUyxPQUFTLEdBQzdCQSxFQUFPLFVBQVUsT0FBUyxHQUMxQkEsRUFBTyxvQkFBb0IsT0FBUyxHQUNwQ0EsRUFBTyxnQkFBZ0IsT0FBUyxDQUN2QyxDQUNKLENBQ0wsQ0Nsa0JBLE1BQU1zd0IsR0FBb0IsR0FJbkIsU0FBU0MsR0FBV0MsRUFBaUJDLEVBQTJCLENBQ25FLE9BQUlELEVBQ08sR0FFUEMsRUFDTyxHQUVKLHNCQUNYLENBQ08sU0FBU2pMLEdBQWFzRCxFQUFlNEgsRUFBZ0IsQ0FDeEQsTUFBTUMsRUFBV0QsRUFDWixPQUFROTZCLEdBQVNBLEVBQUssT0FBUyxvQkFBb0IsRUFDbkQsSUFBS0EsR0FBU0EsRUFBSyxPQUFPLEVBQy9CLE9BQUksT0FBT2t6QixHQUFrQixXQUN6QkEsRUFBZ0IsQ0FBQyxDQUFFLEtBQU0sVUFBVyxLQUFNLE9BQVEsUUFBU0EsRUFBZSxHQUV2RSxDQUFDLEdBQUdBLEVBQWUsR0FBRzZILENBQVEsQ0FDekMsQ0FJTyxNQUFNQyxXQUFlMVAsRUFBUyxDQUlqQyxZQUFZVyxFQUFTLEdBQUksQ0FDckIsTUFBTyxFQUxScEksRUFBQSxLQUFBb1gsSUFDSC90QixFQUFBLGVBQ0FBLEVBQUEsMkJBQ0FBLEVBQUEsNEJBR0ksS0FBSyxPQUFTLENBQ1YsY0FBZStlLEVBQU8sZUFBaUJLLEdBQXlCLEVBQ2hFLE1BQU9MLEVBQU8sTUFDZCxjQUFlQSxFQUFPLGNBQ3RCLG1CQUFvQkEsRUFBTyxtQkFDM0IsZ0JBQWlCQSxFQUFPLGdCQUN4QixpQkFBa0JBLEVBQU8saUJBQ3pCLGdCQUFpQkEsRUFBTyxpQkFBbUIsR0FDM0MsMEJBQTJCQSxFQUFPLDJCQUE2QixHQUMvRCxhQUFjQSxFQUFPLGNBQWdCLGlCQUNyQyxRQUFTQSxFQUFPLFFBQ2hCLFFBQVNBLEVBQU8sUUFDaEIsY0FBZUEsRUFBTyxhQUN6QixFQUNELEtBQUssb0JBQXNCQSxFQUFPLGlCQUFtQixDQUFFLEdBQUUsSUFBSVYsRUFBb0IsRUFDakYsS0FBSyxxQkFBdUJVLEVBQU8sa0JBQW9CLENBQUUsR0FBRSxJQUFJUixFQUFxQixDQUM1RixDQXNhSSxJQUFJRSxFQUFPL2QsRUFBTzFMLEVBQVUsQ0FDeEIsT0FBUSxHQUNSLFFBQVMsTUFDakIsRUFBTyxDQUNDLE9BQUkwTCxhQUFpQmlyQixJQUFZanJCLEVBQU0sT0FDNUJ1WCxHQUFVdlgsRUFBTSxPQUFRLFVBQ3ZCQSxFQUFNLG1CQUNOMlgsR0FBZTNYLEVBQU0saUJBQWlCLEVBRXRDMUwsR0FBQSxNQUFBQSxFQUFTLE9BQ0ZnbEIsRUFBQSxLQUFLK1QsR0FBQUMsSUFBTCxVQUEwQnZQLEVBQU8vZCxFQUFPMUwsR0FHeENnbEIsRUFBQSxLQUFLK1QsR0FBQUUsSUFBTCxVQUE2QnhQLEVBQU8vZCxFQUFPMUwsR0FFekQsRUFFRW9qQixHQUFpQixTQUNoQnBqQixHQUFBLE1BQUFBLEVBQVMsT0FDRmdsQixFQUFBLEtBQUsrVCxHQUFBQyxJQUFMLFVBQTBCdlAsRUFBTy9kLEVBQU8xTCxHQUd4Q2dsQixFQUFBLEtBQUsrVCxHQUFBRSxJQUFMLFVBQTZCeFAsRUFBTy9kLEVBQU8xTCxHQUV2RCxDQUNDLFFBQVMsS0FBSyxPQUFPLFFBQ3JCLEtBQU0sS0FBSyxPQUFPLGFBQ2xCLFFBQVMsS0FBSyxPQUFPLFFBQ3JCLFNBQVUsS0FBSyxPQUFPLGFBQ2xDLENBQVMsQ0FDVCxDQUNBLENBM2RPKzRCLEdBQUEsWUEwQkdFLEdBQXVCLGVBQUNyQyxFQUFlbHJCLEVBQU8xTCxFQUFTLENBQ3pELE9BQU8wakIsR0FBbUIsU0FBWSxTQUVsQyxNQUFNM1ksRUFBUVcsYUFBaUJpckIsR0FDekJqckIsRUFDQSxJQUFJaXJCLEdBQVMzMkIsRUFBUSxtQkFBbUI4c0IsR0FDcEM5c0IsRUFBUSxRQUNSLElBQUk4c0IsR0FBVzlzQixFQUFRLE9BQU8sRUFBRzBMLEVBQU9rckIsRUFBZTUyQixFQUFRLFVBQVl3NEIsRUFBaUIsRUFDdEcsR0FBSSxDQUNBLE9BQWEsQ0FDVCxJQUFJVSxFQUFRQyxHQUFZcHVCLEVBQU0sY0FBYyxNQUFPLEtBQUssT0FBTyxLQUFLLEVBUXBFLEdBUEksT0FBT211QixHQUFVLFdBQ2pCQSxFQUFRLE1BQU0sS0FBSyxPQUFPLGNBQWMsU0FBU0EsQ0FBSyxHQUcxRG51QixFQUFNLGFBQWVBLEVBQU0sY0FBZ0IsQ0FDdkMsS0FBTSxxQkFDVCxFQUNHQSxFQUFNLGFBQWEsT0FBUyx5QkFBMEIsQ0FFdEQsR0FEQTRGLEVBQU8sTUFBTSw4QkFBOEIsRUFDdkMsQ0FBQzVGLEVBQU0sbUJBQXFCLENBQUNBLEVBQU0sdUJBQ25DLE1BQU0sSUFBSUssRUFBVSw0Q0FBNkNMLENBQUssRUFFMUUsTUFBTXF1QixFQUFhLE1BQU03SCxHQUFzQ3htQixFQUFNLGNBQWVBLEVBQU0sZUFBZ0JBLEVBQU0sZ0JBQWlCQSxFQUFNLGtCQUFtQkEsRUFBTSx1QkFBd0IsS0FBTUEsQ0FBSyxFQUtuTSxHQUpBQSxFQUFNLGdCQUFnQixXQUFXQSxFQUFNLGNBQWVBLEVBQU0sdUJBQXVCLFNBQVMsRUFDNUZBLEVBQU0sZUFBaUJxdUIsRUFBVyxjQUNsQ3J1QixFQUFNLGdCQUFrQnF1QixFQUFXLGVBQ25DcnVCLEVBQU0sYUFBZXF1QixFQUFXLFNBQzVCQSxFQUFXLFNBQVMsT0FBUyx5QkFFN0IsT0FBTyxJQUFJeEwsR0FBVTdpQixDQUFLLEVBRTlCLFFBQ3hCLENBQ29CLEdBQUlBLEVBQU0sYUFBYSxPQUFTLHNCQUF1QixDQUNuRCxNQUFNaWxCLEVBQVcsQ0FBRSxFQU1uQixHQUxJamxCLEVBQU0sY0FBYyxVQUdwQmlsQixFQUFTLEtBQUssR0FBR2psQixFQUFNLGNBQWMsU0FBUyxJQUFJb2YsRUFBVSxDQUFDLEVBRTdELENBQUNwZixFQUFNLGtCQUFtQixDQUMxQixNQUFNc3VCLEVBQWVySixFQUFTLElBQUszakIsR0FBTUEsRUFBRSxTQUFTLEVBQ3BEdEIsRUFBTSxrQkFBb0J5ZCxHQUFnQixDQUN0QyxLQUFNLENBQ0YsS0FBTXpkLEVBQU0sY0FBYyxLQUMxQixTQUFVc3VCLEVBQ1YsWUFBYXR1QixFQUFNLGNBQWMsZ0JBQ3BDLENBQ2pDLENBQTZCLEVBQ0RBLEVBQU0sa0JBQWtCLE1BQU8sRUFDL0JzWSxHQUFldFksRUFBTSxpQkFBaUIsQ0FDbEUsQ0FDd0IsTUFBTWtXLEVBQVEsTUFBTWxXLEVBQU0sY0FBYyxZQUFhLEVBQy9DdXVCLEVBQWtCclksRUFBTSxJQUFLTixHQUFNOE4sR0FBYzlOLENBQUMsQ0FBQyxFQUNuRDRZLEVBQXFCdkosRUFBUyxJQUFLM2pCLEdBQU1xaUIsR0FBaUJyaUIsQ0FBQyxDQUFDLEVBS2xFLEdBSkl0QixFQUFNLG9CQUNOQSxFQUFNLGtCQUFrQixTQUFTLE1BQVFrVyxFQUFNLElBQUtOLEdBQU1BLEVBQUUsSUFBSSxHQUVwRTVWLEVBQU0sZUFDRkEsRUFBTSxhQUFlQSxFQUFNLFVBQzNCLE1BQUFwSCxFQUFBb0gsRUFBTSxvQkFBTixNQUFBcEgsRUFBeUIsU0FBUyxDQUM5QixRQUFTLHFCQUNULEtBQU0sQ0FBRSxVQUFXb0gsRUFBTSxTQUFXLENBQ3BFLEdBQ2tDLElBQUlHLEdBQXNCLGNBQWNILEVBQU0sU0FBUyxhQUFjQSxDQUFLLEVBRXBGNEYsRUFBTyxNQUFNLGlCQUFpQjVGLEVBQU0sY0FBYyxJQUFJLFVBQVVBLEVBQU0sWUFBWSxHQUFHLEVBQ2pGQSxFQUFNLGVBQWlCLEdBQ3ZCLE1BQU1pYSxFQUFBLEtBQUsrVCxHQUFBUyxJQUFMLFVBQXlCenVCLEdBRW5DLE1BQU0wdUIsRUFBWS9MLEdBQWEzaUIsRUFBTSxlQUFnQkEsRUFBTSxlQUFlLEVBQ3RFQSxFQUFNLG9CQUNOQSxFQUFNLGNBQWMsS0FBSyxjQUFlQSxFQUFNLFNBQVVBLEVBQU0sYUFBYSxFQUMzRSxLQUFLLEtBQUssY0FBZUEsRUFBTSxTQUFVQSxFQUFNLGFBQWEsR0FFaEUsSUFBSXVtQixFQUFnQixDQUNoQixHQUFHLEtBQUssT0FBTyxjQUNmLEdBQUd2bUIsRUFBTSxjQUFjLGFBQzFCLEVBQ0R1bUIsRUFBZ0JGLEdBQXFCcm1CLEVBQU0sY0FBZUEsRUFBTSxnQkFBaUJ1bUIsQ0FBYSxFQUM5RnZtQixFQUFNLGtCQUFvQixNQUFNbXVCLEVBQU0sWUFBWSxDQUM5QyxtQkFBb0IsTUFBTW51QixFQUFNLGNBQWMsZ0JBQWdCQSxFQUFNLFFBQVEsRUFDNUUsT0FBUSxNQUFNQSxFQUFNLGNBQWMsVUFBVUEsRUFBTSxRQUFRLEVBQzFELE1BQU8wdUIsRUFDUCxtQkFBb0J6NUIsRUFBUSxtQkFDNUIsY0FBQXN4QixFQUNBLE1BQU9nSSxFQUNQLFdBQVl0dEIsR0FBcUNqQixFQUFNLGNBQWMsVUFBVSxFQUMvRSxTQUFVd3VCLEVBQ1YsUUFBU2QsR0FBVyxLQUFLLE9BQU8sZ0JBQWlCLEtBQUssT0FBTyx5QkFBeUIsRUFDdEYsT0FBUXo0QixFQUFRLE1BQzVDLENBQXlCLEVBQ0QrSyxFQUFNLGdCQUFnQixLQUFLQSxFQUFNLGlCQUFpQixFQUNsREEsRUFBTSxTQUFTLE1BQU0sSUFBSUEsRUFBTSxrQkFBa0IsS0FBSyxFQUN0REEsRUFBTSxrQkFBb0IsR0FDMUIsTUFBTTJtQixFQUFvQjVCLEdBQXFCL2tCLEVBQU0sa0JBQW1CQSxFQUFNLGNBQWVrVyxFQUFPK08sQ0FBUSxFQUM1R2psQixFQUFNLHVCQUF5QjJtQixFQUMvQixNQUFNMEgsRUFBYSxNQUFNN0csR0FBMkJ4bkIsRUFBTSxjQUFlQSxFQUFNLGVBQWdCQSxFQUFNLGdCQUFpQkEsRUFBTSxrQkFBbUJBLEVBQU0sdUJBQXdCLEtBQU1BLENBQUssRUFDeExBLEVBQU0sZ0JBQWdCLFdBQVdBLEVBQU0sY0FBZUEsRUFBTSx1QkFBdUIsU0FBUyxFQUM1RkEsRUFBTSxlQUFpQnF1QixFQUFXLGNBQ2xDcnVCLEVBQU0sZ0JBQWtCcXVCLEVBQVcsZUFDbkNydUIsRUFBTSxhQUFlcXVCLEVBQVcsUUFDeEQsQ0FDb0IsR0FBSXJ1QixFQUFNLGNBQ05BLEVBQU0sYUFBYSxPQUFTLHlCQUM1QixhQUFNaWEsRUFBQSxLQUFLK1QsR0FBQVcsSUFBTCxVQUEwQjN1QixFQUFPQSxFQUFNLGFBQWEsUUFDMUQsS0FBSyxLQUFLLFlBQWFBLEVBQU0sU0FBVUEsRUFBTSxjQUFlQSxFQUFNLGFBQWEsTUFBTSxFQUNyRkEsRUFBTSxjQUFjLEtBQUssWUFBYUEsRUFBTSxTQUFVQSxFQUFNLGFBQWEsTUFBTSxFQUN4RSxJQUFJNmlCLEdBQVU3aUIsQ0FBSyxFQUV6QixHQUFJQSxFQUFNLGNBQ1hBLEVBQU0sYUFBYSxPQUFTLG9CQUM1QkEsRUFBTSxjQUFnQkEsRUFBTSxhQUFhLFNBQ3JDQSxFQUFNLG9CQUNOQSxFQUFNLGtCQUFrQixJQUFLLEVBQzdCdVksR0FBa0IsRUFDbEJ2WSxFQUFNLGtCQUFvQixRQUU5QkEsRUFBTSxrQkFBb0IsR0FFMUJBLEVBQU0sYUFBZSxDQUFFLEtBQU0scUJBQXVCLE1BRW5ELElBQUlBLEVBQU0sY0FDWEEsRUFBTSxhQUFhLE9BQVMseUJBRTVCLE9BQU8sSUFBSTZpQixHQUFVN2lCLENBQUssRUFHMUI0RixFQUFPLE1BQU0sbUJBQW1CLEVBRXhELENBQ0EsT0FDbUI0RCxFQUFLLENBQ1IsTUFBSXhKLEVBQU0sbUJBQ05BLEVBQU0sa0JBQWtCLFNBQVMsQ0FDN0IsUUFBUyxxQkFDVCxLQUFNLENBQUUsTUFBTyxPQUFPd0osQ0FBRyxDQUFHLENBQ3BELENBQXFCLEVBRUNBLENBQ3RCLFFBQ29CLENBQ0F4SixFQUFNLHNCQUNGckgsRUFBQXFILEVBQU0sZUFBTixZQUFBckgsRUFBb0IsUUFBUywwQkFFN0JxSCxFQUFNLGtCQUFrQixJQUFLLEVBRWpDdVksR0FBa0IsRUFFdEMsQ0FDQSxDQUFTLENBQ1QsRUFDVWtXLEdBQW1CLGVBQUN6dUIsRUFBTyxDQUM3QixNQUFNNHVCLEVBQWEsS0FBSyxtQkFBbUIsT0FBTzV1QixFQUFNLGNBQWMsZ0JBQWdCLElBQUlzZSxFQUFvQixDQUFDLEVBQy9HLEdBQUlzUSxFQUFXLE9BQVMsRUFBRyxDQUN2QixNQUFNQyxFQUFnQixDQUNsQixNQUFPN3VCLEVBQU0sY0FDYixNQUFPQSxFQUFNLGVBQ2IsUUFBU0EsRUFBTSxRQUNsQixFQUNELEdBQUksQ0FDQSxNQUFNa0ksRUFBVSxNQUFNLFFBQVEsSUFBSTBtQixFQUFXLElBQUksTUFBT0UsR0FDN0MvUSxHQUFrQixNQUFPL0gsR0FBUyxDQUNyQyxNQUFNN1ksRUFBUyxNQUFNMnhCLEVBQVUsSUFBSUQsQ0FBYSxFQUNoRCxPQUFBN1ksRUFBSyxTQUFTLFVBQVk3WSxFQUFPLE9BQU8sa0JBQ2pDQSxDQUMvQixFQUF1QixDQUFFLEtBQU0sQ0FBRSxLQUFNMnhCLEVBQVUsS0FBUSxFQUFFOXVCLEVBQU0saUJBQWlCLENBQ2pFLENBQUMsRUFDRixVQUFXN0MsS0FBVStLLEVBQ2pCLEdBQUkvSyxFQUFPLE9BQU8sa0JBQ2QsTUFBSTZDLEVBQU0sbUJBQ05BLEVBQU0sa0JBQWtCLFNBQVMsQ0FDN0IsUUFBUywrQkFDVCxLQUFNLENBQUUsVUFBVzdDLEVBQU8sVUFBVSxJQUFNLENBQzFFLENBQTZCLEVBRUMsSUFBSXFELEdBQWdDLDhCQUE4QixLQUFLLFVBQVVyRCxFQUFPLE9BQU8sVUFBVSxDQUFDLEdBQUlBLEVBQVE2QyxDQUFLLENBR3pKLE9BQ21CcEosRUFBRyxDQUNOLE1BQUlBLGFBQWE0SixHQUNQNUosR0FHVm9KLEVBQU0sZUFDQSxJQUFJTSxHQUF3Qix1Q0FBdUMxSixDQUFDLEdBQUlBLEVBQUdvSixDQUFLLEVBQ3RHLENBQ0EsQ0FDQSxFQUNVMnVCLEdBQW9CLGVBQUMzdUIsRUFBT21CLEVBQVEsQ0FDdEMsTUFBTXl0QixFQUFhLEtBQUssb0JBQW9CLE9BQU81dUIsRUFBTSxjQUFjLGlCQUFpQixJQUFJd2UsRUFBcUIsQ0FBQyxFQUNsSCxHQUFJb1EsRUFBVyxPQUFTLEVBQUcsQ0FDdkIsTUFBTUcsRUFBYy91QixFQUFNLGNBQWMsbUJBQW1CbUIsQ0FBTSxFQUMzRDB0QixFQUFnQixDQUNsQixNQUFPN3VCLEVBQU0sY0FDYixZQUFBK3VCLEVBQ0EsUUFBUy91QixFQUFNLFNBQ2YsUUFBUyxDQUFFLGNBQWVBLEVBQU0saUJBQW1CLENBQ3RELEVBQ0QsR0FBSSxDQUNBLE1BQU1rSSxFQUFVLE1BQU0sUUFBUSxJQUFJMG1CLEVBQVcsSUFBSSxNQUFPRSxHQUM3Qy9RLEdBQWtCLE1BQU8vSCxHQUFTLENBQ3JDLE1BQU03WSxFQUFTLE1BQU0yeEIsRUFBVSxJQUFJRCxDQUFhLEVBQ2hELE9BQUE3WSxFQUFLLFNBQVMsVUFBWTdZLEVBQU8sT0FBTyxrQkFDakNBLENBQy9CLEVBQXVCLENBQUUsS0FBTSxDQUFFLEtBQU0yeEIsRUFBVSxLQUFRLEVBQUU5dUIsRUFBTSxpQkFBaUIsQ0FDakUsQ0FBQyxFQUNGLFVBQVc3QyxLQUFVK0ssRUFDakIsR0FBSS9LLEVBQU8sT0FBTyxrQkFDZCxNQUFJNkMsRUFBTSxtQkFDTkEsRUFBTSxrQkFBa0IsU0FBUyxDQUM3QixRQUFTLCtCQUNULEtBQU0sQ0FBRSxVQUFXN0MsRUFBTyxVQUFVLElBQU0sQ0FDMUUsQ0FBNkIsRUFFQyxJQUFJc0QsR0FBaUMsK0JBQStCLEtBQUssVUFBVXRELEVBQU8sT0FBTyxVQUFVLENBQUMsR0FBSUEsRUFBUTZDLENBQUssQ0FHM0osT0FDbUJwSixFQUFHLENBQ04sTUFBSUEsYUFBYTZKLEdBQ1A3SixFQUVKLElBQUkwSixHQUF3Qix3Q0FBd0MxSixDQUFDLEdBQUlBLEVBQUdvSixDQUFLLENBQ3ZHLENBQ0EsQ0FDQSxFQUlVZ3ZCLEdBQWMsZUFBQzd4QixFQUFRbEksRUFBUyxXQUNsQyxHQUFJLENBQ0EsT0FBYSxDQUNULE1BQU1xM0IsRUFBZW52QixFQUFPLE1BQU0sY0FDNUI4bkIsRUFBV3FILEVBQWEsU0FBUyxJQUFJbE4sRUFBVSxFQUMvQ2xKLEVBQVEsTUFBTW9XLEVBQWEsWUFBYSxFQUN4Q2lDLEVBQWtCclksRUFBTSxJQUFLTixHQUFNOE4sR0FBYzlOLENBQUMsQ0FBQyxFQUNuRDRZLEVBQXFCdkosRUFBUyxJQUFLLEdBQU10QixHQUFpQixDQUFDLENBQUMsRUFJbEUsR0FIQXhtQixFQUFPLE1BQU0sYUFBZUEsRUFBTyxNQUFNLGNBQWdCLENBQ3JELEtBQU0scUJBQ1QsRUFDR0EsRUFBTyxNQUFNLGFBQWEsT0FBUyx5QkFBMEIsQ0FFN0QsR0FEQXlJLEVBQU8sTUFBTSw4QkFBOEIsRUFDdkMsQ0FBQ3pJLEVBQU8sTUFBTSxtQkFDZCxDQUFDQSxFQUFPLE1BQU0sdUJBQ2QsTUFBTSxJQUFJa0QsRUFBVSw0Q0FBNkNsRCxFQUFPLEtBQUssRUFFakYsTUFBTWt4QixFQUFhLE1BQU03SCxHQUFzQ3JwQixFQUFPLE1BQU0sY0FBZUEsRUFBTyxNQUFNLGVBQWdCQSxFQUFPLE1BQU0sZ0JBQWlCQSxFQUFPLE1BQU0sa0JBQW1CQSxFQUFPLE1BQU0sdUJBQXdCLEtBQU1BLEVBQU8sS0FBSyxFQU03TyxHQUxBNnNCLEdBQW1CN3NCLEVBQVFreEIsQ0FBVSxFQUNyQ2x4QixFQUFPLE1BQU0sZ0JBQWdCLFdBQVdBLEVBQU8sTUFBTSxjQUFlQSxFQUFPLE1BQU0sdUJBQXVCLFNBQVMsRUFDakhBLEVBQU8sTUFBTSxlQUFpQmt4QixFQUFXLGNBQ3pDbHhCLEVBQU8sTUFBTSxnQkFBa0JreEIsRUFBVyxlQUMxQ2x4QixFQUFPLE1BQU0sYUFBZWt4QixFQUFXLFNBQ25DQSxFQUFXLFNBQVMsT0FBUyx5QkFFN0IsT0FFSixRQUNwQixDQUNnQixHQUFJbHhCLEVBQU8sTUFBTSxhQUFhLE9BQVMsc0JBQXVCLENBQzFELEdBQUksQ0FBQ0EsRUFBTyxNQUFNLGtCQUFtQixDQUNqQyxNQUFNbXhCLEVBQWVySixFQUFTLElBQUszakIsSUFBTUEsR0FBRSxTQUFTLEVBQ3BEbkUsRUFBTyxNQUFNLGtCQUFvQnNnQixHQUFnQixDQUM3QyxLQUFNLENBQ0YsS0FBTTZPLEVBQWEsS0FDbkIsU0FBVWdDLEVBQ1YsTUFBT3BZLEVBQU0sSUFBS04sSUFBTUEsR0FBRSxJQUFJLEVBQzlCLFlBQWEwVyxFQUFhLGdCQUM3QixDQUM3QixDQUF5QixFQUNEbnZCLEVBQU8sTUFBTSxrQkFBa0IsTUFBTyxFQUN0Q21iLEdBQWVuYixFQUFPLE1BQU0saUJBQWlCLENBQ3JFLENBRW9CLEdBREFBLEVBQU8sTUFBTSxlQUNUQSxFQUFPLE1BQU0sYUFBZUEsRUFBTyxNQUFNLFVBQ3pDLE1BQUF2RSxFQUFBdUUsRUFBTyxNQUFNLG9CQUFiLE1BQUF2RSxFQUFnQyxTQUFTLENBQ3JDLFFBQVMscUJBQ1QsS0FBTSxDQUFFLFVBQVd1RSxFQUFPLE1BQU0sU0FBVyxDQUN2RSxHQUM4QixJQUFJZ0QsR0FBc0IsY0FBY2hELEVBQU8sTUFBTSxTQUFTLGFBQWNBLEVBQU8sS0FBSyxFQUVsR3lJLEVBQU8sTUFBTSxpQkFBaUIwbUIsRUFBYSxJQUFJLFVBQVVudkIsRUFBTyxNQUFNLFlBQVksR0FBRyxFQUNyRixJQUFJZ3hCLEVBQVFDLEdBQVk5QixFQUFhLE1BQU8sS0FBSyxPQUFPLEtBQUssRUFDekQsT0FBTzZCLEdBQVUsV0FDakJBLEVBQVEsTUFBTSxLQUFLLE9BQU8sY0FBYyxTQUFTQSxDQUFLLEdBRXREaHhCLEVBQU8sTUFBTSxlQUFpQixHQUM5QixNQUFNOGMsRUFBQSxLQUFLK1QsR0FBQVMsSUFBTCxVQUF5QnR4QixFQUFPLE9BRTFDLElBQUlvcEIsRUFBZ0IsQ0FDaEIsR0FBRyxLQUFLLE9BQU8sY0FDZixHQUFHK0YsRUFBYSxhQUNuQixFQUNEL0YsRUFBZ0JGLEdBQXFCaUcsRUFBY252QixFQUFPLE1BQU0sZ0JBQWlCb3BCLENBQWEsRUFDOUYsTUFBTW1JLEVBQVkvTCxHQUFheGxCLEVBQU8sTUFBT0EsRUFBTyxRQUFRLEVBQ3hEQSxFQUFPLE1BQU0sb0JBQ2JtdkIsRUFBYSxLQUFLLGNBQWVudkIsRUFBTyxNQUFNLFNBQVVtdkIsQ0FBWSxFQUNwRSxLQUFLLEtBQUssY0FBZW52QixFQUFPLE1BQU0sU0FBVW12QixDQUFZLEdBRWhFLElBQUkyQyxFQUNKLGdCQUFpQm43QixLQUFTcTZCLEVBQU0sb0JBQW9CLENBQ2hELG1CQUFvQixNQUFNN0IsRUFBYSxnQkFBZ0JudkIsRUFBTyxNQUFNLFFBQVEsRUFDNUUsT0FBUSxNQUFNbXZCLEVBQWEsVUFBVW52QixFQUFPLE1BQU0sUUFBUSxFQUMxRCxNQUFPdXhCLEVBQ1AsbUJBQW9CejVCLEVBQVEsbUJBQzVCLGNBQUFzeEIsRUFDQSxNQUFPZ0ksRUFDUCxTQUFVQyxFQUNWLFdBQVl2dEIsR0FBcUNxckIsRUFBYSxVQUFVLEVBQ3hFLFFBQVNvQixHQUFXLEtBQUssT0FBTyxnQkFBaUIsS0FBSyxPQUFPLHlCQUF5QixFQUN0RixPQUFRejRCLEVBQVEsTUFDeEMsQ0FBcUIsRUFBRyxDQUNBLEdBQUluQixFQUFNLE9BQVMsZ0JBQWlCLENBQ2hDLE1BQU11UyxHQUFTc2IsR0FBNkIsTUFBTTd0QixDQUFLLEVBQ3ZEbTdCLEVBQWdCLENBQ1osTUFBTyxJQUFJcE4sR0FBTXhiLEdBQU8sU0FBUyxLQUFLLEVBQ3RDLE9BQVFBLEdBQU8sU0FBUyxPQUN4QixXQUFZQSxHQUFPLFNBQVMsRUFDL0IsQ0FDN0IsQ0FDd0IsR0FBSWxKLEVBQU8sVUFHUCxPQUVKQSxFQUFPLFNBQVMsSUFBSXluQixHQUF1Qjl3QixDQUFLLENBQUMsQ0FDekUsQ0FFb0IsR0FEQXFKLEVBQU8sTUFBTSxrQkFBb0IsR0FDN0IsQ0FBQzh4QixFQUNELE1BQU0sSUFBSTd1QixHQUFtQiwwQ0FBMkNqRCxFQUFPLEtBQUssRUFFeEZBLEVBQU8sTUFBTSxrQkFBb0I4eEIsRUFDakM5eEIsRUFBTyxNQUFNLGdCQUFnQixLQUFLQSxFQUFPLE1BQU0saUJBQWlCLEVBQ2hFLE1BQU13cEIsRUFBb0I1QixHQUFxQjVuQixFQUFPLE1BQU0sa0JBQW1CbXZCLEVBQWNwVyxFQUFPK08sQ0FBUSxFQUM1RzluQixFQUFPLE1BQU0sdUJBQXlCd3BCLEVBQ3RDLE1BQU0wSCxFQUFhLE1BQU03RyxHQUEyQjhFLEVBQWNudkIsRUFBTyxNQUFNLGVBQWdCQSxFQUFPLE1BQU0sZ0JBQWlCQSxFQUFPLE1BQU0sa0JBQW1CQSxFQUFPLE1BQU0sdUJBQXdCLEtBQU1BLEVBQU8sS0FBSyxFQUNwTjZzQixHQUFtQjdzQixFQUFRa3hCLENBQVUsRUFDckNseEIsRUFBTyxNQUFNLGdCQUFnQixXQUFXbXZCLEVBQWMzRixFQUFrQixTQUFTLEVBQ2pGeHBCLEVBQU8sTUFBTSxlQUFpQmt4QixFQUFXLGNBQ3pDbHhCLEVBQU8sTUFBTSxnQkFBa0JreEIsRUFBVyxlQUMxQ2x4QixFQUFPLE1BQU0sYUFBZWt4QixFQUFXLFFBQzNELENBQ2dCLEdBQUlseEIsRUFBTyxNQUFNLGFBQWEsT0FBUyx5QkFBMEIsQ0FDN0QsTUFBTThjLEVBQUEsS0FBSytULEdBQUFXLElBQUwsVUFBMEJ4eEIsRUFBTyxNQUFPQSxFQUFPLE1BQU0sYUFBYSxRQUN4RSxNQUNwQixLQUNxQixJQUFJQSxFQUFPLE1BQU0sYUFBYSxPQUFTLHlCQUV4QyxPQUVLQSxFQUFPLE1BQU0sYUFBYSxPQUFTLHFCQUN4Q0EsRUFBTyxNQUFNLGVBQWdCeEUsRUFBQXdFLEVBQU8sTUFBTSxlQUFiLFlBQUF4RSxFQUN2QixTQUNGd0UsRUFBTyxNQUFNLG9CQUNiQSxFQUFPLE1BQU0sa0JBQWtCLElBQUssRUFDcENvYixHQUFrQixHQUV0QnBiLEVBQU8sTUFBTSxrQkFBb0IsT0FDakNBLEVBQU8sU0FBUyxJQUFJMm5CLEdBQTJCM25CLEVBQU8sTUFBTSxhQUFhLENBQUMsRUFDMUVBLEVBQU8sTUFBTSxrQkFBb0IsR0FFakNBLEVBQU8sTUFBTSxhQUFlLENBQ3hCLEtBQU0scUJBQ1QsR0FHRHlJLEVBQU8sTUFBTSxtQkFBbUIsRUFFcEQsQ0FDQSxPQUNlblIsRUFBTyxDQUNWLE1BQUkwSSxFQUFPLE1BQU0sbUJBQ2JBLEVBQU8sTUFBTSxrQkFBa0IsU0FBUyxDQUNwQyxRQUFTLHFCQUNULEtBQU0sQ0FBRSxNQUFPLE9BQU8xSSxDQUFLLENBQUcsQ0FDbEQsQ0FBaUIsRUFFQ0EsQ0FDbEIsUUFDZ0IsQ0FDQTBJLEVBQU8sTUFBTSxzQkFDVHRCLEVBQUFzQixFQUFPLE1BQU0sZUFBYixZQUFBdEIsRUFBMkIsUUFBUywwQkFDcENzQixFQUFPLE1BQU0sa0JBQWtCLElBQUssRUFFeENvYixHQUFrQixFQUVsQyxDQUNBLEVBSVUwVixHQUFvQixlQUFDdlAsRUFBTy9kLEVBQU8xTCxFQUFTLENBQzlDLE9BQUFBLEVBQVVBLEdBQVcsQ0FBRSxFQUNoQjBqQixHQUFtQixTQUFZLENBRWxDLE1BQU0zWSxFQUFRVyxhQUFpQmlyQixHQUN6QmpyQixFQUNBLElBQUlpckIsR0FBUzMyQixFQUFRLG1CQUFtQjhzQixHQUNwQzlzQixFQUFRLFFBQ1IsSUFBSThzQixHQUFXOXNCLEVBQVEsT0FBTyxFQUFHMEwsRUFBTytkLEVBQU96cEIsRUFBUSxVQUFZdzRCLEVBQWlCLEVBRXhGdHdCLEVBQVMsSUFBSTJsQixHQUFrQixDQUNqQyxPQUFRN3RCLEVBQVEsT0FDaEIsTUFBQStLLENBQ2hCLENBQWEsRUFFRCxPQUFBN0MsRUFBTyxTQUFXbEksRUFBUSxVQUFZK0ssRUFBTSxVQUU1Q2lhLEVBQUEsS0FBSytULEdBQUFnQixJQUFMLFVBQW9CN3hCLEVBQVFsSSxHQUFTLEtBQUssSUFBTSxDQUM1Q2tJLEVBQU8sTUFBTyxDQUNqQixFQUFHcU0sR0FBUSxDQUNSck0sRUFBTyxZQUFZcU0sQ0FBRyxDQUN0QyxDQUFhLEVBQ01yTSxDQUNuQixDQUFTLENBQ1QsRUF5Q08sU0FBU2l4QixHQUFZYyxFQUFZQyxFQUFnQixDQUlwRCxPQUFLLE9BQU9ELEdBQWUsVUFDdkJBLElBQWVwQyxHQUFNLDJCQUNyQm9DLEVBRU9BLEVBRUpDLEdBQWtCRCxHQUFjcEMsR0FBTSx5QkFDakQsQ0N0Z0JPLE1BQU1zQyxHQUFOLE1BQU1BLFdBQWNqUixFQUFXLENBMkJsQyxZQUFZYSxFQUFRLENBQ2hCLE1BQU8sRUFmWC9lLEVBQUEsYUFDQUEsRUFBQSxxQkFDQUEsRUFBQSxlQUNBQSxFQUFBLDJCQUNBQSxFQUFBLGlCQUNBQSxFQUFBLGNBQ0FBLEVBQUEsc0JBQ0FBLEVBQUEsY0FDQUEsRUFBQSxtQkFDQUEsRUFBQSx3QkFDQUEsRUFBQSx5QkFDQUEsRUFBQSxrQkFBYSxRQUNiQSxFQUFBLHdCQUNBQSxFQUFBLHdCQUdRLFVBQU8rZSxFQUFPLE1BQVMsVUFBWUEsRUFBTyxLQUFLLEtBQU0sSUFBSyxHQUMxRCxNQUFNLElBQUkzZSxFQUFVLHlCQUF5QixFQW1CakQsR0FqQkEsS0FBSyxLQUFPMmUsRUFBTyxLQUNuQixLQUFLLGFBQWVBLEVBQU8sY0FBZ0JvUSxHQUFNLDBCQUNqRCxLQUFLLE9BQVNwUSxFQUFPLE9BQ3JCLEtBQUssbUJBQXFCQSxFQUFPLG9CQUFzQixHQUN2RCxLQUFLLFNBQVdBLEVBQU8sVUFBWSxDQUFFLEVBQ3JDLEtBQUssTUFBUUEsRUFBTyxPQUFTLEdBQzdCLEtBQUssY0FBZ0JBLEVBQU8sZUFBaUIsQ0FBRSxFQUMvQyxLQUFLLE1BQVFBLEVBQU8sT0FBUyxDQUFFLEVBQy9CLEtBQUssV0FBYUEsRUFBTyxZQUFjLENBQUUsRUFDekMsS0FBSyxnQkFBa0JBLEVBQU8saUJBQW1CLENBQUUsRUFDbkQsS0FBSyxpQkFBbUJBLEVBQU8sa0JBQW9CLENBQUUsRUFDakRBLEVBQU8sYUFDUCxLQUFLLFdBQWFBLEVBQU8sWUFFN0IsS0FBSyxnQkFBa0JBLEVBQU8saUJBQW1CLGdCQUNqRCxLQUFLLGdCQUFrQkEsRUFBTyxpQkFBbUIsSUFFN0NBLEVBQU8sa0NBQW9DLFFBQzNDQSxFQUFPLGtDQUNILEtBQUssVUFBWSxLQUFLLFdBQVksQ0FDbEMsTUFBTXFRLEVBQWMsSUFBSSxJQUFJLENBQUMsS0FBSyxVQUFVLEtBQUssVUFBVSxDQUFDLENBQUMsRUFDN0QsVUFBVy90QixLQUFLLEtBQUssU0FDYixlQUFnQkEsR0FBS0EsRUFBRSxXQUN2Qit0QixFQUFZLElBQUksS0FBSyxVQUFVL3RCLEVBQUUsVUFBVSxDQUFDLEVBRXZDLFVBQVdBLEdBQUtBLEVBQUUsTUFBTSxZQUM3Qit0QixFQUFZLElBQUksS0FBSyxVQUFVL3RCLEVBQUUsTUFBTSxVQUFVLENBQUMsRUFHdEQrdEIsRUFBWSxLQUFPLEdBQ25CenBCLEVBQU8sS0FBSyxnRUFBZ0UsTUFBTSxLQUFLeXBCLENBQVcsRUFBRSxLQUFLLElBQUksQ0FBQyw0RUFBNEUsQ0FFOU0sQ0FFQSxDQTlESSxPQUFPLE9BQU9yUSxFQUFRLENBQ2xCLE9BQU8sSUFBSW9RLEdBQU0sQ0FDYixHQUFHcFEsRUFDSCxTQUFVQSxFQUFPLFNBQ2pCLFdBQVlBLEVBQU8sV0FDbkIsZ0NBQWlDLEVBQzdDLENBQVMsQ0FDVCxDQTJESSxJQUFJLGtCQUFtQixDQUNuQixHQUFJLEtBQUssYUFBZSxPQUNwQixNQUFPLE9BRU4sR0FBSXRlLEdBQVksS0FBSyxVQUFVLEVBQ2hDLE1BQU8sWUFFTixHQUFJLE9BQU8sS0FBSyxZQUFlLFNBQ2hDLE9BQU8sS0FBSyxXQUFXLEtBRTNCLE1BQU0sSUFBSSxNQUFNLHdCQUF3QixLQUFLLFVBQVUsRUFBRSxDQUNqRSxDQVdJLE1BQU1zZSxFQUFRLENBQ1YsT0FBTyxJQUFJb1EsR0FBTSxDQUNiLEdBQUcsS0FDSCxHQUFHcFEsQ0FDZixDQUFTLENBQ1QsQ0FhSSxPQUFPL3BCLEVBQVMsQ0FDWixLQUFNLENBQUUsU0FBQWl0QixFQUFVLGdCQUFBb04sRUFBaUIsc0JBQUFDLENBQXVCLEVBQUd0NkIsRUFDN0QsT0FBT3FLLEdBQUssQ0FDUixLQUFNNGlCLEdBQVlyaEIsR0FBbUIsS0FBSyxJQUFJLEVBQzlDLFlBQWF5dUIsR0FBbUIsR0FDaEMsV0FBWSxDQUNSLEtBQU0sU0FDTixXQUFZLENBQ1IsTUFBTyxDQUNILEtBQU0sUUFDVCxDQUNKLEVBQ0QsU0FBVSxDQUFDLE9BQU8sRUFDbEIscUJBQXNCLEVBQ3pCLEVBQ0QsT0FBUSxHQUNSLFFBQVMsTUFBT3pvQixFQUFNZCxJQUFZLENBQzlCLEdBQUksQ0FBQ25GLEdBQWlCaUcsQ0FBSSxFQUN0QixNQUFNLElBQUl6RyxHQUFtQixzQ0FBc0MsRUFHdkUsTUFBTWpELEVBQVMsTUFEQSxJQUFJNHdCLEdBQVEsRUFDQyxJQUFJLEtBQU1sbkIsRUFBSyxNQUFPLENBQzlDLFFBQVNkLEdBQUEsWUFBQUEsRUFBUyxPQUN0QyxDQUFpQixFQUNELE9BQUksT0FBT3dwQixHQUEwQixXQUMxQkEsRUFBc0JweUIsQ0FBTSxFQUVoQ3duQixHQUFjeG5CLEVBQU8sYUFBYUEsRUFBTyxhQUFhLE9BQVMsQ0FBQyxDQUFDLENBQzNFLENBQ2IsQ0FBUyxDQUNULENBT0ksTUFBTSxnQkFBZ0JpSixFQUFZLENBQzlCLE9BQUksT0FBTyxLQUFLLGNBQWlCLFdBQ3RCLE1BQU0sS0FBSyxhQUFhQSxFQUFZLElBQUksRUFFNUMsS0FBSyxZQUNwQixDQU9JLE1BQU0sVUFBVUEsRUFBWSxDQUN4QixPQUFJLE9BQU8sS0FBSyxRQUFXLFdBQ2hCLE1BQU0sS0FBSyxPQUFPQSxFQUFZLElBQUksRUFFdEMsS0FBSyxNQUNwQixDQUtJLE1BQU0sYUFBYyxDQUNoQixPQUFJLEtBQUssV0FBVyxPQUFTLEVBQ2xCK1AsR0FBZSxLQUFLLFVBQVUsRUFFbEMsQ0FBRSxDQUNqQixDQU1JLE1BQU0sYUFBYyxDQUNoQixNQUFPLENBQUMsR0FBSSxNQUFNLEtBQUssWUFBYSxFQUFHLEdBQUcsS0FBSyxLQUFLLENBQzVELENBT0ksbUJBQW1CaFYsRUFBUSxDQUN2QixHQUFJLEtBQUssYUFBZSxPQUNwQixPQUFPQSxFQUVYLEdBQUksT0FBTyxLQUFLLFlBQWUsU0FBVSxDQUNyQyxNQUFNa0YsRUFBUyxLQUFLLE1BQU1sRixDQUFNLEVBQ2hDLE9BQUlULEdBQVksS0FBSyxVQUFVLEVBQ3BCLEtBQUssV0FBVyxNQUFNMkYsQ0FBTSxFQUVoQ0EsQ0FDbkIsQ0FDUSxNQUFNLElBQUksTUFBTSx3QkFBd0IsS0FBSyxVQUFVLEVBQUUsQ0FDakUsQ0FNSSxRQUFTLENBQ0wsTUFBTyxDQUNILEtBQU0sS0FBSyxJQUNkLENBQ1QsQ0FDQSxFQXhNSXBHLEVBWlNtdkIsR0FZRiw0QkFBNEIsSUFaaEMsSUFBTXRDLEdBQU5zQyxHQ1NQblIsR0FBa0IvQyxHQUFnQixDQUFFLEVDSjdCLE1BQU1zVSxXQUFzQjFDLEVBQU0sQ0FNckMsWUFBWTlOLEVBQVEsQ0FDaEIsTUFBTUEsQ0FBTSxFQUZoQi9lLEVBQUEsY0FHSSxLQUFLLE1BQVErZSxFQUFPLE9BQVMsS0FDckMsQ0FDQSxDQ2xDTyxTQUFTeVEsR0FBNkJDLEVBQVUsQ0FDbkQsTUFBTyxDQUNILG1CQUFvQkEsRUFBUyxvQkFBc0IsR0FDdEQsQ0FDTCxDQUNPLFNBQVNDLEdBQThCLENBQUUsV0FBWUMsRUFBaUIsR0FBRzM2QixDQUFPLEVBQUksQ0FDdkYsTUFBTTQ2QixFQUFnQnJSLEdBQXNCdnBCLENBQU8sRUFDN0M2NkIsRUFBYUYsR0FBbUJDLEVBQWMsS0FDcEQsTUFBTyxDQUNILEdBQUdBLEVBQ0gsV0FBQUMsRUFDQSxJQUFLLE1BQU9od0IsR0FBUyxDQUNqQixNQUFNM0MsRUFBUyxNQUFNMHlCLEVBQWMsSUFBSS92QixDQUFJLEVBQzNDLE1BQU8sQ0FDSCxHQUFHM0MsRUFDSCxVQUFXLENBQUUsR0FBR0EsRUFBTyxVQUFXLFdBQUEyeUIsQ0FBWSxDQUNqRCxDQUNKLENBQ0osQ0FDTCxDQUtPLFNBQVNDLEdBQW9DNXlCLEVBQVEsQ0FDeEQsTUFBTztBQUFBO0FBQUEsMkJBRWdCQSxFQUFPLFVBQVUsVUFBVTtBQUFBLG1CQUNuQyxLQUFLLFVBQVVBLEVBQU8sT0FBTyxZQUFjLENBQUEsQ0FBRSxDQUFDO0FBQUE7QUFBQSxFQUUvRCxLQUFNLENBQ1IsQ0MvQkEsTUFBTXlJLEdBQVNELEdBQVUsd0JBQXdCLEVDQW5CaVAsRUFBUyxDQUNuQyxPQUFRQyxFQUFVLENBQ3RCLENBQUMsRUFDTSxNQUFNbWIsR0FBNEI1UCxHQUFxQixPQUFRLENBQ2xFeEwsRUFBUyxDQUNMLE9BQVFDLEVBQVUsRUFDbEIsZUFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxFQUNoRCxLQUFNQyxFQUFVLFNBQVMsRUFDekIsS0FBTUEsRUFBVSxRQUFRLEVBQ3hCLFFBQVNHLEVBQVFMLEVBQVMsQ0FBRSxLQUFNRSxFQUFVLFlBQVksRUFBRyxLQUFNRCxFQUFVLENBQUEsQ0FBRSxDQUFDLENBQ3RGLENBQUssRUFDREQsRUFBUyxDQUNMLE9BQVFDLEVBQVUsRUFDbEIsZUFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxFQUNoRCxLQUFNQyxFQUFVLFNBQVMsRUFDekIsS0FBTUEsRUFBVSxNQUFNLEVBQ3RCLE9BQVF3TCxHQUFPLENBQUMsY0FBZSxXQUFXLENBQUMsRUFDM0MsUUFBU3JMLEVBQVFMLEVBQVMsQ0FBRSxLQUFNRSxFQUFVLFlBQVksRUFBRyxLQUFNRCxFQUFVLENBQUEsQ0FBRSxFQUFFLEdBQUdELEVBQVMsQ0FDdkYsS0FBTUUsRUFBVSxhQUFhLEVBQzdCLE1BQU9ELEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxFQUN2QyxXQUFZQSxFQUFVLEVBQUMsU0FBVSxDQUNwQyxDQUFBLENBQUMsQ0FBQyxDQUNYLENBQUssRUFDREQsRUFBUyxDQUNMLE9BQVFDLEVBQVUsRUFDbEIsZUFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxFQUNoRCxLQUFNQyxFQUFVLFNBQVMsRUFDekIsS0FBTUEsRUFBVSxXQUFXLEVBQzNCLE9BQVF3TCxHQUFPLENBQUMsY0FBZSxZQUFhLFlBQVksQ0FBQyxFQUN6RCxRQUFTckwsRUFBUUwsRUFBUyxDQUFFLEtBQU1FLEVBQVUsTUFBTSxFQUFHLEtBQU1ELEVBQVUsQ0FBQSxDQUFFLEVBQUUsR0FBR0QsRUFBUyxDQUNqRixLQUFNRSxFQUFVLE9BQU8sRUFDdkIsTUFBT0QsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVLEVBQ3ZDLFdBQVlBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxDQUMvQyxDQUFBLENBQUMsQ0FBQyxDQUNYLENBQUssQ0FDTCxDQUFDLEVBQ1lvYixHQUF1QnJiLEVBQVMsQ0FDekMsT0FBUUMsRUFBVSxFQUNsQixlQUFnQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVLEVBQ2hELEtBQU1DLEVBQVUsZUFBZSxFQUMvQixPQUFRd0wsR0FBTyxDQUFDLGNBQWUsV0FBVyxDQUFDLEVBQzNDLFVBQVd6TCxFQUFVLEVBQ3JCLEtBQU1BLEVBQVUsRUFDaEIsT0FBUUEsRUFBVSxFQUFDLFNBQVUsQ0FDakMsQ0FBQyxFQ3pDWXFiLEdBQW1CdGIsRUFBUyxDQUNyQyxHQUFJQyxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsRUFDcEMsZ0JBQWlCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsRUFDakQsa0JBQW1Cd0wsRUFBVSxFQUFDLEdBQUd2TCxFQUFVLEtBQUssQ0FBQyxFQUFFLFNBQVUsRUFBQyxTQUFVLEVBQ3hFLFNBQVVDLEdBQVNGLEVBQVUsRUFBRUcsRUFBSyxDQUFFLEVBQUUsU0FBVSxFQUFDLFNBQVUsRUFDN0QsV0FBWUMsRUFBUUosRUFBUSxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVUsRUFDckQsT0FBUUMsRUFBVSxtQkFBbUIsRUFBRSxTQUFRLEVBQUcsU0FBVSxFQUM1RCxPQUFRRyxFQUFRRCxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBVSxFQUM5QyxvQkFBcUJILEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxFQUNyRCxPQUFRc2IsR0FDRSxDQUFDLFlBQWEsYUFBYyxTQUFVLFlBQWEsYUFBYSxDQUFDLEVBQ3RFLFNBQVEsRUFDUixTQUFVLEVBQ2YsZUFBZ0JwYixHQUFTRixFQUFVLEVBQUVHLEVBQUssQ0FBRSxFQUFFLFNBQVUsRUFBQyxTQUFVLEVBQ25FLE1BQU93VixFQUNLLENBQ1IsYUFBY25LLEVBQVUsRUFBQyxTQUFVLEVBQ25DLHFCQUFzQnRMLEdBQVNGLEVBQVUsRUFBRUcsRUFBSyxDQUFFLEVBQUUsU0FBVSxFQUFDLFNBQVUsRUFDekUsY0FBZXFMLEVBQVUsRUFBQyxTQUFVLEVBQ3BDLHNCQUF1QitQLEdBQ1h2YixFQUFVLEVBQUVHLEVBQU8sQ0FBQSxFQUMxQixTQUFRLEVBQ1IsU0FBVSxDQUNsQixDQUFBLEVBQ0ksU0FBUSxFQUNSLFNBQVUsRUFDZixNQUFPSCxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsQ0FDM0MsQ0FBQyxFQUVZd2IsR0FBZ0N6YixFQUFTLENBQ2xELEdBQUlDLEVBQVUsRUFBQyxTQUFVLEVBQ3pCLE1BQU9BLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVSxFQUN2QyxLQUFNQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsRUFDdEMsV0FBWUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVLEVBQzVDLEtBQU0wTSxHQUFRLENBQ1Z6TSxFQUFVLFlBQVksRUFDdEJBLEVBQVUsYUFBYSxFQUN2QkEsRUFBVSxnQkFBZ0IsRUFDMUJBLEVBQVUsTUFBTSxFQUNoQkEsRUFBVSxPQUFPLENBQ3pCLENBQUssQ0FDTCxDQUFDLEVBQ1l3YixHQUF5QjFiLEVBQVMsQ0FDM0MsR0FBSUMsRUFBVSxFQUFDLFNBQVUsRUFDekIsVUFBV0EsRUFBVSxFQUFDLFNBQVUsRUFDaEMsUUFBU0EsRUFBVSxFQUFDLFNBQVUsRUFDOUIsUUFBU0ksRUFBUW9iLEVBQTZCLEVBQUUsU0FBVSxFQUMxRCxLQUFNeGIsRUFBVSxFQUFDLFNBQVUsRUFDM0IsT0FBUUMsRUFBVSxlQUFlLEVBQUUsU0FBVSxFQUM3QyxPQUFRRCxFQUFVLEVBQUMsU0FBVSxFQUM3QixLQUFNeUwsR0FBTyxDQUFDLE9BQVEsWUFBYSxRQUFRLENBQUMsRUFBRSxTQUFVLEVBQ3hELE9BQVFBLEdBQU8sQ0FBQyxZQUFhLGFBQWMsYUFBYSxDQUFDLEVBQUUsU0FBVSxFQUNyRSxLQUFNQSxHQUFPLENBQUMsVUFBVyxnQkFBaUIsc0JBQXNCLENBQUMsRUFBRSxTQUFVLENBQ2pGLENBQUMsRUFDWWlRLEdBQWlDM2IsRUFBUyxDQUNuRCxLQUFNRSxFQUFVLHNCQUFzQixFQUN0QyxTQUFVRCxFQUFVLEVBQ3BCLGFBQWNELEVBQVMsQ0FDbkIsR0FBSUMsRUFBVSxFQUFDLFNBQVUsRUFDekIsT0FBUUMsRUFBVSx1QkFBdUIsRUFBRSxTQUFVLENBQzdELENBQUssQ0FDTCxDQUFDLEVBQ1kwYixHQUFxQzViLEVBQVMsQ0FDdkQsS0FBTUUsRUFBVSwyQkFBMkIsRUFDM0MsU0FBVUQsRUFBVSxFQUNwQixLQUFNeWIsR0FDTixpQkFBa0J6YixFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsQ0FDdEQsQ0FBQyxFQUNZNGIsR0FBcUM3YixFQUFTLENBQ3ZELEtBQU1FLEVBQVUsMkJBQTJCLEVBQzNDLFNBQVVELEVBQVUsRUFDcEIsUUFBU0EsRUFBVSxDQUN2QixDQUFDLEVBQ1k2YixHQUE4RDliLEVBQVMsQ0FDaEYsS0FBTUUsRUFBVSx1REFBdUQsRUFDdkUsU0FBVUQsRUFBVSxFQUNwQixRQUFTQSxFQUFVLEVBQ25CLGNBQWV3TCxFQUFVLEVBQ3pCLFdBQVl4TCxFQUFVLEVBQ3RCLFNBQVVJLEVBQVFELEVBQUssQ0FBRSxFQUFFLFNBQVEsRUFBRyxTQUFVLENBQ3BELENBQUMsRUFDWTJiLEdBQTBEL2IsRUFBUyxDQUM1RSxLQUFNRSxFQUFVLG1EQUFtRCxFQUNuRSxTQUFVRCxFQUFVLEVBQ3BCLFFBQVNBLEVBQVUsRUFDbkIsY0FBZXdMLEVBQVUsRUFBQyxTQUFVLEVBQ3BDLE1BQU94TCxFQUFVLEVBQUMsU0FBVSxFQUM1QixTQUFVSSxFQUFRRCxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBVSxDQUNwRCxDQUFDLEVBQ1k0YixHQUEyRGhjLEVBQVMsQ0FDN0UsS0FBTUUsRUFBVSxvREFBb0QsRUFDcEUsU0FBVUQsRUFBVSxFQUNwQixRQUFTQSxFQUFVLEVBQ25CLGNBQWV3TCxFQUFVLEVBQ3pCLE1BQU96TCxFQUFTLENBQ1osS0FBTUMsRUFBVSxFQUFDLFNBQVUsRUFDM0IsUUFBU0EsRUFBVSxFQUFDLFNBQVUsRUFDOUIsTUFBT0EsRUFBVSxFQUFDLFNBQVUsRUFDNUIsS0FBTUEsRUFBVSxFQUFDLFNBQVUsQ0FDbkMsQ0FBSyxDQUNMLENBQUMsRUFDWWdjLEdBQXVDamMsRUFBUyxDQUN6RCxLQUFNRSxFQUFVLDZCQUE2QixFQUM3QyxTQUFVRCxFQUFVLEVBQ3BCLEtBQU15YixFQUNWLENBQUMsRUFDWVEsR0FBdUNsYyxFQUFTLENBQ3pELEtBQU1FLEVBQVUsNkJBQTZCLEVBQzdDLFNBQVVELEVBQVUsRUFDcEIsUUFBU0EsRUFBVSxFQUNuQixhQUFjd0wsRUFBVSxFQUN4QixjQUFlQSxFQUFVLENBQzdCLENBQUMsRUFDWTBRLEdBQW9DbmMsRUFBUyxDQUN0RCxLQUFNRSxFQUFVLDBCQUEwQixFQUMxQyxLQUFNd2IsR0FDTixTQUFVemIsRUFBVSxFQUFDLFNBQVUsRUFDL0IsaUJBQWtCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsQ0FDdEQsQ0FBQyxFQUNZbWMsR0FBb0NwYyxFQUFTLENBQ3RELEtBQU1FLEVBQVUsMEJBQTBCLEVBQzFDLFFBQVNELEVBQVUsRUFDbkIsU0FBVUEsRUFBVSxFQUFDLFNBQVUsQ0FDbkMsQ0FBQyxFQUNZb2MsR0FBc0NyYyxFQUFTLENBQ3hELEtBQU1FLEVBQVUsNEJBQTRCLEVBQzVDLFFBQVNELEVBQVUsRUFDbkIsU0FBVUEsRUFBVSxFQUFDLFNBQVUsQ0FDbkMsQ0FBQyxFQUNZcWMsR0FBc0N0YyxFQUFTLENBQ3hELEtBQU1FLEVBQVUsNEJBQTRCLEVBQzVDLFFBQVNELEVBQVUsRUFDbkIsYUFBY3dMLEVBQVUsRUFDeEIsY0FBZUEsRUFBVSxFQUN6QixTQUFVeEwsRUFBVSxFQUFDLFNBQVUsQ0FDbkMsQ0FBQyxFQUNZc2MsR0FBbUJ2YyxFQUFTLENBQ3JDLEtBQU1FLEVBQVUsT0FBTyxFQUN2QixTQUFVRCxFQUFVLEVBQUMsU0FBVSxFQUMvQixNQUFPRyxFQUFPLEVBQUMsU0FBVSxDQUM3QixDQUFDLEVBQ1lvYyxHQUFxQ3hjLEVBQVMsQ0FDdkQsS0FBTUUsRUFBVSw0QkFBNEIsRUFDNUMsU0FBVUQsRUFBVSxDQUN4QixDQUFDLEVBQ1l3YyxHQUFvQ3pjLEVBQVMsQ0FDdEQsS0FBTUUsRUFBVSwyQkFBMkIsRUFDM0MsTUFBT0QsRUFBVSxFQUNqQixTQUFVQSxFQUFVLEVBQUMsU0FBVSxDQUNuQyxDQUFDLEVBQ1l5YyxHQUFtQzFjLEVBQVMsQ0FDckQsS0FBTUUsRUFBVSwwQkFBMEIsRUFDMUMsU0FBVUQsRUFBVSxFQUFDLFNBQVUsQ0FDbkMsQ0FBQyxFQUNZMGMsR0FBb0MzYyxFQUFTLENBQ3RELEtBQU1FLEVBQVUsMkJBQTJCLEVBQzNDLFNBQVVELEVBQVUsRUFBQyxTQUFVLENBQ25DLENBQUMsRUFDWTJjLEdBQXVDNWMsRUFBUyxDQUN6RCxLQUFNRSxFQUFVLDhCQUE4QixFQUM5QyxTQUFVRCxFQUFVLEVBQ3BCLFFBQVNBLEVBQVUsRUFDbkIsaUJBQWtCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVUsQ0FDdEQsQ0FBQyxFQUNZNGMsR0FBMkM3YyxFQUFTLENBQzdELEtBQU1FLEVBQVUsbUNBQW1DLEVBQ25ELFNBQVVELEVBQVUsRUFDcEIsUUFBU0EsRUFBVSxFQUNuQixlQUFnQndMLEVBQVUsQ0FDOUIsQ0FBQyxFQUNZcVIsR0FBMkM5YyxFQUFTLENBQzdELEtBQU1FLEVBQVUsbUNBQW1DLEVBQ25ELFNBQVVELEVBQVUsRUFDcEIsUUFBU0EsRUFBVSxFQUNuQixhQUFjd0wsRUFBVSxDQUM1QixDQUFDLEVBQ1lzUixHQUFzQ0MsRUFDdkMsQ0FDUixLQUFNOWMsRUFBVSw2QkFBNkIsRUFDN0MsU0FBVUQsRUFBVSxDQUN4QixDQUFDLEVBQ0ksWUFBYSxFQUNMZ2QsR0FBc0NELEVBQ3ZDLENBQ1IsS0FBTTljLEVBQVUsNkJBQTZCLEVBQzdDLFNBQVVELEVBQVUsQ0FDeEIsQ0FBQyxFQUNJLFlBQWEsRUFDTGlkLEdBQXNDbGQsRUFBUyxDQUN4RCxLQUFNRSxFQUFVLDZCQUE2QixFQUM3QyxTQUFVRCxFQUFVLENBQ3hCLENBQUMsRUFDWWtkLEdBQStCbmQsRUFBUyxDQUNqRCxLQUFNRSxFQUFVLHFCQUFxQixFQUNyQyxTQUFVRCxFQUFVLEVBQ3BCLFlBQWFJLEVBQVFMLEVBQVMsQ0FDMUIsTUFBT3lMLEVBQVUsRUFBQyxTQUFVLEVBQzVCLEtBQU1DLEdBQU8sQ0FBQyxXQUFZLFFBQVEsQ0FBQyxFQUFFLFNBQVUsRUFDL0MsVUFBV0QsRUFBVSxFQUFDLFNBQVUsRUFDaEMsY0FBZUEsRUFBVSxFQUFDLFNBQVUsQ0FDNUMsQ0FBSyxDQUFDLENBQ04sQ0FBQyxFQUNZMlIsR0FBZ0NwZCxFQUFTLENBQ2xELEtBQU1FLEVBQVUsc0JBQXNCLEVBQ3RDLFNBQVVELEVBQVUsRUFDcEIsUUFBU0EsRUFBVSxFQUNuQixjQUFld0wsRUFBVSxFQUN6QixNQUFPeEwsRUFBVSxFQUNqQixhQUFjd0wsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxDQUMzQixDQUFDLEVBQ1lvZCxHQUErQnJkLEVBQVMsQ0FDakQsS0FBTUUsRUFBVSxxQkFBcUIsRUFDckMsU0FBVUQsRUFBVSxFQUNwQixRQUFTQSxFQUFVLEVBQ25CLGNBQWV3TCxFQUFVLEVBQ3pCLGFBQWNBLEVBQVUsRUFDeEIsWUFBYXhMLEVBQVUsQ0FDM0IsQ0FBQyxFQUNZcWQsR0FBMEN0ZCxFQUFTLENBQzVELEtBQU1FLEVBQVUsaUNBQWlDLEVBQ2pELFNBQVVELEVBQVUsRUFDcEIsUUFBU0EsRUFBVSxFQUNuQixjQUFld0wsRUFBVSxFQUN6QixNQUFPeEwsRUFBVSxFQUNqQixhQUFjd0wsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxDQUMzQixDQUFDLEVBQ1lzZCxHQUF5Q3ZkLEVBQVMsQ0FDM0QsS0FBTUUsRUFBVSxnQ0FBZ0MsRUFDaEQsU0FBVUQsRUFBVSxFQUNwQixRQUFTQSxFQUFVLEVBQ25CLGNBQWV3TCxFQUFVLEVBQ3pCLFdBQVl4TCxFQUFVLEVBQ3RCLGFBQWN3TCxFQUFVLEVBQ3hCLFlBQWF4TCxFQUFVLENBQzNCLENBQUMsRUFDWXVkLEdBQXNDeGQsRUFBUyxDQUN4RCxLQUFNRSxFQUFVLDZCQUE2QixFQUM3QyxTQUFVRCxFQUFVLEVBQ3BCLFFBQVNBLEVBQVUsRUFDbkIsY0FBZXdMLEVBQVUsRUFDekIsYUFBY0EsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxFQUN2QixLQUFNRCxFQUFTLENBQ1gsTUFBT0MsRUFBVSxFQUFDLFNBQVUsRUFDNUIsS0FBTUEsRUFBVSxFQUFDLFNBQVUsRUFDM0IsV0FBWUEsRUFBVSxFQUFDLFNBQVUsRUFDakMsS0FBTXlMLEdBQU8sQ0FBQyxPQUFRLE9BQU8sQ0FBQyxFQUFFLFNBQVUsQ0FDbEQsQ0FBSyxDQUNMLENBQUMsRUFDWStSLEdBQXFDemQsRUFBUyxDQUN2RCxLQUFNRSxFQUFVLDRCQUE0QixFQUM1QyxTQUFVRCxFQUFVLEVBQ3BCLFFBQVNBLEVBQVUsRUFDbkIsY0FBZXdMLEVBQVUsRUFDekIsYUFBY0EsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxFQUN2QixLQUFNRCxFQUFTLENBQ1gsTUFBT0MsRUFBVSxFQUFDLFNBQVUsRUFDNUIsS0FBTUEsRUFBVSxFQUFDLFNBQVUsRUFDM0IsV0FBWUEsRUFBVSxFQUFDLFNBQVUsRUFDakMsS0FBTXlMLEdBQU8sQ0FBQyxPQUFRLE9BQU8sQ0FBQyxFQUFFLFNBQVUsQ0FDbEQsQ0FBSyxDQUNMLENBQUMsRUFDWWdTLEdBQTZCMWQsRUFBUyxDQUMvQyxLQUFNRSxFQUFVLGtCQUFrQixFQUNsQyxTQUFVRCxFQUFVLEVBQ3BCLFNBQVVxYixFQUNkLENBQUMsRUFDWXFDLEdBQTBCM2QsRUFBUyxDQUM1QyxLQUFNRSxFQUFVLGVBQWUsRUFDL0IsU0FBVUQsRUFBVSxFQUNwQixTQUFVcWIsRUFDZCxDQUFDLEVBQ1lzQyxHQUFnRDVkLEVBQVMsQ0FDbEUsS0FBTUUsRUFBVSx3Q0FBd0MsRUFDeEQsU0FBVUQsRUFBVSxFQUNwQixRQUFTQSxFQUFVLEVBQ25CLFFBQVNBLEVBQVUsRUFDbkIsTUFBT0EsRUFBVSxFQUNqQixhQUFjd0wsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxDQUMzQixDQUFDLEVBQ1k0ZCxHQUErQzdkLEVBQVMsQ0FDakUsS0FBTUUsRUFBVSx1Q0FBdUMsRUFDdkQsU0FBVUQsRUFBVSxFQUNwQixRQUFTQSxFQUFVLEVBQ25CLFFBQVNBLEVBQVUsRUFDbkIsVUFBV0EsRUFBVSxFQUNyQixhQUFjd0wsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxDQUMzQixDQUFDLEVBQ1k2ZCxHQUFxQzlkLEVBQVMsQ0FDdkQsS0FBTUUsRUFBVSw0QkFBNEIsRUFDNUMsU0FBVUQsRUFBVSxFQUNwQixLQUFNeWIsR0FDTixhQUFjalEsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxDQUMzQixDQUFDLEVBQ1k4ZCxHQUFvQy9kLEVBQVMsQ0FDdEQsS0FBTUUsRUFBVSwyQkFBMkIsRUFDM0MsU0FBVUQsRUFBVSxFQUNwQixLQUFNeWIsR0FDTixhQUFjalEsRUFBVSxFQUN4QixZQUFheEwsRUFBVSxDQUMzQixDQUFDLEVBQ1krZCxHQUErQmhlLEVBQVMsQ0FDakQsS0FBTUUsRUFBVSxxQkFBcUIsRUFDckMsU0FBVUQsRUFBVSxFQUNwQixRQUFTQSxFQUFVLEVBQ25CLGNBQWV3TCxFQUFVLEVBQ3pCLE1BQU94TCxFQUFVLEVBQ2pCLGFBQWN3TCxFQUFVLEVBQ3hCLFlBQWF4TCxFQUFVLENBQzNCLENBQUMsRUFDWWdlLEdBQThCamUsRUFBUyxDQUNoRCxLQUFNRSxFQUFVLG9CQUFvQixFQUNwQyxTQUFVRCxFQUFVLEVBQ3BCLFFBQVNBLEVBQVUsRUFDbkIsY0FBZXdMLEVBQVUsRUFDekIsS0FBTXhMLEVBQVUsRUFDaEIsYUFBY3dMLEVBQVUsRUFDeEIsWUFBYXhMLEVBQVUsQ0FDM0IsQ0FBQyxFQUNZaWUsR0FBNEJsZSxFQUFTLENBQzlDLEtBQU1FLEVBQVUsaUJBQWlCLEVBQ2pDLFNBQVVELEVBQVUsRUFDcEIsUUFBU0csRUFBTyxDQUNwQixDQUFDLEVBQ1krZCxHQUE0Qm5lLEVBQVMsQ0FDOUMsS0FBTUUsRUFBVSxpQkFBaUIsRUFDakMsU0FBVUQsRUFBVSxFQUNwQixRQUFTRyxFQUFPLENBQ3BCLENBQUMsRUFDWWdlLEdBQTRCcGUsRUFBUyxDQUM5QyxLQUFNRSxFQUFVLGlCQUFpQixFQUNqQyxTQUFVRCxFQUFVLEVBQUMsU0FBVSxFQUMvQixZQUFhQSxFQUFVLEVBQUMsU0FBVSxDQUN0QyxDQUFDLEVBQ1lvZSxHQUE0QnJlLEVBQVMsQ0FDOUMsS0FBTUUsRUFBVSxpQkFBaUIsRUFDakMsU0FBVUQsRUFBVSxFQUFDLFNBQVUsRUFDL0IsU0FBVUcsRUFBTyxFQUFDLFNBQVUsQ0FDaEMsQ0FBQyxFQUNZa2UsR0FBMkJ0ZSxFQUFTLENBQzdDLEtBQU1FLEVBQVUsZ0JBQWdCLEVBQ2hDLFNBQVVELEVBQVUsRUFBQyxTQUFVLEVBQy9CLFFBQVNHLEVBQU8sQ0FDcEIsQ0FBQyxFQUNZbWUsR0FBd0N2ZSxFQUFTLENBQzFELEtBQU1FLEVBQVUsOEJBQThCLEVBQzlDLFNBQVVELEVBQVUsRUFBQyxTQUFVLEVBQy9CLFFBQVNHLEVBQU8sQ0FDcEIsQ0FBQyxFQUNZb2UsR0FBeUN4ZSxFQUFTLENBQzNELEtBQU1FLEVBQVUsK0JBQStCLEVBQy9DLFNBQVVELEVBQVUsRUFDcEIsUUFBU0csRUFBTyxDQUNwQixDQUFDLEVBTVlxZSxHQUFxQnpCLEVBQ3RCLENBQ1IsS0FBTS9jLEVBQVUsRUFDaEIsU0FBVUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVLENBQzlDLENBQUMsRUFDSSxZQUFhLEVBQ0x5ZSxHQUE0QmxULEdBQXFCLE9BQVEsQ0FDbEVtUSxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBSyxHQUNBQyxHQUNBSSxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBRSxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBSyxFQUNKLENBQUMsRUFDNEQ3ZSxHQUFDLE9BQVEsQ0FDbEV3YyxHQUNBQyxHQUNBQyxHQUNBQyxHQUNBRyxHQUNBQyxHQUNBQyxHQUNBeUIsR0FDQUMsR0FDQUMsR0FDQUMsRUFDSixDQUFDLEVBTU0sU0FBU0ksR0FBbUJ6L0IsRUFBTyxDQUN0QyxNQUFNMC9CLEVBQU0sS0FBSyxNQUFNMS9CLEVBQU0sS0FBSyxVQUFVLEVBQ3RDdVMsRUFBU2l0QixHQUEwQixVQUFVRSxDQUFHLEVBQ3RELEdBQUksQ0FBQ250QixFQUFPLFFBQVMsQ0FDakIsTUFBTW90QixFQUFnQkosR0FBbUIsVUFBVUcsQ0FBRyxFQUN0RCxPQUFJQyxFQUFjLFFBQ1AsQ0FBRSxLQUFNQSxFQUFjLEtBQU0sVUFBVyxFQUFNLEVBRWpELENBQUUsS0FBTSxLQUFNLFVBQVcsRUFBTSxDQUM5QyxDQUNJLE1BQU8sQ0FBRSxLQUFNcHRCLEVBQU8sS0FBTSxVQUFXLEVBQU8sQ0FDbEQsQ0MvYVksTUFBQ3F0QixHQUFnQywwQkFLaENDLEdBQXlDLENBQ2xELE1BQU8sTUFDUCxXQUFZLENBQUMsT0FBUSxPQUFPLEVBQzVCLGlCQUFrQixRQUNsQixrQkFBbUIsUUFDbkIsd0JBQXlCLENBQ3JCLE1BQU8sd0JBQ1YsRUFDRCxjQUFlLENBQ1gsS0FBTSxjQUNULEVBQ0QseUJBQTBCLEtBQzFCLE1BQU8sQ0FDWCxFQUNhQyxHQUFOLE1BQU1BLFdBQTJCMVYsRUFBcUIsQ0FNekQsWUFBWWpwQixFQUFVLEdBQUksQ0FDdEIsTUFBTyxFQU5YMmhCLEVBQUEsS0FBQWlkLElBQ0FqZCxFQUFBLEtBQUFrZCxJQUNBbGQsRUFBQSxLQUFBbWQsR0FBaUIsTUFDakJuZCxFQUFBLEtBQUFvZCxHQUFvQixNQUNwQi96QixFQUFBLG9CQUFlLElBQUltZSxJQUdmcEUsRUFBQSxLQUFLNlosR0FBUzUrQixFQUFRLE9BQVN5K0IsSUFDL0IxWixFQUFBLEtBQUs4WixHQUFVNytCLEVBQVEsT0FDL0IsQ0FJSSxJQUFJLGNBQWUsQ0FDZixPQUFPOGhCLEVBQUEsS0FBSzhjLEdBQ3BCLENBS0ksSUFBSSxhQUFhMUYsRUFBTyxDQUNwQm5VLEVBQUEsS0FBSzZaLEdBQVMxRixFQUN0QixDQUNJLElBQUksbUJBQW9CLENBQ3BCLE9BQU9wWCxFQUFBLEtBQUtpZCxLQUFxQixJQUN6QyxDQUNJLE1BQU0sV0FBVy8rQixFQUFTLENBQ3RCLE1BQU1nL0IsRUFBU2gvQixFQUFRLFFBQVU4aEIsRUFBQSxLQUFLK2MsSUFDdEMsT0FBSSxPQUFPRyxHQUFXLFdBQ1gsTUFBTUEsRUFBUSxFQUVsQkEsQ0FDZixDQUNJLFdBQVduZ0MsRUFBTyxpQkFDZCxLQUFNLENBQUUsS0FBTXVTLEVBQVEsVUFBQTZ0QixDQUFTLEVBQUtYLEdBQW1Cei9CLENBQUssRUFDNUQsR0FBSXVTLElBQVcsT0FHZixLQUFLLEtBQUssSUFBS0EsQ0FBTSxFQUNqQixDQUFBNnRCLEdBU0osSUFOSTd0QixFQUFPLE9BQVMsUUFDaEIsS0FBSyxLQUFLLFFBQVMsQ0FBRSxLQUFNLFFBQVMsTUFBT0EsRUFBUSxFQUduRCxLQUFLLEtBQUtBLEVBQU8sS0FBTUEsQ0FBTSxFQUU3QkEsRUFBTyxPQUFTLG1CQUFvQixDQUNwQyxLQUFLLEtBQUssZUFBZ0IsQ0FDdEIsS0FBTSxtQkFDTixhQUFjLENBQ1YsR0FBR0EsQ0FDTixDQUNqQixDQUFhLEVBQ0QsTUFDWixDQUlRLEdBSElBLEVBQU8sT0FBUyxtQkFDaEIyVCxFQUFBLEtBQUtnYSxHQUFvQjN0QixFQUFPLFNBRWhDQSxFQUFPLE9BQVMsZ0JBQWlCLENBQ2pDLE1BQU1xaUIsRUFBVzZKLEdBQXdCLFVBQVVsc0IsQ0FBTSxFQUN6RCxHQUFJLENBQUNxaUIsRUFBUyxRQUFTLENBQ25COWlCLEdBQU8sTUFBTSxvQ0FBcUM4aUIsRUFBUyxLQUFLLEVBQ2hFLE1BQ2hCLENBQ1ksTUFBTXlMLElBQWN2N0IsRUFBQTh2QixFQUFTLEtBQUssU0FBUyxRQUF2QixZQUFBOXZCLEVBQThCLGVBQWdCLEVBQzVEdzdCLElBQWV6N0IsRUFBQSt2QixFQUFTLEtBQUssU0FBUyxRQUF2QixZQUFBL3ZCLEVBQThCLGdCQUFpQixFQUM5RDA3QixFQUFjRixFQUFjQyxFQUM1QmpILEVBQVEsSUFBSXRMLEdBQU0sQ0FDcEIsWUFBQXNTLEVBQ0EscUJBQW9CdDRCLEVBQUE2c0IsRUFBUyxLQUFLLFNBQVMsUUFBdkIsWUFBQTdzQixFQUE4Qix1QkFBd0IsQ0FBRSxFQUM1RSxhQUFBdTRCLEVBQ0Esc0JBQXFCcjRCLEVBQUEyc0IsRUFBUyxLQUFLLFNBQVMsUUFBdkIsWUFBQTNzQixFQUE4Qix3QkFBeUIsQ0FBRSxFQUM5RSxZQUFBczRCLENBQ2hCLENBQWEsRUFDRCxLQUFLLEtBQUssZUFBZ0JsSCxDQUFLLEVBQy9CLEtBQUssS0FBSyxZQUFhLENBQ25CLEtBQU0sZ0JBQ04sU0FBVSxDQUNOLEdBQUl6RSxFQUFTLEtBQUssU0FBUyxJQUFNLEdBQ2pDLE9BQVFBLEVBQVMsS0FBSyxTQUFTLFFBQVUsQ0FBRSxFQUMzQyxNQUFPLENBQ0gsWUFBQXlMLEVBQ0EscUJBQW9CdkgsRUFBQWxFLEVBQVMsS0FBSyxTQUFTLFFBQXZCLFlBQUFrRSxFQUE4Qix1QkFBd0IsQ0FBRSxFQUM1RSxhQUFBd0gsRUFDQSxzQkFBcUJFLEVBQUE1TCxFQUFTLEtBQUssU0FBUyxRQUF2QixZQUFBNEwsRUFBOEIsd0JBQXlCLENBQUUsRUFDOUUsWUFBQUQsQ0FDSCxDQUNKLENBQ2pCLENBQWEsRUFDRCxNQUNaLENBQ1EsR0FBSWh1QixFQUFPLE9BQVMsc0JBQXVCLENBQ3ZDLEtBQUssS0FBSyxZQUFZLEVBQ3RCLE1BQ1osQ0FDUSxHQUFJQSxFQUFPLE9BQVMsNEJBQTZCLENBQzdDLEtBQUssS0FBSyxlQUFnQixDQUN0QixPQUFRQSxFQUFPLE9BQy9CLENBQWEsRUFDRCxNQUNaLENBQ1EsR0FBSUEsRUFBTyxPQUFTLHlEQUNoQkEsRUFBTyxPQUFTLDhCQUErQixDQUcvQyxLQUFLLFVBQVUsQ0FDWCxLQUFNLDZCQUNOLFFBQVNBLEVBQU8sT0FDaEMsQ0FBYSxFQUNELE1BQ1osQ0FDUSxHQUFJQSxFQUFPLE9BQVMscURBQ2hCQSxFQUFPLE9BQVMsdUJBQ2hCQSxFQUFPLE9BQVMsbUNBQ2hCQSxFQUFPLE9BQVMseUNBQTBDLENBQ3REQSxFQUFPLE9BQVMsbUNBQ2hCLEtBQUssS0FBSyx5QkFBMEIsQ0FDaEMsS0FBTSxtQkFDTixNQUFPQSxFQUFPLE1BQ2QsT0FBUUEsRUFBTyxRQUNmLFdBQVlBLEVBQU8sV0FDdkMsQ0FBaUIsRUFHTCxNQUNaLENBQ1EsSUFBSUEsRUFBTyxPQUFTLDZCQUNoQkEsRUFBTyxPQUFTLGdDQUNaQSxFQUFPLEtBQUssT0FBUyxVQUFXLENBQ2hDLE1BQU1rdUIsRUFBaUJsdUIsRUFBTyxPQUFTLDRCQUNqQ0EsRUFBTyxpQkFDUCxLQUNBdFQsRUFBT2k5QixHQUEwQixNQUFNLENBQ3pDLE9BQVEzcEIsRUFBTyxLQUFLLEdBQ3BCLGVBQUFrdUIsRUFDQSxLQUFNbHVCLEVBQU8sS0FBSyxLQUNsQixLQUFNQSxFQUFPLEtBQUssS0FDbEIsUUFBU0EsRUFBTyxLQUFLLFFBQ3JCLE9BQVFBLEVBQU8sS0FBSyxNQUN4QyxDQUFpQixFQUNELEtBQUssS0FBSyxjQUFldFQsQ0FBSSxFQUM3QixNQUNoQixDQUVRLEdBQUlzVCxFQUFPLE9BQVMsNkJBQ2hCQSxFQUFPLE9BQVMsNkJBQThCLENBQzlDLE1BQU10VCxFQUFPc1QsRUFBTyxLQUNwQixHQUFJdFQsRUFBSyxPQUFTLGlCQUFtQkEsRUFBSyxTQUFXLFlBQWEsQ0FDOUQsTUFBTXExQixFQUFXNkgsR0FBcUIsTUFBTSxDQUN4QyxPQUFRbDlCLEVBQUssR0FDYixLQUFNQSxFQUFLLEtBQ1gsT0FBUSxjQUNSLFVBQVdBLEVBQUssVUFDaEIsS0FBTUEsRUFBSyxLQUNYLE9BQVEsSUFDNUIsQ0FBaUIsRUFDRCxLQUFLLEtBQUssY0FBZXExQixDQUFRLEVBQ2pDLEtBQUssS0FBSyxnQkFBaUIsQ0FDdkIsR0FBSXIxQixFQUFLLEdBQ1QsS0FBTSxnQkFDTixPQUFRQSxFQUFLLFNBQVcsR0FDeEIsVUFBV0EsRUFBSyxXQUFhLEdBQzdCLEtBQU1BLEVBQUssTUFBUSxFQUN2QyxDQUFpQixFQUNELE1BQ2hCLENBQ1ksR0FBSUEsRUFBSyxPQUFTLFVBQVcsQ0FDekIsTUFBTXloQyxFQUFleEUsR0FBMEIsTUFBTSxDQUNqRCxPQUFRM3BCLEVBQU8sS0FBSyxHQUNwQixLQUFNQSxFQUFPLEtBQUssS0FDbEIsS0FBTUEsRUFBTyxLQUFLLEtBQ2xCLFFBQVNBLEVBQU8sS0FBSyxRQUNyQixPQUFRLGFBQzVCLENBQWlCLEVBQ0QsS0FBSyxLQUFLLGNBQWVtdUIsQ0FBWSxFQUNyQyxNQUNoQixDQUNBLEVBQ0EsQ0FDSSxTQUFTLy9CLEVBQU8sQ0FDWixLQUFLLEtBQUssUUFBUyxDQUNmLEtBQU0sUUFDTixNQUFBQSxDQUNaLENBQVMsQ0FDVCxDQUNJLFNBQVUsQ0FDTixLQUFLLEtBQUssV0FBVyxDQUM3QixDQUNJLFVBQVcsQ0FDUCxLQUFLLEtBQUssY0FBYyxDQUNoQyxDQVFJLFlBQVk4RCxFQUFTazhCLEVBQWdCLENBQ2pDLEtBQUssVUFBVSxDQUNYLEtBQU0sMkJBQ04sS0FBTSxPQUFPbDhCLEdBQVksU0FDbkIsQ0FDRSxLQUFNLFVBQ04sS0FBTSxPQUNOLFFBQVMsQ0FDTCxDQUNJLEtBQU0sYUFDTixLQUFNQSxDQUNULENBQ0osQ0FDckIsRUFDa0JBLEVBQ04sR0FBR2s4QixDQUNmLENBQVMsRUFDRCxLQUFLLFVBQVUsQ0FDWCxLQUFNLGlCQUNsQixDQUFTLENBQ1QsQ0FDSSx3QkFBd0J6VixFQUFRLE9BNEI1QixNQTNCb0IsQ0FDaEIsYUFBY0EsRUFBTyxhQUNyQixNQUFPQSxFQUFPLE9BQ1ZqSSxFQUFBLEtBQUs4YyxLQUNMRixHQUF1QyxNQUMzQyxNQUFPM1UsRUFBTyxPQUFTMlUsR0FBdUMsTUFDOUQsTUFBTzNVLEVBQU8sT0FBUzJVLEdBQXVDLE1BQzlELFdBQVkzVSxFQUFPLFlBQWMyVSxHQUF1QyxXQUN4RSxtQkFBb0IzVSxFQUFPLGtCQUN2QjJVLEdBQXVDLGlCQUMzQyxvQkFBcUIzVSxFQUFPLG1CQUN4QjJVLEdBQXVDLGtCQUMzQywwQkFBMkIzVSxFQUFPLHlCQUM5QjJVLEdBQXVDLHdCQUMzQyw0QkFBNkIzVSxFQUFPLDBCQUNoQzJVLEdBQXVDLHlCQUMzQyxlQUFnQkMsR0FBbUIseUJBQXlCNVUsRUFBTyxhQUFhLEdBQzVFMlUsR0FBdUMsY0FDM0MsWUFBYTNVLEVBQU8sWUFBYzJVLEdBQXVDLFdBQ3pFLE9BQU8vNkIsRUFBQW9tQixFQUFPLFFBQVAsWUFBQXBtQixFQUFjLElBQUswRyxJQUFVLENBQ2hDLEdBQUdBLEVBQ0gsT0FBUSxNQUN4QixJQUdZLEdBQUkwZixFQUFPLGNBQWdCLEVBQzlCLENBRVQsQ0FDSSxPQUFPLHlCQUF5QmhrQixFQUFHLENBQy9CLEdBQUksT0FBT0EsRUFBTSxJQUNiLE9BRUosS0FBTSxDQUFFLEtBQUFuQixFQUFNLGVBQUE2NkIsRUFBZ0IsZ0JBQUFDLEVBQWlCLFVBQUFDLEVBQVcsa0JBQUFDLEVBQW1CLG1CQUFBQyxFQUFvQixnQkFBQUMsRUFBaUIsa0JBQUFDLEVBQW1CLGtCQUFBQyxFQUFtQixvQkFBQUMsRUFBcUIsVUFBQUMsRUFBVyxHQUFHNzZCLENBQU0sRUFBR1UsRUFDOUxna0IsRUFBUyxDQUNYLEtBQUFubEIsRUFDQSxnQkFBaUI2NkIsR0FBa0NDLEVBQ25ELFVBQUFDLEVBQ0EsbUJBQW9CQyxHQUVkQyxFQUNOLGtCQUFtQkMsR0FBb0NDLEVBQ3ZELG9CQUFxQkMsR0FFZkMsRUFDTixVQUFBQyxFQUNBLEdBQUc3NkIsQ0FDTixFQUVELGNBQU8sS0FBSzBrQixDQUFNLEVBQUUsUUFBU25wQixHQUFRLENBQzdCbXBCLEVBQU9ucEIsQ0FBRyxJQUFNLFFBQ2hCLE9BQU9tcEIsRUFBT25wQixDQUFHLENBQ2pDLENBQVMsRUFDTSxPQUFPLEtBQUttcEIsQ0FBTSxFQUFFLE9BQVMsRUFBSUEsRUFBUyxNQUN6RCxDQUtJLElBQUksZUFBZW9XLEVBQWUsQ0FDOUJwYixFQUFBLEtBQUsrWixHQUFpQnFCLEVBQzlCLENBTUkscUJBQXFCQSxFQUFlLFdBS2hDLEdBSkksT0FBT3JlLEVBQUEsS0FBS2dkLElBQW1CLEtBRS9CL1osRUFBQSxLQUFLK1osR0FBaUIsTUFFdEJxQixJQUFrQixPQUFRLENBRTFCLEtBQUssVUFBVSxDQUNYLEtBQU0saUJBQ04sUUFBUyxDQUNMLFFBQVMsTUFDWixDQUNqQixDQUFhLEVBQ0QsTUFDWixDQUNRLEdBQUksT0FBT3JlLEVBQUEsS0FBS2dkLEtBQW1CLFVBQy9CLE9BQU9xQixHQUFrQixTQUFVLENBRW5DeHZCLEdBQU8sS0FBSywwSUFBMEksRUFDdEosTUFDWixDQUNRLEdBQUl3dkIsSUFBa0IsS0FBTSxDQUN4Qnh2QixHQUFPLE1BQU0saUdBQWlHLEVBQzlHLEtBQUssVUFBVSxDQUNYLEtBQU0saUJBQ04sUUFBUyxDQUNMLFFBQVMsSUFDWixDQUNqQixDQUFhLEVBQ0QsTUFDWixDQUNRLEdBQUltUixFQUFBLEtBQUtnZCxNQUFtQixNQUN4QixPQUFPaGQsRUFBQSxLQUFLZ2QsS0FBbUIsU0FBVSxDQUV6QyxLQUFLLFVBQVUsQ0FDWCxLQUFNLGlCQUNOLFFBQVMsQ0FDTCxRQUFTcUIsQ0FDWixDQUNqQixDQUFhLEVBQ0QsTUFDWixDQUNRLElBQUlBLEdBQUEsWUFBQUEsRUFBZSxjQUFheDhCLEVBQUFtZSxFQUFBLEtBQUtnZCxNQUFMLFlBQUFuN0IsRUFBcUIsWUFDakR3OEIsR0FBQSxZQUFBQSxFQUFlLGNBQWF6OEIsRUFBQW9lLEVBQUEsS0FBS2dkLE1BQUwsWUFBQXA3QixFQUFxQixZQUNqRHk4QixHQUFBLFlBQUFBLEVBQWUsbUJBQWtCdjVCLEVBQUFrYixFQUFBLEtBQUtnZCxNQUFMLFlBQUFsNEIsRUFBcUIsZUFBZSxDQUNyRStKLEdBQU8sS0FBSyxpTUFBa00sS0FBSyxVQUFVbVIsRUFBQSxLQUFLZ2QsR0FBYyxFQUFHLEtBQUssVUFBVXFCLENBQWEsQ0FBQyxFQUNoUixNQUNaLENBQ1EsS0FBSyxVQUFVLENBQ1gsS0FBTSxpQkFDTixRQUFTLENBQ0wsUUFBU0EsQ0FDWixDQUNiLENBQVMsQ0FDVCxDQU9JLG9CQUFvQnBXLEVBQVEsQ0FDeEIsTUFBTXFXLEVBQWMsS0FBSyx3QkFBd0JyVyxDQUFNLEVBQ3ZELEtBQUssVUFBVSxDQUNYLEtBQU0saUJBQ04sUUFBU3FXLENBQ3JCLENBQVMsQ0FDVCxDQVFJLHVCQUF1QmpOLEVBQVVqbkIsRUFBUW0wQixFQUFnQixHQUFNLENBQzNELEtBQUssVUFBVSxDQUNYLEtBQU0sMkJBQ04sS0FBTSxDQUNGLEtBQU0sdUJBQ04sT0FBQW4wQixFQUNBLFFBQVNpbkIsRUFBUyxNQUNyQixDQUNiLENBQVMsRUFDRCxHQUFJLENBQ0EsTUFBTXIxQixFQUFPazlCLEdBQXFCLE1BQU0sQ0FDcEMsT0FBUTdILEVBQVMsR0FDakIsZUFBZ0JBLEVBQVMsZUFDekIsS0FBTSxnQkFDTixPQUFRLFlBQ1IsVUFBV0EsRUFBUyxVQUNwQixLQUFNQSxFQUFTLEtBQ2YsT0FBQWpuQixDQUNoQixDQUFhLEVBQ0QsS0FBSyxLQUFLLGNBQWVwTyxDQUFJLENBQ3pDLE9BQ2UwQixFQUFPLENBQ1ZtUixHQUFPLE1BQU0sK0JBQWdDblIsRUFBTzJ6QixDQUFRLENBQ3hFLENBQ1lrTixHQUNBLEtBQUssVUFBVSxDQUNYLEtBQU0saUJBQ3RCLENBQWEsQ0FFYixDQVNJLFVBQVVDLEVBQU8sQ0FBRSxPQUFBQyxFQUFTLEVBQUssRUFBSyxDQUFBLEVBQUksQ0FDdEMsS0FBSyxVQUFVLENBQ1gsS0FBTSw0QkFDTixNQUFPNWlDLEdBQW9CMmlDLENBQUssQ0FDNUMsQ0FBUyxFQUNHQyxHQUNBLEtBQUssVUFBVSxDQUNYLEtBQU0sMkJBQ3RCLENBQWEsQ0FFYixDQVFJLGFBQWF0aUMsRUFBWUMsRUFBWSxDQUNqQyxLQUFNLENBQUUsU0FBQUMsRUFBVSxVQUFBRSxFQUFXLFFBQUFFLENBQVMsRUFBR1AsR0FBb0JDLEVBQVlDLENBQVUsRUFDN0VzaUMsRUFBYSxJQUFJLElBQUlyaUMsRUFBUyxJQUFLTCxHQUFTQSxFQUFLLE1BQU0sQ0FBQyxFQUU5RCxVQUFXMmlDLEtBQVVsaUMsRUFDakJpaUMsRUFBVyxJQUFJQyxFQUFPLE1BQU0sRUFFaEMsR0FBSUQsRUFBVyxLQUFPLEVBQ2xCLFVBQVdFLEtBQVVGLEVBQ2pCLEtBQUssVUFBVSxDQUNYLEtBQU0sMkJBQ04sUUFBU0UsQ0FDN0IsQ0FBaUIsRUFHVCxNQUFNQyxFQUFzQixDQUFDLEdBQUd0aUMsRUFBVyxHQUFHRSxDQUFPLEVBQ3JELFVBQVdxaUMsS0FBWUQsRUFDbkIsR0FBSUMsRUFBUyxPQUFTLFVBQVcsQ0FDN0IsTUFBTUMsRUFBWSxDQUNkLEtBQU0sVUFDTixLQUFNRCxFQUFTLEtBQ2YsUUFBU0EsRUFBUyxRQUNsQixHQUFJQSxFQUFTLE1BQ2hCLEVBQ0dBLEVBQVMsT0FBUyxVQUFZQSxFQUFTLFNBQ3ZDQyxFQUFVLE9BQVNELEVBQVMsUUFFaEMsS0FBSyxVQUFVLENBQ1gsS0FBTSwyQkFDTixLQUFNQyxDQUMxQixDQUFpQixDQUNqQixNQUNxQkQsRUFBUyxPQUFTLGlCQUN2Qmp3QixHQUFPLEtBQUssNkVBQTZFLENBR3pHLENBQ0EsRUF6Y0lpdUIsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQUpHLElBQU0rQixHQUFObkMsR0NiQSxNQUFNb0MsV0FBNkJELEVBQW1CLENBV3pELFlBQVk5Z0MsRUFBVSxHQUFJLENBQ3RCLEdBQUksT0FBTyxrQkFBc0IsSUFDN0IsTUFBTSxJQUFJLE1BQU0sNkNBQTZDLEVBRWpFLE1BQU1BLENBQU8sRUFkakJnTCxFQUFBLGdCQUNBMlcsRUFBQSxLQUFBcWYsSUFDQXJmLEVBQUEsS0FBQXNmLEVBQVMsQ0FDTCxPQUFRLGVBQ1IsZUFBZ0IsT0FDaEIsWUFBYSxNQUNoQixHQUNEdGYsRUFBQSxLQUFBdWYsSUFDQXZmLEVBQUEsS0FBQXdmLEdBQW1CLElBQ25CeGYsRUFBQSxLQUFBeWYsR0FBUyxJQU1MLEtBQUssUUFBVXBoQyxFQUNmK2tCLEVBQUEsS0FBS2ljLEdBQU9oaEMsRUFBUSxTQUFXLHNDQUMvQitrQixFQUFBLEtBQUttYyxHQUFxQmxoQyxFQUFRLG1CQUFxQixHQUMvRCxDQUlJLElBQUksUUFBUyxDQUNULE9BQU84aEIsRUFBQSxLQUFLbWYsR0FBTyxNQUMzQixDQUtJLElBQUksaUJBQWtCLENBQ2xCLE9BQU9uZixFQUFBLEtBQUttZixFQUNwQixDQUlJLElBQUksT0FBUSxDQUNSLE9BQU9uZixFQUFBLEtBQUtzZixHQUNwQixDQVVJLE1BQU0sUUFBUXBoQyxFQUFTLENBQ25CLEdBQUk4aEIsRUFBQSxLQUFLbWYsR0FBTyxTQUFXLFlBQ3ZCLE9BRUFuZixFQUFBLEtBQUttZixHQUFPLFNBQVcsY0FDdkJ0d0IsR0FBTyxLQUFLLHdFQUF3RSxFQUV4RixNQUFNdW9CLEVBQVFsNUIsRUFBUSxPQUFTLEtBQUssYUFDcEMsS0FBSyxhQUFlazVCLEVBQ3BCLE1BQU1tSSxFQUFVcmhDLEVBQVEsS0FBTzhoQixFQUFBLEtBQUtrZixJQUM5QmhDLEVBQVMsTUFBTSxLQUFLLFdBQVdoL0IsQ0FBTyxFQUN0Q3NoQyxFQUFjLE9BQU90QyxHQUFXLFVBQVlBLEVBQU8sV0FBVyxLQUFLLEVBQ3pFLEdBQThCLENBQUNsZCxFQUFBLEtBQUtvZixLQUFzQixDQUFDSSxFQUN2RCxNQUFNLElBQUlsMkIsRUFBVSwyS0FBMkssRUFHbk0sT0FBTyxJQUFJLFFBQVEsTUFBT2thLEVBQVNpSixJQUFXLENBQzFDLEdBQUksQ0FDQSxNQUFNZ1QsRUFBb0IsQ0FDdEIsR0FBSXZoQyxFQUFRLHNCQUF3QixHQUNwQyxNQUFPLEtBQUssWUFDZixFQUNLd2hDLEVBQWdCLElBQUksSUFBSUgsQ0FBTyxFQUNyQyxJQUFJSSxFQUFpQixJQUFJLGtCQUN6QixNQUFNQyxFQUFjRCxFQUFlLGtCQUFrQixZQUFZLEVBQ2pFMWMsRUFBQSxLQUFLa2MsRUFBUyxDQUNWLE9BQVEsYUFDUixlQUFBUSxFQUNBLFlBQUFDLENBQ0gsR0FDRCxLQUFLLEtBQUssb0JBQXFCNWYsRUFBQSxLQUFLbWYsR0FBTyxNQUFNLEVBQ2pEUyxFQUFZLGlCQUFpQixPQUFRLElBQU0sQ0FDdkMzYyxFQUFBLEtBQUtrYyxFQUFTLENBQ1YsT0FBUSxZQUNSLGVBQUFRLEVBQ0EsWUFBQUMsQ0FDSCxHQUtELEtBQUssb0JBQW9CSCxDQUFpQixFQUMxQyxLQUFLLEtBQUssb0JBQXFCemYsRUFBQSxLQUFLbWYsR0FBTyxNQUFNLEVBQ2pELEtBQUssUUFBUyxFQUNkM2IsRUFBUyxDQUM3QixDQUFpQixFQUNEb2MsRUFBWSxpQkFBaUIsUUFBVTdpQyxJQUFVLENBQzdDLEtBQUssTUFBTyxFQUNaLEtBQUssU0FBU0EsRUFBSyxFQUNuQjB2QixFQUFPMXZCLEVBQUssQ0FDaEMsQ0FBaUIsRUFDRDZpQyxFQUFZLGlCQUFpQixVQUFZN2lDLElBQVUsQ0FDL0MsS0FBSyxXQUFXQSxFQUFLLEVBQ3JCLEtBQU0sQ0FBRSxLQUFNdVMsR0FBUSxVQUFBNnRCLEVBQVMsRUFBS1gsR0FBbUJ6L0IsRUFBSyxFQUN4RCxDQUFDdVMsSUFBVTZ0QixLQUdYN3RCLEdBQU8sT0FBUyxtQkFDaEIyVCxFQUFBLEtBQUtvYyxHQUFtQixJQUVuQi92QixHQUFPLE9BQVMsaUJBQ3JCMlQsRUFBQSxLQUFLb2MsR0FBbUIsSUFFeEIvdkIsR0FBTyxPQUFTLG9CQUNoQixLQUFLLGVBQWlCQSxHQUFPLFFBQVEsUUFFckMsS0FBSyxxQkFBcUJtd0IsRUFBa0IsU0FBVyxNQUFNLEdBRXJGLENBQWlCLEVBRUQsTUFBTUksRUFBZSxLQUFLLFFBQVEsY0FBZ0IsU0FBUyxjQUFjLE9BQU8sRUFDaEZBLEVBQWEsU0FBVyxHQUN4QkYsRUFBZSxRQUFXNWlDLElBQVUsQ0FDaEM4aUMsRUFBYSxVQUFZOWlDLEdBQU0sUUFBUSxDQUFDLENBQzNDLEVBRUQsTUFBTTJ2QixFQUFTLEtBQUssUUFBUSxhQUN2QixNQUFNLFVBQVUsYUFBYSxhQUFhLENBQ3ZDLE1BQU8sRUFDL0IsQ0FBcUIsRUFDTGlULEVBQWUsU0FBU2pULEVBQU8sZUFBZ0IsRUFBQyxDQUFDLENBQUMsRUFDOUMsS0FBSyxRQUFRLHVCQUNiaVQsRUFDSSxNQUFNLEtBQUssUUFBUSxxQkFBcUJBLENBQWMsRUFDMUQxYyxFQUFBLEtBQUtrYyxFQUFTLENBQUUsR0FBR25mLEVBQUEsS0FBS21mLEdBQVEsZUFBQVEsQ0FBZ0IsSUFFcEQsTUFBTUcsRUFBUSxNQUFNSCxFQUFlLFlBQWEsRUFFaEQsR0FEQSxNQUFNQSxFQUFlLG9CQUFvQkcsQ0FBSyxFQUMxQyxDQUFDQSxFQUFNLElBQ1AsTUFBTSxJQUFJLE1BQU0sd0JBQXdCLEVBRTVDLE1BQU1DLEVBQWdCLENBQ2xCLEdBQUcsS0FBSyx3QkFBd0JOLENBQWlCLEVBQ2pELE1BQU8sS0FBSyxZQUNmLEVBQ0szdkIsRUFBTyxJQUFJLFNBQ2pCQSxFQUFLLE9BQU8sTUFBT2d3QixFQUFNLEdBQUcsRUFDNUJod0IsRUFBSyxPQUFPLFVBQVcsS0FBSyxVQUFVaXdCLENBQWEsQ0FBQyxFQVNwRCxNQUFNQyxHQUFTLENBQ1gsS0FBTSxTQUNOLElBQUssTUFWVyxNQUFNLE1BQU1OLEVBQWUsQ0FDM0MsT0FBUSxPQUNSLEtBQU01dkIsRUFDTixRQUFTLENBQ0wsY0FBZSxVQUFVb3RCLENBQU0sR0FDL0Isc0JBQXVCNS9CLEdBQVEscUJBQXFCLENBQ3ZELENBQ3JCLENBQWlCLEdBRzBCLEtBQU0sQ0FDaEMsRUFDRCxNQUFNcWlDLEVBQWUscUJBQXFCSyxFQUFNLENBQ2hFLE9BQ21CdGlDLEVBQU8sQ0FDVixLQUFLLE1BQU8sRUFDWixLQUFLLFNBQVNBLENBQUssRUFDbkIrdUIsRUFBTy91QixDQUFLLENBQzVCLENBQ0EsQ0FBUyxDQUNULENBT0ksVUFBVVgsRUFBTyxDQUNiLEdBQUksQ0FBQ2lqQixFQUFBLEtBQUttZixHQUFPLGFBQ2JuZixFQUFBLEtBQUttZixHQUFPLFlBQVksYUFBZSxPQUN2QyxNQUFNLElBQUksTUFBTSw2RkFBNkYsRUFFakhuZixFQUFBLEtBQUttZixHQUFPLFlBQVksS0FBSyxLQUFLLFVBQVVwaUMsQ0FBSyxDQUFDLENBQzFELENBS0ksS0FBS2tqQyxFQUFPLENBQ1JoZCxFQUFBLEtBQUtxYyxHQUFTVyxHQUNWamdCLEVBQUEsS0FBS21mLEdBQU8sZ0JBQ1duZixFQUFBLEtBQUttZixHQUFPLGVBQ3BCLFdBQVUsRUFBRyxRQUFTZSxHQUFXLENBQ3hDQSxFQUFPLFFBQ1BBLEVBQU8sTUFBTSxRQUFVLENBQUNELEVBRTVDLENBQWEsQ0FFYixDQUlJLE9BQVEsQ0FJSixHQUhJamdCLEVBQUEsS0FBS21mLEdBQU8sYUFDWm5mLEVBQUEsS0FBS21mLEdBQU8sWUFBWSxNQUFPLEVBRS9CbmYsRUFBQSxLQUFLbWYsR0FBTyxlQUFnQixDQUM1QixNQUFNUSxFQUFpQjNmLEVBQUEsS0FBS21mLEdBQU8sZUFDbkNRLEVBQWUsV0FBVSxFQUFHLFFBQVNPLEdBQVcsUUFDNUNyK0IsRUFBQXErQixFQUFPLFFBQVAsTUFBQXIrQixFQUFjLE1BQzlCLENBQWEsRUFDRDg5QixFQUFlLE1BQU8sQ0FDbEMsQ0FDWTNmLEVBQUEsS0FBS21mLEdBQU8sU0FBVyxpQkFDdkJsYyxFQUFBLEtBQUtrYyxFQUFTLENBQ1YsT0FBUSxlQUNSLGVBQWdCLE9BQ2hCLFlBQWEsTUFDaEIsR0FDRCxLQUFLLEtBQUssb0JBQXFCbmYsRUFBQSxLQUFLbWYsR0FBTyxNQUFNLEVBQ2pELEtBQUssU0FBVSxFQUUzQixDQUtJLFdBQVksQ0FDSm5mLEVBQUEsS0FBS3FmLE1BQ0wsS0FBSyxVQUFVLENBQ1gsS0FBTSxpQkFDdEIsQ0FBYSxFQUNEcGMsRUFBQSxLQUFLb2MsR0FBbUIsS0FFNUIsS0FBSyxVQUFVLENBQ1gsS0FBTSwyQkFDbEIsQ0FBUyxDQUNULENBQ0EsQ0F4T0lILEdBQUEsWUFDQUMsRUFBQSxZQUtBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQ3hCRyxNQUFNYSxHQUFZLFdBQVcsVUNTN0IsTUFBTUMsV0FBZ0NwQixFQUFtQixDQW9CNUQsWUFBWTlnQyxFQUFVLEdBQUksQ0FDdEIsTUFBTUEsQ0FBTyxFQXJCZDJoQixFQUFBLEtBQUF3Z0IsSUFDSHhnQixFQUFBLEtBQUFrZCxJQUNBbGQsRUFBQSxLQUFBcWYsSUFDQXJmLEVBQUEsS0FBQXNmLEdBQVMsQ0FDTCxPQUFRLGVBQ1IsVUFBVyxNQUNkLEdBQ0R0ZixFQUFBLEtBQUF1ZixJQUNBdmYsRUFBQSxLQUFBeWdCLElBQ0F6Z0IsRUFBQSxLQUFBMGdCLElBUUFyM0IsRUFBQSw2QkFDQUEsRUFBQSxzQkFBaUIsR0FDakIyVyxFQUFBLEtBQUF3ZixHQUFtQixJQUdmcGMsRUFBQSxLQUFLaWMsR0FBT2hoQyxFQUFRLEtBQ3BCK2tCLEVBQUEsS0FBS21jLEdBQXFCbGhDLEVBQVEsbUJBQXFCLEdBQy9ELENBSUksSUFBSSxRQUFTLENBQ1QsT0FBTzhoQixFQUFBLEtBQUttZixJQUFPLE1BQzNCLENBSUksSUFBSSxpQkFBa0IsQ0FDbEIsT0FBT25mLEVBQUEsS0FBS21mLEdBQ3BCLENBS0ksSUFBSSxPQUFRLENBQ1IsT0FBTyxJQUNmLENBSUksSUFBSSxlQUFnQixDQUNoQixPQUFPbmYsRUFBQSxLQUFLc2dCLEdBQ3BCLENBUUksU0FBU0UsRUFBWSxDQUNqQixLQUFLLEtBQUssUUFBU0EsQ0FBVSxDQUNyQyxDQWtISSxNQUFNLFFBQVF0aUMsRUFBUyxDQUNuQixNQUFNazVCLEVBQVFsNUIsRUFBUSxPQUFTLEtBQUssYUFDcEMsS0FBSyxhQUFlazVCLEVBQ3BCblUsRUFBQSxLQUFLOFosR0FBVSxNQUFNLEtBQUssV0FBVzcrQixDQUFPLEdBQzVDLE1BQU11aUMsRUFBTXZpQyxFQUFRLEtBQ2hCOGhCLEVBQUEsS0FBS2tmLEtBQ0wsMENBQTBDLEtBQUssWUFBWSxHQUMvRGpjLEVBQUEsS0FBS2ljLEdBQU91QixHQUNaLE1BQU1WLEVBQWdCLENBQ2xCLEdBQUk3aEMsRUFBUSxzQkFBd0IsR0FDcEMsTUFBTyxLQUFLLFlBQ2YsRUFDRCxNQUFNLElBQUksUUFBUSxDQUFDc2xCLEVBQVNpSixJQUFXLENBQ25DLEdBQUksQ0FDQXZKLEVBQUEsS0FBS21kLEdBQUFLLElBQUwsVUFBcUJsZCxFQUFTaUosRUFBUXNULEVBQ3RELE9BQ21CcmlDLEVBQU8sQ0FDVit1QixFQUFPL3VCLENBQUssQ0FDNUIsQ0FDQSxDQUFTLEVBQ0QsTUFBTSxLQUFLLG9CQUFvQnFpQyxDQUFhLENBQ3BELENBT0ksVUFBVWhqQyxFQUFPLENBQ2IsR0FBSSxDQUFDaWpCLEVBQUEsS0FBS21mLElBQU8sVUFDYixNQUFNLElBQUksTUFBTSxtRkFBbUYsRUFFdkduZixFQUFBLEtBQUttZixJQUFPLFVBQVUsS0FBSyxLQUFLLFVBQVVwaUMsQ0FBSyxDQUFDLENBQ3hELENBTUksT0FBUSxRQUNKOEUsRUFBQW1lLEVBQUEsS0FBS21mLElBQU8sWUFBWixNQUFBdDlCLEVBQXVCLFFBQ3ZCb2hCLEVBQUEsS0FBS3FkLEdBQWlCLFFBQ3RCLEtBQUsscUJBQXVCLE9BQzVCLEtBQUssZUFBaUIsRUFDdEJyZCxFQUFBLEtBQUtzZCxHQUE0QixPQUN6QyxDQUlJLEtBQUtqQixFQUFRLENBQ1QsTUFBTSxJQUFJLE1BQU0sK0ZBQStGLENBQ3ZILENBUUksVUFBVWQsRUFBT3RnQyxFQUFVLEdBQUksQ0FDdkI4aEIsRUFBQSxLQUFLbWYsSUFBTyxTQUFXLGFBQ3ZCLE1BQU0sVUFBVVgsRUFBT3RnQyxDQUFPLENBRTFDLENBS0ksaUJBQWtCLENBRVY4aEIsRUFBQSxLQUFLcWYsTUFDTCxLQUFLLFVBQVUsQ0FDWCxLQUFNLGlCQUN0QixDQUFhLEVBQ0RwYyxFQUFBLEtBQUtvYyxHQUFtQixJQUVwQyxDQVVJLFdBQVdzQixFQUFhQyxFQUF3QixHQUFNLENBQzlDRCxFQUFjLEdBQUtBLEVBQWMsS0FBSyxpQkFJdENDLEdBQ0EsS0FBSyxnQkFBaUIsRUFFMUIsS0FBSyxLQUFLLG1CQUFtQixFQUM3QixLQUFLLFVBQVUsQ0FDWCxLQUFNLDZCQUNOLFFBQVM1Z0IsRUFBQSxLQUFLc2dCLElBQ2QsY0FBZXRnQixFQUFBLEtBQUt1Z0IsSUFDcEIsYUFBY0ksQ0FDMUIsQ0FBUyxFQUNULENBU0ksVUFBVUMsRUFBd0IsR0FBTSxDQUNwQyxHQUFJLENBQUM1Z0IsRUFBQSxLQUFLc2dCLEtBQWtCLE9BQU8sS0FBSyxzQkFBeUIsU0FDN0QsT0FFSixNQUFNSyxFQUFjLEtBQUssSUFBSyxFQUFHLEtBQUsscUJBQ2xDQSxHQUFlLEdBQ2YsS0FBSyxXQUFXQSxFQUFhQyxDQUFxQixFQUV0RDNkLEVBQUEsS0FBS3FkLEdBQWlCLFFBQ3RCLEtBQUsscUJBQXVCLE9BQzVCLEtBQUssZUFBaUIsRUFDdEJyZCxFQUFBLEtBQUtzZCxHQUE0QixPQUN6QyxDQUNBLENBdlNJeEQsR0FBQSxZQUNBbUMsR0FBQSxZQUNBQyxHQUFBLFlBSUFDLEdBQUEsWUFDQWtCLEdBQUEsWUFDQUMsR0FBQSxZQVVBbEIsR0FBQSxZQW5CR2dCLEdBQUEsWUE0REhLLEdBQWUsU0FBQ2xkLEVBQVNpSixFQUFRc1QsRUFBZSxDQUM1QyxHQUFJL2YsRUFBQSxLQUFLbWYsSUFBTyxVQUFXLENBQ3ZCM2IsRUFBUyxFQUNULE1BQ1osQ0FDUSxHQUFJLENBQUN4RCxFQUFBLEtBQUsrYyxJQUNOLE1BQU0sSUFBSXp6QixFQUFVLG9FQUFvRSxFQUU1RixHQUNJLENBQUMwVyxFQUFBLEtBQUsrYyxJQUFRLFdBQVcsS0FBSyxHQUM5QixDQUFDL2MsRUFBQSxLQUFLb2YsSUFDTixNQUFNLElBQUk5MUIsRUFBVSw2S0FBNkssRUFHck0sTUFBTXUzQixFQUNBLENBQ0UsV0FFQSwyQkFBNkI3Z0IsRUFBQSxLQUFLK2MsSUFFbEMsMEJBRUF4L0IsRUFDaEIsRUFRY3VqQyxFQUFLLElBQUlYLEdBQVVuZ0IsRUFBQSxLQUFLa2YsSUFBTTJCLENBQWtCLEVBQ3RENWQsRUFBQSxLQUFLa2MsR0FBUyxDQUNWLE9BQVEsYUFDUixVQUFXMkIsQ0FDZCxHQUNELEtBQUssS0FBSyxvQkFBcUI5Z0IsRUFBQSxLQUFLbWYsSUFBTyxNQUFNLEVBQ2pEMkIsRUFBRyxpQkFBaUIsT0FBUSxJQUFNLENBQzlCN2QsRUFBQSxLQUFLa2MsR0FBUyxDQUNWLE9BQVEsWUFDUixVQUFXMkIsQ0FDZCxHQUNELEtBQUssS0FBSyxvQkFBcUI5Z0IsRUFBQSxLQUFLbWYsSUFBTyxNQUFNLEVBQ2pELEtBQUssUUFBUyxFQUNkM2IsRUFBUyxDQUNyQixDQUFTLEVBQ0RzZCxFQUFHLGlCQUFpQixRQUFVcGpDLEdBQVUsQ0FDcEMsS0FBSyxTQUFTQSxDQUFLLEVBQ25CdWxCLEVBQUEsS0FBS2tjLEdBQVMsQ0FDVixPQUFRLGVBQ1IsVUFBVyxNQUNkLEdBQ0QsS0FBSyxLQUFLLG9CQUFxQm5mLEVBQUEsS0FBS21mLElBQU8sTUFBTSxFQUNqRDFTLEVBQU8vdUIsQ0FBSyxDQUN4QixDQUFTLEVBQ0RvakMsRUFBRyxpQkFBaUIsVUFBWXQvQixHQUFZLFdBQ3hDLEtBQUssV0FBV0EsQ0FBTyxFQUN2QixLQUFNLENBQUUsS0FBTThOLEVBQVEsVUFBQTZ0QixDQUFTLEVBQUtYLEdBQW1CaDdCLENBQU8sRUFDOUQsR0FBSSxHQUFDOE4sR0FBVTZ0QixHQUdmLEdBQUk3dEIsRUFBTyxPQUFTLHVCQUF3QixDQUN4QzJULEVBQUEsS0FBS3NkLEdBQTRCanhCLEVBQU8sZUFDeEMyVCxFQUFBLEtBQUtxZCxHQUFpQmh4QixFQUFPLFNBQ3pCLEtBQUssdUJBQXlCLFNBRzlCLEtBQUsscUJBQXVCLEtBQUssSUFBSyxFQUN0QyxLQUFLLGVBQWlCLEdBRTFCLE1BQU15eEIsRUFBT3hsQyxFQUFvQitULEVBQU8sS0FBSyxLQUV6QnpOLEVBQUEsS0FBSyxvQkFBTCxZQUFBQSxFQUF3QixzQkFBdUIsU0FDbkQsV0FBVyxPQUFPLEVBRTlCLEtBQUssZ0JBQWtCay9CLEVBQUssV0FBYSxFQUl6QyxLQUFLLGdCQUFrQkEsRUFBSyxXQUFhLEdBQUssRUFFbEQsTUFBTVAsRUFBYSxDQUNmLEtBQU0sUUFDTixLQUFNTyxFQUNOLFdBQVl6eEIsRUFBTyxXQUN0QixFQUNELEtBQUssU0FBU2t4QixDQUFVLENBQ3hDLFNBQ3FCbHhCLEVBQU8sT0FBUyxvQ0FBcUMsQ0FDMUQsTUFBTTB4QixJQUF1Q2w4QixHQUFBbEQsRUFBQSxLQUFLLG9CQUFMLFlBQUFBLEVBQXdCLGlCQUF4QixZQUFBa0QsRUFBd0MscUJBQXNCLEdBQzNHLEtBQUssVUFBVSxDQUFDazhCLENBQW9DLENBQ3BFLE1BQ3FCMXhCLEVBQU8sT0FBUyxtQkFDckIyVCxFQUFBLEtBQUtvYyxHQUFtQixJQUVuQi92QixFQUFPLE9BQVMsZ0JBQ3JCMlQsRUFBQSxLQUFLb2MsR0FBbUIsSUFFbkIvdkIsRUFBTyxPQUFTLG9CQUNyQixLQUFLLGVBQWlCQSxFQUFPLFFBQVEsUUFFckMsS0FBSyxxQkFBcUJ5d0IsRUFBYyxTQUFXLE1BQU0sRUFFekUsQ0FBUyxFQUNEZSxFQUFHLGlCQUFpQixRQUFTLElBQU0sQ0FDL0I3ZCxFQUFBLEtBQUtrYyxHQUFTLENBQ1YsT0FBUSxlQUNSLFVBQVcsTUFDZCxHQUNELEtBQUssS0FBSyxvQkFBcUJuZixFQUFBLEtBQUttZixJQUFPLE1BQU0sRUFDakQsS0FBSyxTQUFVLENBQzNCLENBQVMsQ0FDVCxFQzdJTyxNQUFNOEIsV0FBd0I1WixFQUFvQixDQWNyRCxZQUFZMk4sRUFBYzkyQixFQUFVLEdBQUksQ0FDcEMsTUFBTyxFQWZSMmhCLEVBQUEsS0FBQXFoQixHQUNIaDRCLEVBQUEscUJBQ0FBLEVBQUEsZ0JBQ0EyVyxFQUFBLEtBQUFzaEIsR0FDQXRoQixFQUFBLEtBQUF1aEIsR0FDQXZoQixFQUFBLEtBQUF3aEIsR0FBZ0IsQ0FBRSxHQUNsQnhoQixFQUFBLEtBQUFQLEdBQ0FPLEVBQUEsS0FBQXloQixHQUFvQixDQUFFLEdBQ3RCemhCLEVBQUEsS0FBQTBoQixJQUNBMWhCLEVBQUEsS0FBQTJoQixHQUF5QixDQUFFLEdBQzNCM2hCLEVBQUEsS0FBQTRoQixFQUFXLENBQUUsR0FDYjVoQixFQUFBLEtBQUE2aEIsSUFDQTdoQixFQUFBLEtBQUE4aEIsR0FBMEIsQ0FBRSxHQUM1QjloQixFQUFBLEtBQUEraEIsR0FBZ0IsSUFHWixLQUFLLGFBQWU1TSxFQUNwQixLQUFLLFFBQVU5MkIsRUFDVixPQUFPQSxFQUFRLFVBQWMsS0FBZXhCLEdBQWtCLEdBQy9Ed0IsRUFBUSxZQUFjLFNBQ3RCK2tCLEVBQUEsS0FBS2tlLEVBQWEsSUFBSWxDLElBRWpCL2dDLEVBQVEsWUFBYyxhQUMzQixPQUFPQSxFQUFRLFVBQWMsSUFDN0Ira0IsRUFBQSxLQUFLa2UsRUFBYSxJQUFJZixJQUd0Qm5kLEVBQUEsS0FBS2tlLEVBQWFqakMsRUFBUSxXQUU5QitrQixFQUFBLEtBQUttZSxFQUFnQnBNLEdBQ3JCL1IsRUFBQSxLQUFLM0QsRUFBVyxJQUFJMEwsR0FBVyxDQUMzQixHQUFJOXNCLEVBQVEsU0FBVyxHQUN2QixRQUFTOGhCLEVBQUEsS0FBS3loQixFQUMxQixDQUFTLEdBQ0R4ZSxFQUFBLEtBQUtxZSxJQUFxQnBqQyxFQUFRLGtCQUFvQixDQUFFLEdBQUUsSUFBSTA2QixFQUE2QixHQUMzRjNWLEVBQUEsS0FBS3NlLEdBQTJCN0ksR0FBNkJ4NkIsRUFBUSx5QkFBMkIsQ0FBQSxDQUFFLEdBQ2xHK2tCLEVBQUEsS0FBS3llLEdBQTBCeGpDLEVBQVEsbUJBQXFCLEdBQ3BFLENBSUksSUFBSSxXQUFZLENBQ1osT0FBTzhoQixFQUFBLEtBQUttaEIsRUFDcEIsQ0FJSSxJQUFJLGNBQWUsQ0FDZixPQUFPbmhCLEVBQUEsS0FBS29oQixFQUNwQixDQUlJLElBQUksT0FBUSxDQUNSLE9BQU9waEIsRUFBQSxLQUFLVixHQUFTLEtBQzdCLENBSUksSUFBSSxTQUFVLENBQ1YsT0FBT1UsRUFBQSxLQUFLVixFQUNwQixDQUtJLElBQUksT0FBUSxDQUNSLE9BQU9VLEVBQUEsS0FBS21oQixHQUFXLEtBQy9CLENBSUksSUFBSSxTQUFVLENBQ1YsT0FBT25oQixFQUFBLEtBQUt5aEIsRUFDcEIsQ0F3Q0ksTUFBTSxZQUFZbFAsRUFBVSxDQUN4QixPQUFBdlMsRUFBQSxLQUFLb2hCLEdBQWMsS0FBSyxnQkFBaUJwaEIsRUFBQSxLQUFLVixHQUFVaVQsQ0FBUSxFQUNoRSxLQUFLLEtBQUssZ0JBQWlCdlMsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtvaEIsR0FBZTdPLENBQVEsRUFDdEUsTUFBTXJQLEVBQUEsS0FBS2dlLEVBQUFXLElBQUwsVUFBc0J0UCxHQUM1QixNQUFNdlMsRUFBQSxLQUFLbWhCLEdBQVcsb0JBQW9CLE1BQU1qZSxFQUFBLEtBQUtnZSxFQUFBWSxJQUFMLFVBQXdCLEVBQ2pFdlAsQ0FDZixDQWlRSSxNQUFNLFFBQVFyMEIsRUFBUyxDQUVuQixNQUFNZ2xCLEVBQUEsS0FBS2dlLEVBQUFXLElBQUwsVUFBc0IsS0FBSyxjQUNqQzNlLEVBQUEsS0FBS2dlLEVBQUFhLElBQUwsV0FDQSxNQUFNL2hCLEVBQUEsS0FBS21oQixHQUFXLFFBQVEsQ0FDMUIsT0FBUWpqQyxFQUFRLFFBQVUsS0FBSyxRQUFRLE9BQ3ZDLE1BQU8sS0FBSyxRQUFRLE1BQ3BCLElBQUtBLEVBQVEsSUFDYixxQkFBc0IsTUFBTWdsQixFQUFBLEtBQUtnZSxFQUFBWSxJQUFMLFVBQXVCLEtBQUssUUFBUSxPQUM1RSxDQUFTLEVBQ0Q3ZSxFQUFBLEtBQUt3ZSxFQUFXLENBQUUsR0FDbEIsS0FBSyxLQUFLLGtCQUFtQnpoQixFQUFBLEtBQUt5aEIsRUFBUSxDQUNsRCxDQUtJLGNBQWNybEMsRUFBWSxDQUN0QixJQUFJNGxDLEVBQ0EsT0FBTzVsQyxHQUFlLFdBQ3RCNGxDLEVBQWlCNWxDLEVBQVc0akIsRUFBQSxLQUFLeWhCLEVBQVEsRUFHekNPLEVBQWlCNWxDLEVBRXJCNGpCLEVBQUEsS0FBS21oQixHQUFXLGFBQWFuaEIsRUFBQSxLQUFLeWhCLEdBQVVPLENBQWMsQ0FDbEUsQ0FNSSxZQUFZeGdDLEVBQVNrOEIsRUFBaUIsR0FBSSxDQUN0QzFkLEVBQUEsS0FBS21oQixHQUFXLFlBQVkzL0IsRUFBU2s4QixDQUFjLENBQzNELENBS0ksS0FBS3VDLEVBQU8sQ0FDUmpnQixFQUFBLEtBQUttaEIsR0FBVyxLQUFLbEIsQ0FBSyxDQUNsQyxDQUlJLE9BQVEsQ0FDSmhkLEVBQUEsS0FBSzBlLEdBQTBCLENBQUUsR0FDakMzaEIsRUFBQSxLQUFLbWhCLEdBQVcsTUFBTyxDQUMvQixDQU9JLFVBQVUzQyxFQUFPdGdDLEVBQVUsR0FBSSxDQUMzQjhoQixFQUFBLEtBQUttaEIsR0FBVyxVQUFVM0MsRUFBT3RnQyxDQUFPLENBQ2hELENBS0ksV0FBWSxDQUNSOGhCLEVBQUEsS0FBS21oQixHQUFXLFVBQVcsQ0FDbkMsQ0FPSSxNQUFNLFFBQVEzVixFQUFjdHRCLEVBQVUsQ0FBRSxjQUFlLEVBQUssRUFBSSxDQUM1RDhoQixFQUFBLEtBQUtWLEdBQVMsWUFBWWtNLEVBQWN0dEIsQ0FBTyxFQUMvQyxNQUFNcUssRUFBT3lYLEVBQUEsS0FBS29oQixHQUFjLE1BQU0sS0FBTTc0QixHQUFTQSxFQUFLLE9BQVNpakIsRUFBYSxRQUFRLElBQUksRUFDNUYsR0FBSWpqQixHQUNBQSxFQUFLLE9BQVMsWUFDZGlqQixFQUFhLFFBQVEsT0FBUyxnQkFDOUIsTUFBTXRJLEVBQUEsS0FBS2dlLEVBQUFlLElBQUwsVUFBNkJ6VyxFQUFhLFFBQVNqakIsT0FHekQsT0FBTSxJQUFJYyxHQUFtQixRQUFRbWlCLEVBQWEsUUFBUSxJQUFJLFlBQVksQ0FFdEYsQ0FPSSxNQUFNLE9BQU9BLEVBQWN0dEIsRUFBVSxDQUFFLGFBQWMsRUFBSyxFQUFJLENBQzFEOGhCLEVBQUEsS0FBS1YsR0FBUyxXQUFXa00sRUFBY3R0QixDQUFPLEVBRTlDLE1BQU1xSyxFQUFPeVgsRUFBQSxLQUFLb2hCLEdBQWMsTUFBTSxLQUFNNzRCLEdBQVNBLEVBQUssT0FBU2lqQixFQUFhLFFBQVEsSUFBSSxFQUM1RixHQUFJampCLEdBQ0FBLEVBQUssT0FBUyxZQUNkaWpCLEVBQWEsUUFBUSxPQUFTLGdCQUM5QixNQUFNdEksRUFBQSxLQUFLZ2UsRUFBQWUsSUFBTCxVQUE2QnpXLEVBQWEsUUFBU2pqQixPQUd6RCxPQUFNLElBQUljLEdBQW1CLFFBQVFtaUIsRUFBYSxRQUFRLElBQUksWUFBWSxDQUV0RixDQUNBLENBNWRJMlYsRUFBQSxZQUNBQyxFQUFBLFlBQ0FDLEdBQUEsWUFDQS9oQixFQUFBLFlBQ0FnaUIsR0FBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsRUFBQSxZQUNBQyxHQUFBLFlBQ0FDLEdBQUEsWUFDQUMsR0FBQSxZQWJHVixFQUFBLFlBMkVHVyxHQUFnQixlQUFDbGEsRUFBTyxDQUMxQjFFLEVBQUEsS0FBS21lLEVBQWdCelosR0FFckIsTUFBTXVhLEVBRFdsaUIsRUFBQSxLQUFLb2hCLEdBQWMsU0FBUyxJQUFJL1ksRUFBVSxFQUM3QixJQUFLTCxHQUFZQSxFQUFRLDBCQUEwQixFQUNqRi9FLEVBQUEsS0FBS29lLEdBQWdCLENBQ2pCLElBQUksTUFBTXJoQixFQUFBLEtBQUtvaEIsR0FBYyxZQUFhLEdBQUUsT0FBUTc0QixHQUFTQSxFQUFLLE9BQVMsVUFBVSxFQUNyRixHQUFHMjVCLENBQ04sRUFDVCxFQUNVSixHQUFpQixlQUFDSyxFQUFtQixHQUFJLENBQzNDLE1BQU1DLEVBQWUsTUFBTXBpQixFQUFBLEtBQUtvaEIsR0FBYyxnQkFBZ0JwaEIsRUFBQSxLQUFLVixFQUFRLEVBQ3JFK2UsRUFBZ0IsS0FBSyxRQUN0QixnQkFDQyxLQUNBLEtBQUssUUFBUSxhQUNULENBQ0UsY0FBZSxLQUFLLFFBQVEsWUFDaEQsRUFDa0IsT0FDVixPQUFJQSxJQUFrQixNQUFRQSxJQUFrQixRQUN4QyxLQUFLLFFBQVEsVUFDYkEsRUFBYyxTQUFXLEtBQUssUUFBUSxTQUV0QyxLQUFLLFFBQVEsZ0JBQ2JBLEVBQWMsU0FBVyxLQUFLLFFBQVEsaUJBR3JDLEtBQUssUUFBUSxTQUFXLEtBQUssUUFBUSxnQkFDMUN4dkIsR0FBTyxLQUFLLGdGQUFnRixFQUV6RixDQUNILGFBQUF1ekIsRUFDQSxNQUFPcGlCLEVBQUEsS0FBS29oQixHQUFjLE1BQzFCLE1BQU8sS0FBSyxRQUFRLE1BQ3BCLE1BQU9waEIsRUFBQSxLQUFLcWhCLElBQ1osUUFBU2hELEVBQ1QsR0FBRzhELENBQ04sQ0FDVCxFQVFVRSxHQUFjLGVBQUNoUixFQUFVckosRUFBUyxDQUNwQyxNQUFNdUssRUFBWSxNQUFNdkssRUFBUSxnQkFBZ0JoSSxFQUFBLEtBQUtWLEdBQVUrUixFQUFTLFNBQVMsRUFDakZyUixFQUFBLEtBQUtvaEIsR0FBYyxLQUFLLGdCQUFpQnBoQixFQUFBLEtBQUtWLEdBQVVpVCxDQUFRLEVBQ2hFLEtBQUssS0FBSyxnQkFBaUJ2UyxFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS29oQixHQUFlN08sQ0FBUSxFQUV0RSxNQUFNclAsRUFBQSxLQUFLZ2UsRUFBQVcsSUFBTCxVQUFzQnRQLEdBQzVCLE1BQU12UyxFQUFBLEtBQUttaEIsR0FBVyxvQkFBb0IsTUFBTWplLEVBQUEsS0FBS2dlLEVBQUFZLElBQUwsVUFBd0IsRUFDeEUsTUFBTTEzQixFQUFTc2QsR0FBbUI2SyxDQUFRLEVBQzFDLE9BQUF2UyxFQUFBLEtBQUttaEIsR0FBVyx1QkFBdUI5UCxFQUFVam5CLEVBQVEsRUFBSSxFQUN0RG1vQixDQUNmLEVBQ1UwUCxHQUF1QixlQUFDNVEsRUFBVTlvQixFQUFNLENBQzFDeVgsRUFBQSxLQUFLVixHQUFTLFFBQVEsUUFBVSxLQUFLLE1BQU0sS0FBSyxVQUFVVSxFQUFBLEtBQUt5aEIsRUFBUSxDQUFDLEVBQ3hFLElBQUloUSxFQUFhSixFQUFTLFVBVTFCLEdBVEk5b0IsRUFBSyxhQUNEb0IsR0FBWXBCLEVBQUssVUFBVSxFQUMzQmtwQixFQUFhbHBCLEVBQUssV0FBVyxNQUFNa3BCLENBQVUsRUFHN0NBLEVBQWEsS0FBSyxNQUFNQSxDQUFVLEdBR3BCLE1BQU1scEIsRUFBSyxjQUFjeVgsRUFBQSxLQUFLVixHQUFVbVMsRUFBWUosRUFBUyxNQUFNLEVBQ3RFLENBQ2YsTUFBTUssRUFBVyxLQUFLLFFBQVEsZUFBZSxDQUN6QyxTQUFVbnBCLEVBQUssS0FDZixPQUFROG9CLEVBQVMsTUFDakMsQ0FBYSxFQUNELEdBQUlLLElBQWEsR0FBTyxDQUNwQixLQUFLLEtBQUssbUJBQW9CMVIsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtvaEIsR0FBZTc0QixFQUFNLENBQ25FLFNBQUE4b0IsQ0FDcEIsQ0FBaUIsRUFDRHJSLEVBQUEsS0FBS29oQixHQUFjLEtBQUssbUJBQW9CcGhCLEVBQUEsS0FBS1YsR0FBVS9XLEVBQU0sQ0FDN0QsU0FBQThvQixDQUNwQixDQUFpQixFQUNELE1BQU1qckIsRUFBUyxtQ0FDZjRaLEVBQUEsS0FBS21oQixHQUFXLHVCQUF1QjlQLEVBQVVqckIsRUFBUSxFQUFJLEVBQzdELEtBQUssS0FBSyxpQkFBa0I0WixFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS29oQixHQUFlNzRCLEVBQU1uQyxFQUFRLENBQUUsU0FBQWlyQixDQUFRLENBQUUsRUFDekZyUixFQUFBLEtBQUtvaEIsR0FBYyxLQUFLLGlCQUFrQnBoQixFQUFBLEtBQUtWLEdBQVUvVyxFQUFNbkMsRUFBUSxDQUNuRSxTQUFBaXJCLENBQ3BCLENBQWlCLEVBQ0QsTUFDaEIsU0FDcUIsT0FBT0ssRUFBYSxJQUFhLENBQ3RDLEtBQUssS0FBSywwQkFBMkIxUixFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS29oQixHQUFlLENBQ3BFLEtBQU0sb0JBQ04sS0FBQTc0QixFQUNBLGFBQWMsSUFBSWlsQixHQUFvQjZELEVBQVVyUixFQUFBLEtBQUtvaEIsRUFBYSxDQUN0RixDQUFpQixFQUNELE1BQ2hCLENBQ0EsQ0FDUSxLQUFLLEtBQUssbUJBQW9CcGhCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLb2hCLEdBQWU3NEIsRUFBTSxDQUNuRSxTQUFBOG9CLENBQ1osQ0FBUyxFQUNEclIsRUFBQSxLQUFLb2hCLEdBQWMsS0FBSyxtQkFBb0JwaEIsRUFBQSxLQUFLVixHQUFVL1csRUFBTSxDQUM3RCxTQUFBOG9CLENBQ1osQ0FBUyxFQUNEclIsRUFBQSxLQUFLVixHQUFTLFFBQVEsUUFBVSxLQUFLLE1BQU0sS0FBSyxVQUFVVSxFQUFBLEtBQUt5aEIsRUFBUSxDQUFDLEVBQ3hFLE1BQU1yN0IsRUFBUyxNQUFNbUMsRUFBSyxPQUFPeVgsRUFBQSxLQUFLVixHQUFVK1IsRUFBUyxTQUFTLEVBQzVEOWhCLEVBQWVULEdBQWMxSSxDQUFNLEVBQ3pDNFosRUFBQSxLQUFLbWhCLEdBQVcsdUJBQXVCOVAsRUFBVTloQixFQUFjLEVBQUksRUFDbkUsS0FBSyxLQUFLLGlCQUFrQnlRLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLb2hCLEdBQWU3NEIsRUFBTWdILEVBQWMsQ0FBRSxTQUFBOGhCLENBQVEsQ0FBRSxFQUMvRnJSLEVBQUEsS0FBS29oQixHQUFjLEtBQUssaUJBQWtCcGhCLEVBQUEsS0FBS1YsR0FBVS9XLEVBQU1nSCxFQUFjLENBQUUsU0FBQThoQixFQUFVLENBQ2pHLEVBQ1VpUixHQUFtQixlQUFDalIsRUFBVSxDQUNoQyxNQUFNN0MsRUFBYSxJQUFJLElBQUl4TyxFQUFBLEtBQUtvaEIsR0FBYyxTQUN6QyxJQUFJL1ksRUFBVSxFQUNkLElBQUtMLEdBQVksQ0FBQ0EsRUFBUSxTQUFVQSxDQUFPLENBQUMsQ0FBQyxFQUM1Q3VhLEVBQWtCLElBQUksS0FBSyxNQUFNdmlCLEVBQUEsS0FBS29oQixHQUFjLFlBQVcsR0FBSSxJQUFLNzRCLEdBQVMsQ0FBQ0EsRUFBSyxLQUFNQSxDQUFJLENBQUMsQ0FBQyxFQUNuR2k2QixFQUFrQmhVLEVBQVcsSUFBSTZDLEVBQVMsSUFBSSxFQUNwRCxHQUFJbVIsRUFDQSxNQUFNdGYsRUFBQSxLQUFLZ2UsRUFBQW1CLElBQUwsVUFBb0JoUixFQUFVbVIsT0FFbkMsQ0FDRCxNQUFNelQsRUFBZXdULEVBQWdCLElBQUlsUixFQUFTLElBQUksRUFDdEQsR0FBSXRDLEdBQWdCQSxFQUFhLE9BQVMsV0FDdEMsTUFBTTdMLEVBQUEsS0FBS2dlLEVBQUFlLElBQUwsVUFBNkI1USxFQUFVdEMsT0FHN0MsT0FBTSxJQUFJMWxCLEdBQW1CLFFBQVFnb0IsRUFBUyxJQUFJLFlBQVksQ0FFOUUsQ0FDQSxFQUNVdUcsR0FBb0IsZUFBQ3h0QixFQUFRcTRCLEVBQVk3RCxFQUFRLENBQ25ELEdBQUk1ZSxFQUFBLEtBQUtzaEIsSUFBa0IsU0FBVyxFQUNsQyxPQUVKLE1BQU14SixFQUFnQixDQUNsQixNQUFPOVgsRUFBQSxLQUFLb2hCLEdBQ1osWUFBYWgzQixFQUNiLFFBQVM0VixFQUFBLEtBQUtWLEVBQ2pCLEVBRUtvakIsR0FEVSxNQUFNLFFBQVEsSUFBSTFpQixFQUFBLEtBQUtzaEIsSUFBa0IsSUFBS3ZKLEdBQWNBLEVBQVUsSUFBSUQsQ0FBYSxDQUFDLENBQUMsR0FDbEUsS0FBTTF4QixHQUFXQSxFQUFPLE9BQU8saUJBQWlCLEVBQ3ZGLEdBQUlzOEIsRUFBd0IsQ0FHeEIsR0FBSTFpQixFQUFBLEtBQUsyaEIsSUFBd0JjLENBQVUsRUFDdkMsT0FFSnppQixFQUFBLEtBQUsyaEIsSUFBd0JjLENBQVUsRUFBSSxHQUMzQyxNQUFNL2tDLEVBQVEsSUFBSWdNLEdBQWlDLCtCQUErQixLQUFLLFVBQVVnNUIsRUFBdUIsT0FBTyxVQUFVLENBQUMsR0FBSUEsQ0FBc0IsRUFDcEssS0FBSyxLQUFLLG9CQUFxQjFpQixFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS29oQixHQUFlMWpDLEVBQU8sQ0FDckUsT0FBQWtoQyxDQUNoQixDQUFhLEVBQ0QsS0FBSyxVQUFXLEVBQ2hCLE1BQU0rRCxFQUFlM0osR0FBb0MwSixDQUFzQixFQUMvRSxLQUFLLFlBQVlDLENBQVksRUFDN0IsTUFDWixDQUNBLEVBQ0laLEdBQWtCLFVBQUcsQ0FDakIvaEIsRUFBQSxLQUFLbWhCLEdBQVcsR0FBRyxJQUFNcGtDLEdBQVUsQ0FHL0IsR0FGQSxLQUFLLEtBQUssa0JBQW1CQSxDQUFLLEVBRTlCQSxFQUFNLE9BQVMsd0RBQ2YsR0FBSSxDQUNBLE1BQU02bEMsRUFBaUI3bEMsRUFDdkJrbUIsRUFBQSxLQUFLd2UsRUFBVzVrQyxHQUFzQm1qQixFQUFBLEtBQUt5aEIsR0FBVW1CLEVBQWdCNWlCLEVBQUEsS0FBSzBoQixHQUF1QixHQUNqRzFoQixFQUFBLEtBQUtWLEdBQVMsUUFBUSxRQUFVVSxFQUFBLEtBQUt5aEIsR0FDckMsS0FBSyxLQUFLLGtCQUFtQnpoQixFQUFBLEtBQUt5aEIsRUFBUSxDQUM5RCxPQUN1Qmh2QixFQUFLLENBQ1IsS0FBSyxLQUFLLFFBQVMsQ0FDZixLQUFNLFFBQ04sTUFBT0EsQ0FDL0IsQ0FBcUIsQ0FDckIsQ0FFQSxDQUFTLEVBQ0R1TixFQUFBLEtBQUttaEIsR0FBVyxHQUFHLFFBQVVwa0MsR0FBVSxDQUM5QmlqQixFQUFBLEtBQUs0aEIsTUFDTjNlLEVBQUEsS0FBSzJlLEdBQWdCLElBQ3JCLEtBQUssS0FBSyxjQUFlNWhCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLb2hCLEVBQWEsR0FFOUQsS0FBSyxLQUFLLFFBQVNya0MsQ0FBSyxDQUNwQyxDQUFTLEVBQ0RpakIsRUFBQSxLQUFLbWhCLEdBQVcsR0FBRyxlQUFnQixJQUFNLENBQ3JDbGUsRUFBQSxLQUFLMmUsR0FBZ0IsSUFDckIsS0FBSyxLQUFLLGNBQWU1aEIsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtvaEIsRUFBYSxFQUMxRHBoQixFQUFBLEtBQUtvaEIsR0FBYyxLQUFLLGNBQWVwaEIsRUFBQSxLQUFLVixHQUFVVSxFQUFBLEtBQUtvaEIsRUFBYSxDQUNwRixDQUFTLEVBQ0RwaEIsRUFBQSxLQUFLbWhCLEdBQVcsR0FBRyxZQUFjcGtDLEdBQVUsQ0FDdkMsTUFBTWYsRUFBT2UsRUFBTSxTQUFTLE9BQU9BLEVBQU0sU0FBUyxPQUFPLE9BQVMsQ0FBQyxFQUM3RDhsQyxFQUFhOW1DLEdBQWtDQyxDQUFJLEdBQUssR0FDeEQ0aUMsR0FBUzVpQyxHQUFBLFlBQUFBLEVBQU0sS0FBTSxHQUMzQixLQUFLLEtBQUssWUFBYWdrQixFQUFBLEtBQUtWLEdBQVVVLEVBQUEsS0FBS29oQixHQUFleUIsQ0FBVSxFQUNwRTdpQixFQUFBLEtBQUtvaEIsR0FBYyxLQUFLLFlBQWFwaEIsRUFBQSxLQUFLVixHQUFVdWpCLENBQVUsRUFDOUQzZixFQUFBLEtBQUtnZSxFQUFBdEosSUFBTCxVQUEwQmlMLEVBQVk5bEMsRUFBTSxTQUFTLEdBQUk2aEMsRUFDckUsQ0FBUyxFQUNENWUsRUFBQSxLQUFLbWhCLEdBQVcsR0FBRyxhQUFjLElBQU0sQ0FDL0JuaEIsRUFBQSxLQUFLNGhCLEtBQ0wzZSxFQUFBLEtBQUsyZSxHQUFnQixJQUV6QixLQUFLLEtBQUssZ0JBQWlCNWhCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLb2hCLEVBQWEsQ0FDeEUsQ0FBUyxFQUNELElBQUkwQixFQUFlLEVBQ2ZDLEVBQ0ovaUIsRUFBQSxLQUFLbWhCLEdBQVcsR0FBRyx5QkFBMkJwa0MsR0FBVSxDQUNwRCxHQUFJLENBQ0EsTUFBTWltQyxFQUFRam1DLEVBQU0sTUFDZDZoQyxFQUFTN2hDLEVBQU0sT0FDZjBsQyxFQUFhMWxDLEVBQU0sV0FDckJnbUMsSUFBZW5FLElBQ2ZtRSxFQUFhbkUsRUFDYmtFLEVBQWUsR0FHbkIsTUFBTUcsR0FEY2pqQixFQUFBLEtBQUt3aEIsSUFBdUI1QyxDQUFNLEdBQUssSUFDN0JvRSxFQUU5QixHQURBaGpCLEVBQUEsS0FBS3doQixJQUF1QjVDLENBQU0sRUFBSXFFLEVBQ2xDampCLEVBQUEsS0FBS3VoQixJQUF5QixtQkFBcUIsRUFDbkQsT0FFSixNQUFNMkIsRUFBYyxLQUFLLE1BQU1ELEVBQVEsT0FBU2pqQixFQUFBLEtBQUt1aEIsSUFBeUIsa0JBQWtCLEVBQzVGMkIsRUFBY0osSUFDZEEsRUFBZUksRUFJZmhnQixFQUFBLEtBQUtnZSxFQUFBdEosSUFBTCxVQUEwQnFMLEVBQVNSLEVBQVk3RCxHQUVuRSxPQUNtQm5zQixFQUFLLENBQ1IsS0FBSyxLQUFLLFFBQVMsQ0FDZixLQUFNLFFBQ04sTUFBT0EsQ0FDM0IsQ0FBaUIsQ0FDakIsQ0FDQSxDQUFTLEVBQ0R1TixFQUFBLEtBQUttaEIsR0FBVyxHQUFHLGNBQWdCcGtDLEdBQVUsQ0FDekMsR0FBSSxDQUNBLE1BQU1vbUMsRUFBUSxDQUFDbmpCLEVBQUEsS0FBS3loQixHQUFTLEtBQU16bEMsR0FBU0EsRUFBSyxTQUFXZSxFQUFNLE1BQU0sRUFHeEUsR0FGQWttQixFQUFBLEtBQUt3ZSxFQUFXNWtDLEdBQXNCbWpCLEVBQUEsS0FBS3loQixHQUFVMWtDLEVBQU9pakIsRUFBQSxLQUFLMGhCLEdBQXVCLEdBQ3hGMWhCLEVBQUEsS0FBS1YsR0FBUyxRQUFRLFFBQVVVLEVBQUEsS0FBS3loQixHQUNqQzBCLEVBQU8sQ0FDUCxNQUFNQyxFQUFZcGpCLEVBQUEsS0FBS3loQixHQUFTLEtBQU16bEMsR0FBU0EsRUFBSyxTQUFXZSxFQUFNLE1BQU0sRUFDdkVxbUMsR0FDQSxLQUFLLEtBQUssZ0JBQWlCQSxDQUFTLENBRTVELENBQ2dCLEtBQUssS0FBSyxrQkFBbUJwakIsRUFBQSxLQUFLeWhCLEVBQVEsQ0FDMUQsT0FDbUJodkIsRUFBSyxDQUNSLEtBQUssS0FBSyxRQUFTLENBQ2YsS0FBTSxRQUNOLE1BQU9BLENBQzNCLENBQWlCLENBQ2pCLENBQ0EsQ0FBUyxFQUNEdU4sRUFBQSxLQUFLbWhCLEdBQVcsR0FBRyxlQUFpQnBrQyxHQUFVLENBQzFDLEdBQUksQ0FDQWttQixFQUFBLEtBQUt3ZSxFQUFXemhCLEVBQUEsS0FBS3loQixHQUFTLE9BQVF6bEMsR0FBU0EsRUFBSyxTQUFXZSxFQUFNLE1BQU0sR0FDM0VpakIsRUFBQSxLQUFLVixHQUFTLFFBQVEsUUFBVVUsRUFBQSxLQUFLeWhCLEdBQ3JDLEtBQUssS0FBSyxrQkFBbUJ6aEIsRUFBQSxLQUFLeWhCLEVBQVEsQ0FDMUQsT0FDbUJodkIsRUFBSyxDQUNSLEtBQUssS0FBSyxRQUFTLENBQ2YsS0FBTSxRQUNOLE1BQU9BLENBQzNCLENBQWlCLENBQ2pCLENBQ0EsQ0FBUyxFQUNEdU4sRUFBQSxLQUFLbWhCLEdBQVcsR0FBRyxnQkFBaUIsTUFBT3BrQyxHQUFVLENBQ2pELEdBQUksQ0FDQSxNQUFNbW1CLEVBQUEsS0FBS2dlLEVBQUFvQixJQUFMLFVBQXlCdmxDLEVBQy9DLE9BQ21CVyxFQUFPLENBQ1ZtUixHQUFPLE1BQU0sK0JBQWdDblIsQ0FBSyxFQUNsRCxLQUFLLEtBQUssUUFBUyxDQUNmLEtBQU0sUUFDTixNQUFBQSxDQUNwQixDQUFpQixDQUNqQixDQUNBLENBQVMsRUFDRHNpQixFQUFBLEtBQUttaEIsR0FBVyxHQUFHLGVBQWlCL0ssR0FBVSxDQUMxQ3BXLEVBQUEsS0FBS1YsR0FBUyxNQUFNLElBQUk4VyxDQUFLLENBQ3pDLENBQVMsRUFDRHBXLEVBQUEsS0FBS21oQixHQUFXLEdBQUcsb0JBQXFCLElBQU0sQ0FDdENuaEIsRUFBQSxLQUFLNGhCLEtBQ0wzZSxFQUFBLEtBQUsyZSxHQUFnQixJQUV6QixLQUFLLEtBQUssb0JBQXFCNWhCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLb2hCLEVBQWEsQ0FDNUUsQ0FBUyxFQUNEcGhCLEVBQUEsS0FBS21oQixHQUFXLEdBQUcsUUFBVXpqQyxHQUFVLENBQ25DLEtBQUssS0FBSyxRQUFTQSxDQUFLLENBQ3BDLENBQVMsQ0FDVCxFQ25aWSxNQUFDMmxDLEdBQVEsQ0FDakIsb0JBQXFCQyxFQUNyQixvQkFBcUJDLEdBQ3JCLGtDQUFtQ0MsRUFDdkMiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw0OSw1MCw1MSw1Niw1Nyw1OCw1OSw2MCw2MSw2Ml19
