# /product-plan - プロダクト管理・要件管理コマンド

## 目的
Gemini CLIのプロダクトマネージャーとして、長文コンテキスト保持能力を活用し、複雑な要件管理・ロードマップ策定・機能優先順位付けを実行します。

## 対象AI
- **Gemini CLI**: 長文コンテキスト保持、総合判断、ステークホルダー調整能力を活用

## 入力パラメータ
- **必須**: `$PLAN_TYPE` - 計画タイプ（roadmap, feature_spec, requirements, prioritization, stakeholder_alignment）
- **任意**: `$TIME_HORIZON` - 計画期間（sprint, quarter, semester, annual）
- **任意**: `$STAKEHOLDERS` - ステークホルダー（users, business, engineering, design, marketing）
- **任意**: `$COMPLEXITY_LEVEL` - 複雑度（simple, moderate, complex, enterprise）

## 出力
- **プロダクト計画書**: `.tmp/product_plan_[timestamp].md`
- **要件仕様書**: `.tmp/requirements_spec.md`
- **ロードマップドキュメント**: `.tmp/roadmap_[period].md`
- **ステークホルダーマップ**: `.tmp/stakeholder_analysis.json`
- **優先順位マトリクス**: `.tmp/priority_matrix.md`

## ワークフロー

### Phase 1: 要件収集・整理
```markdown
## 要件収集フェーズ

### 1. ステークホルダー分析
- 主要ステークホルダーの特定
- 各ステークホルダーの期待・制約
- 影響力・関心度マトリクス作成
- コミュニケーション戦略設計

### 2. ユーザーニーズ調査
- ユーザーインタビュー・アンケート分析
- 行動データ・フィードバック整理
- ペインポイント・ジョブ理論適用
- ユーザーストーリー詳細化

### 3. ビジネス要件定義
- ビジネス目標・KPI設定
- 市場機会・競合分析
- 収益モデル・価値提案
- 制約条件・リスク要因

### 4. 技術要件整理
- システム要件・制約
- パフォーマンス・セキュリティ要件
- 統合・互換性要件
- 技術的負債・改善項目
```

### Phase 2: 要件分析・構造化
```markdown
## 要件分析フェーズ

### 1. 要件の分類・整理
- 機能要件・非機能要件の分離
- Must Have・Should Have・Could Have分類
- 依存関係・制約条件の整理
- トレーサビリティマトリクス作成

### 2. 影響度・工数分析
- ビジネスインパクト評価
- 開発工数・複雑度見積もり
- リスク・不確実性評価
- ROI・優先度スコア算出

### 3. ユーザーストーリー詳細化
- As a [user], I want [goal], so that [benefit]
- 受け入れ基準（Acceptance Criteria）定義
- ストーリーポイント見積もり
- 前提条件・制約事項明記

### 4. 依存関係マッピング
- 機能間の依存関係
- チーム間の依存関係
- 外部システム・API依存
- タイムライン・スケジュール制約
```

### Phase 3: 計画策定・調整
```markdown
## 計画策定フェーズ

### 1. ロードマップ作成
- 長期ビジョン・戦略目標設定
- 四半期・スプリント別マイルストーン
- 機能リリーススケジュール
- 学習・検証ポイント設定

### 2. 優先順位付け
- 価値・緊急度マトリクス
- RICE（Reach, Impact, Confidence, Effort）フレームワーク
- Kano分析（当たり前品質・魅力品質）
- ステークホルダー合意形成

### 3. リスク管理・緩和策
- 技術リスク・市場リスク特定
- リスク影響度・発生確率評価
- 緩和策・コンティンジェンシープラン
- 早期警告指標設定

### 4. コミュニケーション計画
- ステークホルダー別情報共有
- 進捗報告・レビュープロセス
- 意思決定権限・エスカレーション
- フィードバック収集・反映方法
```

## 計画タイプ別仕様

### 1. ロードマップ策定（roadmap）
```yaml
目的: 長期的なプロダクト戦略・発展方向の計画策定
成果物:
  - プロダクトロードマップ（年間・四半期）
  - 戦略目標・KPI設定
  - マイルストーン・検証ポイント
  - リソース配分計画
期間設定:
  - 短期: 1-3ヶ月（機能単位）
  - 中期: 3-12ヶ月（テーマ・エピック単位）
  - 長期: 1-3年（戦略・ビジョン単位）
```

### 2. 機能仕様（feature_spec）
```yaml
目的: 個別機能の詳細仕様・要件定義
成果物:
  - 機能仕様書（PRD: Product Requirements Document）
  - ユーザーストーリー・受け入れ基準
  - UI/UXワイヤーフレーム要件
  - 技術仕様・API定義
分析要素:
  - ユーザーニーズ・使用シナリオ
  - 競合機能・ベンチマーク分析
  - 技術実装可能性・制約
  - ビジネス価値・KPI影響
```

### 3. 要件管理（requirements）
```yaml
目的: プロジェクト全体の要件整理・管理・トレーサビリティ確保
成果物:
  - 要件仕様書（SRS: Software Requirements Specification）
  - 要件トレーサビリティマトリクス
  - 変更管理プロセス・履歴
  - 検証・妥当性確認計画
管理要素:
  - 機能要件・非機能要件
  - ビジネスルール・制約条件
  - インターフェース要件
  - 品質要件（性能・セキュリティ・可用性）
```

### 4. 優先順位付け（prioritization）
```yaml
目的: 限られたリソースでの最適な機能開発順序決定
成果物:
  - 優先順位マトリクス・ランキング
  - 意思決定根拠・トレードオフ分析
  - ステークホルダー合意記録
  - 定期見直し・調整プロセス
評価軸:
  - ビジネス価値・戦略適合性
  - ユーザー価値・満足度向上
  - 技術的実現可能性・コスト
  - 市場タイミング・競合対応
```

### 5. ステークホルダー調整（stakeholder_alignment）
```yaml
目的: 多様なステークホルダー間の期待調整・合意形成
成果物:
  - ステークホルダー分析・マップ
  - 期待・要求事項整理
  - 合意事項・コミットメント記録
  - コミュニケーション計画・チャネル
調整領域:
  - ビジネス・技術・デザイン間の調整
  - 短期・中長期目標のバランス
  - 理想・現実のギャップ管理
  - リスク・制約の共有・対策
```

## 成果物テンプレート

### プロダクト要件書（PRD）構成
```markdown
# プロダクト要件書: [機能名]

## 概要
### 背景・目的
- 解決したい課題・機会
- ビジネス目標・期待効果
- 成功指標・KPI定義

### 対象ユーザー
- プライマリーユーザー
- セカンダリーユーザー
- 除外するユーザー

## 機能要件
### ユーザーストーリー
```
As a [ユーザー種別],
I want [達成したいこと],
So that [得られる価値・理由].

受け入れ基準:
- [ ] 条件1: 具体的な動作・結果
- [ ] 条件2: 制約・例外処理
- [ ] 条件3: パフォーマンス・品質要求
```

### 機能詳細
- コア機能・サブ機能
- ユーザーフロー・操作手順
- 画面・UI要素要件
- データ・状態管理要件

### 非機能要件
- パフォーマンス要件（応答時間・スループット）
- セキュリティ要件（認証・認可・暗号化）
- 可用性・信頼性要件
- 互換性・統合要件

## 設計・実装
### UI/UX要件
- ワイヤーフレーム・画面仕様
- デザイン原則・ガイドライン適用
- アクセシビリティ要件
- レスポンシブ・マルチデバイス対応

### 技術要件
- アーキテクチャ・システム構成
- API・データベース設計要件
- 既存システムとの統合要件
- 技術的制約・前提条件

## テスト・品質保証
### テスト戦略
- 単体・統合・システムテスト
- ユーザビリティテスト
- パフォーマンステスト
- セキュリティテスト

### 品質基準
- 機能品質基準
- 非機能品質基準
- ユーザー体験品質基準
- リリース判定基準

## 運用・保守
### 運用要件
- 監視・ログ・アラート要件
- データバックアップ・復旧要件
- 運用手順・マニュアル
- サポート・ヘルプ要件

### 保守・改善
- 保守性要件・技術的負債対策
- 拡張性・将来変更対応
- データ移行・互換性維持
- 廃止・終了計画

## プロジェクト管理
### スケジュール・マイルストーン
- 開発フェーズ・期間
- 主要マイルストーン・デモ
- 依存関係・前提条件
- リスク・緩和策

### リソース・体制
- 必要スキル・人員
- 外部依存・調達要件
- 予算・コスト見積もり
- コミュニケーション・報告体制
```

### ロードマップテンプレート
```markdown
# プロダクトロードマップ [期間]

## ビジョン・戦略
### プロダクトビジョン
- 長期的な目指す姿・価値提供
- ユーザー・市場への貢献
- 競合優位性・差別化要因

### 戦略目標・テーマ
- 主要戦略テーマ（3-5個）
- 各テーマの目標・KPI
- テーマ間の関係・優先順位

## ロードマップ概要
### Phase 1: [期間] - [テーマ名]
**目標**: [Phase目標・期待効果]
**主要機能**:
- 機能A: [概要・価値]
- 機能B: [概要・価値]
- 機能C: [概要・価値]

**成功指標**: [KPI・測定方法]
**リリース予定**: [時期・マイルストーン]

### Phase 2: [期間] - [テーマ名]
[同様の構成]

### Phase 3: [期間] - [テーマ名]
[同様の構成]

## 詳細計画
### 四半期別計画
#### Q1 [年]: [テーマ・目標]
- **Week 1-4**: [機能・タスク詳細]
- **Week 5-8**: [機能・タスク詳細]
- **Week 9-12**: [機能・タスク詳細]
- **主要リリース**: [機能・日程]

#### Q2 [年]: [テーマ・目標]
[同様の構成]

### 依存関係・制約
- 技術的依存関係
- チーム・リソース制約
- 外部要因・市場制約
- 法規制・コンプライアンス要件

## リスク・緩和策
### 高リスク項目
1. **[リスク名]**
   - 影響度: [High/Medium/Low]
   - 発生確率: [High/Medium/Low]
   - 緩和策: [具体的対策]
   - 早期警告: [指標・兆候]

### 緩和・対応策
- 技術的リスク対策
- 市場・競合リスク対策
- リソース・スケジュールリスク対策
- コンティンジェンシープラン

## 測定・学習
### KPI・メトリクス
- ビジネスKPI（売上・ユーザー数等）
- プロダクトKPI（利用率・満足度等）
- 技術KPI（パフォーマンス・品質等）
- 学習・実験指標

### 検証・調整プロセス
- 定期レビュー・振り返り
- ユーザーフィードバック収集・分析
- 市場・競合動向モニタリング
- ロードマップ調整・更新基準
```

## 連携コマンド
- **← /research**: 市場調査・ユーザー分析結果の活用
- **← /content-strategy**: コンテンツ戦略・ブランド戦略の反映
- **→ /design**: プロダクト要件に基づく設計指示
- **→ /tasks**: 要件を実装タスクに分解
- **→ /spec**: 統合仕様書への反映

## 品質チェックリスト
- [ ] ビジネス目標・戦略との整合性確認
- [ ] ユーザーニーズ・価値提供の妥当性検証
- [ ] 技術実現可能性・リソース要件の現実性評価
- [ ] ステークホルダー期待・制約の適切な反映
- [ ] リスク・緩和策の十分性確認
- [ ] 測定・学習サイクルの実装可能性確認

## 使用例

### プロダクトロードマップ策定
```bash
/product-plan roadmap --time_horizon="annual" --stakeholders="users,business,engineering" --complexity_level="complex"
```

### 機能仕様書作成
```bash
/product-plan feature_spec --time_horizon="sprint" --stakeholders="users,engineering,design" --complexity_level="moderate"
```

### 要件優先順位付け
```bash
/product-plan prioritization --stakeholders="all" --complexity_level="complex"
```