# Claude Code 階層型エージェント開発システム v8.6

## 🏢 概要
企業組織を模した階層型AIエージェントシステムにより、SDD（仕様書駆動開発）とTDD（テスト駆動開発）を統合した高品質な開発を実現します。

### コマンド実行階層
ユーザーは日本語で@ctoに指示 → CTOと各部門が内部でコマンドを実行 → 結果を統合してユーザーに報告

## 📋 システム構成

### メインプロジェクト群
- `.claude_python_sqlAlckemy/` - FastAPI + SQLAlchemyバックエンド
- `.claude_vue3_axios/` - Vue3 + Axiosフロントエンド  
- `.claude_vue3_hybrid/` - Vue3 + ハイブリッド接続版
- `.claude_dotnetFramework4.8/` - .NET Framework 4.8デスクトップ
- `.claude_dotnetFramework4.0/` - .NET Framework 4.0レガシー対応
- `.claude_dotnetFramework4.0_ISP673_OCR/` - ISP-673 OCR統合版
- `.claude_vb6/` - VB6レガシー解析・移行
- `.claude_vue3_supabase/` - Vue3 + Supabase版（アーカイブ）

### 階層型エージェントシステム（Active）
`.claude_sub_agent/` - 企業組織型AIエージェント（SDD+TDD統合版）

## 🎯 階層型エージェントシステムの特徴

### 組織構造とコマンド実行権限
- **@cto** - プロジェクト担当役員（ユーザー唯一の窓口）
  - **全コマンド実行可能**
  - ユーザーの日本語指示を理解し、内部でコマンドを実行
  - 管理責任: `/spec init`, `/spec status`
  
- **🛡️ 品質保証部** - テスト・品質管理・マルチエージェントコードレビュー
  - レビュー・品質系コマンド実行可能（主に読み取り専用）
  - 3人の専門レビュアー体制（基本品質、アーキテクチャ、DDD）
  
- **🏢 人事部** - チーム編成・即座配属
  - チーム管理系コマンド実行可能
  - 管理責任: `/tasks` 全般
  
- **💡 経営企画部** - 戦略立案・プロジェクトステアリング・Claude Code新機能監視
  - 戦略・要件系コマンド実行可能
  - 管理責任: `/requirements`, `/modeltest`
  
- **💻 システム開発部** - 実装（内部組織）
  - 技術実装系コマンド実行可能
  - 管理責任: `/spec`, `/design`, `/analyze`, `/modify-request`

### 開発フロー
1. **新規開発（Path A）**: 仕様書先行のウォーターフォール型
2. **既存解析（Path B）**: コード解析からの自動ドキュメント生成

### 主要機能
- **解析キャッシュシステム**: 2回目以降70-80%時間削減
- **MCP連携**: Gemini-CLI（データ分析）、o3 MCP（システム設計）
- **即座チーム編成**: 架空メンバーの即時配属（ブラック企業スタイル）
- **SDD+TDD統合**: 仕様書駆動とテスト駆動の融合

### 重要な原則
**修正要求を受けても、すぐにコーディングを開始しない**
1. 詳細分析フェーズ
2. 要件・設計フェーズ（承認必須）
3. TDD実装フェーズ（Red→Green→Refactor）

## 🚀 クイックスタート

### 階層型エージェントシステムを使う場合
```bash
cd .claude_sub_agent

# ユーザーはCTOに日本語で自然に依頼（コマンドは内部で自動実行）
ユーザー: "@cto 新しいECサイトプロジェクトを始めたい"
CTO: "承知しました。プロジェクトを開始します。"
    → 内部: CTO実行 /spec init → 経営企画部実行 /requirements → ...

ユーザー: "@cto このプロジェクトを解析して"
CTO: "プロジェクトの解析を開始します。"
    → 内部: CTO実行 /analyze → システム開発部実行 /design → ...

ユーザー: "@cto チームを編成して"
CTO: "最適なチームを編成します。"
    → 内部: 人事部実行 /tasks assign → ...
```

### 各プロジェクトを直接使う場合
```bash
cd .claude_[project_name]
claude .
/spec  # 統合開発フローを開始
```

## 📊 導入効果
- **開発速度**: 50-75%短縮
- **バグ発生率**: 60-80%削減
- **手戻り工数**: 70%削減
- **テストカバレッジ**: 80-90%達成

## 🔧 プロジェクト管理ガイドライン

### クリーンなプロジェクト構造の維持
- 作業完了後は一時ファイル・フォルダを即座に削除
- 空のディレクトリは残さない
- GitHubへのpush前に必ずクリーンアップ確認

### push前チェックリスト
```bash
# 空ディレクトリの確認と削除
find . -type d -empty -not -path "./.git/*" -exec rmdir {} \;

# 一時ファイルの確認
find . -name "*.tmp" -o -name "*.log" -o -name "*.bak" -o -name "*~"

# 最終確認
git status --porcelain
```

## 📂 情報共有体系（v8.3新機能）

### ActivityReportによる一元管理
```
.claude_sub_agent/
├── .ActivityReport/              # エージェント間情報共有
│   ├── tasks/                   # 全員が読み書き可能な共有タスクリスト
│   │   └── shared_tasks.md      # リアルタイム作業調整
│   └── daily_report/            # 日次活動レポート
│       └── YYYY_MM_DD.md        # CTOが17:00以降に作成
└── docs/                        # 確定成果物の管理
    ├── requirements/            # 要件定義書
    ├── design/                  # 技術設計書
    └── tasks/                   # 実装計画

```

### 情報フロー
1. **リアルタイム調整**: `.ActivityReport/tasks/` で部門間の作業調整
2. **日次集約**: 17:00にCTOが `daily_report/` に活動をまとめる
3. **成果物管理**: 確定文書は `docs/` に格納して永続化

## 🔧 システム管理機能（v8.1新機能）

### エージェント活動の自動可視化（CTO担当）
```
[14:30:00] 🎯 CTO > 📋 計画中 - プロジェクト解析を開始
[14:30:01] 🎯 CTO → 💻 システム開発部 > コード構造の調査を依頼
[14:30:02] 💻 バックエンドリーダー > 🔍 解析中 - APIエンドポイント確認
[14:30:03] 🛡️ 品質保証部 > 🧹 クリーンアップ実行中
[=====     ] 50% | 実装進行中...
```
- ユーザーは何もしなくても自動的に表示
- 部門間通信の可視化
- プログレスバー付き進捗表示

### 完全自動ファイル管理（品質保証部担当）
- **30分毎**: 自動チェックポイント作成
- **1時間毎**: 一時ファイル自動削除
- **日次**: 完全クリーンアップ実行
- **エラー時**: 自動バックアップからの復元
- すべての処理はユーザー確認不要で自律実行

### マルチエージェントコードレビュー（品質保証部担当 v8.4新機能）
- **3人の専門レビュアー体制**:
  - 📝 基本品質レビュアー: 誤字脱字、命名規則、コーディングスタイル
  - 🏗️ アーキテクチャレビュアー: SOLID原則、設計パターン、レイヤー構造
  - 🎯 DDDレビュアー: ドメインモデル、境界コンテキスト、ユビキタス言語
- **並列レビュー実行**: 3人同時にレビューして時間短縮
- **統合フィードバック**: Critical/Warning/Suggestionの3段階評価
- **品質スコア**: 100点満点での定量評価

### Claude Code新機能監視・提案（経営企画部担当）
- **定期監視**: Claude Code公式ドキュメント（https://docs.anthropic.com/ja/docs/claude-code/）をチェック
- **新機能検出**: アップデート・新機能・ベストプラクティスの発見
- **活用提案**: マルチAI開発ワークフローへの具体的な統合方法を提案
- **効果測定**: 新機能導入による開発効率向上の予測と検証

## 🚀 Claude Code新機能の統合活用（v8.2新機能）

### 1. 拡張思考機能の活用（システム開発部）
- **活用場面**: 複雑なアーキテクチャ設計、難解なバグの解析
- **統合方法**: `/spec-design`コマンド実行時に自動で拡張思考モードを有効化
- **期待効果**: 
  - 設計品質40%向上
  - エッジケース検出率60%向上
  - 設計ミスによる手戻り50%削減

### 2. 画像貼り付け機能の活用（品質保証部）
- **活用場面**: バグ報告、UI/UX設計レビュー、画面仕様確認
- **統合方法**: 
  - スクリーンショットを直接解析
  - Readツールで画像ファイル（PNG、JPG等）を自動認識
- **期待効果**:
  - バグ報告から修正まで70%時間短縮
  - 視覚的な問題の誤解80%削減

### 3. --resumeオプションの活用（CTO）
- **活用場面**: 長期プロジェクトの管理、チーム引き継ぎ
- **統合方法**: 
  - 各フェーズ完了時に自動でセッション保存
  - 解析キャッシュと組み合わせて継続性確保
- **期待効果**:
  - プロジェクト引き継ぎ時間90%削減
  - コンテキスト喪失によるミス0%

### 4. フック機能による自動化（品質保証部）
- **活用場面**: コード品質の自動チェック、ビルド・テストの自動実行
- **統合方法**: 
  ```json
  user-prompt-submit-hook:
    - コード変更前に自動バックアップ
    - ビルドとテスト自動実行
    - カバレッジ80%未満で警告
  ```
- **期待効果**:
  - ヒューマンエラー100%防止
  - 品質チェック時間80%削減

## 📊 導入効果
- **開発速度**: 30-50%向上
- **バグ発生率**: 60%削減
- **手戻り工数**: 70%削減
- **テストカバレッジ**: 80-90%達成
- **ファイル管理自動化率**: 95%以上
- **エージェント活動可視化**: 100%リアルタイム表示

## 📄 ライセンス
MITライセンス

---
*Version 8.6.0 - SDD+TDD統合版 with コマンド管理責任体制・コマンド実行階層・マルチエージェントコードレビュー・ActivityReport情報共有体系*